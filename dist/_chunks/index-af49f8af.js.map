{"version":3,"file":"index-af49f8af.js","sources":["../../admin/src/components/NoJavascript.tsx","../../admin/src/components/DefaultDocument.tsx","../../admin/src/contexts/configuration.ts","../../admin/src/components/ConfigurationProvider.tsx","../../admin/src/components/PrivateRoute.tsx","../../admin/src/constants.ts","../../admin/src/hooks/useEnterprise.ts","../../admin/src/components/LanguageProvider.tsx","../../admin/src/components/UnauthenticatedLogo.tsx","../../admin/src/layouts/UnauthenticatedLayout.tsx","../../admin/src/pages/Auth/components/FieldActionWrapper.tsx","../../admin/src/pages/Auth/components/Login.tsx","../../admin/src/pages/Auth/components/ForgotPassword.tsx","../../admin/src/pages/Auth/components/ForgotPasswordSuccess.tsx","../../admin/src/pages/Auth/components/Oops.tsx","../../admin/src/components/NpsSurvey.tsx","../../admin/src/pages/Auth/components/Register.tsx","../../admin/src/pages/Auth/components/ResetPassword.tsx","../../admin/src/pages/Auth/constants.ts","../../admin/src/pages/Auth/AuthPage.tsx","../../admin/src/pages/NotFoundPage.tsx","../../admin/src/pages/UseCasePage.tsx","../../admin/src/utils/createRoute.tsx","../../admin/src/App.tsx","../../admin/src/assets/images/logo-strapi-2022.svg","../../admin/src/contexts/admin.ts","../../admin/src/components/GuidedTour/Provider.tsx","../../admin/src/contexts/themeToggle.ts","../../admin/src/components/Theme.tsx","../../admin/src/components/ThemeToggleProvider.tsx","../../admin/src/components/Providers.tsx","../../admin/src/core/apis/Components.ts","../../admin/src/core/apis/CustomFields.ts","../../admin/src/core/apis/Fields.ts","../../admin/src/core/apis/Middlewares.ts","../../admin/src/core/apis/Plugin.ts","../../admin/src/core/apis/Reducers.ts","../../admin/src/core/store/hooks.ts","../../admin/src/components/RBACProvider.tsx","../../admin/src/content-manager/hooks/useSyncRbac.ts","../../admin/src/components/DragLayer.tsx","../../admin/src/content-manager/components/DragPreviews/CardDragPreview.tsx","../../admin/src/content-manager/components/DragPreviews/ComponentDragPreview.tsx","../../admin/src/content-manager/utils/translations.ts","../../admin/src/content-manager/hooks/useKeyboardDragAndDrop.ts","../../admin/src/content-manager/hooks/useDragAndDrop.ts","../../admin/src/content-manager/hooks/usePrev.ts","../../admin/src/content-manager/utils/dragAndDrop.ts","../../admin/src/content-manager/utils/refs.ts","../../admin/src/content-manager/components/Relations/RelationInput.tsx","../../admin/src/content-manager/utils/paths.ts","../../admin/src/content-manager/components/Relations/utils/getRelationLink.ts","../../admin/src/content-manager/components/Relations/utils/normalizeRelations.ts","../../admin/src/content-manager/components/Relations/useRelation.ts","../../admin/src/content-manager/components/Relations/utils/diffRelations.ts","../../admin/src/content-manager/components/Relations/utils/normalizeSearchResults.ts","../../admin/src/content-manager/components/Relations/RelationInputDataManager.tsx","../../admin/src/content-manager/components/DragPreviews/RelationDragPreview.tsx","../../admin/src/content-manager/components/LeftMenu.tsx","../../admin/src/content-manager/contexts/models.ts","../../admin/src/content-manager/hooks/useContentManagerInitData.ts","../../admin/src/content-manager/utils/schemas.ts","../../admin/src/content-manager/utils/layouts.ts","../../admin/src/content-manager/hooks/useLayouts.ts","../../admin/src/content-manager/pages/EditSettingsView/components/LayoutDndProvider/index.jsx","../../admin/src/content-manager/pages/EditSettingsView/hooks/useLayoutDnd.js","../../admin/src/content-manager/pages/EditSettingsView/components/LinkToCTB.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/ComponentFieldList.jsx","../../admin/src/content-manager/components/ComponentIcon.tsx","../../admin/src/content-manager/pages/EditSettingsView/components/DynamicZoneList.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/FieldButtonContent.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/DisplayedFieldButton.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/RowItemsLayout.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/RowsLayout.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/DisplayedFields.jsx","../../admin/src/content-manager/components/FieldTypeIcon/index.jsx","../../admin/src/content-manager/pages/EditSettingsView/utils/createPossibleMainFieldsForModelsAndComponents.js","../../admin/src/content-manager/pages/EditSettingsView/utils/getInputProps.js","../../admin/src/content-manager/pages/EditSettingsView/components/GenericInput.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/ModalForm.jsx","../../admin/src/content-manager/pages/EditSettingsView/components/FormModal.jsx","../../admin/src/content-manager/pages/EditSettingsView/utils/layout.js","../../admin/src/content-manager/pages/EditSettingsView/init.js","../../admin/src/content-manager/utils/arrayMoveItem.js","../../admin/src/content-manager/utils/checkIfAttributeIsDisplayable.js","../../admin/src/content-manager/pages/EditSettingsView/reducer.js","../../admin/src/content-manager/pages/EditSettingsView/index.jsx","../../admin/src/selectors.ts","../../admin/src/shared/hooks/useInjectionZone.ts","../../admin/src/shared/components/InjectionZone.tsx","../../admin/src/utils/objects.ts","../../admin/src/content-manager/hooks/useFindRedirectionLink.ts","../../admin/src/content-manager/sharedReducers/crud/constants.ts","../../admin/src/content-manager/sharedReducers/crud/actions.ts","../../admin/src/content-manager/utils/data.ts","../../admin/src/content-manager/components/CollectionTypeFormWrapper.tsx","../../admin/src/content-manager/hooks/useContentTypeLayout.ts","../../admin/src/content-manager/components/DynamicZone/AddComponentButton.tsx","../../admin/src/content-manager/components/DynamicZone/ComponentCategory.tsx","../../admin/src/content-manager/components/DynamicZone/ComponentPicker.tsx","../../admin/src/content-manager/utils/fields.ts","../../admin/src/content-manager/components/ComponentInitializer.tsx","../../admin/src/content-manager/hooks/useLazyComponents.ts","../../admin/src/content-manager/components/Hint.tsx","../../admin/src/content-manager/components/BlocksInput/utils/conversions.ts","../../admin/src/content-manager/components/BlocksInput/utils/enterKey.ts","../../admin/src/content-manager/components/BlocksInput/Blocks/Code.tsx","../../admin/src/content-manager/components/BlocksInput/Blocks/Heading.tsx","../../admin/src/content-manager/components/BlocksInput/Blocks/Image.tsx","../../admin/src/content-manager/components/BlocksInput/utils/links.ts","../../admin/src/content-manager/components/BlocksInput/Blocks/Link.tsx","../../admin/src/content-manager/components/BlocksInput/Blocks/List.tsx","../../admin/src/content-manager/components/BlocksInput/Blocks/Paragraph.tsx","../../admin/src/content-manager/components/BlocksInput/Blocks/Quote.tsx","../../admin/src/content-manager/components/BlocksInput/utils/types.ts","../../admin/src/content-manager/components/BlocksInput/BlocksToolbar.tsx","../../admin/src/content-manager/components/BlocksInput/BlocksContent.tsx","../../admin/src/content-manager/components/BlocksInput/Modifiers.tsx","../../admin/src/content-manager/components/BlocksInput/plugins/withImages.ts","../../admin/src/content-manager/components/BlocksInput/plugins/withLinks.ts","../../admin/src/content-manager/components/BlocksInput/plugins/withStrapiSchema.ts","../../admin/src/content-manager/components/BlocksInput/BlocksEditor.tsx","../../admin/src/content-manager/components/BlocksInput/BlocksInput.tsx","../../admin/src/hooks/useDebounce.ts","../../admin/src/content-manager/components/InputUID.tsx","../../admin/src/content-manager/components/Wysiwyg/utils/mdRenderer.ts","../../admin/src/content-manager/components/Wysiwyg/PreviewWysiwyg.tsx","../../admin/src/content-manager/components/Wysiwyg/utils/continueList.ts","../../admin/src/content-manager/components/Wysiwyg/Editor.tsx","../../admin/src/content-manager/components/Wysiwyg/EditorLayout.tsx","../../admin/src/content-manager/components/Wysiwyg/utils/utils.ts","../../admin/src/content-manager/components/Wysiwyg/WysiwygStyles.tsx","../../admin/src/content-manager/components/Wysiwyg/WysiwygFooter.tsx","../../admin/src/content-manager/components/Wysiwyg/WysiwygNav.tsx","../../admin/src/content-manager/components/Wysiwyg/Field.tsx","../../admin/src/content-manager/components/Inputs.tsx","../../admin/src/content-manager/components/NonRepeatableComponent.tsx","../../admin/src/content-manager/components/RepeatableComponent.tsx","../../admin/src/content-manager/components/FieldComponent.tsx","../../admin/src/content-manager/components/DynamicZone/DynamicComponent.tsx","../../admin/src/content-manager/components/DynamicZone/DynamicZoneLabel.tsx","../../admin/src/content-manager/components/DynamicZone/Field.tsx","../../admin/src/content-manager/utils/validation.ts","../../admin/src/content-manager/constants/attributes.ts","../../admin/src/content-manager/components/EditViewDataManagerProvider/utils/findAllAndReplace.ts","../../admin/src/content-manager/components/EditViewDataManagerProvider/utils/moveFields.ts","../../admin/src/content-manager/components/EditViewDataManagerProvider/reducer.ts","../../admin/src/content-manager/components/EditViewDataManagerProvider/utils/cleanData.ts","../../admin/src/content-manager/components/EditViewDataManagerProvider/Provider.tsx","../../admin/src/content-manager/utils/api.ts","../../admin/src/content-manager/components/SingleTypeFormWrapper.tsx","../../admin/src/content-manager/utils/permissions.ts","../../admin/src/content-manager/pages/EditView/components/DeleteLink.tsx","../../admin/src/content-manager/pages/EditView/components/DraftAndPublishBadge.tsx","../../admin/src/content-manager/pages/EditView/components/Header.tsx","../../admin/src/content-manager/utils/users.ts","../../admin/src/content-manager/pages/EditView/components/Information.tsx","../../admin/src/content-manager/pages/EditView/components/InformationBoxCE.tsx","../../admin/src/content-manager/pages/EditView/hooks/useOnce.ts","../../admin/src/content-manager/pages/EditView/EditViewPage.tsx","../../admin/src/content-manager/pages/EditViewLayoutManager.tsx","../../admin/src/content-manager/hooks/usePluginsQueryParams/index.js","../../admin/src/content-manager/pages/ListSettingsView/components/EditFieldForm.jsx","../../admin/src/content-manager/pages/ListSettingsView/components/Settings.jsx","../../admin/src/content-manager/pages/ListSettingsView/components/DraggableCard.jsx","../../admin/src/content-manager/pages/ListSettingsView/components/SortDisplayedFields.jsx","../../admin/src/content-manager/pages/ListSettingsView/constants.js","../../admin/src/content-manager/pages/ListSettingsView/reducer.js","../../admin/src/content-manager/pages/ListSettingsView/index.jsx","../../admin/src/content-manager/pages/ListView/constants.js","../../admin/src/content-manager/pages/ListView/actions.js","../../admin/src/hooks/useAdminUsers.ts","../../admin/src/content-manager/components/Filter/Filter.jsx","../../admin/src/content-manager/components/Filter/CustomInputs/AdminUsersFilter.jsx","../../admin/src/content-manager/hooks/useAllowedAttributes.js","../../admin/src/content-manager/components/InjectionZoneList/index.jsx","../../admin/src/content-manager/pages/ListView/components/ConfirmDialogDelete/index.jsx","../../admin/src/content-manager/pages/ListView/components/Body/index.jsx","../../admin/src/content-manager/pages/ListView/reducer.js","../../admin/src/content-manager/pages/ListView/selectors.js","../../admin/src/content-manager/pages/ListView/components/BulkActionButtons/ConfirmBulkActionDialog/index.jsx","../../admin/src/utils/formatAPIErrors.ts","../../admin/src/content-manager/pages/ListView/components/BulkActionButtons/SelectedEntriesModal/index.jsx","../../admin/src/content-manager/pages/ListView/components/BulkActionButtons/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/CellValue.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/Media/FileWrapper.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/Media/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/MultipleMedias.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/RelationMultiple/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/RelationSingle/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/RepeatableComponent/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/SingleComponent/index.jsx","../../admin/src/content-manager/pages/ListView/components/CellContent/utils/isSingleRelation.js","../../admin/src/content-manager/pages/ListView/components/CellContent/utils/hasContent.js","../../admin/src/content-manager/pages/ListView/components/CellContent/index.jsx","../../admin/src/content-manager/pages/ListView/components/FieldPicker/index.jsx","../../admin/src/content-manager/pages/ListView/components/ViewSettingsMenu/index.jsx","../../admin/src/content-manager/pages/ListView/index.jsx","../../admin/src/content-manager/pages/ListViewLayoutManager/Permissions.jsx","../../admin/src/content-manager/pages/ListViewLayoutManager/index.jsx","../../admin/src/content-manager/pages/CollectionTypeRecursivePath.tsx","../../admin/src/content-manager/sharedReducers/crud/reducer.ts","../../admin/src/content-manager/pages/ComponentSettingsView.tsx","../../admin/src/content-manager/pages/NoContentType.tsx","../../admin/src/content-manager/pages/NoPermissions.tsx","../../admin/src/content-manager/pages/SingleTypeRecursivePath.tsx","../../admin/src/content-manager/pages/App.tsx","../../admin/src/reducer.ts","../../admin/src/core/store/configure.ts","../../admin/src/core/utils/basename.ts","../../admin/src/core/utils/createHook.ts","../../admin/src/translations/languageNativeNames.ts","../../admin/src/StrapiApp.tsx","../../admin/src/render.ts"],"sourcesContent":["const styles = `\n.strapi--root {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n.strapi--no-js {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: helvetica, arial, sans-serif;\n}\n`;\n\n/**\n * @internal\n *\n * @description this belongs to our default document that we render.\n */\nconst NoJavascript = () => {\n  return (\n    <noscript>\n      <div className=\"strapi--root\">\n        <div className=\"strapi--no-js\">\n          <style type=\"text/css\">{styles}</style>\n          <h1>JavaScript disabled</h1>\n          <p>\n            Please <a href=\"https://www.enable-javascript.com/\">enable JavaScript</a> in your\n            browser and reload the page to proceed.\n          </p>\n        </div>\n      </div>\n    </noscript>\n  );\n};\n\nexport { NoJavascript };\n","import { NoJavascript } from './NoJavascript';\n\n/**\n * TODO: add favicons.........\n */\n\nconst globalStyles = `\n  html,\n  body,\n  #strapi {\n    height: 100%;\n  }\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n  }\n`;\n\n/**\n * @internal\n */\nconst DefaultDocument = () => {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\" />\n        <meta name=\"robots\" content=\"noindex\" />\n        <meta name=\"referrer\" content=\"same-origin\" />\n\n        <title>Content Manage Admin</title>\n        <style>{globalStyles}</style>\n      </head>\n      <body>\n        <div id=\"strapi\" />\n        <NoJavascript />\n      </body>\n    </html>\n  );\n};\n\nexport { DefaultDocument };\n","import { createContext } from '@radix-ui/react-context';\nimport { AxiosError } from 'axios';\nimport { UseMutateFunction } from 'react-query';\n\nimport { UpdateProjectSettings } from '../../../shared/contracts/admin';\n\nexport interface UpdateProjectSettingsBody {\n  authLogo:\n    | ((UpdateProjectSettings.Request['body']['authLogo'] | ConfigurationLogo['custom']) & {\n        rawFile?: File;\n      })\n    | null;\n  menuLogo:\n    | ((UpdateProjectSettings.Request['body']['menuLogo'] | ConfigurationLogo['custom']) & {\n        rawFile?: File;\n      })\n    | null;\n}\n\ninterface ConfigurationLogo {\n  custom?: {\n    name?: string;\n    url?: string;\n  };\n  default: string;\n}\n\nexport interface ConfigurationContextValue {\n  logos: {\n    auth: ConfigurationLogo;\n    menu: ConfigurationLogo;\n  };\n  showTutorials: boolean;\n  showReleaseNotification: boolean;\n  updateProjectSettings: UseMutateFunction<\n    { menuLogo: boolean; authLogo: boolean },\n    AxiosError<Required<UpdateProjectSettings.Response>>,\n    UpdateProjectSettingsBody\n  >;\n}\n\nconst [ConfigurationContextProvider, useConfigurationContext] =\n  createContext<ConfigurationContextValue>('ConfigurationContext');\n\nconst useConfiguration = () => useConfigurationContext('useConfiguration');\n\nexport { ConfigurationContextProvider, useConfiguration };\n","import * as React from 'react';\n\nimport {\n  prefixFileUrlWithBackendUrl,\n  useAPIErrorHandler,\n  useFetchClient,\n  useNotification,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQuery } from 'react-query';\n\nimport { GetProjectSettings, UpdateProjectSettings } from '../../../shared/contracts/admin';\nimport {\n  ConfigurationContextProvider,\n  ConfigurationContextValue,\n  UpdateProjectSettingsBody,\n} from '../contexts/configuration';\n\nimport type { AxiosError } from 'axios';\n\ninterface ConfigurationProviderProps extends Required<Logos> {\n  children: React.ReactNode;\n  showReleaseNotification?: boolean;\n  showTutorials?: boolean;\n}\n\ninterface Logos {\n  menuLogo: ConfigurationContextValue['logos']['menu'];\n  authLogo: ConfigurationContextValue['logos']['auth'];\n}\n\nconst ConfigurationProvider = ({\n  children,\n  authLogo: defaultAuthLogo,\n  menuLogo: defaultMenuLogo,\n  showReleaseNotification = false,\n  showTutorials = false,\n}: ConfigurationProviderProps) => {\n  const { trackUsage } = useTracking();\n  const { formatMessage } = useIntl();\n  const { get, post } = useFetchClient();\n  const toggleNotification = useNotification();\n  const { formatAPIError } = useAPIErrorHandler();\n\n  const { data, refetch, isSuccess } = useQuery<\n    GetProjectSettings.Response,\n    GetProjectSettings.Response,\n    {\n      [K in keyof Logos]?: ConfigurationProviderProps['authLogo']['custom'];\n    }\n  >(\n    ['project-settings'],\n    async () => {\n      const { data, status } = await get<GetProjectSettings.Response>('/admin/project-settings', {\n        /**\n         * needed because the interceptors of the fetchClient redirect to\n         * /login when receive a 401 and it would end up in an infinite\n         * loop when the user doesn't have a session.\n         */\n        validateStatus: (status) => status < 500,\n      });\n\n      /**\n       * However, we do need to know that the query failed. Because then\n       * we want to fallback to our defaults.\n       */\n      if (status === 401) {\n        throw new Error('Unauthenticated');\n      }\n\n      return data;\n    },\n    {\n      retry: false,\n      select(data) {\n        return {\n          authLogo: data.authLogo\n            ? {\n                name: data.authLogo.name,\n                url: prefixFileUrlWithBackendUrl(data.authLogo.url),\n              }\n            : undefined,\n          menuLogo: data.menuLogo\n            ? {\n                name: data.menuLogo.name,\n                url: prefixFileUrlWithBackendUrl(data.menuLogo.url),\n              }\n            : undefined,\n        };\n      },\n    }\n  );\n\n  const { mutate } = useMutation(\n    async (body: UpdateProjectSettingsBody) => {\n      const formData = new FormData();\n\n      /**\n       * We either only send files or we send null values.\n       * Null removes the logo. If you don't want to effect\n       * an existing logo, don't send anything.\n       */\n      Object.entries(body).forEach(([key, value]) => {\n        if (value?.rawFile) {\n          formData.append(key, value.rawFile);\n        } else if (value === null) {\n          formData.append(key, JSON.stringify(value));\n        }\n      });\n\n      const { data } = await post<UpdateProjectSettings.Response>(\n        '/admin/project-settings',\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n\n      /**\n       * cooerce the response to a boolean so we can decide\n       * if we need to send events in the `onSuccess` handler\n       */\n      return {\n        menuLogo: !!data.menuLogo && !!body.menuLogo?.rawFile,\n        authLogo: !!data.authLogo && !!body.menuLogo?.rawFile,\n      };\n    },\n    {\n      onError(error: AxiosError<Required<UpdateProjectSettings.Response>>) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(error),\n        });\n      },\n      async onSuccess(data) {\n        const { menuLogo, authLogo } = data;\n\n        if (menuLogo) {\n          trackUsage('didChangeLogo', {\n            logo: 'menu',\n          });\n        }\n\n        if (authLogo) {\n          trackUsage('didChangeLogo', {\n            logo: 'auth',\n          });\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({ id: 'app', defaultMessage: 'Saved' }),\n        });\n\n        refetch();\n      },\n    }\n  );\n\n  const updateProjectSettings = React.useCallback(mutate, [mutate]);\n\n  return (\n    <ConfigurationContextProvider\n      showReleaseNotification={showReleaseNotification}\n      showTutorials={showTutorials}\n      logos={{\n        menu: {\n          custom: isSuccess ? data?.menuLogo : defaultMenuLogo.custom,\n          default: defaultMenuLogo.default,\n        },\n        auth: {\n          custom: isSuccess ? data?.authLogo : defaultAuthLogo.custom,\n          default: defaultAuthLogo.default,\n        },\n      }}\n      updateProjectSettings={updateProjectSettings}\n    >\n      {children}\n    </ConfigurationContextProvider>\n  );\n};\n\nexport { ConfigurationProvider };\nexport type { ConfigurationProviderProps };\n","import * as React from 'react';\n\nimport { auth } from '@strapi/helper-plugin';\nimport { Redirect, Route, useLocation } from 'react-router-dom';\n\ntype PropsOf<T> = T extends React.ComponentType<infer P> ? P : object;\n\ntype PrivateRouteProps<TComponent extends React.ElementType> = {\n  component: TComponent;\n  path: string;\n} & PropsOf<TComponent>;\n\nconst PrivateRoute = <TComponent extends React.ElementType>({\n  component: Component,\n  path,\n  ...rest\n}: PrivateRouteProps<TComponent>) => {\n  const { pathname, search } = useLocation();\n\n  return (\n    <Route\n      path={path}\n      render={(props) =>\n        auth.getToken() !== null ? (\n          <Component {...rest} {...props} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/auth/login',\n              search:\n                pathname !== '/'\n                  ? `?redirectTo=${encodeURIComponent(`${pathname}${search}`)}`\n                  : undefined,\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport { PrivateRoute };\n","import { StrapiAppSettingLink } from '@strapi/helper-plugin';\n\nexport const ADMIN_PERMISSIONS_CE = {\n  contentManager: {\n    main: [],\n    collectionTypesConfigurations: [\n      {\n        action: 'plugin::content-manager.collection-types.configure-view',\n        subject: null,\n      },\n    ],\n    componentsConfigurations: [\n      {\n        action: 'plugin::content-manager.components.configure-layout',\n        subject: null,\n      },\n    ],\n    singleTypesConfigurations: [\n      {\n        action: 'plugin::content-manager.single-types.configure-view',\n        subject: null,\n      },\n    ],\n  },\n  marketplace: {\n    main: [{ action: 'admin::marketplace.read', subject: null }],\n    read: [{ action: 'admin::marketplace.read', subject: null }],\n  },\n  settings: {\n    main: [{ action: 'admin::settings.read', subject: null }],\n    roles: {\n      main: [\n        { action: 'admin::roles.create', subject: null },\n        { action: 'admin::roles.update', subject: null },\n        { action: 'admin::roles.read', subject: null },\n        { action: 'admin::roles.delete', subject: null },\n      ],\n      create: [{ action: 'admin::roles.create', subject: null }],\n      delete: [{ action: 'admin::roles.delete', subject: null }],\n      read: [{ action: 'admin::roles.read', subject: null }],\n      update: [{ action: 'admin::roles.update', subject: null }],\n    },\n    users: {\n      main: [\n        { action: 'admin::users.create', subject: null },\n        { action: 'admin::users.read', subject: null },\n        { action: 'admin::users.update', subject: null },\n        { action: 'admin::users.delete', subject: null },\n      ],\n      create: [{ action: 'admin::users.create', subject: null }],\n      delete: [{ action: 'admin::users.delete', subject: null }],\n      read: [{ action: 'admin::users.read', subject: null }],\n      update: [{ action: 'admin::users.update', subject: null }],\n    },\n    webhooks: {\n      main: [\n        { action: 'admin::webhooks.create', subject: null },\n        { action: 'admin::webhooks.read', subject: null },\n        { action: 'admin::webhooks.update', subject: null },\n        { action: 'admin::webhooks.delete', subject: null },\n      ],\n      create: [{ action: 'admin::webhooks.create', subject: null }],\n      delete: [{ action: 'admin::webhooks.delete', subject: null }],\n      read: [\n        { action: 'admin::webhooks.read', subject: null },\n        // NOTE: We need to check with the API\n        { action: 'admin::webhooks.update', subject: null },\n        { action: 'admin::webhooks.delete', subject: null },\n      ],\n      update: [{ action: 'admin::webhooks.update', subject: null }],\n    },\n    'api-tokens': {\n      main: [{ action: 'admin::api-tokens.access', subject: null }],\n      create: [{ action: 'admin::api-tokens.create', subject: null }],\n      delete: [{ action: 'admin::api-tokens.delete', subject: null }],\n      read: [{ action: 'admin::api-tokens.read', subject: null }],\n      update: [{ action: 'admin::api-tokens.update', subject: null }],\n      regenerate: [{ action: 'admin::api-tokens.regenerate', subject: null }],\n    },\n    'transfer-tokens': {\n      main: [{ action: 'admin::transfer.tokens.access', subject: null }],\n      create: [{ action: 'admin::transfer.tokens.create', subject: null }],\n      delete: [{ action: 'admin::transfer.tokens.delete', subject: null }],\n      read: [{ action: 'admin::transfer.tokens.read', subject: null }],\n      update: [{ action: 'admin::transfer.tokens.update', subject: null }],\n      regenerate: [{ action: 'admin::transfer.tokens.regenerate', subject: null }],\n    },\n    'project-settings': {\n      read: [{ action: 'admin::project-settings.read', subject: null }],\n      update: [{ action: 'admin::project-settings.update', subject: null }],\n    },\n  },\n};\n\nexport const HOOKS = {\n  /**\n   * Hook that allows to mutate the displayed headers of the list view table\n   * @constant\n   * @type {string}\n   */\n  INJECT_COLUMN_IN_TABLE: 'Admin/CM/pages/ListView/inject-column-in-table',\n\n  /**\n   * Hook that allows to mutate the CM's collection types links pre-set filters\n   * @constant\n   * @type {string}\n   */\n  MUTATE_COLLECTION_TYPES_LINKS: 'Admin/CM/pages/App/mutate-collection-types-links',\n\n  /**\n   * Hook that allows to mutate the CM's edit view layout\n   * @constant\n   * @type {string}\n   */\n  MUTATE_EDIT_VIEW_LAYOUT: 'Admin/CM/pages/EditView/mutate-edit-view-layout',\n\n  /**\n   * Hook that allows to mutate the CM's single types links pre-set filters\n   * @constant\n   * @type {string}\n   */\n  MUTATE_SINGLE_TYPES_LINKS: 'Admin/CM/pages/App/mutate-single-types-links',\n};\n\nexport const ACTION_SET_APP_RUNTIME_STATUS = 'StrapiAdmin/APP/SET_APP_RUNTIME_STATUS';\nexport const ACTION_SET_ADMIN_PERMISSIONS = 'StrapiAdmin/App/SET_ADMIN_PERMISSIONS';\n\nexport interface SettingsMenuLink\n  extends Omit<StrapiAppSettingLink, 'Component' | 'permissions' | 'lockIcon'> {\n  lockIcon?: boolean;\n}\n\nexport type SettingsMenu = {\n  admin: SettingsMenuLink[];\n  global: SettingsMenuLink[];\n};\n\nexport const SETTINGS_LINKS_CE = (): SettingsMenu => ({\n  global: [\n    {\n      intlLabel: { id: 'Settings.application.title', defaultMessage: 'Overview' },\n      to: '/settings/application-infos',\n      id: '000-application-infos',\n    },\n    {\n      intlLabel: { id: 'Settings.webhooks.title', defaultMessage: 'Webhooks' },\n      to: '/settings/webhooks',\n      id: 'webhooks',\n    },\n    {\n      intlLabel: { id: 'Settings.apiTokens.title', defaultMessage: 'API Tokens' },\n      to: '/settings/api-tokens?sort=name:ASC',\n      id: 'api-tokens',\n    },\n    {\n      intlLabel: { id: 'Settings.transferTokens.title', defaultMessage: 'Transfer Tokens' },\n      to: '/settings/transfer-tokens?sort=name:ASC',\n      id: 'transfer-tokens',\n    },\n    // If the Enterprise feature is not enabled and if the config doesn't disable it, we promote the Enterprise feature by displaying them in the settings menu.\n    // Disable this by adding \"promoteEE: false\" to your `./config/admin.js` file\n    ...(!window.strapi.features.isEnabled(window.strapi.features.SSO) &&\n    window.strapi?.flags?.promoteEE\n      ? [\n          {\n            intlLabel: { id: 'Settings.sso.title', defaultMessage: 'Single Sign-On' },\n            to: '/settings/purchase-single-sign-on',\n            id: 'sso',\n            lockIcon: true,\n          },\n        ]\n      : []),\n\n    ...(!window.strapi.features.isEnabled(window.strapi.features.REVIEW_WORKFLOWS) &&\n    window.strapi?.flags?.promoteEE\n      ? [\n          {\n            intlLabel: {\n              id: 'Settings.review-workflows.page.title',\n              defaultMessage: 'Review Workflows',\n            },\n            to: '/settings/purchase-review-workflows',\n            id: 'review-workflows',\n            lockIcon: true,\n          },\n        ]\n      : []),\n  ],\n\n  admin: [\n    {\n      intlLabel: { id: 'global.roles', defaultMessage: 'Roles' },\n      to: '/settings/roles',\n      id: 'roles',\n    },\n    {\n      intlLabel: { id: 'global.users', defaultMessage: 'Users' },\n      // Init the search params directly\n      to: '/settings/users?pageSize=10&page=1&sort=firstname',\n      id: 'users',\n    },\n    ...(!window.strapi.features.isEnabled(window.strapi.features.AUDIT_LOGS) &&\n    window.strapi?.flags?.promoteEE\n      ? [\n          {\n            intlLabel: { id: 'global.auditLogs', defaultMessage: 'Audit Logs' },\n            to: '/settings/purchase-audit-logs',\n            id: 'auditLogs',\n            lockIcon: true,\n          },\n        ]\n      : []),\n  ],\n});\n","import * as React from 'react';\n\nimport { useCallbackRef } from '@strapi/helper-plugin';\n\nfunction isEnterprise() {\n  return window.strapi.isEE;\n}\n\nexport interface UseEnterpriseOptions<TCEData, TEEData, TDefaultValue, TCombinedValue> {\n  defaultValue?: TDefaultValue;\n  combine?: (ceData: TCEData, eeData: TEEData) => TCombinedValue;\n  enabled?: boolean;\n}\n\ntype UseEnterpriseReturn<TCEData, TEEData, TDefaultValue, TCombinedValue> =\n  TDefaultValue extends null\n    ? TCEData | TEEData | TCombinedValue | null\n    : TCEData | TEEData | TCombinedValue | TDefaultValue;\n\nexport const useEnterprise = <\n  TCEData,\n  TEEData = TCEData,\n  TCombinedValue = TEEData,\n  TDefaultValue = TCEData\n>(\n  ceData: TCEData,\n  eeCallback: () => Promise<TEEData>,\n  opts: UseEnterpriseOptions<TCEData, TEEData, TDefaultValue, TCombinedValue> = {}\n): UseEnterpriseReturn<TCEData, TEEData, TDefaultValue, TCombinedValue> => {\n  const { defaultValue = null, combine = (_ceData, eeData) => eeData, enabled = true } = opts;\n  const eeCallbackRef = useCallbackRef(eeCallback);\n  const combineCallbackRef = useCallbackRef(combine);\n\n  // We have to use a nested object here, because functions (e.g. Components)\n  // can not be stored as value directly\n  const [{ data }, setData] = React.useState<{\n    data: TCEData | TEEData | TDefaultValue | TCombinedValue | null;\n  }>({\n    data: isEnterprise() && enabled ? defaultValue : ceData,\n  });\n\n  React.useEffect(() => {\n    async function importEE() {\n      const eeData = await eeCallbackRef();\n      const combinedValue = combineCallbackRef(ceData, eeData);\n\n      setData({ data: combinedValue ? combinedValue : eeData });\n    }\n\n    if (isEnterprise() && enabled) {\n      importEE();\n    }\n  }, [ceData, eeCallbackRef, combineCallbackRef, enabled]);\n\n  // @ts-expect-error – the hook type assertion works in practice. But seems to have issues here...\n  return data;\n};\n","/*\n *\n * LanguageProvider\n *\n * this component connects the redux state language locale to the\n * IntlProvider component and i18n messages (loaded from `app/translations`)\n */\n\nimport * as React from 'react';\n\nimport { createContext } from '@radix-ui/react-context';\nimport defaultsDeep from 'lodash/defaultsDeep';\nimport { IntlProvider } from 'react-intl';\n\n/* -------------------------------------------------------------------------------------------------\n * LocalesContext\n * -----------------------------------------------------------------------------------------------*/\n\ninterface LocalesContextValue {\n  changeLocale: (locale: keyof State['localeNames']) => void;\n  localeNames: Record<string, string>;\n}\n\nconst [LocalesContextProvider, useLocalesContext] =\n  createContext<LocalesContextValue>('LocalesContext');\n\nconst useLocales = () => useLocalesContext('useLocales');\n\n/* -------------------------------------------------------------------------------------------------\n * LanguageProvider\n * -----------------------------------------------------------------------------------------------*/\n\nconst LANGUAGE_LOCAL_STORAGE_KEY = 'strapi-admin-language';\n\ninterface LanguageProviderProps {\n  children: React.ReactNode;\n  localeNames: Record<string, string>;\n  messages: Record<string, Record<string, string>>;\n}\n\nconst LanguageProvider = ({ children, localeNames, messages }: LanguageProviderProps) => {\n  const [{ locale }, dispatch] = React.useReducer<React.Reducer<State, Action>, State>(\n    reducer,\n    initialState,\n    () => {\n      const languageFromLocaleStorage = window.localStorage.getItem(LANGUAGE_LOCAL_STORAGE_KEY);\n      if (languageFromLocaleStorage && localeNames[languageFromLocaleStorage]) {\n        return {\n          locale: languageFromLocaleStorage,\n          localeNames,\n        };\n      } else {\n        return {\n          locale: 'en',\n          localeNames,\n        };\n      }\n    }\n  );\n\n  React.useEffect(() => {\n    // Set user language in local storage.\n    window.localStorage.setItem(LANGUAGE_LOCAL_STORAGE_KEY, locale);\n    document.documentElement.setAttribute('lang', locale);\n  }, [locale]);\n\n  const changeLocale = React.useCallback((locale: keyof State['localeNames']) => {\n    dispatch({\n      type: 'CHANGE_LOCALE',\n      locale,\n    });\n  }, []);\n\n  const appMessages = defaultsDeep(messages[locale], messages.en);\n\n  return (\n    <IntlProvider locale={locale} defaultLocale=\"en\" messages={appMessages} textComponent=\"span\">\n      <LocalesContextProvider changeLocale={changeLocale} localeNames={localeNames}>\n        {children}\n      </LocalesContextProvider>\n    </IntlProvider>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Reducer\n * -----------------------------------------------------------------------------------------------*/\n\ninterface State {\n  localeNames: Record<string, string>;\n  locale: keyof State['localeNames'];\n}\n\nconst initialState: State = {\n  localeNames: { en: 'English' },\n  locale: 'en',\n};\n\ninterface ChangeLocaleAction {\n  type: 'CHANGE_LOCALE';\n  locale: keyof State['localeNames'];\n}\n\ntype Action = ChangeLocaleAction;\n\nconst reducer = (state = initialState, action: Action) => {\n  switch (action.type) {\n    case 'CHANGE_LOCALE': {\n      const { locale } = action;\n\n      if (!state.localeNames[locale]) {\n        return state;\n      }\n\n      return { ...state, locale };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport { LanguageProvider, useLocales, LANGUAGE_LOCAL_STORAGE_KEY };\nexport type { LanguageProviderProps, LocalesContextValue };\n","import styled from 'styled-components';\n\nimport { useConfiguration } from '../contexts/configuration';\n\nconst Img = styled.img`\n  height: ${72 / 16}rem;\n`;\n\nconst Logo = () => {\n  const {\n    logos: { auth },\n  } = useConfiguration();\n\n  return <Img src={auth?.custom?.url ?? auth.default} aria-hidden alt=\"\" />;\n};\n\nexport { Logo };\n","import * as React from 'react';\n\nimport { Box, Flex, SingleSelect, SingleSelectOption } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { useLocales } from '../components/LanguageProvider';\n\nconst Wrapper = styled(Box)`\n  margin: 0 auto;\n  width: 552px;\n`;\n\nexport const Column = styled(Flex)`\n  flex-direction: column;\n`;\n\nconst LocaleToggle = () => {\n  const { changeLocale, localeNames } = useLocales();\n  const { formatMessage, locale } = useIntl();\n\n  return (\n    <SingleSelect\n      aria-label={formatMessage({\n        id: 'global.localeToggle.label',\n        defaultMessage: 'Select interface language',\n      })}\n      value={locale}\n      onChange={(language) => {\n        changeLocale(language as string);\n      }}\n    >\n      {Object.entries(localeNames).map(([language, name]) => (\n        <SingleSelectOption key={language} value={language}>\n          {name}\n        </SingleSelectOption>\n      ))}\n    </SingleSelect>\n  );\n};\n\ninterface LayoutContentProps {\n  children: React.ReactNode;\n}\n\nexport const LayoutContent = ({ children }: LayoutContentProps) => (\n  <Wrapper\n    shadow=\"tableShadow\"\n    hasRadius\n    paddingTop={9}\n    paddingBottom={9}\n    paddingLeft={10}\n    paddingRight={10}\n    background=\"neutral0\"\n  >\n    {children}\n  </Wrapper>\n);\n\ninterface UnauthenticatedLayoutProps {\n  children: React.ReactNode;\n}\n\nexport const UnauthenticatedLayout = ({ children }: UnauthenticatedLayoutProps) => {\n  return (\n    <div>\n      <Flex as=\"header\" justifyContent=\"flex-end\">\n        <Box paddingTop={6} paddingRight={8}>\n          <LocaleToggle />\n        </Box>\n      </Flex>\n      <Box paddingTop={2} paddingBottom={11}>\n        {children}\n      </Box>\n    </div>\n  );\n};\n","import { FieldAction } from '@strapi/design-system';\nimport styled from 'styled-components';\n\nconst FieldActionWrapper = styled(FieldAction)`\n  svg {\n    height: 1rem;\n    width: 1rem;\n    path {\n      fill: ${({ theme }) => theme.colors.neutral600};\n    }\n  }\n`;\n\nexport { FieldActionWrapper };\n","import * as React from 'react';\n\nimport { Box, Button, Checkbox, Flex, Main, TextInput, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { Form, auth, translatedErrors, useFetchClient, useQuery } from '@strapi/helper-plugin';\nimport { Eye, EyeStriked } from '@strapi/icons';\nimport { Formik } from 'formik';\nimport camelCase from 'lodash/camelCase';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport * as yup from 'yup';\n\nimport { Login } from '../../../../../shared/contracts/authentication';\nimport { useLocales } from '../../../components/LanguageProvider';\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport {\n  UnauthenticatedLayout,\n  Column,\n  LayoutContent,\n} from '../../../layouts/UnauthenticatedLayout';\n\nimport { FieldActionWrapper } from './FieldActionWrapper';\n\nimport type { AxiosError } from 'axios';\n\ninterface LoginProps {\n  children?: React.ReactNode;\n}\n\nconst LOGIN_SCHEMA = yup.object().shape({\n  email: yup.string().email(translatedErrors.email).required(translatedErrors.required),\n  password: yup.string().required(translatedErrors.required),\n  rememberMe: yup.bool().nullable(),\n});\n\nconst Login = ({ children }: LoginProps) => {\n  const [apiError, setApiError] = React.useState<string>();\n  const [passwordShown, setPasswordShown] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const { post } = useFetchClient();\n  const { changeLocale } = useLocales();\n  const query = useQuery();\n  const { push } = useHistory();\n\n  const mutation = useMutation(\n    async (body: Login.Request['body'] & { rememberMe: boolean }) => {\n      const {\n        data: { data },\n      } = await post<Login.Response>('/admin/login', body);\n\n      return { ...data, rememberMe: body.rememberMe };\n    },\n    {\n      onSuccess(data) {\n        if (data) {\n          const { token, user } = data;\n\n          if (user.preferedLanguage) {\n            changeLocale(user.preferedLanguage);\n          }\n\n          auth.setToken(token, data.rememberMe);\n          auth.setUserInfo(user, data.rememberMe);\n\n          const redirectTo = query.get('redirectTo');\n          const redirectUrl = redirectTo ? decodeURIComponent(redirectTo) : '/';\n\n          push(redirectUrl);\n        }\n      },\n      onError(err: AxiosError<{ error: Login.Response['errors'] }>) {\n        const message = err.response?.data?.error?.message ?? 'Something went wrong';\n\n        if (camelCase(message).toLowerCase() === 'usernotactive') {\n          push('/auth/oops');\n          return;\n        }\n\n        setApiError(message);\n      },\n    }\n  );\n\n  return (\n    <UnauthenticatedLayout>\n      <Main>\n        <LayoutContent>\n          <Column>\n            <Logo />\n            <Box paddingTop={6} paddingBottom={1}>\n              <Typography variant=\"alpha\" as=\"h1\">\n                {formatMessage({\n                  id: 'Auth.form.welcome.title',\n                  defaultMessage: 'Welcome!',\n                })}\n              </Typography>\n            </Box>\n            <Box paddingBottom={7}>\n              <Typography variant=\"epsilon\" textColor=\"neutral600\">\n                {formatMessage({\n                  id: 'Auth.form.welcome.subtitle',\n                  defaultMessage: 'Log in to your Strapi account',\n                })}\n              </Typography>\n            </Box>\n            {mutation.isError && apiError ? (\n              <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\n                {apiError}\n              </Typography>\n            ) : null}\n          </Column>\n          <Formik\n            enableReinitialize\n            initialValues={{\n              email: '',\n              password: '',\n              rememberMe: false,\n            }}\n            onSubmit={(values) => {\n              mutation.mutate(values);\n            }}\n            validationSchema={LOGIN_SCHEMA}\n            validateOnChange={false}\n          >\n            {({ values, errors, handleChange }) => (\n              <Form>\n                <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n                  <TextInput\n                    error={\n                      errors.email\n                        ? formatMessage({\n                            id: errors.email,\n                            defaultMessage: 'This value is required.',\n                          })\n                        : ''\n                    }\n                    value={values.email}\n                    onChange={handleChange}\n                    label={formatMessage({ id: 'Auth.form.email.label', defaultMessage: 'Email' })}\n                    placeholder={formatMessage({\n                      id: 'Auth.form.email.placeholder',\n                      defaultMessage: 'kai@doe.com',\n                    })}\n                    name=\"email\"\n                    required\n                  />\n                  <PasswordInput\n                    error={\n                      errors.password\n                        ? formatMessage({\n                            id: errors.password,\n                            defaultMessage: 'This value is required.',\n                          })\n                        : ''\n                    }\n                    onChange={handleChange}\n                    value={values.password}\n                    label={formatMessage({\n                      id: 'global.password',\n                      defaultMessage: 'Password',\n                    })}\n                    name=\"password\"\n                    type={passwordShown ? 'text' : 'password'}\n                    endAction={\n                      <FieldActionWrapper\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setPasswordShown((prev) => !prev);\n                        }}\n                        label={formatMessage(\n                          passwordShown\n                            ? {\n                                id: 'Auth.form.password.show-password',\n                                defaultMessage: 'Show password',\n                              }\n                            : {\n                                id: 'Auth.form.password.hide-password',\n                                defaultMessage: 'Hide password',\n                              }\n                        )}\n                      >\n                        {passwordShown ? <Eye /> : <EyeStriked />}\n                      </FieldActionWrapper>\n                    }\n                    required\n                  />\n                  <Checkbox\n                    onValueChange={(checked) => {\n                      handleChange({ target: { value: checked, name: 'rememberMe' } });\n                    }}\n                    value={values.rememberMe}\n                    aria-label=\"rememberMe\"\n                    name=\"rememberMe\"\n                  >\n                    {formatMessage({\n                      id: 'Auth.form.rememberMe.label',\n                      defaultMessage: 'Remember me',\n                    })}\n                  </Checkbox>\n                  <Button fullWidth type=\"submit\">\n                    {formatMessage({ id: 'Auth.form.button.login', defaultMessage: 'Login' })}\n                  </Button>\n                </Flex>\n              </Form>\n            )}\n          </Formik>\n          {children}\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            {/* @ts-expect-error – error with inferring the props from the as component */}\n            <Link as={NavLink} to=\"/auth/forgot-password\">\n              {formatMessage({\n                id: 'Auth.link.forgot-password',\n                defaultMessage: 'Forgot your password?',\n              })}\n            </Link>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n\nconst PasswordInput = styled(TextInput)`\n  ::-ms-reveal {\n    display: none;\n  }\n`;\n\nexport { Login };\nexport type { LoginProps };\n","import { Box, Button, Flex, Main, TextInput, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { Form, translatedErrors, useFetchClient } from '@strapi/helper-plugin';\nimport { Formik } from 'formik';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport * as yup from 'yup';\n\nimport { ForgotPassword } from '../../../../../shared/contracts/authentication';\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport {\n  Column,\n  LayoutContent,\n  UnauthenticatedLayout,\n} from '../../../layouts/UnauthenticatedLayout';\n\nconst ForgotPassword = () => {\n  const { push } = useHistory();\n  const { post } = useFetchClient();\n  const { formatMessage } = useIntl();\n\n  const { mutate, isError } = useMutation(\n    async (body: ForgotPassword.Request['body']) => {\n      await post('/admin/forgot-password', body);\n    },\n    {\n      onSuccess() {\n        push('/auth/forgot-password-success');\n      },\n    }\n  );\n\n  return (\n    <UnauthenticatedLayout>\n      <Main>\n        <LayoutContent>\n          <Column>\n            <Logo />\n            <Box paddingTop={6} paddingBottom={7}>\n              <Typography as=\"h1\" variant=\"alpha\">\n                {formatMessage({\n                  id: 'Auth.form.button.password-recovery',\n                  defaultMessage: 'Password Recovery',\n                })}\n              </Typography>\n            </Box>\n            {isError ? (\n              <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\n                {formatMessage({\n                  id: 'notification.error',\n                  defaultMessage: 'An error occurred',\n                })}\n              </Typography>\n            ) : null}\n          </Column>\n          <Formik\n            enableReinitialize\n            initialValues={{\n              email: '',\n            }}\n            onSubmit={(values) => {\n              mutate(values);\n            }}\n            validationSchema={yup.object().shape({\n              email: yup.string().email(translatedErrors.email).required(translatedErrors.required),\n            })}\n            validateOnChange={false}\n          >\n            {({ values, errors, handleChange }) => (\n              <Form>\n                <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n                  <TextInput\n                    error={\n                      errors.email\n                        ? formatMessage({\n                            id: errors.email,\n                            defaultMessage: 'This email is invalid.',\n                          })\n                        : ''\n                    }\n                    value={values.email}\n                    onChange={handleChange}\n                    label={formatMessage({ id: 'Auth.form.email.label', defaultMessage: 'Email' })}\n                    placeholder={formatMessage({\n                      id: 'Auth.form.email.placeholder',\n                      defaultMessage: 'kai@doe.com',\n                    })}\n                    name=\"email\"\n                    required\n                  />\n                  <Button type=\"submit\" fullWidth>\n                    {formatMessage({\n                      id: 'Auth.form.button.forgot-password',\n                      defaultMessage: 'Send Email',\n                    })}\n                  </Button>\n                </Flex>\n              </Form>\n            )}\n          </Formik>\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            {/* @ts-expect-error – error with inferring the props from the as component */}\n            <Link as={NavLink} to=\"/auth/login\">\n              {formatMessage({ id: 'Auth.link.ready', defaultMessage: 'Ready to sign in?' })}\n            </Link>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n\nexport { ForgotPassword };\n","import { Box, Flex, Main, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { useIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\n\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport {\n  Column,\n  LayoutContent,\n  UnauthenticatedLayout,\n} from '../../../layouts/UnauthenticatedLayout';\n\nconst ForgotPasswordSuccess = () => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <UnauthenticatedLayout>\n      <Main>\n        <LayoutContent>\n          <Column>\n            <Logo />\n            <Box paddingTop={6} paddingBottom={7}>\n              <Typography as=\"h1\" variant=\"alpha\">\n                {formatMessage({\n                  id: 'app.containers.AuthPage.ForgotPasswordSuccess.title',\n                  defaultMessage: 'Email sent',\n                })}\n              </Typography>\n            </Box>\n            <Typography>\n              {formatMessage({\n                id: 'app.containers.AuthPage.ForgotPasswordSuccess.text.email',\n                defaultMessage: 'It can take a few minutes to receive your password recovery link.',\n              })}\n            </Typography>\n            <Box paddingTop={4}>\n              <Typography>\n                {formatMessage({\n                  id: 'app.containers.AuthPage.ForgotPasswordSuccess.text.contact-admin',\n                  defaultMessage:\n                    'If you do not receive this link, please contact your administrator.',\n                })}\n              </Typography>\n            </Box>\n          </Column>\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            {/* @ts-expect-error – error with inferring the props from the as component */}\n            <Link as={NavLink} to=\"/auth/login\">\n              {formatMessage({ id: 'Auth.link.signin', defaultMessage: 'Sign in' })}\n            </Link>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n\nexport { ForgotPasswordSuccess };\n","import { Box, Flex, Main, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { useQuery } from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\n\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport {\n  Column,\n  LayoutContent,\n  UnauthenticatedLayout,\n} from '../../../layouts/UnauthenticatedLayout';\n\nconst Oops = () => {\n  const { formatMessage } = useIntl();\n  const query = useQuery();\n\n  const message =\n    query.get('info') ||\n    formatMessage({\n      id: 'Auth.components.Oops.text',\n      defaultMessage: 'Your account has been suspended.',\n    });\n\n  return (\n    <UnauthenticatedLayout>\n      <Main>\n        <LayoutContent>\n          <Column>\n            <Logo />\n            <Box paddingTop={6} paddingBottom={7}>\n              <Typography as=\"h1\" variant=\"alpha\">\n                {formatMessage({ id: 'Auth.components.Oops.title', defaultMessage: 'Oops...' })}\n              </Typography>\n            </Box>\n            <Typography>{message}</Typography>\n            <Box paddingTop={4}>\n              <Typography>\n                {formatMessage({\n                  id: 'Auth.components.Oops.text.admin',\n                  defaultMessage: 'If this is a mistake, please contact your administrator.',\n                })}\n              </Typography>\n            </Box>\n          </Column>\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            {/* @ts-expect-error – error with inferring the props from the as component */}\n            <Link as={NavLink} to=\"/auth/login\">\n              {formatMessage({ id: 'Auth.link.signin', defaultMessage: 'Sign in' })}\n            </Link>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n\nexport { Oops };\n","import * as React from 'react';\n\nimport {\n  Box,\n  Flex,\n  IconButton,\n  Button,\n  Typography,\n  Textarea,\n  Portal,\n  Field,\n  FieldLabel,\n  FieldInput,\n  VisuallyHidden,\n} from '@strapi/design-system';\nimport { auth, useNotification, useAppInfo, usePersistentState } from '@strapi/helper-plugin';\nimport { Cross } from '@strapi/icons';\nimport { Formik, Form } from 'formik';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport styled, { useTheme } from 'styled-components';\nimport * as yup from 'yup';\n\nconst FieldWrapper = styled(Field)`\n  height: ${32 / 16}rem;\n  width: ${32 / 16}rem;\n\n  > label,\n  ~ input {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > label {\n    color: inherit;\n    cursor: pointer;\n    padding: ${({ theme }) => theme.spaces[2]};\n    text-align: center;\n    vertical-align: middle;\n  }\n\n  &:hover,\n  &:focus-within {\n    background-color: ${({ theme }) => theme.colors.neutral0};\n  }\n\n  &:active,\n  &.selected {\n    color: ${({ theme }) => theme.colors.primary700};\n    background-color: ${({ theme }) => theme.colors.neutral0};\n    border-color: ${({ theme }) => theme.colors.primary700};\n  }\n`;\n\nconst delays = {\n  postResponse: 90 * 24 * 60 * 60 * 1000, // 90 days in ms\n  postFirstDismissal: 7 * 24 * 60 * 60 * 1000, // 7 days in ms\n  postSubsequentDismissal: 90 * 24 * 60 * 60 * 1000, // 90 days in ms\n  display: 5 * 60 * 1000, // 5 minutes in ms\n};\n\nconst ratingArray = [...Array(11).keys()];\n\nconst checkIfShouldShowSurvey = (settings: NpsSurveySettings) => {\n  const { enabled, lastResponseDate, firstDismissalDate, lastDismissalDate } = settings;\n\n  // This function goes through all the cases where we'd want to not show the survey:\n  // 1. If the survey is disabled by strapi, abort mission, don't bother checking the other settings.\n  // 2. If the survey is disabled by user, abort mission, don't bother checking the other settings.\n  // 3. If the user has already responded to the survey, check if enough time has passed since the last response.\n  // 4. If the user has dismissed the survey twice or more before, check if enough time has passed since the last dismissal.\n  // 5. If the user has only dismissed the survey once before, check if enough time has passed since the first dismissal.\n  // If none of these cases check out, then we show the survey.\n  // Note that submitting a response resets the dismissal counts.\n  // Checks 4 and 5 should not be reversed, since the first dismissal will also exist if the user has dismissed the survey twice or more before.\n\n  // For users who had created an account before the NPS feature was introduced,\n  // we assume that they would have enabled the NPS feature if they had the chance.\n\n  // Global strapi disable for NSP.\n  if (window.strapi.flags.nps === false) {\n    return false;\n  }\n\n  // User chose not to enable the NPS feature when signing up\n  if (enabled === false) {\n    return false;\n  }\n\n  // The user has already responded to the survey\n  if (lastResponseDate) {\n    const timeSinceLastResponse = Date.now() - new Date(lastResponseDate).getTime();\n\n    if (timeSinceLastResponse >= delays.postResponse) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has dismissed the survey twice or more before\n  if (lastDismissalDate) {\n    const timeSinceLastDismissal = Date.now() - new Date(lastDismissalDate).getTime();\n\n    if (timeSinceLastDismissal >= delays.postSubsequentDismissal) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has only dismissed the survey once before\n  if (firstDismissalDate) {\n    const timeSinceFirstDismissal = Date.now() - new Date(firstDismissalDate).getTime();\n\n    if (timeSinceFirstDismissal >= delays.postFirstDismissal) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has not interacted with the survey before\n  return true;\n};\n\nconst NpsSurvey = () => {\n  const theme = useTheme();\n  const { formatMessage } = useIntl();\n  const { npsSurveySettings, setNpsSurveySettings } = useNpsSurveySettings();\n  const [isFeedbackResponse, setIsFeedbackResponse] = React.useState(false);\n  const toggleNotification = useNotification();\n  const { currentEnvironment, strapiVersion } = useAppInfo();\n\n  interface NpsSurveyMutationBody {\n    email: string;\n    rating: number | null;\n    comment: string;\n    environment?: string;\n    version?: string;\n    license: 'Enterprise' | 'Community';\n  }\n\n  const { mutate, isLoading } = useMutation<unknown, unknown, NpsSurveyMutationBody>(\n    async (form) => {\n      const res = await fetch('https://analytics.strapi.io/submit-nps', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(form),\n      });\n\n      if (!res.ok) {\n        throw new Error('Failed to submit NPS survey');\n      }\n\n      return res;\n    },\n    {\n      onSuccess() {\n        setNpsSurveySettings((settings) => ({\n          ...settings,\n          lastResponseDate: new Date().toString(),\n          firstDismissalDate: null,\n          lastDismissalDate: null,\n        }));\n        setIsFeedbackResponse(true);\n        // Thank you message displayed in the banner should disappear after few seconds.\n        setTimeout(() => {\n          setSurveyIsShown(false);\n        }, 3000);\n      },\n      onError() {\n        toggleNotification({\n          type: 'warning',\n          message: formatMessage({ id: 'notification.error', defaultMessage: 'An error occurred' }),\n        });\n      },\n    }\n  );\n\n  // Only check on first render if the survey should be shown\n  const [surveyIsShown, setSurveyIsShown] = React.useState(\n    checkIfShouldShowSurvey(npsSurveySettings)\n  );\n\n  // Set a cooldown to show the survey when session begins\n  const [displaySurvey, setDisplaySurvey] = React.useState(false);\n\n  React.useEffect(() => {\n    const displayTime = setTimeout(() => {\n      setDisplaySurvey(true);\n    }, delays.display);\n\n    return () => {\n      clearTimeout(displayTime);\n    };\n  }, []);\n\n  if (!displaySurvey) {\n    return null;\n  }\n\n  if (!surveyIsShown) {\n    return null;\n  }\n\n  const handleSubmitResponse = ({\n    npsSurveyRating,\n    npsSurveyFeedback,\n  }: {\n    npsSurveyRating: NpsSurveyMutationBody['rating'];\n    npsSurveyFeedback: NpsSurveyMutationBody['comment'];\n  }) => {\n    const userInfo = auth.getUserInfo();\n    mutate({\n      email: typeof userInfo === 'object' && userInfo !== null ? userInfo.email : '',\n      rating: npsSurveyRating,\n      comment: npsSurveyFeedback,\n      environment: currentEnvironment,\n      version: strapiVersion ?? undefined,\n      license: window.strapi.projectType,\n    });\n  };\n\n  const handleDismiss = () => {\n    setNpsSurveySettings((settings) => {\n      const nextSettings = {\n        ...settings,\n        lastResponseDate: null,\n      };\n\n      if (settings.firstDismissalDate) {\n        // If the user dismisses the survey for the second time\n        nextSettings.lastDismissalDate = new Date().toString();\n      } else {\n        // If the user dismisses the survey for the first time\n        nextSettings.firstDismissalDate = new Date().toString();\n      }\n\n      return nextSettings;\n    });\n\n    setSurveyIsShown(false);\n  };\n\n  return (\n    <Portal>\n      <Formik\n        initialValues={{ npsSurveyFeedback: '', npsSurveyRating: null }}\n        onSubmit={handleSubmitResponse}\n        validationSchema={yup.object({\n          npsSurveyFeedback: yup.string(),\n          npsSurveyRating: yup.number().required(),\n        })}\n      >\n        {({ values, handleChange, setFieldValue }) => (\n          <Form name=\"npsSurveyForm\">\n            <Flex\n              hasRadius\n              direction=\"column\"\n              padding={4}\n              borderColor=\"primary200\"\n              background=\"neutral0\"\n              shadow=\"popupShadow\"\n              position=\"fixed\"\n              bottom={0}\n              left=\"50%\"\n              transform=\"translateX(-50%)\"\n              zIndex={theme.zIndices[2]}\n              width=\"50%\"\n            >\n              {isFeedbackResponse ? (\n                <Typography fontWeight=\"semiBold\">\n                  {formatMessage({\n                    id: 'app.components.NpsSurvey.feedback-response',\n                    defaultMessage: 'Thank you very much for your feedback!',\n                  })}\n                </Typography>\n              ) : (\n                <Box as=\"fieldset\" width=\"100%\">\n                  <Flex justifyContent=\"space-between\" width=\"100%\">\n                    <Box marginLeft=\"auto\" marginRight=\"auto\">\n                      <Typography fontWeight=\"semiBold\" as=\"legend\">\n                        {formatMessage({\n                          id: 'app.components.NpsSurvey.banner-title',\n                          defaultMessage:\n                            'How likely are you to recommend Strapi to a friend or colleague?',\n                        })}\n                      </Typography>\n                    </Box>\n                    <IconButton\n                      onClick={handleDismiss}\n                      aria-label={formatMessage({\n                        id: 'app.components.NpsSurvey.dismiss-survey-label',\n                        defaultMessage: 'Dismiss survey',\n                      })}\n                      icon={<Cross />}\n                    />\n                  </Flex>\n                  <Flex gap={2} marginTop={2} marginBottom={2} justifyContent=\"center\">\n                    <Typography variant=\"pi\" textColor=\"neutral600\">\n                      {formatMessage({\n                        id: 'app.components.NpsSurvey.no-recommendation',\n                        defaultMessage: 'Not at all likely',\n                      })}\n                    </Typography>\n                    {ratingArray.map((number) => {\n                      return (\n                        <FieldWrapper\n                          key={number}\n                          className={values.npsSurveyRating === number ? 'selected' : undefined} // \"selected\" class added when child radio button is checked\n                          hasRadius\n                          background=\"primary100\"\n                          borderColor=\"primary200\"\n                          color=\"primary600\"\n                          position=\"relative\"\n                          cursor=\"pointer\"\n                        >\n                          <FieldLabel htmlFor={`nps-survey-rating-${number}-input`}>\n                            <VisuallyHidden>\n                              <FieldInput\n                                type=\"radio\"\n                                id={`nps-survey-rating-${number}-input`}\n                                name=\"npsSurveyRating\"\n                                checked={values.npsSurveyRating === number}\n                                onChange={(e) =>\n                                  setFieldValue('npsSurveyRating', parseInt(e.target.value, 10))\n                                }\n                                value={number}\n                              />\n                            </VisuallyHidden>\n                            {number}\n                          </FieldLabel>\n                        </FieldWrapper>\n                      );\n                    })}\n                    <Typography variant=\"pi\" textColor=\"neutral600\">\n                      {formatMessage({\n                        id: 'app.components.NpsSurvey.happy-to-recommend',\n                        defaultMessage: 'Extremely likely',\n                      })}\n                    </Typography>\n                  </Flex>\n                  {values.npsSurveyRating !== null && (\n                    <Flex direction=\"column\">\n                      <Box marginTop={2}>\n                        <FieldLabel htmlFor=\"npsSurveyFeedback\" fontWeight=\"semiBold\" fontSize={2}>\n                          {formatMessage({\n                            id: 'app.components.NpsSurvey.feedback-question',\n                            defaultMessage: 'Do you have any suggestion for improvements?',\n                          })}\n                        </FieldLabel>\n                      </Box>\n                      <Box width=\"62%\" marginTop={3} marginBottom={4}>\n                        <Textarea\n                          id=\"npsSurveyFeedback\" // formik element attribute \"id\" should be same as the values key to work\n                          width=\"100%\"\n                          onChange={handleChange}\n                        >\n                          {values.npsSurveyFeedback}\n                        </Textarea>\n                      </Box>\n                      <Button marginBottom={2} type=\"submit\" loading={isLoading}>\n                        {formatMessage({\n                          id: 'app.components.NpsSurvey.submit-feedback',\n                          defaultMessage: 'Submit Feedback',\n                        })}\n                      </Button>\n                    </Flex>\n                  )}\n                </Box>\n              )}\n            </Flex>\n          </Form>\n        )}\n      </Formik>\n    </Portal>\n  );\n};\n\ninterface NpsSurveySettings {\n  enabled: boolean;\n  lastResponseDate: string | null;\n  firstDismissalDate: string | null;\n  lastDismissalDate: string | null;\n}\n\n/**\n * We exported to make it available during admin user registration.\n * Because we only enable the NPS for users who subscribe to the newsletter when signing up\n */\nfunction useNpsSurveySettings() {\n  const [npsSurveySettings, setNpsSurveySettings] = usePersistentState<NpsSurveySettings>(\n    'STRAPI_NPS_SURVEY_SETTINGS',\n    {\n      enabled: true,\n      lastResponseDate: null,\n      firstDismissalDate: null,\n      lastDismissalDate: null,\n    }\n  );\n\n  /**\n   * TODO: should this just be an array so we can alias the `usePersistentState` hook?\n   */\n  return { npsSurveySettings, setNpsSurveySettings };\n}\n\nexport { NpsSurvey, useNpsSurveySettings };\n","import * as React from 'react';\n\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Flex,\n  Grid,\n  GridItem,\n  Main,\n  TextInput,\n  Typography,\n} from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport {\n  Form,\n  auth,\n  getYupInnerErrors,\n  translatedErrors,\n  useAPIErrorHandler,\n  useFetchClient,\n  useGuidedTour,\n  useNotification,\n  useQuery,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport { Eye, EyeStriked } from '@strapi/icons';\nimport { Formik } from 'formik';\nimport omit from 'lodash/omit';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { useQuery as useReactQuery, useMutation } from 'react-query';\nimport { NavLink, Redirect, useHistory, useRouteMatch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport * as yup from 'yup';\nimport { ValidationError } from 'yup';\n\nimport {\n  Register,\n  RegisterAdmin,\n  RegistrationInfo,\n} from '../../../../../shared/contracts/authentication';\nimport { useNpsSurveySettings } from '../../../components/NpsSurvey';\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport { LayoutContent, UnauthenticatedLayout } from '../../../layouts/UnauthenticatedLayout';\nimport { AuthType } from '../constants';\n\nimport { FieldActionWrapper } from './FieldActionWrapper';\n\nimport type { AxiosError } from 'axios';\n\nconst REGISTER_USER_SCHEMA = yup.object().shape({\n  firstname: yup.string().trim().required(translatedErrors.required),\n  lastname: yup.string().nullable(),\n  password: yup\n    .string()\n    .min(8, translatedErrors.minLength)\n    .matches(/[a-z]/, 'components.Input.error.contain.lowercase')\n    .matches(/[A-Z]/, 'components.Input.error.contain.uppercase')\n    .matches(/\\d/, 'components.Input.error.contain.number')\n    .required(translatedErrors.required),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password'), null], 'components.Input.error.password.noMatch')\n    .required(translatedErrors.required),\n  registrationToken: yup.string().required(translatedErrors.required),\n});\n\nconst REGISTER_ADMIN_SCHEMA = yup.object().shape({\n  firstname: yup.string().trim().required(translatedErrors.required),\n  lastname: yup.string().nullable(),\n  password: yup\n    .string()\n    .min(8, translatedErrors.minLength)\n    .matches(/[a-z]/, 'components.Input.error.contain.lowercase')\n    .matches(/[A-Z]/, 'components.Input.error.contain.uppercase')\n    .matches(/\\d/, 'components.Input.error.contain.number')\n    .required(translatedErrors.required),\n  email: yup\n    .string()\n    .email(translatedErrors.email)\n    .strict()\n    .lowercase(translatedErrors.lowercase)\n    .required(translatedErrors.required),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password'), null], 'components.Input.error.password.noMatch')\n    .required(translatedErrors.required),\n});\n\ninterface RegisterProps {\n  hasAdmin?: boolean;\n}\n\nconst Register = ({ hasAdmin }: RegisterProps) => {\n  const toggleNotification = useNotification();\n  const { push } = useHistory();\n  const [passwordShown, setPasswordShown] = React.useState(false);\n  const [confirmPasswordShown, setConfirmPasswordShown] = React.useState(false);\n  const [submitCount, setSubmitCount] = React.useState(0);\n  const [apiError, setApiError] = React.useState<string>();\n  const { trackUsage } = useTracking();\n  const { formatMessage } = useIntl();\n  const { setSkipped } = useGuidedTour();\n  const query = useQuery();\n  const match = useRouteMatch<{ authType: Extract<AuthType, `register${string}`> }>(\n    '/auth/:authType'\n  );\n  const { formatAPIError } = useAPIErrorHandler();\n  const { get, post } = useFetchClient();\n  const { setNpsSurveySettings } = useNpsSurveySettings();\n\n  const registrationToken = query.get('registrationToken');\n\n  const { data: userInfo } = useReactQuery({\n    queryKey: ['admin', 'registration-info', registrationToken],\n    async queryFn() {\n      const {\n        data: { data },\n      } = await get<RegistrationInfo.Response>(`/admin/registration-info`, {\n        params: {\n          registrationToken,\n        },\n      });\n\n      return data;\n    },\n    enabled: !!registrationToken,\n    initialData: {},\n    onError(err: AxiosError<{ error: Exclude<RegistrationInfo.Response['errors'], undefined> }>) {\n      const message = formatAPIError(err);\n\n      toggleNotification({\n        type: 'warning',\n        message,\n      });\n\n      push(`/auth/oops?info=${encodeURIComponent(message)}`);\n    },\n  });\n\n  const registerAdminMutation = useMutation(\n    async (body: RegisterAdmin.Request['body'] & { news: boolean }) => {\n      const { news, ...restBody } = body;\n      const { data } = await post<RegisterAdmin.Response>('/admin/register-admin', restBody);\n\n      return { ...data.data, news };\n    },\n    {\n      onSuccess(data) {\n        const { token, user, news } = data;\n\n        auth.setToken(token, false);\n        auth.setUserInfo(user, false);\n\n        const { roles } = user;\n\n        if (roles) {\n          const isUserSuperAdmin = roles.find(({ code }) => code === 'strapi-super-admin');\n\n          if (isUserSuperAdmin) {\n            auth.set(false, 'GUIDED_TOUR_SKIPPED', true);\n            setSkipped(false);\n            trackUsage('didLaunchGuidedtour');\n          }\n        }\n\n        if (news) {\n          // Only enable EE survey if user accepted the newsletter\n          setNpsSurveySettings((s) => ({ ...s, enabled: true }));\n\n          push({\n            pathname: '/usecase',\n            search: `?hasAdmin=${true}`,\n          });\n        } else {\n          push('/');\n        }\n      },\n      onError(err: AxiosError<{ error: Exclude<RegisterAdmin.Response['errors'], undefined> }>) {\n        trackUsage('didNotCreateFirstAdmin');\n\n        const error = formatAPIError(err);\n        setApiError(error);\n      },\n    }\n  );\n\n  const registerUserMutation = useMutation(\n    async (body: Register.Request['body'] & { news: boolean }) => {\n      const { news, ...restBody } = body;\n      const { data } = await post<Register.Response>('/admin/register', restBody);\n\n      return { ...data.data, news };\n    },\n    {\n      onSuccess(data) {\n        const { token, user, news } = data;\n\n        auth.setToken(token, false);\n        auth.setUserInfo(user, false);\n\n        if (news) {\n          // Only enable EE survey if user accepted the newsletter\n          setNpsSurveySettings((s) => ({ ...s, enabled: true }));\n\n          push({\n            pathname: '/usecase',\n            search: `?hasAdmin=${hasAdmin}`,\n          });\n        } else {\n          push('/');\n        }\n      },\n      onError(err: AxiosError<{ error: Exclude<RegisterAdmin.Response['errors'], undefined> }>) {\n        trackUsage('didNotCreateFirstAdmin');\n\n        const error = formatAPIError(err);\n        setApiError(error);\n      },\n    }\n  );\n\n  if (\n    !match ||\n    (match.params.authType !== 'register' && match.params.authType !== 'register-admin')\n  ) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const isAdminRegistration = match.params.authType === 'register-admin';\n\n  const schema = isAdminRegistration ? REGISTER_ADMIN_SCHEMA : REGISTER_USER_SCHEMA;\n\n  return (\n    <UnauthenticatedLayout>\n      <LayoutContent>\n        <Flex direction=\"column\" alignItems=\"center\" gap={3}>\n          <Logo />\n\n          <Typography as=\"h1\" variant=\"alpha\" textAlign=\"center\">\n            {formatMessage({\n              id: 'Auth.form.welcome.title',\n              defaultMessage: 'Welcome to Strapi!',\n            })}\n          </Typography>\n          <Typography variant=\"epsilon\" textColor=\"neutral600\" textAlign=\"center\">\n            {formatMessage({\n              id: 'Auth.form.register.subtitle',\n              defaultMessage:\n                'Credentials are only used to authenticate in Strapi. All saved data will be stored in your database.',\n            })}\n          </Typography>\n          {apiError ? (\n            <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\n              {apiError}\n            </Typography>\n          ) : null}\n        </Flex>\n        <Formik\n          enableReinitialize\n          initialValues={{\n            firstname: userInfo?.firstname || '',\n            lastname: userInfo?.lastname || '',\n            email: userInfo?.email || '',\n            password: '',\n            confirmPassword: '',\n            registrationToken: registrationToken || undefined,\n            news: false,\n          }}\n          onSubmit={async (data, formik) => {\n            const normalizedData = normalizeData(data);\n\n            try {\n              await schema.validate(normalizedData, { abortEarly: false });\n\n              if (submitCount > 0 && isAdminRegistration) {\n                trackUsage('didSubmitWithErrorsFirstAdmin', { count: submitCount.toString() });\n              }\n\n              if (normalizedData.registrationToken) {\n                registerUserMutation.mutate({\n                  userInfo: omit(normalizedData, [\n                    'registrationToken',\n                    'confirmPassword',\n                    'email',\n                    'news',\n                  ]),\n                  registrationToken: normalizedData.registrationToken,\n                  news: normalizedData.news,\n                });\n              } else {\n                registerAdminMutation.mutate(\n                  omit(normalizedData, ['registrationToken', 'confirmPassword'])\n                );\n              }\n            } catch (err) {\n              if (err instanceof ValidationError) {\n                const errors = getYupInnerErrors(err);\n\n                formik.setErrors(errors);\n              }\n              setSubmitCount(submitCount + 1);\n            }\n          }}\n          validateOnChange={false}\n        >\n          {({ values, errors, handleChange }) => {\n            return (\n              <Form>\n                <Main>\n                  <Flex direction=\"column\" alignItems=\"stretch\" gap={6} marginTop={7}>\n                    <Grid gap={4}>\n                      <GridItem col={6}>\n                        <TextInput\n                          name=\"firstname\"\n                          required\n                          value={values.firstname}\n                          error={\n                            errors.firstname\n                              ? formatMessage(errors.firstname as MessageDescriptor)\n                              : undefined\n                          }\n                          onChange={handleChange}\n                          label={formatMessage({\n                            id: 'Auth.form.firstname.label',\n                            defaultMessage: 'Firstname',\n                          })}\n                        />\n                      </GridItem>\n                      <GridItem col={6}>\n                        <TextInput\n                          name=\"lastname\"\n                          value={values.lastname}\n                          onChange={handleChange}\n                          label={formatMessage({\n                            id: 'Auth.form.lastname.label',\n                            defaultMessage: 'Lastname',\n                          })}\n                        />\n                      </GridItem>\n                    </Grid>\n                    <TextInput\n                      name=\"email\"\n                      disabled={!isAdminRegistration}\n                      value={values.email}\n                      onChange={handleChange}\n                      error={\n                        errors.email ? formatMessage(errors.email as MessageDescriptor) : undefined\n                      }\n                      required\n                      label={formatMessage({\n                        id: 'Auth.form.email.label',\n                        defaultMessage: 'Email',\n                      })}\n                      type=\"email\"\n                    />\n                    <PasswordInput\n                      name=\"password\"\n                      onChange={handleChange}\n                      value={values.password}\n                      error={\n                        errors.password\n                          ? formatMessage(errors.password as MessageDescriptor)\n                          : undefined\n                      }\n                      endAction={\n                        <FieldActionWrapper\n                          onClick={(e) => {\n                            e.preventDefault();\n                            setPasswordShown((prev) => !prev);\n                          }}\n                          label={formatMessage(\n                            passwordShown\n                              ? {\n                                  id: 'Auth.form.password.show-password',\n                                  defaultMessage: 'Show password',\n                                }\n                              : {\n                                  id: 'Auth.form.password.hide-password',\n                                  defaultMessage: 'Hide password',\n                                }\n                          )}\n                        >\n                          {passwordShown ? <Eye /> : <EyeStriked />}\n                        </FieldActionWrapper>\n                      }\n                      hint={formatMessage({\n                        id: 'Auth.form.password.hint',\n                        defaultMessage:\n                          'Must be at least 8 characters, 1 uppercase, 1 lowercase & 1 number',\n                      })}\n                      required\n                      label={formatMessage({\n                        id: 'global.password',\n                        defaultMessage: 'Password',\n                      })}\n                      type={passwordShown ? 'text' : 'password'}\n                    />\n                    <PasswordInput\n                      name=\"confirmPassword\"\n                      onChange={handleChange}\n                      value={values.confirmPassword}\n                      error={\n                        errors.confirmPassword\n                          ? formatMessage(errors.confirmPassword as MessageDescriptor)\n                          : undefined\n                      }\n                      endAction={\n                        <FieldActionWrapper\n                          onClick={(e) => {\n                            e.preventDefault();\n                            setConfirmPasswordShown((prev) => !prev);\n                          }}\n                          label={formatMessage(\n                            confirmPasswordShown\n                              ? {\n                                  id: 'Auth.form.password.show-password',\n                                  defaultMessage: 'Show password',\n                                }\n                              : {\n                                  id: 'Auth.form.password.hide-password',\n                                  defaultMessage: 'Hide password',\n                                }\n                          )}\n                        >\n                          {confirmPasswordShown ? <Eye /> : <EyeStriked />}\n                        </FieldActionWrapper>\n                      }\n                      required\n                      label={formatMessage({\n                        id: 'Auth.form.confirmPassword.label',\n                        defaultMessage: 'Confirm Password',\n                      })}\n                      type={confirmPasswordShown ? 'text' : 'password'}\n                    />\n                    <Checkbox\n                      onValueChange={(checked) => {\n                        handleChange({ target: { value: checked, name: 'news' } });\n                      }}\n                      value={values.news}\n                      name=\"news\"\n                      aria-label=\"news\"\n                    >\n                      {formatMessage(\n                        {\n                          id: 'Auth.form.register.news.label',\n                          defaultMessage:\n                            'Keep me updated about new features & upcoming improvements (by doing this you accept the {terms} and the {policy}).',\n                        },\n                        {\n                          terms: (\n                            <A target=\"_blank\" href=\"https://strapi.io/terms\" rel=\"noreferrer\">\n                              {formatMessage({\n                                id: 'Auth.privacy-policy-agreement.terms',\n                                defaultMessage: 'terms',\n                              })}\n                            </A>\n                          ),\n                          policy: (\n                            <A target=\"_blank\" href=\"https://strapi.io/privacy\" rel=\"noreferrer\">\n                              {formatMessage({\n                                id: 'Auth.privacy-policy-agreement.policy',\n                                defaultMessage: 'policy',\n                              })}\n                            </A>\n                          ),\n                        }\n                      )}\n                    </Checkbox>\n                    <Button fullWidth size=\"L\" type=\"submit\">\n                      {formatMessage({\n                        id: 'Auth.form.button.register',\n                        defaultMessage: \"Let's start\",\n                      })}\n                    </Button>\n                  </Flex>\n                </Main>\n              </Form>\n            );\n          }}\n        </Formik>\n        {match?.params.authType === 'register' && (\n          <Box paddingTop={4}>\n            <Flex justifyContent=\"center\">\n              {/* @ts-expect-error – error with inferring the props from the as component */}\n              <Link as={NavLink} to=\"/auth/login\">\n                {formatMessage({\n                  id: 'Auth.link.signin.account',\n                  defaultMessage: 'Already have an account?',\n                })}\n              </Link>\n            </Flex>\n          </Box>\n        )}\n      </LayoutContent>\n    </UnauthenticatedLayout>\n  );\n};\n\ninterface RegisterFormValues {\n  firstname: string;\n  lastname: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n  registrationToken: string | undefined;\n  news: boolean;\n}\n\ntype StringKeys<T> = {\n  [K in keyof T]: T[K] extends string | undefined ? K : never;\n}[keyof T];\n\n/**\n * @description Trims all values but the password & sets lastName to null if it's a falsey value.\n */\nfunction normalizeData(data: RegisterFormValues) {\n  return Object.entries(data).reduce(\n    (acc, [key, value]) => {\n      type PasswordKeys = Extract<keyof RegisterFormValues, 'password' | 'confirmPassword'>;\n      type RegisterFormStringValues = Exclude<\n        keyof Pick<RegisterFormValues, StringKeys<RegisterFormValues>>,\n        PasswordKeys\n      >;\n\n      if (!['password', 'confirmPassword'].includes(key) && typeof value === 'string') {\n        acc[key as RegisterFormStringValues] = value.trim();\n\n        if (key === 'lastname') {\n          acc[key] = value || undefined;\n        }\n      } else {\n        acc[key as PasswordKeys] = value;\n      }\n\n      return acc;\n    },\n    {} as {\n      firstname: string;\n      lastname: string | undefined;\n      email: string;\n      password: string;\n      confirmPassword: string;\n      registrationToken: string | undefined;\n      news: boolean;\n    }\n  );\n}\n\nconst A = styled.a`\n  color: ${({ theme }) => theme.colors.primary600};\n`;\n\nconst PasswordInput = styled(TextInput)`\n  ::-ms-reveal {\n    display: none;\n  }\n`;\n\nexport { Register };\nexport type { RegisterProps };\n","import * as React from 'react';\n\nimport { Box, Button, Flex, Main, TextInput, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { Form, auth, translatedErrors, useFetchClient, useQuery } from '@strapi/helper-plugin';\nimport { Eye, EyeStriked } from '@strapi/icons';\nimport { Formik } from 'formik';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport * as yup from 'yup';\n\nimport { ResetPassword } from '../../../../../shared/contracts/authentication';\nimport { Logo } from '../../../components/UnauthenticatedLogo';\nimport {\n  Column,\n  LayoutContent,\n  UnauthenticatedLayout,\n} from '../../../layouts/UnauthenticatedLayout';\n\nimport { FieldActionWrapper } from './FieldActionWrapper';\n\nconst RESET_PASSWORD_SCHEMA = yup.object().shape({\n  password: yup\n    .string()\n    .min(8, translatedErrors.minLength)\n    .matches(/[a-z]/, 'components.Input.error.contain.lowercase')\n    .matches(/[A-Z]/, 'components.Input.error.contain.uppercase')\n    .matches(/\\d/, 'components.Input.error.contain.number')\n    .required(translatedErrors.required),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password'), null], 'components.Input.error.password.noMatch')\n    .required(translatedErrors.required),\n});\n\nconst ResetPassword = () => {\n  const [passwordShown, setPasswordShown] = React.useState(false);\n  const [confirmPasswordShown, setConfirmPasswordShown] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const { post } = useFetchClient();\n  const { push } = useHistory();\n  const query = useQuery();\n\n  const { mutate, isError } = useMutation(\n    async (body: Pick<ResetPassword.Request['body'], 'password'>) => {\n      const {\n        data: { data },\n      } = await post<ResetPassword.Response>('/admin/reset-password', {\n        ...body,\n        resetPasswordToken: query.get('code'),\n      });\n\n      return data;\n    },\n    {\n      onSuccess(data) {\n        if (data) {\n          const { token, user } = data;\n          auth.setToken(token, false);\n          auth.setUserInfo(user, false);\n\n          // Redirect to the homePage\n          push('/');\n        }\n      },\n    }\n  );\n\n  return (\n    <UnauthenticatedLayout>\n      <Main>\n        <LayoutContent>\n          <Column>\n            <Logo />\n            <Box paddingTop={6} paddingBottom={7}>\n              <Typography as=\"h1\" variant=\"alpha\">\n                {formatMessage({\n                  id: 'global.reset-password',\n                  defaultMessage: 'Reset password',\n                })}\n              </Typography>\n            </Box>\n            {isError ? (\n              <Typography id=\"global-form-error\" role=\"alert\" tabIndex={-1} textColor=\"danger600\">\n                {formatMessage({\n                  id: 'notification.error',\n                  defaultMessage: 'An error occurred',\n                })}\n              </Typography>\n            ) : null}\n          </Column>\n          <Formik\n            enableReinitialize\n            initialValues={{\n              password: '',\n              confirmPassword: '',\n            }}\n            onSubmit={(values) => {\n              mutate({ password: values.password });\n            }}\n            validationSchema={RESET_PASSWORD_SCHEMA}\n            validateOnChange={false}\n          >\n            {({ values, errors, handleChange }) => (\n              <Form>\n                <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n                  <PasswordInput\n                    name=\"password\"\n                    onChange={handleChange}\n                    value={values.password}\n                    error={\n                      errors.password\n                        ? formatMessage(\n                            {\n                              id: errors.password,\n                              defaultMessage: 'This field is required.',\n                            },\n                            {\n                              min: 8,\n                            }\n                          )\n                        : undefined\n                    }\n                    endAction={\n                      <FieldActionWrapper\n                        onClick={(e) => {\n                          e.preventDefault();\n                          setPasswordShown((prev) => !prev);\n                        }}\n                        label={formatMessage(\n                          passwordShown\n                            ? {\n                                id: 'Auth.form.password.show-password',\n                                defaultMessage: 'Show password',\n                              }\n                            : {\n                                id: 'Auth.form.password.hide-password',\n                                defaultMessage: 'Hide password',\n                              }\n                        )}\n                      >\n                        {passwordShown ? <Eye /> : <EyeStriked />}\n                      </FieldActionWrapper>\n                    }\n                    hint={formatMessage({\n                      id: 'Auth.form.password.hint',\n                      defaultMessage:\n                        'Password must contain at least 8 characters, 1 uppercase, 1 lowercase and 1 number',\n                    })}\n                    required\n                    label={formatMessage({\n                      id: 'global.password',\n                      defaultMessage: 'Password',\n                    })}\n                    type={passwordShown ? 'text' : 'password'}\n                  />\n                  <PasswordInput\n                    name=\"confirmPassword\"\n                    onChange={handleChange}\n                    value={values.confirmPassword}\n                    error={\n                      errors.confirmPassword\n                        ? formatMessage({\n                            id: errors.confirmPassword,\n                            defaultMessage: 'This value is required.',\n                          })\n                        : undefined\n                    }\n                    endAction={\n                      <FieldActionWrapper\n                        onClick={(e) => {\n                          e.preventDefault();\n                          setConfirmPasswordShown((prev) => !prev);\n                        }}\n                        label={formatMessage(\n                          passwordShown\n                            ? {\n                                id: 'Auth.form.password.show-password',\n                                defaultMessage: 'Show password',\n                              }\n                            : {\n                                id: 'Auth.form.password.hide-password',\n                                defaultMessage: 'Hide password',\n                              }\n                        )}\n                      >\n                        {confirmPasswordShown ? <Eye /> : <EyeStriked />}\n                      </FieldActionWrapper>\n                    }\n                    required\n                    label={formatMessage({\n                      id: 'Auth.form.confirmPassword.label',\n                      defaultMessage: 'Confirm Password',\n                    })}\n                    type={confirmPasswordShown ? 'text' : 'password'}\n                  />\n                  <Button fullWidth type=\"submit\">\n                    {formatMessage({\n                      id: 'global.change-password',\n                      defaultMessage: 'Change password',\n                    })}\n                  </Button>\n                </Flex>\n              </Form>\n            )}\n          </Formik>\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            {/* @ts-expect-error – error with inferring the props from the as component */}\n            <Link as={NavLink} to=\"/auth/login\">\n              {formatMessage({ id: 'Auth.link.ready', defaultMessage: 'Ready to sign in?' })}\n            </Link>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n\nconst PasswordInput = styled(TextInput)`\n  ::-ms-reveal {\n    display: none;\n  }\n`;\n\nexport { ResetPassword };\n","import type { ComponentType } from 'react';\n\nimport { ForgotPassword } from './components/ForgotPassword';\nimport { ForgotPasswordSuccess } from './components/ForgotPasswordSuccess';\nimport { Oops } from './components/Oops';\nimport { Register, RegisterProps } from './components/Register';\nimport { ResetPassword } from './components/ResetPassword';\n\nexport type AuthType =\n  | 'login'\n  | 'register'\n  | 'register-admin'\n  | 'forgot-password'\n  | 'reset-password'\n  | 'forgot-password-success'\n  | 'oops'\n  | 'providers';\n\nexport type FormDictionary = Record<AuthType, ComponentType | ComponentType<RegisterProps>>;\n\nexport const FORMS = {\n  'forgot-password': ForgotPassword,\n  'forgot-password-success': ForgotPasswordSuccess,\n  // the `Component` attribute is set after all forms and CE/EE components are loaded, but since we\n  // are here outside of a React component we can not use the hook directly\n  login: () => null,\n  oops: Oops,\n  register: Register,\n  'register-admin': Register,\n  'reset-password': ResetPassword,\n  providers: () => null,\n} satisfies FormDictionary;\n","import { auth } from '@strapi/helper-plugin';\nimport { Redirect, useHistory, useRouteMatch } from 'react-router-dom';\n\nimport { useEnterprise } from '../../hooks/useEnterprise';\n\nimport { Login as LoginCE } from './components/Login';\nimport { AuthType, FORMS, FormDictionary } from './constants';\n\n/* -------------------------------------------------------------------------------------------------\n * AuthPage\n * -----------------------------------------------------------------------------------------------*/\n\ninterface AuthPageProps {\n  hasAdmin: boolean;\n}\n\nconst AuthPage = ({ hasAdmin }: AuthPageProps) => {\n  const {\n    location: { search },\n  } = useHistory();\n  const match = useRouteMatch<{ authType: AuthType }>('/auth/:authType');\n  const authType = match?.params.authType;\n  const Login = useEnterprise(\n    LoginCE,\n    async () => (await import('../../../../ee/admin/src/pages/AuthPage/components/Login')).LoginEE\n  );\n  const forms = useEnterprise<FormDictionary, Partial<FormDictionary>>(\n    FORMS,\n    async () => (await import('../../../../ee/admin/src/pages/AuthPage/constants')).FORMS,\n    {\n      combine(ceForms, eeForms) {\n        return {\n          ...ceForms,\n          ...eeForms,\n        };\n      },\n      defaultValue: FORMS,\n    }\n  );\n\n  if (!authType || !forms) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const Component = forms[authType];\n\n  // Redirect the user to the login page if\n  // the endpoint does not exist or\n  // there is already an admin user oo\n  // the user is already logged in\n  if (!Component || (hasAdmin && authType === 'register-admin') || auth.getToken()) {\n    return <Redirect to=\"/\" />;\n  }\n\n  // Redirect the user to the register-admin if it is the first user\n  if (!hasAdmin && authType !== 'register-admin') {\n    return (\n      <Redirect\n        to={{\n          pathname: '/auth/register-admin',\n          // Forward the `?redirectTo` from /auth/login\n          // /abc => /auth/login?redirectTo=%2Fabc => /auth/register-admin?redirectTo=%2Fabc\n          search,\n        }}\n      />\n    );\n  }\n\n  if (Login && authType === 'login') {\n    // Assign the component to render for the login form\n    return <Login />;\n  } else if (authType === 'login' && !Login) {\n    // block rendering until the Login EE component is fully loaded\n    return null;\n  }\n\n  return <Component hasAdmin={hasAdmin} />;\n};\n\nexport { AuthPage };\nexport type { AuthPageProps };\n","/**\n * NotFoundPage\n *\n * This is the page we show when the user visits a url that doesn't have a route\n *\n */\nimport {\n  ContentLayout,\n  EmptyStateLayout,\n  HeaderLayout,\n  LinkButton,\n  Main,\n} from '@strapi/design-system';\nimport { useFocusWhenNavigate } from '@strapi/helper-plugin';\nimport { ArrowRight, EmptyPictures } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nexport const NotFoundPage = () => {\n  const { formatMessage } = useIntl();\n  useFocusWhenNavigate();\n\n  return (\n    <Main labelledBy=\"title\">\n      <HeaderLayout\n        id=\"title\"\n        title={formatMessage({\n          id: 'content-manager.pageNotFound',\n          defaultMessage: 'Page not found',\n        })}\n      />\n      <ContentLayout>\n        <EmptyStateLayout\n          action={\n            <LinkButton variant=\"secondary\" endIcon={<ArrowRight />} to=\"/\">\n              {formatMessage({\n                id: 'app.components.NotFoundPage.back',\n                defaultMessage: 'Back to homepage',\n              })}\n            </LinkButton>\n          }\n          content={formatMessage({\n            id: 'app.page.not.found',\n            defaultMessage: \"Oops! We can't seem to find the page you're looging for...\",\n          })}\n          hasRadius\n          icon={<EmptyPictures width=\"10rem\" />}\n          shadow=\"tableShadow\"\n        />\n      </ContentLayout>\n    </Main>\n  );\n};\n","import * as React from 'react';\n\nimport {\n  Box,\n  Button,\n  Flex,\n  Main,\n  Option,\n  Select,\n  TextButton,\n  TextInput,\n  Typography,\n} from '@strapi/design-system';\nimport { auth, pxToRem, useFetchClient, useNotification } from '@strapi/helper-plugin';\nimport { parse } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { Logo } from '../components/UnauthenticatedLogo';\nimport { LayoutContent, UnauthenticatedLayout } from '../layouts/UnauthenticatedLayout';\n\nexport const options = [\n  {\n    intlLabel: {\n      id: 'Usecase.front-end',\n      defaultMessage: 'Front-end developer',\n    },\n    value: 'front_end_developer',\n  },\n  {\n    intlLabel: {\n      id: 'Usecase.back-end',\n      defaultMessage: 'Back-end developer',\n    },\n    value: 'back_end_developer',\n  },\n  {\n    intlLabel: {\n      id: 'Usecase.full-stack',\n      defaultMessage: 'Full-stack developer',\n    },\n    value: 'full_stack_developer',\n  },\n  {\n    intlLabel: {\n      id: 'global.content-manager',\n      defaultMessage: 'Content Manager',\n    },\n    value: 'content_manager',\n  },\n  {\n    intlLabel: {\n      id: 'Usecase.content-creator',\n      defaultMessage: 'Content Creator',\n    },\n    value: 'content_creator',\n  },\n  {\n    intlLabel: {\n      id: 'Usecase.other',\n      defaultMessage: 'Other',\n    },\n    value: 'other',\n  },\n];\n\nconst TypographyCenter = styled(Typography)`\n  text-align: center;\n`;\n\nexport const UseCasePage = () => {\n  const toggleNotification = useNotification();\n  const { push, location } = useHistory();\n  const { formatMessage } = useIntl();\n  const [role, setRole] = React.useState<string | number | null>(null);\n  const [otherRole, setOtherRole] = React.useState('');\n  const { post } = useFetchClient();\n\n  const { firstname, email } = auth.get('userInfo') ?? {};\n  const { hasAdmin } = parse(location?.search, { ignoreQueryPrefix: true });\n  const isOther = role === 'other';\n\n  const handleSubmit = async (event: React.FormEvent, skipPersona: boolean) => {\n    event.preventDefault();\n    try {\n      await post('https://analytics.strapi.io/register', {\n        email,\n        username: firstname,\n        firstAdmin: Boolean(!hasAdmin),\n        persona: {\n          role: skipPersona ? undefined : role,\n          otherRole: skipPersona ? undefined : otherRole,\n        },\n      });\n\n      toggleNotification({\n        type: 'success',\n        message: {\n          id: 'Usecase.notification.success.project-created',\n          defaultMessage: 'Project has been successfully created',\n        },\n      });\n      push('/');\n    } catch (err) {\n      // Silent\n    }\n  };\n\n  return (\n    <UnauthenticatedLayout>\n      <Main labelledBy=\"usecase-title\">\n        <LayoutContent>\n          <form onSubmit={(e) => handleSubmit(e, false)}>\n            <Flex direction=\"column\" paddingBottom={7}>\n              <Logo />\n              <Box paddingTop={6} paddingBottom={1} width={pxToRem(250)}>\n                <TypographyCenter variant=\"alpha\" as=\"h1\" id=\"usecase-title\">\n                  {formatMessage({\n                    id: 'Usecase.title',\n                    defaultMessage: 'Tell us a bit more about yourself',\n                  })}\n                </TypographyCenter>\n              </Box>\n            </Flex>\n            <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n              <Select\n                id=\"usecase\"\n                data-testid=\"usecase\"\n                label={formatMessage({\n                  id: 'Usecase.input.work-type',\n                  defaultMessage: 'What type of work do you do?',\n                })}\n                // onClear={() => setRole(null)}\n                // clearLabel={formatMessage({ id: 'clearLabel', defaultMessage: 'Clear' })}\n                onChange={(value) => setRole(value)}\n                value={role}\n              >\n                {options.map(({ intlLabel, value }) => (\n                  <Option key={value} value={value}>\n                    {formatMessage(intlLabel)}\n                  </Option>\n                ))}\n              </Select>\n              {isOther && (\n                <TextInput\n                  name=\"other\"\n                  label={formatMessage({ id: 'Usecase.other', defaultMessage: 'Other' })}\n                  value={otherRole}\n                  onChange={(e) => setOtherRole(e.target.value)}\n                  data-testid=\"other\"\n                />\n              )}\n              <Button type=\"submit\" size=\"L\" fullWidth disabled={!role}>\n                {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n              </Button>\n            </Flex>\n          </form>\n        </LayoutContent>\n        <Flex justifyContent=\"center\">\n          <Box paddingTop={4}>\n            <TextButton onClick={(event) => handleSubmit(event, true)}>\n              {formatMessage({\n                id: 'Usecase.button.skip',\n                defaultMessage: 'Skip this question',\n              })}\n            </TextButton>\n          </Box>\n        </Flex>\n      </Main>\n    </UnauthenticatedLayout>\n  );\n};\n","/* eslint-disable check-file/filename-naming-convention */\n\nimport * as React from 'react';\n\nimport { LoadingIndicatorPage, MenuItem } from '@strapi/helper-plugin';\nimport { Route } from 'react-router-dom';\n\ninterface LazyCompoProps {\n  loadComponent: Required<MenuItem>['Component'];\n}\n\nconst LazyCompo = ({ loadComponent }: LazyCompoProps) => {\n  const [Compo, setCompo] = React.useState<React.ComponentType | null>(null);\n\n  React.useEffect(() => {\n    const loadCompo = async () => {\n      try {\n        const loadedCompo = await loadComponent();\n\n        // TODO the loaded component provided can currently come from a default or named export\n        // We will move the entire codebase to use named exports only\n        // Until then we support both cases with priority given to the existing default exports\n        if (typeof loadedCompo === 'function') {\n          setCompo(() => loadedCompo);\n        } else if (loadedCompo.default) {\n          setCompo(() => loadedCompo.default!);\n        }\n      } catch (err) {}\n    };\n\n    loadCompo();\n  }, [loadComponent]);\n\n  if (Compo) {\n    return <Compo />;\n  }\n\n  return <LoadingIndicatorPage />;\n};\n\nexport const createRoute = (\n  loadComponent: LazyCompoProps['loadComponent'],\n  to: MenuItem['to'],\n  exact: MenuItem['exact'] = false\n) => {\n  return (\n    <Route\n      render={() => <LazyCompo loadComponent={loadComponent} />}\n      key={to}\n      path={to}\n      exact={exact || false}\n    />\n  );\n};\n","/**\n *\n * App.js\n *\n */\n\nimport * as React from 'react';\n\nimport { SkipToContent } from '@strapi/design-system';\nimport {\n  auth,\n  LoadingIndicatorPage,\n  MenuItem,\n  TrackingProvider,\n  useAppInfo,\n  useFetchClient,\n  useNotification,\n} from '@strapi/helper-plugin';\nimport merge from 'lodash/merge';\nimport { useIntl } from 'react-intl';\nimport { useDispatch } from 'react-redux';\nimport { Route, Switch } from 'react-router-dom';\n\nimport {\n  ConfigurationProvider,\n  ConfigurationProviderProps,\n} from './components/ConfigurationProvider';\nimport { PrivateRoute } from './components/PrivateRoute';\nimport { ADMIN_PERMISSIONS_CE, ACTION_SET_ADMIN_PERMISSIONS } from './constants';\nimport { useEnterprise } from './hooks/useEnterprise';\nimport { AuthPage } from './pages/Auth/AuthPage';\nimport { NotFoundPage } from './pages/NotFoundPage';\nimport { UseCasePage } from './pages/UseCasePage';\nimport { createRoute } from './utils/createRoute';\n\ntype StrapiRoute = Pick<MenuItem, 'exact' | 'to'> & Required<Pick<MenuItem, 'Component'>>;\n\nconst ROUTES_CE: StrapiRoute[] | null = null;\n\nconst AuthenticatedApp = React.lazy(() =>\n  import('./components/AuthenticatedApp').then((mod) => ({ default: mod.AuthenticatedApp }))\n);\n\ninterface AppProps extends Omit<ConfigurationProviderProps, 'children' | 'authLogo' | 'menuLogo'> {\n  authLogo: string;\n  menuLogo: string;\n}\n\nexport const App = ({ authLogo, menuLogo, showReleaseNotification, showTutorials }: AppProps) => {\n  const adminPermissions = useEnterprise(\n    ADMIN_PERMISSIONS_CE,\n    async () => (await import('../../ee/admin/src/constants')).ADMIN_PERMISSIONS_EE,\n    {\n      combine(cePermissions, eePermissions) {\n        // the `settings` NS e.g. are deep nested objects, that need a deep merge\n        return merge({}, cePermissions, eePermissions);\n      },\n\n      defaultValue: ADMIN_PERMISSIONS_CE,\n    }\n  );\n  const routes = useEnterprise(\n    ROUTES_CE,\n    async () => (await import('../../ee/admin/src/constants')).ROUTES_EE,\n    {\n      defaultValue: [],\n    }\n  );\n  const toggleNotification = useNotification();\n  const { formatMessage } = useIntl();\n  const [\n    { isLoading, hasAdmin, uuid, deviceId, authLogo: customAuthLogo, menuLogo: customMenuLogo },\n    setState,\n  ] = React.useState<{\n    isLoading: boolean;\n    hasAdmin: boolean;\n    uuid: string | false;\n    deviceId: string | undefined;\n    authLogo?: string;\n    menuLogo?: string;\n  }>({\n    isLoading: true,\n    deviceId: undefined,\n    hasAdmin: false,\n    uuid: false,\n  });\n  const dispatch = useDispatch();\n  const appInfo = useAppInfo();\n  const { get, post } = useFetchClient();\n\n  const authRoutes = React.useMemo(() => {\n    if (!routes) {\n      return null;\n    }\n\n    return routes.map(({ to, Component, exact }) => createRoute(Component, to, exact));\n  }, [routes]);\n\n  const [telemetryProperties, setTelemetryProperties] = React.useState(undefined);\n\n  React.useEffect(() => {\n    dispatch({ type: ACTION_SET_ADMIN_PERMISSIONS, payload: adminPermissions });\n  }, [adminPermissions, dispatch]);\n\n  React.useEffect(() => {\n    const currentToken = auth.getToken();\n\n    const renewToken = async () => {\n      try {\n        const {\n          data: {\n            data: { token },\n          },\n        } = await post('/admin/renew-token', { token: currentToken });\n        auth.updateToken(token);\n      } catch (err) {\n        // Refresh app\n        auth.clearAppStorage();\n        window.location.reload();\n      }\n    };\n\n    if (currentToken) {\n      renewToken();\n    }\n  }, [post]);\n\n  React.useEffect(() => {\n    const getData = async () => {\n      try {\n        const {\n          data: {\n            data: { hasAdmin, uuid, authLogo, menuLogo },\n          },\n        } = await get(`/admin/init`);\n\n        if (uuid) {\n          const {\n            data: { data: properties },\n          } = await get(`/admin/telemetry-properties`, {\n            // NOTE: needed because the interceptors of the fetchClient redirect to /login when receive a 401 and it would end up in an infinite loop when the user doesn't have a session.\n            validateStatus: (status) => status < 500,\n          });\n\n          setTelemetryProperties(properties);\n\n          try {\n            const event = 'didInitializeAdministration';\n            post(\n              'https://analytics.strapi.io/api/v2/track',\n              {\n                // This event is anonymous\n                event,\n                userId: '',\n                deviceId,\n                eventPropeties: {},\n                userProperties: { environment: appInfo.currentEnvironment },\n                groupProperties: { ...properties, projectId: uuid },\n              },\n              {\n                headers: {\n                  'X-Strapi-Event': event,\n                },\n              }\n            );\n          } catch (e) {\n            // Silent.\n          }\n        }\n\n        setState({ isLoading: false, hasAdmin, uuid, deviceId, authLogo, menuLogo });\n      } catch (err) {\n        toggleNotification({\n          type: 'warning',\n          message: { id: 'app.containers.App.notification.error.init' },\n        });\n      }\n    };\n\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [toggleNotification]);\n\n  const trackingInfo = React.useMemo(\n    () => ({\n      uuid,\n      telemetryProperties,\n      deviceId,\n    }),\n    [uuid, telemetryProperties, deviceId]\n  );\n\n  if (isLoading) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <React.Suspense fallback={<LoadingIndicatorPage />}>\n      <SkipToContent>\n        {formatMessage({ id: 'skipToContent', defaultMessage: 'Skip to content' })}\n      </SkipToContent>\n      <ConfigurationProvider\n        authLogo={{\n          default: authLogo,\n          custom: {\n            url: customAuthLogo,\n          },\n        }}\n        menuLogo={{\n          default: menuLogo,\n          custom: {\n            url: customMenuLogo,\n          },\n        }}\n        showReleaseNotification={showReleaseNotification}\n        showTutorials={showTutorials}\n      >\n        <TrackingProvider value={trackingInfo}>\n          <Switch>\n            {authRoutes}\n            <Route\n              path=\"/auth/:authType\"\n              render={(routerProps) => <AuthPage {...routerProps} hasAdmin={hasAdmin} />}\n              exact\n            />\n            <PrivateRoute path=\"/usecase\" component={UseCasePage} />\n            <PrivateRoute path=\"/\" component={AuthenticatedApp} />\n            <Route path=\"\" component={NotFoundPage} />\n          </Switch>\n        </TrackingProvider>\n      </ConfigurationProvider>\n    </React.Suspense>\n  );\n};\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIgdmlld0JveD0iMCAwIDgwMCA4MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMzkgMjgyYzAtMTE4IDAtMTc2LjkgMzYuNi0yMTMuNUMxMTIuMiAzMiAxNzEuMSAzMiAyODguOSAzMmgyMjEuMmMxMTcuOCAwIDE3Ni43IDAgMjEzLjMgMzYuNkM3NjAgMTA1LjIgNzYwIDE2NC4xIDc2MCAyODEuOXYyMjEuMmMwIDExNy44IDAgMTc2LjctMzYuNiAyMTMuM0M2ODYuOCA3NTMgNjI3LjkgNzUzIDUxMC4xIDc1M0gyODguOWMtMTE3LjggMC0xNzYuNyAwLTIxMy4zLTM2LjZDMzkgNjc5LjggMzkgNjIwLjkgMzkgNTAzLjFWMjgxLjlaIiBmaWxsPSIjNDk0NUZGIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUzNi40IDI1MC43SDI5My43djEyMy44aDEyMy44djEyMy43aDEyMy44VjI1NS41YzAtMi42LTIuMi00LjgtNC45LTQuOFoiIGZpbGw9IiNmZmYiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00MTIuNyAzNzQuNWg0Ljh2NC44aC00Ljh6Ii8+CiAgICA8cGF0aCBkPSJNMjkzLjggMzc0LjVoMTE5YzIuNiAwIDQuOCAyLjEgNC44IDQuOHYxMTloLTExOWE0LjggNC44IDAgMCAxLTQuOC00Ljl2LTExOVoiIGZpbGw9IiM5NTkzRkYiLz4KICAgIDxwYXRoIGQ9Ik00MTcuNSA0OTguMmgxMjMuOEw0MjEuNiA2MThhMi40IDIuNCAwIDAgMS00LTEuN3YtMTE4Wk0yOTMuOCAzNzQuNWgtMTE4YTIuNCAyLjQgMCAwIDEtMS43LTQuMWwxMTkuNy0xMTkuN3YxMjMuOFoiIGZpbGw9IiM5NTkzRkYiLz4KPC9zdmc+Cg==\"","import { createContext } from '@radix-ui/react-context';\n\nimport type { StrapiApp } from '../StrapiApp';\ninterface AdminContextValue {\n  getAdminInjectedComponents: StrapiApp['getAdminInjectedComponents'];\n}\n\nconst [AdminContextProvider, useAdminContext] = createContext<AdminContextValue>('AdminContext');\n\nconst useAdmin = () => useAdminContext('useAdmin');\n\nexport { AdminContextProvider, useAdmin };\nexport type { AdminContextValue };\n","import * as React from 'react';\n\nimport {\n  GuidedTourContextValue,\n  GuidedTourProvider as GuidedTourProviderComponent,\n  GuidedTourSectionKey,\n  GuidedTourStep,\n  GuidedTourStepKey,\n  auth,\n} from '@strapi/helper-plugin';\nimport produce from 'immer';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n\n/* -------------------------------------------------------------------------------------------------\n * GuidedTourProvider\n * -----------------------------------------------------------------------------------------------*/\n\ninterface GuidedTourProviderProps {\n  children: React.ReactNode;\n}\n\nconst GuidedTourProvider = ({ children }: GuidedTourProviderProps) => {\n  const [{ currentStep, guidedTourState, isGuidedTourVisible, isSkipped }, dispatch] =\n    React.useReducer(reducer, initialState, initialiseState);\n\n  const setCurrentStep = (step: SetCurrentStepAction['step']) => {\n    // if step is null it is intentional, we need to dispatch it\n    if (step !== null) {\n      const isStepAlreadyDone = get(guidedTourState, step);\n      const [sectionName, stepName] = step.split('.') as [GuidedTourSectionKey, GuidedTourStepKey];\n      const sectionArray = Object.entries(guidedTourState[sectionName]);\n\n      const currentStepIndex = sectionArray.findIndex(([key]) => key === stepName);\n      const previousSteps = sectionArray.slice(0, currentStepIndex);\n\n      const isStepToShow = previousSteps.every(([, sectionValue]) => sectionValue);\n\n      if (isStepAlreadyDone || isSkipped || !isStepToShow) {\n        return null;\n      }\n    }\n\n    auth.set(null, 'GUIDED_TOUR_CURRENT_STEP', true);\n\n    return dispatch({\n      type: 'SET_CURRENT_STEP',\n      step,\n    });\n  };\n\n  const setGuidedTourVisibility = (value: SetGuidedTourVisibilityAction['value']) => {\n    dispatch({\n      type: 'SET_GUIDED_TOUR_VISIBILITY',\n      value,\n    });\n  };\n\n  const setStepState = (currentStep: GuidedTourStep, value: SetStepStateAction['value']) => {\n    addCompletedStep(currentStep);\n\n    dispatch({\n      type: 'SET_STEP_STATE',\n      currentStep,\n      value,\n    });\n  };\n\n  const startSection = (sectionName: GuidedTourSectionKey) => {\n    const sectionSteps = guidedTourState[sectionName];\n\n    if (sectionSteps) {\n      const guidedTourArray = Object.entries(guidedTourState);\n\n      // Find current section position in the guidedTourArray\n      // Get only previous sections based on current section position\n      const currentSectionIndex = guidedTourArray.findIndex(([key]) => key === sectionName);\n      const previousSections = guidedTourArray.slice(0, currentSectionIndex);\n\n      // Check if every steps from previous section are done\n      const isSectionToShow = previousSections.every(([, sectionValue]) =>\n        Object.values(sectionValue).every(Boolean)\n      );\n\n      const [firstStep] = Object.keys(sectionSteps) as [GuidedTourStepKey];\n      const isFirstStepDone = sectionSteps[firstStep];\n\n      if (isSectionToShow && !currentStep && !isFirstStepDone) {\n        setCurrentStep(`${sectionName}.${firstStep}`);\n      }\n    }\n  };\n\n  const setSkipped = (value: SetSkippedAction['value']) => {\n    auth.set(value, 'GUIDED_TOUR_SKIPPED', true);\n\n    dispatch({\n      type: 'SET_SKIPPED',\n      value,\n    });\n  };\n\n  return (\n    <GuidedTourProviderComponent\n      guidedTourState={guidedTourState}\n      currentStep={currentStep}\n      setCurrentStep={setCurrentStep}\n      setGuidedTourVisibility={setGuidedTourVisibility}\n      setSkipped={setSkipped}\n      setStepState={setStepState}\n      startSection={startSection}\n      isGuidedTourVisible={isGuidedTourVisible}\n      isSkipped={isSkipped}\n    >\n      {children}\n    </GuidedTourProviderComponent>\n  );\n};\n\ntype State = Pick<\n  GuidedTourContextValue,\n  'guidedTourState' | 'currentStep' | 'isGuidedTourVisible' | 'isSkipped'\n>;\n\nconst initialState = {\n  currentStep: null,\n  guidedTourState: {\n    contentTypeBuilder: {\n      create: false,\n      success: false,\n    },\n    contentManager: {\n      create: false,\n      success: false,\n    },\n    apiTokens: {\n      create: false,\n      success: false,\n    },\n    transferTokens: {\n      create: false,\n      success: false,\n    },\n  },\n  isGuidedTourVisible: false,\n  isSkipped: false,\n} satisfies State;\n\ninterface SetCurrentStepAction {\n  type: 'SET_CURRENT_STEP';\n  step: GuidedTourStep | null;\n}\n\ninterface SetStepStateAction {\n  type: 'SET_STEP_STATE';\n  currentStep: GuidedTourStep;\n  value: boolean;\n}\n\ninterface SetSkippedAction {\n  type: 'SET_SKIPPED';\n  value: boolean;\n}\n\ninterface SetGuidedTourVisibilityAction {\n  type: 'SET_GUIDED_TOUR_VISIBILITY';\n  value: boolean;\n}\n\ntype Action =\n  | SetCurrentStepAction\n  | SetStepStateAction\n  | SetSkippedAction\n  | SetGuidedTourVisibilityAction;\n\nconst reducer: React.Reducer<State, Action> = (state: State = initialState, action: Action) =>\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case 'SET_CURRENT_STEP': {\n        draftState.currentStep = action.step;\n        break;\n      }\n      case 'SET_STEP_STATE': {\n        const [section, step] = action.currentStep.split('.') as [\n          GuidedTourSectionKey,\n          GuidedTourStepKey\n        ];\n        draftState.guidedTourState[section][step] = action.value;\n        break;\n      }\n      case 'SET_SKIPPED': {\n        draftState.isSkipped = action.value;\n        break;\n      }\n      case 'SET_GUIDED_TOUR_VISIBILITY': {\n        draftState.isGuidedTourVisible = action.value;\n        break;\n      }\n      default: {\n        return draftState;\n      }\n    }\n  });\n\nconst initialiseState = (initialState: State) => {\n  const copyInitialState = { ...initialState };\n  const guidedTourLocaleStorage = auth.get('GUIDED_TOUR_COMPLETED_STEPS');\n  const currentStepLocaleStorage = auth.get('GUIDED_TOUR_CURRENT_STEP');\n  const skippedLocaleStorage = auth.get('GUIDED_TOUR_SKIPPED');\n\n  if (Array.isArray(guidedTourLocaleStorage)) {\n    guidedTourLocaleStorage.forEach((step) => {\n      const [sectionName, stepName] = step.split('.');\n      set(copyInitialState, ['guidedTourState', sectionName, stepName], true);\n    });\n  }\n\n  // if current step when initializing mark it as done\n  if (currentStepLocaleStorage) {\n    const [sectionName, stepName] = currentStepLocaleStorage.split('.') as [\n      GuidedTourSectionKey,\n      GuidedTourStepKey\n    ];\n    set(copyInitialState, ['guidedTourState', sectionName, stepName], true);\n\n    addCompletedStep(currentStepLocaleStorage as GuidedTourStep);\n\n    auth.set(null, 'GUIDED_TOUR_CURRENT_STEP', true);\n  }\n\n  if (skippedLocaleStorage !== null) {\n    set(copyInitialState, 'isSkipped', skippedLocaleStorage);\n  }\n\n  return copyInitialState;\n};\n\n/**\n * @description Add a completed step to the local storage if it does not already exist.\n */\nconst addCompletedStep = (completedStep: GuidedTourStep) => {\n  const currentSteps = auth.get('GUIDED_TOUR_COMPLETED_STEPS') ?? [];\n\n  if (!Array.isArray(currentSteps)) {\n    return;\n  }\n\n  const isAlreadyStored = currentSteps.includes(completedStep);\n\n  if (isAlreadyStored) {\n    return;\n  }\n\n  auth.set([...currentSteps, completedStep], 'GUIDED_TOUR_COMPLETED_STEPS', true);\n};\n\nexport { GuidedTourProvider };\n","import { createContext } from '@radix-ui/react-context';\nimport { DefaultTheme } from 'styled-components';\n\ntype ThemeName = 'light' | 'dark' | 'system';\ntype NonSystemThemeName = Exclude<ThemeName, 'system'>;\n\ninterface ThemeToggleContextContextValue {\n  currentTheme?: ThemeName;\n  onChangeTheme?: (nextTheme: ThemeName) => void;\n  themes?: {\n    dark: DefaultTheme;\n    light: DefaultTheme;\n  };\n  systemTheme?: NonSystemThemeName;\n}\n\nconst [ThemeToggleContextProvider, useThemeToggleContext] =\n  createContext<ThemeToggleContextContextValue>('ThemeToggleContext');\n\nconst useThemeToggle = () => useThemeToggleContext('useThemeToggle');\n\nexport { ThemeToggleContextProvider, useThemeToggle };\nexport type { ThemeName, NonSystemThemeName, ThemeToggleContextContextValue };\n","import * as React from 'react';\n\nimport { DesignSystemProvider } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { createGlobalStyle } from 'styled-components';\n\nimport { useThemeToggle } from '../contexts/themeToggle';\n\ninterface ThemeProps {\n  children: React.ReactNode;\n}\n\nconst Theme = ({ children }: ThemeProps) => {\n  const { currentTheme, themes, systemTheme } = useThemeToggle();\n  const { locale } = useIntl();\n\n  const computedThemeName = currentTheme === 'system' ? systemTheme : currentTheme;\n\n  return (\n    <DesignSystemProvider\n      locale={locale}\n      /**\n       * TODO: could we make this neater i.e. by setting up the context to throw\n       * if it can't find it, that way the type is always fully defined and we're\n       * not checking it all the time...\n       */\n      theme={themes?.[computedThemeName || 'light']}\n    >\n      {children}\n      <GlobalStyle />\n    </DesignSystemProvider>\n  );\n};\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background: ${({ theme }) => theme.colors.neutral100};\n  }\n`;\n\nexport { Theme };\n","import * as React from 'react';\n\nimport { DefaultTheme } from 'styled-components';\n\nimport { ThemeToggleContextProvider, ThemeName, NonSystemThemeName } from '../contexts/themeToggle';\n\nconst THEME_KEY = 'STRAPI_THEME';\n\nconst getDefaultTheme = () => {\n  const persistedTheme = localStorage.getItem(THEME_KEY) as ThemeName | null;\n\n  return persistedTheme || 'system';\n};\n\ninterface ThemeToggleProviderProps {\n  children: React.ReactNode;\n  themes: {\n    light: DefaultTheme;\n    dark: DefaultTheme;\n  };\n}\n\nconst ThemeToggleProvider = ({ children, themes }: ThemeToggleProviderProps) => {\n  const [currentTheme, setCurrentTheme] = React.useState<ThemeName>(getDefaultTheme());\n  const [systemTheme, setSystemTheme] = React.useState<NonSystemThemeName>();\n\n  const handleChangeTheme = React.useCallback(\n    (nextTheme: ThemeName) => {\n      setCurrentTheme(nextTheme);\n      localStorage.setItem(THEME_KEY, nextTheme);\n    },\n    [setCurrentTheme]\n  );\n\n  // Listen to changes in the system theme\n  React.useEffect(() => {\n    const themeWatcher = window.matchMedia('(prefers-color-scheme: dark)');\n    setSystemTheme(themeWatcher.matches ? 'dark' : 'light');\n\n    const listener = (event: MediaQueryListEvent) => {\n      setSystemTheme(event.matches ? 'dark' : 'light');\n    };\n    themeWatcher.addEventListener('change', listener);\n\n    // Remove listener on cleanup\n    return () => {\n      themeWatcher.removeEventListener('change', listener);\n    };\n  }, []);\n\n  return (\n    <ThemeToggleContextProvider\n      currentTheme={currentTheme}\n      onChangeTheme={handleChangeTheme}\n      themes={themes}\n      systemTheme={systemTheme}\n    >\n      {children}\n    </ThemeToggleContextProvider>\n  );\n};\n\nexport { ThemeToggleProvider };\nexport type { ThemeToggleProviderProps };\n","import * as React from 'react';\n\nimport {\n  AutoReloadOverlayBlockerProvider,\n  CustomFieldsProvider,\n  CustomFieldsProviderProps,\n  LibraryProvider,\n  LibraryProviderProps,\n  NotificationsProvider,\n  OverlayBlockerProvider,\n  StrapiAppProvider,\n  StrapiAppProviderProps,\n} from '@strapi/helper-plugin';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider } from 'react-redux';\n\nimport { AdminContextProvider, AdminContextValue } from '../contexts/admin';\n\nimport { GuidedTourProvider } from './GuidedTour/Provider';\nimport { LanguageProvider, LanguageProviderProps } from './LanguageProvider';\nimport { Theme } from './Theme';\nimport { ThemeToggleProvider, ThemeToggleProviderProps } from './ThemeToggleProvider';\n\nimport type { Store } from '../core/store/configure';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\ninterface ProvidersProps\n  extends Pick<ThemeToggleProviderProps, 'themes'>,\n    Pick<LanguageProviderProps, 'messages' | 'localeNames'>,\n    Pick<AdminContextValue, 'getAdminInjectedComponents'>,\n    Pick<CustomFieldsProviderProps, 'customFields'>,\n    Pick<LibraryProviderProps, 'components' | 'fields'>,\n    Pick<\n      StrapiAppProviderProps,\n      | 'getPlugin'\n      | 'menu'\n      | 'plugins'\n      | 'runHookParallel'\n      | 'runHookSeries'\n      | 'runHookWaterfall'\n      | 'settings'\n    > {\n  children: React.ReactNode;\n  store: Store;\n}\n\nconst Providers = ({\n  children,\n  components,\n  customFields,\n  fields,\n  getAdminInjectedComponents,\n  getPlugin,\n  localeNames,\n  menu,\n  messages,\n  plugins,\n  runHookParallel,\n  runHookSeries,\n  runHookWaterfall,\n  settings,\n  store,\n  themes,\n}: ProvidersProps) => {\n  return (\n    <LanguageProvider messages={messages} localeNames={localeNames}>\n      <ThemeToggleProvider themes={themes}>\n        <Theme>\n          <QueryClientProvider client={queryClient}>\n            <Provider store={store}>\n              <AdminContextProvider getAdminInjectedComponents={getAdminInjectedComponents}>\n                <StrapiAppProvider\n                  getPlugin={getPlugin}\n                  menu={menu}\n                  plugins={plugins}\n                  runHookParallel={runHookParallel}\n                  runHookWaterfall={runHookWaterfall}\n                  runHookSeries={runHookSeries}\n                  settings={settings}\n                >\n                  <LibraryProvider components={components} fields={fields}>\n                    <CustomFieldsProvider customFields={customFields}>\n                      <AutoReloadOverlayBlockerProvider>\n                        <OverlayBlockerProvider>\n                          <GuidedTourProvider>\n                            <NotificationsProvider>{children}</NotificationsProvider>\n                          </GuidedTourProvider>\n                        </OverlayBlockerProvider>\n                      </AutoReloadOverlayBlockerProvider>\n                    </CustomFieldsProvider>\n                  </LibraryProvider>\n                </StrapiAppProvider>\n              </AdminContextProvider>\n            </Provider>\n          </QueryClientProvider>\n        </Theme>\n      </ThemeToggleProvider>\n    </LanguageProvider>\n  );\n};\n\nexport { Providers };\n","/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport invariant from 'invariant';\n\nexport interface Component {\n  name: string;\n  Component: React.ComponentType;\n}\n\nexport class Components {\n  components: Record<Component['name'], Component['Component']>;\n\n  constructor() {\n    this.components = {};\n  }\n\n  add(component: Component) {\n    const { name, Component } = component;\n\n    invariant(Component, 'A Component must be provided');\n    invariant(name, 'A name must be provided');\n    invariant(this.components[name] === undefined, 'A similar field already exists');\n\n    this.components[name] = Component;\n  }\n}\n","/* eslint-disable check-file/filename-naming-convention */\nimport invariant from 'invariant';\n\nimport type {\n  CustomField,\n  CustomFieldOption,\n  CustomFieldOptionSection,\n  CustomFieldUID,\n} from '@strapi/helper-plugin';\n\nconst ALLOWED_TYPES = [\n  'biginteger',\n  'boolean',\n  'date',\n  'datetime',\n  'decimal',\n  'email',\n  'enumeration',\n  'float',\n  'integer',\n  'json',\n  'password',\n  'richtext',\n  'string',\n  'text',\n  'time',\n  'uid',\n] as const;\n\nconst ALLOWED_ROOT_LEVEL_OPTIONS = [\n  'min',\n  'minLength',\n  'max',\n  'maxLength',\n  'required',\n  'regex',\n  'enum',\n  'unique',\n  'private',\n  'default',\n] as const;\n\nexport class CustomFields {\n  customFields: Record<string, CustomField>;\n\n  constructor() {\n    this.customFields = {};\n  }\n\n  register(customFields: CustomField | CustomField[]) {\n    if (Array.isArray(customFields)) {\n      // If several custom fields are passed, register them one by one\n      customFields.forEach((customField) => {\n        this.register(customField);\n      });\n    } else {\n      // Handle individual custom field\n      const { name, pluginId, type, intlLabel, intlDescription, components, options } =\n        customFields;\n\n      // Ensure required attributes are provided\n      invariant(name, 'A name must be provided');\n      invariant(type, 'A type must be provided');\n      invariant(intlLabel, 'An intlLabel must be provided');\n      invariant(intlDescription, 'An intlDescription must be provided');\n      invariant(components, 'A components object must be provided');\n      invariant(components.Input, 'An Input component must be provided');\n\n      // Ensure the type is valid\n      invariant(\n        ALLOWED_TYPES.includes(type),\n        `Custom field type: '${type}' is not a valid Strapi type or it can't be used with a Custom Field`\n      );\n\n      // Ensure name has no special characters\n      const isValidObjectKey = /^(?![0-9])[a-zA-Z0-9$_-]+$/g;\n      invariant(\n        isValidObjectKey.test(name),\n        `Custom field name: '${name}' is not a valid object key`\n      );\n\n      // Ensure options have valid name paths\n      const allFormOptions = [...(options?.base || []), ...(options?.advanced || [])];\n\n      if (allFormOptions.length) {\n        const optionPathValidations = allFormOptions.reduce(optionsValidationReducer, []);\n\n        optionPathValidations.forEach(({ isValidOptionPath, errorMessage }) => {\n          invariant(isValidOptionPath, errorMessage);\n        });\n      }\n\n      // When no plugin is specified, default to the global namespace\n      const uid: CustomFieldUID = pluginId ? `plugin::${pluginId}.${name}` : `global::${name}`;\n\n      // Ensure the uid is unique\n      const uidAlreadyUsed = Object.prototype.hasOwnProperty.call(this.customFields, uid);\n      invariant(!uidAlreadyUsed, `Custom field: '${uid}' has already been registered`);\n\n      this.customFields[uid] = customFields;\n    }\n  }\n\n  getAll() {\n    return this.customFields;\n  }\n\n  get(uid: string): CustomField | undefined {\n    return this.customFields[uid];\n  }\n}\n\ninterface OptionValidation {\n  isValidOptionPath: boolean;\n  errorMessage: string;\n}\n\nconst optionsValidationReducer = (\n  acc: OptionValidation[],\n  option: CustomFieldOptionSection | CustomFieldOption\n): OptionValidation[] => {\n  if ('items' in option) {\n    return option.items.reduce(optionsValidationReducer, acc);\n  }\n\n  if (!option.name) {\n    acc.push({\n      isValidOptionPath: false,\n      errorMessage: \"The 'name' property is required on an options object\",\n    });\n  } else {\n    acc.push({\n      isValidOptionPath:\n        option.name.startsWith('options') || ALLOWED_ROOT_LEVEL_OPTIONS.includes(option.name),\n      errorMessage: `'${option.name}' must be prefixed with 'options.'`,\n    });\n  }\n\n  return acc;\n};\n","/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport invariant from 'invariant';\n\nexport interface Field {\n  type: string;\n  Component: React.ComponentType;\n}\n\nexport class Fields {\n  fields: Record<Field['type'], Field['Component']>;\n\n  constructor() {\n    this.fields = {};\n  }\n\n  add(field: Field) {\n    const { type, Component } = field;\n\n    invariant(Component, 'A Component must be provided');\n    invariant(type, 'A type must be provided');\n\n    this.fields[type] = Component;\n  }\n}\n","/* eslint-disable check-file/filename-naming-convention */\nimport { Middleware } from '@reduxjs/toolkit';\n\nimport { RootState } from '../store/configure';\n\ntype TypedMiddleware = () => Middleware<object, RootState>;\n\nclass Middlewares {\n  middlewares: Array<TypedMiddleware>;\n\n  constructor() {\n    this.middlewares = [];\n  }\n\n  add(middleware: TypedMiddleware) {\n    this.middlewares.push(middleware);\n  }\n}\n\nexport { Middlewares, TypedMiddleware as Middleware };\n","/* eslint-disable check-file/filename-naming-convention */\nimport { Plugin as IPlugin } from '@strapi/helper-plugin';\n\nexport interface PluginConfig\n  extends Pick<IPlugin, 'apis' | 'initializer' | 'injectionZones' | 'isReady' | 'name'> {\n  id: string;\n}\n\nexport class Plugin implements IPlugin {\n  apis: PluginConfig['apis'];\n  initializer: PluginConfig['initializer'];\n  injectionZones: PluginConfig['injectionZones'];\n  isReady: PluginConfig['isReady'];\n  name: PluginConfig['name'];\n  pluginId: PluginConfig['id'];\n\n  constructor(pluginConf: PluginConfig) {\n    this.apis = pluginConf.apis || {};\n    this.initializer = pluginConf.initializer || null;\n    this.injectionZones = pluginConf.injectionZones || {};\n    this.isReady = pluginConf.isReady !== undefined ? pluginConf.isReady : true;\n    this.name = pluginConf.name;\n    this.pluginId = pluginConf.id;\n  }\n\n  getInjectedComponents(containerName: string, blockName: string) {\n    try {\n      return this.injectionZones[containerName][blockName] || [];\n    } catch (err) {\n      console.error('Cannot get injected component', err);\n\n      return [];\n    }\n  }\n\n  injectComponent(\n    containerName: string,\n    blockName: string,\n    component: ReturnType<IPlugin['getInjectedComponents']>[number]\n  ) {\n    try {\n      this.injectionZones[containerName][blockName].push(component);\n    } catch (err) {\n      console.error('Cannot inject component', err);\n    }\n  }\n}\n","/* eslint-disable check-file/filename-naming-convention */\n\nimport { Reducer, ReducersMapObject } from '@reduxjs/toolkit';\n\ninterface ReducerConstructorArgs {\n  appReducers?: ReducersMapObject;\n}\n\nexport class Reducers {\n  reducers: ReducersMapObject;\n\n  constructor({ appReducers = {} }: ReducerConstructorArgs = {}) {\n    this.reducers = { ...appReducers };\n  }\n\n  add(reducerName: string, reducer: Reducer) {\n    this.reducers[reducerName] = reducer;\n  }\n}\n","import { createSelector, Selector } from '@reduxjs/toolkit';\nimport { useDispatch, useStore, TypedUseSelectorHook, useSelector } from 'react-redux';\n\nimport type { RootState, Store } from './configure';\n\ntype AppDispatch = Store['dispatch'];\n\nconst useTypedDispatch: () => AppDispatch = useDispatch;\nconst useTypedStore = useStore as () => Store;\nconst useTypedSelector: TypedUseSelectorHook<RootState> = useSelector;\n\nconst createTypedSelector = <TResult>(selector: Selector<RootState, TResult>) =>\n  createSelector((state: RootState) => state, selector);\n\nexport { useTypedDispatch, useTypedStore, useTypedSelector, createTypedSelector };\n","import * as React from 'react';\n\nimport {\n  LoadingIndicatorPage,\n  Permission,\n  RBACContext,\n  RBACContextValue,\n} from '@strapi/helper-plugin';\nimport produce from 'immer';\n\nimport { useTypedSelector, useTypedDispatch } from '../core/store/hooks';\n\n/* -------------------------------------------------------------------------------------------------\n * RBACProvider\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RBACProviderProps {\n  children: React.ReactNode;\n  permissions: Permission[];\n  refetchPermissions: RBACContextValue['refetchPermissions'];\n}\n\nconst RBACProvider = ({ children, permissions, refetchPermissions }: RBACProviderProps) => {\n  const allPermissions = useTypedSelector((state) => state.rbacProvider.allPermissions);\n\n  const dispatch = useTypedDispatch();\n\n  React.useEffect(() => {\n    dispatch(setPermissionsAction(permissions));\n\n    return () => {\n      dispatch(resetStoreAction());\n    };\n  }, [permissions, dispatch]);\n\n  if (!allPermissions) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <RBACContext.Provider value={{ allPermissions, refetchPermissions }}>\n      {children}\n    </RBACContext.Provider>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * RBACReducer\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RBACState {\n  allPermissions: null | Permission[];\n  collectionTypesRelatedPermissions: Record<string, Record<string, Permission[]>>;\n}\n\nconst initialState = {\n  allPermissions: null,\n  collectionTypesRelatedPermissions: {},\n};\n\nconst RESET_STORE = 'StrapiAdmin/RBACProvider/RESET_STORE';\nconst SET_PERMISSIONS = 'StrapiAdmin/RBACProvider/SET_PERMISSIONS';\n\ninterface ResetStoreAction {\n  type: typeof RESET_STORE;\n}\n\nconst resetStoreAction = (): ResetStoreAction => ({ type: RESET_STORE });\n\ninterface SetPermissionsAction {\n  type: typeof SET_PERMISSIONS;\n  permissions: Permission[];\n}\n\nconst setPermissionsAction = (\n  permissions: SetPermissionsAction['permissions']\n): SetPermissionsAction => ({\n  type: SET_PERMISSIONS,\n  permissions,\n});\n\ntype Actions = ResetStoreAction | SetPermissionsAction;\n\nconst RBACReducer = (state: RBACState = initialState, action: Actions) =>\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case SET_PERMISSIONS: {\n        draftState.allPermissions = action.permissions;\n        draftState.collectionTypesRelatedPermissions = action.permissions\n          .filter((perm) => perm.subject)\n          .reduce<Record<string, Record<string, Permission[]>>>((acc, current) => {\n            const { subject, action } = current;\n\n            if (!subject) return acc;\n\n            if (!acc[subject]) {\n              acc[subject] = {};\n            }\n\n            acc[subject] = acc[subject][action]\n              ? { ...acc[subject], [action]: [...acc[subject][action], current] }\n              : { ...acc[subject], [action]: [current] };\n\n            return acc;\n          }, {});\n        break;\n      }\n      case RESET_STORE: {\n        return initialState;\n      }\n      default:\n        return state;\n    }\n  });\n\nexport { RBACProvider, RBACReducer, resetStoreAction, setPermissionsAction };\nexport type {\n  RBACState,\n  Actions,\n  RBACProviderProps,\n  ResetStoreAction,\n  SetPermissionsAction,\n  Permission,\n};\n","import { useEffect } from 'react';\n\nimport { Permission } from '@strapi/helper-plugin';\nimport produce from 'immer';\n\nimport { useTypedDispatch, useTypedSelector } from '../../core/store/hooks';\n\nimport type { RBACState } from '../../components/RBACProvider';\n\n/* -------------------------------------------------------------------------------------------------\n * useSyncRbac\n * -----------------------------------------------------------------------------------------------*/\n\nconst useSyncRbac = (\n  query: { plugins?: object },\n  collectionTypeUID: string,\n  containerName = 'listView'\n): {\n  isValid: boolean;\n  permissions: Permission[] | null;\n} => {\n  const dispatch = useTypedDispatch();\n\n  const collectionTypesRelatedPermissions = useTypedSelector(\n    (state) => state.rbacProvider.collectionTypesRelatedPermissions\n  );\n  const permissions = useTypedSelector((state) => state['content-manager_rbacManager'].permissions);\n\n  const relatedPermissions = collectionTypesRelatedPermissions[collectionTypeUID];\n\n  useEffect(() => {\n    if (relatedPermissions) {\n      dispatch({\n        type: SET_PERMISSIONS,\n        permissions: relatedPermissions,\n        __meta__: {\n          plugins: query ? query.plugins : null,\n          containerName,\n        },\n      });\n\n      return () => {\n        dispatch({ type: RESET_PERMISSIONS });\n      };\n    }\n\n    return () => {};\n  }, [relatedPermissions, dispatch, query, containerName]);\n\n  // Check if the permissions are related to the current collectionTypeUID\n  const isPermissionMismatch =\n    permissions?.some((permission) => permission.subject !== collectionTypeUID) ?? true;\n\n  return {\n    isValid: Boolean(permissions) && !isPermissionMismatch,\n    permissions,\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Reducer\n * -----------------------------------------------------------------------------------------------*/\n\ninterface SyncRbacState {\n  permissions: RBACState['collectionTypesRelatedPermissions'][string][string] | null;\n}\n\nconst initialState = {\n  permissions: null,\n} satisfies SyncRbacState;\n\nconst SET_PERMISSIONS = 'ContentManager/RBACManager/SET_PERMISSIONS';\nconst RESET_PERMISSIONS = 'ContentManager/RBACManager/RESET_PERMISSIONS';\n\ninterface SetPermissionsAction {\n  type: typeof SET_PERMISSIONS;\n  permissions: RBACState['collectionTypesRelatedPermissions'][string];\n  __meta__?: {\n    plugins: object;\n    containerName: string;\n  };\n}\n\ninterface ResetPermissionsAction {\n  type: typeof RESET_PERMISSIONS;\n}\n\ntype Action = SetPermissionsAction | ResetPermissionsAction;\n\nconst reducer = (state: SyncRbacState = initialState, action: Action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case SET_PERMISSIONS: {\n        draftState.permissions = Object.entries(action.permissions).reduce<\n          NonNullable<SyncRbacState['permissions']>\n        >((acc, current) => {\n          return [...acc, ...current[1]];\n        }, []);\n        break;\n      }\n      case RESET_PERMISSIONS: {\n        draftState.permissions = null;\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport { useSyncRbac, reducer };\nexport type { SyncRbacState, RBACState };\n","import * as React from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport { DragLayerMonitor, XYCoord, useDragLayer } from 'react-dnd';\n\nfunction getStyle(\n  initialOffset: XYCoord | null,\n  currentOffset: XYCoord | null,\n  mouseOffset: XYCoord | null\n) {\n  if (!initialOffset || !currentOffset || !mouseOffset) {\n    return { display: 'none' };\n  }\n\n  const { x, y } = mouseOffset;\n\n  return {\n    transform: `translate(${x}px, ${y}px)`,\n  };\n}\n\nexport interface DragLayerProps {\n  renderItem: (item: {\n    /**\n     * TODO: it'd be great if we could make this a union where the type infers the item.\n     */\n    item: any;\n    type: ReturnType<DragLayerMonitor['getItemType']>;\n  }) => React.ReactNode;\n}\n\nconst DragLayer = ({ renderItem }: DragLayerProps) => {\n  const { itemType, isDragging, item, initialOffset, currentOffset, mouseOffset } = useDragLayer(\n    (monitor) => ({\n      item: monitor.getItem(),\n      itemType: monitor.getItemType(),\n      initialOffset: monitor.getInitialSourceClientOffset(),\n      currentOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging(),\n      mouseOffset: monitor.getClientOffset(),\n    })\n  );\n\n  if (!isDragging) {\n    return null;\n  }\n\n  return (\n    <Box\n      height=\"100%\"\n      left={0}\n      position=\"fixed\"\n      pointerEvents=\"none\"\n      top={0}\n      zIndex={100}\n      width=\"100%\"\n    >\n      <Box style={getStyle(initialOffset, currentOffset, mouseOffset)}>\n        {renderItem({ type: itemType, item })}\n      </Box>\n    </Box>\n  );\n};\n\nexport { DragLayer };\n","import { Flex, Typography } from '@strapi/design-system';\nimport { pxToRem } from '@strapi/helper-plugin';\nimport { Cross, Drag, Pencil } from '@strapi/icons';\nimport styled from 'styled-components';\n\ninterface CardDragPreviewProps {\n  labelField: string;\n  isSibling?: boolean;\n}\n\nconst CardDragPreview = ({ labelField, isSibling = false }: CardDragPreviewProps) => {\n  return (\n    <FieldContainer\n      background={isSibling ? 'neutral100' : 'primary100'}\n      display=\"inline-flex\"\n      gap={3}\n      hasRadius\n      justifyContent=\"space-between\"\n      isSibling={isSibling}\n      max-height={pxToRem(32)}\n      maxWidth=\"min-content\"\n    >\n      <Flex gap={3}>\n        <DragButton alignItems=\"center\" cursor=\"all-scroll\" padding={3}>\n          <Drag />\n        </DragButton>\n\n        <TypographyMaxWidth\n          textColor={isSibling ? undefined : 'primary600'}\n          fontWeight=\"bold\"\n          ellipsis\n        >\n          {labelField}\n        </TypographyMaxWidth>\n      </Flex>\n\n      <Flex>\n        <ActionBox alignItems=\"center\">\n          <Pencil />\n        </ActionBox>\n\n        <ActionBox alignItems=\"center\">\n          <Cross />\n        </ActionBox>\n      </Flex>\n    </FieldContainer>\n  );\n};\n\nconst ActionBox = styled(Flex)`\n  height: ${({ theme }) => theme.spaces[7]};\n\n  &:last-child {\n    padding: 0 ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nconst DragButton = styled(ActionBox)`\n  border-right: 1px solid ${({ theme }) => theme.colors.primary200};\n\n  svg {\n    width: ${12 / 16}rem;\n    height: ${12 / 16}rem;\n  }\n`;\n\nconst FieldContainer = styled(Flex)<{ isSibling: boolean }>`\n  border: 1px solid\n    ${({ theme, isSibling }) => (isSibling ? theme.colors.neutral150 : theme.colors.primary200)};\n\n  svg {\n    width: ${10 / 16}rem;\n    height: ${10 / 16}rem;\n\n    path {\n      fill: ${({ theme, isSibling }) => (isSibling ? undefined : theme.colors.primary600)};\n    }\n  }\n`;\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: ${72 / 16}rem;\n`;\n\nexport { CardDragPreview };\nexport type { CardDragPreviewProps };\n","import { Flex, IconButton, Typography } from '@strapi/design-system';\nimport { pxToRem } from '@strapi/helper-plugin';\nimport { CarretDown, Drag, Trash } from '@strapi/icons';\nimport styled from 'styled-components';\n\ninterface ComponentDragPreviewProps {\n  displayedValue: string;\n}\n\nconst ComponentDragPreview = ({ displayedValue }: ComponentDragPreviewProps) => {\n  return (\n    <Flex\n      background=\"neutral0\"\n      borderColor=\"neutral200\"\n      justifyContent=\"space-between\"\n      gap={3}\n      padding={3}\n      width={pxToRem(300)}\n    >\n      <ToggleButton type=\"button\">\n        <Flex gap={6}>\n          <DropdownIconWrapper\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            background=\"neutral200\"\n            height={pxToRem(32)}\n            width={pxToRem(32)}\n          >\n            <CarretDown />\n          </DropdownIconWrapper>\n\n          <Flex maxWidth={pxToRem(150)}>\n            <Typography textColor=\"neutral700\" ellipsis>\n              {displayedValue}\n            </Typography>\n          </Flex>\n        </Flex>\n      </ToggleButton>\n\n      <Flex gap={2}>\n        <IconButton aria-label=\"\" borderWidth={0}>\n          <Trash />\n        </IconButton>\n\n        <IconButton aria-label=\"\" borderWidth={0}>\n          <Drag />\n        </IconButton>\n      </Flex>\n    </Flex>\n  );\n};\n\nconst DropdownIconWrapper = styled(Flex)`\n  border-radius: 50%;\n\n  svg {\n    height: ${6 / 16}rem;\n    width: ${11 / 16}rem;\n    > path {\n      fill: ${({ theme }) => theme.colors.neutral600};\n    }\n  }\n`;\n\n// TODO: we shouldn't have to reset a whole button\nconst ToggleButton = styled.button`\n  border: none;\n  background: transparent;\n  display: block;\n  width: 100%;\n  text-align: unset;\n  padding: 0;\n`;\n\nexport { ComponentDragPreview };\nexport type { ComponentDragPreviewProps };\n","const getTranslation = (id: string) => `content-manager.${id}`;\n\nexport { getTranslation };\n","import * as React from 'react';\n\nexport interface UseKeyboardDragAndDropCallbacks {\n  onCancel?: (index: number) => void;\n  onDropItem?: (index: number) => void;\n  onGrabItem?: (index: number) => void;\n  onMoveItem: (toIndex: number, fromIndex: number) => void;\n}\n\n/**\n * Utility hook designed to implement keyboard accessibile drag and drop by\n * returning an onKeyDown handler to be passed to the drag icon button.\n *\n * @internal - You should use `useDragAndDrop` instead.\n */\nexport const useKeyboardDragAndDrop = (\n  active: boolean,\n  index: number,\n  { onCancel, onDropItem, onGrabItem, onMoveItem }: UseKeyboardDragAndDropCallbacks\n) => {\n  const [isSelected, setIsSelected] = React.useState(false);\n\n  const handleMove = (movement: 'UP' | 'DOWN') => {\n    if (!isSelected) {\n      return;\n    }\n\n    if (movement === 'UP') {\n      onMoveItem(index - 1, index);\n    } else if (movement === 'DOWN') {\n      onMoveItem(index + 1, index);\n    }\n  };\n\n  const handleDragClick = () => {\n    if (isSelected) {\n      if (onDropItem) {\n        onDropItem(index);\n      }\n      setIsSelected(false);\n    } else {\n      if (onGrabItem) {\n        onGrabItem(index);\n      }\n      setIsSelected(true);\n    }\n  };\n\n  const handleCancel = () => {\n    if (isSelected) {\n      setIsSelected(false);\n\n      if (onCancel) {\n        onCancel(index);\n      }\n    }\n  };\n\n  const handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (!active) {\n      return;\n    }\n\n    if (e.key === 'Tab' && !isSelected) {\n      return;\n    }\n\n    e.preventDefault();\n\n    switch (e.key) {\n      case ' ':\n      case 'Enter':\n        handleDragClick();\n        break;\n\n      case 'Escape':\n        handleCancel();\n        break;\n\n      case 'ArrowDown':\n      case 'ArrowRight':\n        handleMove('DOWN');\n        break;\n\n      case 'ArrowUp':\n      case 'ArrowLeft':\n        handleMove('UP');\n        break;\n\n      default:\n    }\n  };\n\n  return handleKeyDown;\n};\n","import * as React from 'react';\n\nimport {\n  ConnectDragPreview,\n  ConnectDragSource,\n  ConnectDropTarget,\n  useDrag,\n  useDrop,\n} from 'react-dnd';\n\nimport { useKeyboardDragAndDrop, UseKeyboardDragAndDropCallbacks } from './useKeyboardDragAndDrop';\n\nimport type { Entity } from '@strapi/types';\nimport type { Identifier } from 'dnd-core';\n\nexport interface UseDragAndDropOptions<TItem extends { index: Entity.ID } = { index: Entity.ID }>\n  extends UseKeyboardDragAndDropCallbacks {\n  type?: string;\n  index: number;\n  item?: TItem;\n  onStart?: () => void;\n  onEnd?: () => void;\n  dropSensitivity?: 'regular' | 'immediate';\n}\n\nexport type UseDragAndDropReturn = [\n  props: {\n    handlerId: Identifier | null;\n    isDragging: boolean;\n    handleKeyDown: (event: React.KeyboardEvent<HTMLButtonElement>) => void;\n  },\n  objectRef: React.RefObject<HTMLElement>,\n  dragRef: ConnectDropTarget,\n  dropRef: ConnectDragSource,\n  dragPreviewRef: ConnectDragPreview\n];\n\n/**\n * A utility hook abstracting the general drag and drop hooks from react-dnd.\n * Centralising the same behaviours and by default offering keyboard support.\n */\nexport const useDragAndDrop = <TItem extends { index: number; id?: Entity.ID; [key: string]: any }>(\n  active: boolean,\n  {\n    type = 'STRAPI_DND',\n    index,\n    item,\n    onStart,\n    onEnd,\n    onGrabItem,\n    onDropItem,\n    onCancel,\n    onMoveItem,\n    dropSensitivity = 'regular',\n  }: UseDragAndDropOptions<TItem>\n): UseDragAndDropReturn => {\n  const objectRef = React.useRef<HTMLElement>(null);\n\n  const [{ handlerId }, dropRef] = useDrop<TItem, unknown, { handlerId: Identifier | null }>({\n    accept: type,\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(item, monitor) {\n      if (!objectRef.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const newInd = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === newInd) {\n        return;\n      }\n\n      if (dropSensitivity === 'regular') {\n        const hoverBoundingRect = objectRef.current.getBoundingClientRect();\n        const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n        // we're hovering, so we're dragging, therefore it will not be null(?)\n        const clientOffset = monitor.getClientOffset()!;\n        const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n        // Dragging downwards\n        if (dragIndex < newInd && hoverClientY < hoverMiddleY) {\n          return;\n        }\n\n        // Dragging upwards\n        if (dragIndex > newInd && hoverClientY > hoverMiddleY) {\n          return;\n        }\n      }\n\n      // Time to actually perform the action\n      onMoveItem(newInd, dragIndex);\n      item.index = newInd;\n    },\n  });\n\n  const [{ isDragging }, dragRef, dragPreviewRef] = useDrag({\n    type,\n    item() {\n      if (onStart) {\n        onStart();\n      }\n\n      /**\n       * This will be attached and it helps define the preview sizes\n       * when a component is flexy e.g. Relations\n       */\n      const { width } = objectRef.current?.getBoundingClientRect() ?? {};\n\n      return { index, width, ...item };\n    },\n    end() {\n      if (onEnd) {\n        onEnd();\n      }\n    },\n    canDrag: active,\n    /**\n     * This is for useful when the item is in a virtualized list.\n     * However, if we don't have an ID then we want the libraries\n     * defaults to take care of this.\n     */\n    isDragging: item?.id\n      ? (monitor) => {\n          return item?.id === monitor.getItem().id;\n        }\n      : undefined,\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const handleKeyDown = useKeyboardDragAndDrop(active, index, {\n    onGrabItem,\n    onDropItem,\n    onCancel,\n    onMoveItem,\n  });\n\n  return [{ handlerId, isDragging, handleKeyDown }, objectRef, dropRef, dragRef, dragPreviewRef];\n};\n","import { useEffect, useRef } from 'react';\n\nexport const usePrev = <T>(value: T): T | undefined => {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n};\n","export const ItemTypes = {\n  COMPONENT: 'component',\n  EDIT_FIELD: 'editField',\n  FIELD: 'field',\n  DYNAMIC_ZONE: 'dynamicZone',\n  RELATION: 'relation',\n} as const;\n","import { MutableRefObject, Ref } from 'react';\n\ntype PossibleRef<T> = Ref<T> | undefined;\n\nconst setRef = <T>(ref: PossibleRef<T>, value: T) => {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref !== null && ref !== undefined) {\n    (ref as MutableRefObject<T>).current = value;\n  }\n};\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nexport const composeRefs = <T>(...refs: PossibleRef<T>[]) => {\n  return (node: T) => refs.forEach((ref) => setRef(ref, node));\n};\n","import * as React from 'react';\n\nimport {\n  Status,\n  Box,\n  Link,\n  Icon,\n  Flex,\n  TextButton,\n  Typography,\n  Tooltip,\n  VisuallyHidden,\n  Combobox,\n  IconButton,\n  FlexProps,\n  ComboboxOption,\n  ComboboxProps,\n} from '@strapi/design-system';\nimport { pxToRem, useFocusInputField } from '@strapi/helper-plugin';\nimport { Cross, Drag, Refresh } from '@strapi/icons';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useIntl } from 'react-intl';\nimport { FixedSizeList, FixedSizeList as List, ListChildComponentProps } from 'react-window';\nimport styled from 'styled-components';\n\nimport { UseDragAndDropOptions, useDragAndDrop } from '../../hooks/useDragAndDrop';\nimport { usePrev } from '../../hooks/usePrev';\nimport { ItemTypes } from '../../utils/dragAndDrop';\nimport { composeRefs } from '../../utils/refs';\nimport { getTranslation } from '../../utils/translations';\n\nimport type { NormalizedRelation } from './utils/normalizeRelations';\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { Entity } from '@strapi/types';\n\nconst RELATION_ITEM_HEIGHT = 50;\nconst RELATION_GUTTER = 4;\n\n/* -------------------------------------------------------------------------------------------------\n * RelationInput\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RelationInputProps\n  extends Pick<\n      ComboboxProps,\n      'disabled' | 'error' | 'id' | 'labelAction' | 'placeholder' | 'required'\n    >,\n    Pick<RelationItemProps, 'onCancel' | 'onDropItem' | 'onGrabItem' | 'iconButtonAriaLabel'> {\n  canReorder: boolean;\n  description: ComboboxProps['hint'];\n  numberOfRelationsToDisplay: number;\n  label: string;\n  labelLoadMore?: string;\n  labelDisconnectRelation: string;\n  listAriaDescription: string;\n  liveText: string;\n  loadingMessage: string;\n  name: string;\n  noRelationsMessage: string;\n  onRelationConnect: (relation: Contracts.Relations.RelationResult) => void;\n  onRelationLoadMore: () => void;\n  onRelationDisconnect: (relation: NormalizedRelation) => void;\n  onRelationReorder?: (currentIndex: number, newIndex: number) => void;\n  onSearchNextPage: () => void;\n  onSearch: (searchTerm?: string) => void;\n  publicationStateTranslations: {\n    draft: string;\n    published: string;\n  };\n  relations: {\n    data: NormalizedRelation[];\n    isLoading: boolean;\n    isFetchingNextPage: boolean;\n    hasNextPage?: boolean;\n  };\n  searchResults: {\n    data: NormalizedRelation[];\n    isLoading: boolean;\n    hasNextPage?: boolean;\n  };\n  size: number;\n}\n\nconst RelationInput = ({\n  canReorder,\n  description,\n  disabled,\n  error,\n  iconButtonAriaLabel,\n  id,\n  name,\n  numberOfRelationsToDisplay,\n  label,\n  labelAction,\n  labelLoadMore,\n  labelDisconnectRelation,\n  listAriaDescription,\n  liveText,\n  loadingMessage,\n  onCancel,\n  onDropItem,\n  onGrabItem,\n  noRelationsMessage,\n  onRelationConnect,\n  onRelationLoadMore,\n  onRelationDisconnect,\n  onRelationReorder,\n  onSearchNextPage,\n  onSearch,\n  placeholder,\n  publicationStateTranslations,\n  required,\n  relations: paginatedRelations,\n  searchResults,\n  size,\n}: RelationInputProps) => {\n  const [textValue, setTextValue] = React.useState<string | undefined>('');\n  const [overflow, setOverflow] = React.useState<'top' | 'bottom' | 'top-bottom'>();\n\n  const listRef = React.useRef<FixedSizeList>(null);\n  const outerListRef = React.useRef<HTMLUListElement>(null);\n\n  const fieldRef = useFocusInputField(name);\n\n  const { data } = searchResults;\n\n  const relations = paginatedRelations.data;\n  const totalNumberOfRelations = relations.length ?? 0;\n\n  const dynamicListHeight = React.useMemo(\n    () =>\n      totalNumberOfRelations > numberOfRelationsToDisplay\n        ? Math.min(totalNumberOfRelations, numberOfRelationsToDisplay) *\n            (RELATION_ITEM_HEIGHT + RELATION_GUTTER) +\n          RELATION_ITEM_HEIGHT / 2\n        : Math.min(totalNumberOfRelations, numberOfRelationsToDisplay) *\n          (RELATION_ITEM_HEIGHT + RELATION_GUTTER),\n    [totalNumberOfRelations, numberOfRelationsToDisplay]\n  );\n\n  const shouldDisplayLoadMoreButton = !!labelLoadMore && paginatedRelations.hasNextPage;\n\n  const options = React.useMemo(\n    () =>\n      data\n        .flat()\n        .filter(Boolean)\n        .map((result) => ({\n          ...result,\n          value: result.id,\n          label: result.mainField,\n        })),\n    [data]\n  );\n\n  React.useEffect(() => {\n    if (totalNumberOfRelations <= numberOfRelationsToDisplay) {\n      return setOverflow(undefined);\n    }\n\n    const handleNativeScroll = (e: Event) => {\n      const el = e.target as HTMLUListElement;\n      const parentScrollContainerHeight = (el.parentNode as HTMLDivElement).scrollHeight;\n      const maxScrollBottom = el.scrollHeight - el.scrollTop;\n\n      if (el.scrollTop === 0) {\n        return setOverflow('bottom');\n      }\n\n      if (maxScrollBottom === parentScrollContainerHeight) {\n        return setOverflow('top');\n      }\n\n      return setOverflow('top-bottom');\n    };\n\n    const outerListRefCurrent = outerListRef?.current;\n\n    if (!paginatedRelations.isLoading && relations.length > 0 && outerListRefCurrent) {\n      outerListRef.current.addEventListener('scroll', handleNativeScroll);\n    }\n\n    return () => {\n      if (outerListRefCurrent) {\n        outerListRefCurrent.removeEventListener('scroll', handleNativeScroll);\n      }\n    };\n  }, [paginatedRelations, relations, numberOfRelationsToDisplay, totalNumberOfRelations]);\n\n  const handleMenuOpen = (isOpen?: boolean) => {\n    if (isOpen) {\n      onSearch();\n    }\n  };\n\n  const handleUpdatePositionOfRelation = (newIndex: number, currentIndex: number) => {\n    if (onRelationReorder && newIndex >= 0 && newIndex < relations.length) {\n      onRelationReorder(currentIndex, newIndex);\n    }\n  };\n\n  const previewRelationsLength = usePrev(relations.length);\n  const updatedRelationsWith = React.useRef<'onChange' | 'loadMore'>();\n\n  const handleLoadMore = () => {\n    updatedRelationsWith.current = 'loadMore';\n    onRelationLoadMore();\n  };\n\n  React.useEffect(() => {\n    if (updatedRelationsWith.current === 'onChange') {\n      setTextValue('');\n    }\n\n    if (\n      updatedRelationsWith.current === 'onChange' &&\n      relations.length !== previewRelationsLength\n    ) {\n      listRef.current?.scrollToItem(relations.length, 'end');\n      updatedRelationsWith.current = undefined;\n    } else if (\n      updatedRelationsWith.current === 'loadMore' &&\n      relations.length !== previewRelationsLength\n    ) {\n      listRef.current?.scrollToItem(0, 'start');\n      updatedRelationsWith.current = undefined;\n    }\n  }, [previewRelationsLength, relations]);\n\n  const ariaDescriptionId = `${name}-item-instructions`;\n\n  return (\n    <Flex\n      direction=\"column\"\n      gap={3}\n      justifyContent=\"space-between\"\n      alignItems=\"stretch\"\n      wrap=\"wrap\"\n    >\n      <Flex direction=\"row\" alignItems=\"end\" justifyContent=\"end\" gap={2} width=\"100%\">\n        <ComboboxWrapper marginRight=\"auto\" maxWidth={size <= 6 ? '100%' : '70%'} width=\"100%\">\n          <Combobox\n            ref={fieldRef}\n            autocomplete=\"list\"\n            error={error}\n            name={name}\n            hint={description}\n            id={id}\n            required={required}\n            label={label}\n            labelAction={labelAction}\n            disabled={disabled}\n            placeholder={placeholder}\n            hasMoreItems={searchResults.hasNextPage}\n            loading={searchResults.isLoading}\n            onOpenChange={handleMenuOpen}\n            noOptionsMessage={() => noRelationsMessage}\n            loadingMessage={loadingMessage}\n            onLoadMore={() => {\n              onSearchNextPage();\n            }}\n            textValue={textValue}\n            onChange={(relationId) => {\n              if (!relationId) {\n                return;\n              }\n              onRelationConnect(data.flat().find((opt) => opt.id.toString() === relationId)!);\n              updatedRelationsWith.current = 'onChange';\n            }}\n            onTextValueChange={(text) => {\n              setTextValue(text);\n            }}\n            onInputChange={(event) => {\n              onSearch(event.currentTarget.value);\n            }}\n          >\n            {options.map((opt) => {\n              return <Option key={opt.id} {...opt} />;\n            })}\n          </Combobox>\n        </ComboboxWrapper>\n\n        {shouldDisplayLoadMoreButton && (\n          <TextButton\n            disabled={paginatedRelations.isLoading || paginatedRelations.isFetchingNextPage}\n            onClick={handleLoadMore}\n            loading={paginatedRelations.isLoading || paginatedRelations.isFetchingNextPage}\n            startIcon={<Refresh />}\n            // prevent the label from line-wrapping\n            shrink={0}\n          >\n            {labelLoadMore}\n          </TextButton>\n        )}\n      </Flex>\n\n      {relations.length > 0 && (\n        <ShadowBox overflowDirection={overflow}>\n          <VisuallyHidden id={ariaDescriptionId}>{listAriaDescription}</VisuallyHidden>\n          <VisuallyHidden aria-live=\"assertive\">{liveText}</VisuallyHidden>\n          {/* @ts-expect-error – width is expected, but we've not needed to pass it before. */}\n          <List\n            height={dynamicListHeight}\n            ref={listRef}\n            outerRef={outerListRef}\n            itemCount={totalNumberOfRelations}\n            itemSize={RELATION_ITEM_HEIGHT + RELATION_GUTTER}\n            itemData={{\n              name,\n              ariaDescribedBy: ariaDescriptionId,\n              canDrag: canReorder,\n              disabled,\n              handleCancel: onCancel,\n              handleDropItem: onDropItem,\n              handleGrabItem: onGrabItem,\n              iconButtonAriaLabel,\n              labelDisconnectRelation,\n              onRelationDisconnect,\n              publicationStateTranslations,\n              relations,\n              updatePositionOfRelation: handleUpdatePositionOfRelation,\n            }}\n            itemKey={(index) => `${relations[index].mainField}_${relations[index].id}`}\n            innerElementType=\"ol\"\n          >\n            {ListItem}\n          </List>\n        </ShadowBox>\n      )}\n    </Flex>\n  );\n};\n\nconst ComboboxWrapper = styled(Box)`\n  align-self: flex-start;\n`;\n\nconst ShadowBox = styled(Box)<{ overflowDirection?: 'top-bottom' | 'top' | 'bottom' }>`\n  position: relative;\n  overflow: hidden;\n  flex: 1;\n\n  &:before,\n  &:after {\n    position: absolute;\n    width: 100%;\n    height: 4px;\n    z-index: 1;\n  }\n\n  &:before {\n    /* TODO: as for DS Table component we would need this to be handled by the DS theme */\n    content: '';\n    background: linear-gradient(rgba(3, 3, 5, 0.2) 0%, rgba(0, 0, 0, 0) 100%);\n    top: 0;\n    opacity: ${({ overflowDirection }) =>\n      overflowDirection === 'top-bottom' || overflowDirection === 'top' ? 1 : 0};\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  &:after {\n    /* TODO: as for DS Table component we would need this to be handled by the DS theme */\n    content: '';\n    background: linear-gradient(0deg, rgba(3, 3, 5, 0.2) 0%, rgba(0, 0, 0, 0) 100%);\n    bottom: 0;\n    opacity: ${({ overflowDirection }) =>\n      overflowDirection === 'top-bottom' || overflowDirection === 'bottom' ? 1 : 0};\n    transition: opacity 0.2s ease-in-out;\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * Option\n * -----------------------------------------------------------------------------------------------*/\n\nconst Option = ({\n  publicationState,\n  mainField,\n  id,\n}: Pick<NormalizedRelation, 'id' | 'mainField' | 'publicationState'>) => {\n  const { formatMessage } = useIntl();\n  const stringifiedDisplayValue = (mainField ?? id).toString();\n\n  if (publicationState) {\n    const isDraft = publicationState === 'draft';\n    const draftMessage = {\n      id: getTranslation('components.Select.draft-info-title'),\n      defaultMessage: 'State: Draft',\n    };\n    const publishedMessage = {\n      id: getTranslation('components.Select.publish-info-title'),\n      defaultMessage: 'State: Published',\n    };\n    const title = isDraft ? formatMessage(draftMessage) : formatMessage(publishedMessage);\n\n    return (\n      <ComboboxOption value={id.toString()} textValue={stringifiedDisplayValue}>\n        <Flex>\n          <StyledBullet title={title} isDraft={isDraft} />\n          <Typography ellipsis>{stringifiedDisplayValue}</Typography>\n        </Flex>\n      </ComboboxOption>\n    );\n  }\n\n  return (\n    <ComboboxOption value={id.toString()} textValue={stringifiedDisplayValue}>\n      {stringifiedDisplayValue}\n    </ComboboxOption>\n  );\n};\n\nconst StyledBullet = styled.div<{ isDraft?: boolean }>`\n  flex-shrink: 0;\n  width: ${pxToRem(6)};\n  height: ${pxToRem(6)};\n  margin-right: ${({ theme }) => theme.spaces[2]};\n  background-color: ${({ theme, isDraft }) =>\n    theme.colors[isDraft ? 'secondary600' : 'success600']};\n  border-radius: 50%;\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * ListItem\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * This is in a separate component to enforce passing all the props the component requires to react-window\n * to ensure drag & drop correctly works.\n */\n\ninterface ListItemProps extends Pick<RelationItemProps, 'index' | 'style'> {\n  data: Pick<\n    RelationItemProps,\n    | 'ariaDescribedBy'\n    | 'canDrag'\n    | 'disabled'\n    | 'iconButtonAriaLabel'\n    | 'name'\n    | 'updatePositionOfRelation'\n  > & {\n    handleCancel: RelationItemProps['onCancel'];\n    handleDropItem: RelationItemProps['onDropItem'];\n    handleGrabItem: RelationItemProps['onGrabItem'];\n    labelDisconnectRelation: string;\n    onRelationDisconnect: (relation: NormalizedRelation) => void;\n    publicationStateTranslations: {\n      draft: string;\n      published: string;\n    };\n    relations: NormalizedRelation[];\n  };\n}\n\nconst ListItem = ({ data, index, style }: ListItemProps) => {\n  const {\n    ariaDescribedBy,\n    canDrag,\n    disabled,\n    handleCancel,\n    handleDropItem,\n    handleGrabItem,\n    iconButtonAriaLabel,\n    name,\n    labelDisconnectRelation,\n    onRelationDisconnect,\n    publicationStateTranslations,\n    relations,\n    updatePositionOfRelation,\n  } = data;\n  const { publicationState, href, mainField, id } = relations[index];\n  const statusColor = publicationState === 'draft' ? 'secondary' : 'success';\n\n  return (\n    <RelationItem\n      ariaDescribedBy={ariaDescribedBy}\n      canDrag={canDrag}\n      disabled={disabled}\n      displayValue={String(mainField ?? id)}\n      iconButtonAriaLabel={iconButtonAriaLabel}\n      id={id}\n      index={index}\n      name={name}\n      endAction={\n        <DisconnectButton\n          data-testid={`remove-relation-${id}`}\n          disabled={disabled}\n          type=\"button\"\n          onClick={() => onRelationDisconnect(relations[index])}\n          aria-label={labelDisconnectRelation}\n        >\n          <Icon width=\"12px\" as={Cross} />\n        </DisconnectButton>\n      }\n      onCancel={handleCancel}\n      onDropItem={handleDropItem}\n      onGrabItem={handleGrabItem}\n      status={publicationState || undefined}\n      style={{\n        ...style,\n        bottom: style.bottom ?? 0 + RELATION_GUTTER,\n        height: style.height ?? 0 - RELATION_GUTTER,\n      }}\n      updatePositionOfRelation={updatePositionOfRelation}\n    >\n      <Box minWidth={0} paddingTop={1} paddingBottom={1} paddingRight={4}>\n        <Tooltip description={mainField ?? `${id}`}>\n          {href ? (\n            <LinkEllipsis to={href}>{mainField ?? id}</LinkEllipsis>\n          ) : (\n            <Typography textColor={disabled ? 'neutral600' : 'primary600'} ellipsis>\n              {mainField ?? id}\n            </Typography>\n          )}\n        </Tooltip>\n      </Box>\n\n      {publicationState && (\n        <Status variant={statusColor} showBullet={false} size=\"S\">\n          <Typography fontWeight=\"bold\" textColor={`${statusColor}700`}>\n            {publicationStateTranslations[publicationState]}\n          </Typography>\n        </Status>\n      )}\n    </RelationItem>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DisconnectButton\n * -----------------------------------------------------------------------------------------------*/\n\nconst DisconnectButton = styled.button`\n  svg path {\n    fill: ${({ theme, disabled }) =>\n      disabled ? theme.colors.neutral600 : theme.colors.neutral500};\n  }\n\n  &:hover svg path,\n  &:focus svg path {\n    fill: ${({ theme, disabled }) => !disabled && theme.colors.neutral600};\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * LinkEllipsis\n * -----------------------------------------------------------------------------------------------*/\n\nconst LinkEllipsis = styled(Link)`\n  display: block;\n\n  > span {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: block;\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * RelationItem\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RelationItemProps\n  extends Pick<UseDragAndDropOptions, 'onCancel' | 'onDropItem' | 'onGrabItem'>,\n    Omit<FlexProps, 'id' | 'style'>,\n    Pick<ListChildComponentProps, 'style' | 'index'> {\n  ariaDescribedBy: string;\n  canDrag: boolean;\n  children: React.ReactNode;\n  displayValue: string;\n  disabled: boolean;\n  endAction: React.ReactNode;\n  iconButtonAriaLabel: string;\n  id: Entity.ID;\n  name: string;\n  status?: NormalizedRelation['publicationState'];\n  updatePositionOfRelation: UseDragAndDropOptions['onMoveItem'];\n}\n\nconst RelationItem = ({\n  ariaDescribedBy,\n  children,\n  displayValue,\n  canDrag,\n  disabled,\n  endAction,\n  iconButtonAriaLabel,\n  style,\n  id,\n  index,\n  name,\n  onCancel,\n  onDropItem,\n  onGrabItem,\n  status,\n  updatePositionOfRelation,\n  ...props\n}: RelationItemProps) => {\n  const [{ handlerId, isDragging, handleKeyDown }, relationRef, dropRef, dragRef, dragPreviewRef] =\n    useDragAndDrop(canDrag && !disabled, {\n      type: `${ItemTypes.RELATION}_${name}`,\n      index,\n      item: {\n        displayedValue: displayValue,\n        status,\n        id,\n        index,\n      },\n      onGrabItem,\n      onDropItem,\n      onCancel,\n      onMoveItem: updatePositionOfRelation,\n      dropSensitivity: 'immediate',\n    });\n\n  const composedRefs = composeRefs(relationRef, dragRef);\n\n  React.useEffect(() => {\n    dragPreviewRef(getEmptyImage());\n  }, [dragPreviewRef]);\n\n  return (\n    <Box\n      style={style}\n      as=\"li\"\n      ref={dropRef}\n      aria-describedby={ariaDescribedBy}\n      cursor={canDrag ? 'all-scroll' : 'default'}\n    >\n      {isDragging ? (\n        <RelationItemPlaceholder />\n      ) : (\n        <Flex\n          paddingTop={2}\n          paddingBottom={2}\n          paddingLeft={canDrag ? 2 : 4}\n          paddingRight={4}\n          hasRadius\n          borderColor=\"neutral200\"\n          background={disabled ? 'neutral150' : 'neutral0'}\n          justifyContent=\"space-between\"\n          ref={canDrag ? composedRefs : undefined}\n          data-handler-id={handlerId}\n          {...props}\n        >\n          <FlexWrapper gap={1}>\n            {canDrag ? (\n              <IconButton\n                forwardedAs=\"div\"\n                role=\"button\"\n                tabIndex={0}\n                aria-label={iconButtonAriaLabel}\n                borderWidth={0}\n                onKeyDown={handleKeyDown}\n                disabled={disabled}\n              >\n                <Drag />\n              </IconButton>\n            ) : null}\n            <ChildrenWrapper justifyContent=\"space-between\">{children}</ChildrenWrapper>\n          </FlexWrapper>\n          {endAction && <Box paddingLeft={4}>{endAction}</Box>}\n        </Flex>\n      )}\n    </Box>\n  );\n};\n\nconst RelationItemPlaceholder = () => (\n  <Box\n    paddingTop={2}\n    paddingBottom={2}\n    paddingLeft={4}\n    paddingRight={4}\n    hasRadius\n    borderStyle=\"dashed\"\n    borderColor=\"primary600\"\n    borderWidth=\"1px\"\n    background=\"primary100\"\n    height={`calc(100% - ${RELATION_GUTTER}px)`}\n  />\n);\n\nconst FlexWrapper = styled(Flex)`\n  width: 100%;\n  /* Used to prevent endAction to be pushed out of container */\n  min-width: 0;\n\n  & > div[role='button'] {\n    cursor: all-scroll;\n  }\n`;\n\nconst ChildrenWrapper = styled(Flex)`\n  width: 100%;\n  /* Used to prevent endAction to be pushed out of container */\n  min-width: 0;\n`;\n\nexport { RelationInput, FlexWrapper, ChildrenWrapper, LinkEllipsis, DisconnectButton };\nexport type { RelationInputProps };\n","import get from 'lodash/get';\n\n/**\n * This is typically used in circumstances where there are re-orderable pieces e.g. Dynamic Zones\n * or Repeatable fields. It finds the _original_ location of the initial data using `__temp_key__` values\n * which are added to the fields in the `INIT_FORM` reducer to give array data a stable (when you add\n * a new item they wont have a server ID).\n */\nexport const getInitialDataPathUsingTempKeys =\n  (initialData: Record<string, any>, modifiedData: Record<string, any>) =>\n  (currentPath: string) => {\n    const splitPath = currentPath.split('.');\n\n    return splitPath.reduce<string[]>((acc, currentValue, index) => {\n      const initialDataParent = get(initialData, acc);\n      const modifiedDataTempKey = get(modifiedData, [\n        ...splitPath.slice(0, index),\n        currentValue,\n        '__temp_key__',\n      ]);\n\n      if (Array.isArray(initialDataParent) && typeof modifiedDataTempKey === 'number') {\n        const initialDataIndex = initialDataParent.findIndex(\n          (entry) => entry.__temp_key__ === modifiedDataTempKey\n        );\n\n        acc.push(initialDataIndex.toString());\n\n        return acc;\n      }\n\n      acc.push(currentValue);\n\n      return acc;\n    }, []);\n  };\n","import { Entity } from '@strapi/types';\n\nexport function getRelationLink(targetModel: string, id?: Entity.ID) {\n  return `/content-manager/collectionType/${targetModel}/${id ?? ''}`;\n}\n","import { PUBLICATION_STATES } from '../RelationInputDataManager';\n\nimport { getRelationLink } from './getRelationLink';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { Attribute } from '@strapi/types';\n\nexport interface NormalizeRelationArgs {\n  shouldAddLink: boolean;\n  mainFieldName: string;\n  targetModel: string;\n}\n\nexport type NormalizedRelation = Contracts.Relations.RelationResult & {\n  href?: string;\n  mainField: string;\n  publicationState?: false | 'published' | 'draft';\n};\n\nexport const normalizeRelation = (\n  relation: Contracts.Relations.RelationResult,\n  { shouldAddLink, mainFieldName, targetModel }: NormalizeRelationArgs\n) => {\n  const nextRelation: NormalizedRelation = {\n    ...relation,\n    // @ts-expect-error – TODO: fix why this want's it to be an attribute as opposed to a string.\n    mainField: relation[mainFieldName],\n  };\n\n  if (shouldAddLink) {\n    nextRelation.href = getRelationLink(targetModel, nextRelation.id);\n  }\n\n  nextRelation.publicationState = false;\n\n  if (nextRelation?.publishedAt !== undefined) {\n    nextRelation.publicationState = nextRelation.publishedAt\n      ? PUBLICATION_STATES.PUBLISHED\n      : PUBLICATION_STATES.DRAFT;\n  }\n\n  return nextRelation;\n};\n\n/*\n * Applies some transformations to existing and new relations in order to display them correctly\n * relations: raw relations data coming from useRelations\n * shouldAddLink: comes from generateRelationQueryInfos, if true we display a link to the relation (TO FIX: explanation)\n * mainFieldName: name of the main field inside the relation (e.g. text field), if no displayable main field exists (e.g. date field) we use the id of the entry\n * targetModel: the model on which the relation is based on, used to create an URL link\n */\n\nexport const normalizeRelations = (\n  relations: Contracts.Relations.RelationResult[],\n  args: NormalizeRelationArgs\n) => {\n  return [...relations].map((relation) => normalizeRelation(relation, args));\n};\n","import { useEffect, useState } from 'react';\n\nimport { useCallbackRef, useFetchClient } from '@strapi/helper-plugin';\nimport { useInfiniteQuery } from 'react-query';\n\nimport {\n  NormalizeRelationArgs,\n  NormalizedRelation,\n  normalizeRelations,\n} from './utils/normalizeRelations';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\n\ninterface UseRelationArgs {\n  relation: {\n    enabled: boolean;\n    endpoint: string;\n    normalizeArguments: NormalizeRelationArgs;\n    onLoad: (data: NormalizedRelation[]) => void;\n    pageParams?: Record<string, any>;\n    pageGoal?: number;\n  };\n  search: {\n    endpoint: string;\n    pageParams?: Record<string, any>;\n  };\n}\n\nconst useRelation = (cacheKey: any[] = [], { relation, search }: UseRelationArgs) => {\n  const [searchParams, setSearchParams] = useState({});\n  const [currentPage, setCurrentPage] = useState(0);\n  const { get } = useFetchClient();\n\n  const { onLoad: onLoadRelations, normalizeArguments } = relation;\n\n  const relationsRes = useInfiniteQuery(\n    ['relation', ...cacheKey],\n    async ({ pageParam = 1 }) => {\n      try {\n        const { data } = await get<Contracts.Relations.FindExisting.Response>(relation?.endpoint, {\n          params: {\n            ...(relation.pageParams ?? {}),\n            page: pageParam,\n          },\n        });\n\n        setCurrentPage(pageParam);\n\n        return data;\n      } catch (err) {\n        return null;\n      }\n    },\n    {\n      cacheTime: 0,\n      enabled: relation.enabled,\n      getNextPageParam(lastPage) {\n        const isXToOneRelation = lastPage && !('pagination' in lastPage);\n\n        if (\n          !lastPage || // the API may send an empty 204 response\n          isXToOneRelation || // xToOne relations do not have a pagination\n          lastPage?.pagination.page >= lastPage?.pagination.pageCount\n        ) {\n          return undefined;\n        }\n\n        // eslint-disable-next-line consistent-return\n        return lastPage.pagination.page + 1;\n      },\n      select: (data) => ({\n        ...data,\n        pages: data.pages.map((page) => {\n          if (!page) {\n            return page;\n          }\n\n          let normalizedResults: Contracts.Relations.RelationResult[] = [];\n\n          // xToOne relations return an object, which we normalize so that relations\n          // always have the same shape\n          if ('data' in page && page.data) {\n            normalizedResults = [page.data];\n          } else if ('results' in page && page.results) {\n            normalizedResults = [...page.results].reverse();\n          }\n\n          return {\n            pagination: 'pagination' in page ? page.pagination : undefined,\n            results: normalizedResults,\n          };\n        }),\n      }),\n    }\n  );\n\n  const { pageGoal } = relation;\n\n  const { status, data, fetchNextPage, hasNextPage } = relationsRes;\n\n  useEffect(() => {\n    /**\n     * This ensures the infiniteQuery hook fetching has caught-up with the modifiedData\n     * state i.e. in circumstances where you add 10 relations, the browserState knows this,\n     * but the hook would think it could fetch more, when in reality, it can't.\n     */\n    if (pageGoal && pageGoal > currentPage && hasNextPage && status === 'success') {\n      fetchNextPage({\n        pageParam: currentPage + 1,\n      });\n    }\n  }, [pageGoal, currentPage, fetchNextPage, hasNextPage, status]);\n\n  const onLoadRelationsCallback = useCallbackRef(onLoadRelations);\n\n  useEffect(() => {\n    if (status === 'success' && data && data.pages?.at(-1)?.results && onLoadRelationsCallback) {\n      // everytime we fetch, we normalize prior to adding to redux\n      const normalizedResults = normalizeRelations(\n        data.pages.at(-1)?.results ?? [],\n        normalizeArguments\n      );\n\n      // this is loadRelation from EditViewDataManagerProvider\n      onLoadRelationsCallback(normalizedResults);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [status, onLoadRelationsCallback, data]);\n\n  const searchRes = useInfiniteQuery(\n    ['relation', ...cacheKey, 'search', JSON.stringify(searchParams)],\n    async ({ pageParam = 1 }) => {\n      try {\n        const { data } = await get<Contracts.Relations.FindAvailable.Response>(search.endpoint, {\n          params: {\n            ...(search.pageParams ?? {}),\n            ...searchParams,\n            page: pageParam,\n          },\n        });\n\n        return data;\n      } catch (err) {\n        return null;\n      }\n    },\n    {\n      enabled: Object.keys(searchParams).length > 0,\n      getNextPageParam(lastPage) {\n        if (\n          !lastPage?.pagination ||\n          (lastPage.pagination && lastPage.pagination.page >= lastPage.pagination.pageCount)\n        ) {\n          return undefined;\n        }\n\n        // eslint-disable-next-line consistent-return\n        return lastPage.pagination.page + 1;\n      },\n    }\n  );\n\n  const searchFor = (term: string, options: object = {}) => {\n    setSearchParams({\n      ...options,\n      _q: term,\n      _filter: '$startsWithi',\n    });\n  };\n\n  return { relations: relationsRes, search: searchRes, searchFor };\n};\n\nexport { useRelation };\nexport type { UseRelationArgs };\n","import { RelationData } from '../../EditViewDataManagerProvider/reducer';\n\nexport const diffRelations = (\n  browserStateRelations: RelationData[] = [],\n  serverStateRelations: RelationData[] = []\n): [connected: RelationData['id'][], disconnected: RelationData['id'][]] => {\n  const connected = browserStateRelations.reduce<RelationData['id'][]>((acc, relation) => {\n    if (!serverStateRelations.find((oldRelation) => oldRelation.id === relation.id)) {\n      return [...acc, relation.id];\n    }\n\n    return acc;\n  }, []);\n\n  const disconnected = serverStateRelations.reduce<RelationData['id'][]>((acc, relation) => {\n    if (!browserStateRelations.find((oldRelation) => oldRelation.id === relation.id)) {\n      return [...acc, relation.id];\n    }\n\n    return acc;\n  }, []);\n\n  return [connected, disconnected];\n};\n","import { normalizeRelation, type NormalizeRelationArgs } from './normalizeRelations';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { UseInfiniteQueryResult } from 'react-query';\n\nexport const normalizeSearchResults = (\n  relations: UseInfiniteQueryResult<Contracts.Relations.FindAvailable.Response | null, unknown>,\n  { mainFieldName }: Pick<NormalizeRelationArgs, 'mainFieldName'>\n) => {\n  const { data } = relations;\n  const { pages = [] } = data ?? {};\n\n  return {\n    ...relations,\n    data: pages\n      .map((page) =>\n        (page?.results ?? []).map((relation) =>\n          normalizeRelation(relation, { mainFieldName, shouldAddLink: false, targetModel: '' })\n        )\n      )\n      .filter(Boolean)\n      .flat(),\n  };\n};\n","import * as React from 'react';\n\nimport { NotAllowedInput, useCMEditViewDataManager } from '@strapi/helper-plugin';\nimport get from 'lodash/get';\nimport pick from 'lodash/pick';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport { getInitialDataPathUsingTempKeys } from '../../utils/paths';\nimport { getTranslation } from '../../utils/translations';\n\nimport { RelationInput, RelationInputProps } from './RelationInput';\nimport { useRelation } from './useRelation';\nimport { diffRelations } from './utils/diffRelations';\nimport { NormalizedRelation, normalizeRelation } from './utils/normalizeRelations';\nimport { normalizeSearchResults } from './utils/normalizeSearchResults';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\n\nconst PUBLICATION_STATES = {\n  DRAFT: 'draft',\n  PUBLISHED: 'published',\n} as const;\n\nconst RELATIONS_TO_DISPLAY = 5;\n\nconst SEARCH_RESULTS_TO_DISPLAY = 10;\n\ninterface RelationInputDataManagerProps\n  extends Pick<\n    RelationInputProps,\n    'description' | 'error' | 'labelAction' | 'name' | 'required' | 'size'\n  > {\n  componentUid?: string;\n  editable?: boolean;\n  intlLabel: MessageDescriptor;\n  isUserAllowedToEditField?: boolean;\n  isUserAllowedToReadField?: boolean;\n  mainField: {\n    name: string;\n  };\n  placeholder?: MessageDescriptor;\n  queryInfos: {\n    defaultParams?: object;\n    shouldDisplayRelationLink?: boolean;\n  };\n  relationType: string;\n  targetModel: string;\n}\n\nconst RelationInputDataManager = ({\n  componentUid,\n  name,\n  error,\n  editable,\n  description,\n  intlLabel,\n  isUserAllowedToEditField,\n  isUserAllowedToReadField,\n  labelAction,\n  mainField,\n  placeholder,\n  queryInfos: { defaultParams, shouldDisplayRelationLink = false },\n  required,\n  relationType,\n  size,\n  targetModel,\n}: RelationInputDataManagerProps) => {\n  const {\n    isCreatingEntry,\n    createActionAllowedFields,\n    readActionAllowedFields,\n    updateActionAllowedFields,\n    slug,\n    modifiedData,\n    initialData,\n    relationConnect,\n    relationDisconnect,\n    relationLoad,\n    relationReorder,\n  } = useCMEditViewDataManager();\n\n  /**\n   * This is our cloning route because the EditView & CloneView share the same UI component\n   * We need the origin ID to pre-load the relations into the modifiedData of the new\n   * to-be-cloned entity.\n   */\n  const { params } =\n    useRouteMatch<{ origin?: string }>(\n      '/content-manager/collectionType/:collectionType/create/clone/:origin'\n    ) ?? {};\n\n  const { origin } = params ?? {};\n  const isCloningEntry = Boolean(origin);\n  const isComponentRelation = Boolean(componentUid);\n\n  const isFieldAllowed = React.useMemo(() => {\n    if (isUserAllowedToEditField === true) {\n      return true;\n    }\n\n    const allowedFields = isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields;\n\n    return allowedFields.includes(name);\n  }, [\n    isCreatingEntry,\n    createActionAllowedFields,\n    name,\n    isUserAllowedToEditField,\n    updateActionAllowedFields,\n  ]);\n\n  const isFieldReadable = React.useMemo(() => {\n    if (isUserAllowedToReadField) {\n      return true;\n    }\n\n    const allowedFields = isCreatingEntry ? [] : readActionAllowedFields;\n\n    return allowedFields.includes(name);\n  }, [isCreatingEntry, isUserAllowedToReadField, name, readActionAllowedFields]);\n\n  const fieldNameKeys = name.split('.');\n  const componentId = componentUid ? get(modifiedData, fieldNameKeys.slice(0, -1))?.id : undefined;\n\n  const entityId = origin || modifiedData.id;\n\n  // /content-manager/relations/[model]/[id]/[field-name]\n  const relationFetchEndpoint = React.useMemo(() => {\n    if (isCreatingEntry && !origin) {\n      return null;\n    }\n\n    if (componentUid) {\n      // repeatable components and dz are dynamically created\n      // if no componentId exists in modifiedData it means that the user just created it\n      // there then are no relations to request\n      return componentId\n        ? `/content-manager/relations/${componentUid}/${componentId}/${fieldNameKeys.at(-1)}`\n        : null;\n    }\n\n    return `/content-manager/relations/${slug}/${entityId}/${name.split('.').at(-1)}`;\n  }, [isCreatingEntry, origin, componentUid, slug, entityId, name, componentId, fieldNameKeys]);\n\n  // /content-manager/relations/[model]/[field-name]\n  const relationSearchEndpoint = React.useMemo(() => {\n    if (componentUid) {\n      return `/content-manager/relations/${componentUid}/${name.split('.').at(-1)}`;\n    }\n\n    return `/content-manager/relations/${slug}/${name.split('.').at(-1)}`;\n  }, [componentUid, slug, name]);\n\n  const [liveText, setLiveText] = React.useState('');\n  const { formatMessage } = useIntl();\n\n  const nameSplit = name.split('.');\n\n  const initialDataPath = getInitialDataPathUsingTempKeys(initialData, modifiedData)(name);\n\n  const relationsFromModifiedData = get(modifiedData, name, []);\n\n  const currentLastPage = Math.ceil(get(initialData, name, []).length / RELATIONS_TO_DISPLAY);\n\n  const { relations, search, searchFor } = useRelation(\n    [slug, initialDataPath.join('.'), modifiedData.id, defaultParams],\n    {\n      relation: {\n        enabled: !!relationFetchEndpoint,\n        endpoint: relationFetchEndpoint!,\n        pageGoal: currentLastPage,\n        pageParams: {\n          ...defaultParams,\n          pageSize: RELATIONS_TO_DISPLAY,\n        },\n        onLoad(value) {\n          relationLoad?.({\n            target: {\n              initialDataPath: ['initialData', ...initialDataPath],\n              modifiedDataPath: ['modifiedData', ...nameSplit],\n              value,\n            },\n          });\n        },\n        normalizeArguments: {\n          mainFieldName: mainField.name,\n          shouldAddLink: shouldDisplayRelationLink,\n          targetModel,\n        },\n      },\n      search: {\n        endpoint: relationSearchEndpoint,\n        pageParams: {\n          ...defaultParams,\n          // eslint-disable-next-line no-nested-ternary\n          entityId:\n            isCreatingEntry || isCloningEntry\n              ? undefined\n              : isComponentRelation\n              ? componentId\n              : entityId,\n          pageSize: SEARCH_RESULTS_TO_DISPLAY,\n        },\n      },\n    }\n  );\n\n  const isMorph = relationType.toLowerCase().includes('morph');\n  const toOneRelation = [\n    'oneWay',\n    'oneToOne',\n    'manyToOne',\n    'oneToManyMorph',\n    'oneToOneMorph',\n  ].includes(relationType);\n\n  const isDisabled = React.useMemo(() => {\n    if (isMorph) {\n      return true;\n    }\n\n    if (!isCreatingEntry) {\n      return (!isFieldAllowed && isFieldReadable) || !editable;\n    }\n\n    return !editable;\n  }, [isMorph, isCreatingEntry, editable, isFieldAllowed, isFieldReadable]);\n\n  const handleRelationConnect = (relation: Contracts.Relations.RelationResult) => {\n    /**\n     * Any relation being added to the store should be normalized so it has it's link.\n     */\n    const normalizedRelation = normalizeRelation(relation, {\n      mainFieldName: mainField.name,\n      shouldAddLink: shouldDisplayRelationLink,\n      targetModel,\n    });\n\n    relationConnect?.({ name, value: normalizedRelation, toOneRelation });\n  };\n\n  const handleRelationDisconnect = (relation: NormalizedRelation) => {\n    relationDisconnect?.({ name, id: relation.id });\n  };\n\n  const handleRelationLoadMore = () => {\n    relations.fetchNextPage();\n  };\n\n  const handleSearch = (term = '') => {\n    const [connected, disconnected] = diffRelations(\n      relationsFromModifiedData,\n      get(initialData, name)\n    );\n\n    searchFor(term, {\n      idsToInclude: disconnected,\n      idsToOmit: connected,\n    });\n  };\n\n  const handleSearchMore = () => {\n    search.fetchNextPage();\n  };\n\n  const getItemPos = (index: number) => `${index + 1} of ${relationsFromModifiedData.length}`;\n\n  const handleRelationReorder = (oldIndex: number, newIndex: number) => {\n    const item = relationsFromModifiedData[oldIndex];\n\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.reorder'),\n          defaultMessage: '{item}, moved. New position in list: {position}.',\n        },\n        {\n          item: item.mainField ?? item.id,\n          position: getItemPos(newIndex),\n        }\n      )\n    );\n\n    relationReorder?.({\n      name,\n      newIndex,\n      oldIndex,\n    });\n  };\n\n  const handleGrabItem = (index: number) => {\n    const item = relationsFromModifiedData[index];\n\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.grab-item'),\n          defaultMessage: `{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel.`,\n        },\n        {\n          item: item.mainField ?? item.id,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  const handleDropItem = (index: number) => {\n    const item = relationsFromModifiedData[index];\n\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.drop-item'),\n          defaultMessage: `{item}, dropped. Final position in list: {position}.`,\n        },\n        {\n          item: item.mainField ?? item.id,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  const handleCancel = (index: number) => {\n    const item = relationsFromModifiedData[index];\n\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.cancel-item'),\n          defaultMessage: '{item}, dropped. Re-order cancelled.',\n        },\n        {\n          item: item.mainField ?? item.id,\n        }\n      )\n    );\n  };\n\n  if (\n    (!isFieldAllowed && isCreatingEntry) ||\n    (!isCreatingEntry && !isFieldAllowed && !isFieldReadable)\n  ) {\n    return <NotAllowedInput name={name} intlLabel={intlLabel} labelAction={labelAction} />;\n  }\n\n  /**\n   * How to calculate the total number of relations even if you don't\n   * have them all loaded in the browser.\n   *\n   * 1. The `infiniteQuery` gives you the total number of relations in the pagination result.\n   * 2. You can diff the length of the browserState vs the fetchedServerState to determine if you've\n   * either added or removed relations.\n   * 3. Add them together, if you've removed relations you'll get a negative number and it'll\n   * actually subtract from the total number on the server (regardless of how many you fetched).\n   */\n  const browserRelationsCount = relationsFromModifiedData.length;\n  const serverRelationsCount = (get(initialData, initialDataPath) ?? []).length;\n  const realServerRelationsCount = relations.data?.pages[0]?.pagination?.total ?? 0;\n  /**\n   * _IF_ theres no relations data and the browserCount is the same as serverCount you can therefore assume\n   * that the browser count is correct because we've just _made_ this entry and the in-component hook is now fetching.\n   */\n  const totalRelations =\n    !relations.data && browserRelationsCount === serverRelationsCount\n      ? browserRelationsCount\n      : browserRelationsCount - serverRelationsCount + realServerRelationsCount;\n\n  return (\n    <RelationInput\n      error={error}\n      canReorder={!toOneRelation}\n      description={description}\n      disabled={isDisabled}\n      iconButtonAriaLabel={formatMessage({\n        id: getTranslation('components.RelationInput.icon-button-aria-label'),\n        defaultMessage: 'Drag',\n      })}\n      id={name}\n      label={`${formatMessage({\n        id: intlLabel.id,\n        defaultMessage: intlLabel.defaultMessage,\n      })} ${totalRelations > 0 ? `(${totalRelations})` : ''}`}\n      labelAction={labelAction}\n      labelLoadMore={\n        !isCreatingEntry || isCloningEntry\n          ? formatMessage({\n              id: getTranslation('relation.loadMore'),\n              defaultMessage: 'Load More',\n            })\n          : undefined\n      }\n      labelDisconnectRelation={formatMessage({\n        id: getTranslation('relation.disconnect'),\n        defaultMessage: 'Remove',\n      })}\n      listAriaDescription={formatMessage({\n        id: getTranslation('dnd.instructions'),\n        defaultMessage: `Press spacebar to grab and re-order`,\n      })}\n      liveText={liveText}\n      loadingMessage={formatMessage({\n        id: getTranslation('relation.isLoading'),\n        defaultMessage: 'Relations are loading',\n      })}\n      name={name}\n      noRelationsMessage={formatMessage({\n        id: getTranslation('relation.notAvailable'),\n        defaultMessage: 'No relations available',\n      })}\n      numberOfRelationsToDisplay={RELATIONS_TO_DISPLAY}\n      onDropItem={handleDropItem}\n      onGrabItem={handleGrabItem}\n      onCancel={handleCancel}\n      onRelationConnect={handleRelationConnect}\n      onRelationDisconnect={handleRelationDisconnect}\n      onRelationLoadMore={handleRelationLoadMore}\n      onRelationReorder={handleRelationReorder}\n      onSearch={(term) => handleSearch(term)}\n      onSearchNextPage={() => handleSearchMore()}\n      placeholder={formatMessage(\n        placeholder || {\n          id: getTranslation('relation.add'),\n          defaultMessage: 'Add relation',\n        }\n      )}\n      publicationStateTranslations={{\n        [PUBLICATION_STATES.DRAFT]: formatMessage({\n          id: getTranslation('relation.publicationState.draft'),\n          defaultMessage: 'Draft',\n        }),\n\n        [PUBLICATION_STATES.PUBLISHED]: formatMessage({\n          id: getTranslation('relation.publicationState.published'),\n          defaultMessage: 'Published',\n        }),\n      }}\n      relations={pick(\n        { ...relations, data: relationsFromModifiedData },\n        'data',\n        'hasNextPage',\n        'isFetchingNextPage',\n        'isLoading',\n        'isSuccess'\n      )}\n      required={required}\n      searchResults={normalizeSearchResults(search, {\n        mainFieldName: mainField.name,\n      })}\n      size={size}\n    />\n  );\n};\n\nexport { RelationInputDataManager, PUBLICATION_STATES };\nexport type { RelationInputDataManagerProps };\n","import { Box, Flex, Icon, IconButton, Status, Typography } from '@strapi/design-system';\nimport { Cross, Drag } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../utils/translations';\nimport {\n  DisconnectButton,\n  LinkEllipsis,\n  ChildrenWrapper,\n  FlexWrapper,\n} from '../Relations/RelationInput';\nimport { PUBLICATION_STATES } from '../Relations/RelationInputDataManager';\n\ninterface RelationDragPreviewProps {\n  status: typeof PUBLICATION_STATES.DRAFT | typeof PUBLICATION_STATES.PUBLISHED;\n  displayedValue: string;\n  width: number;\n}\n\nconst RelationDragPreview = ({ status, displayedValue, width }: RelationDragPreviewProps) => {\n  const { formatMessage } = useIntl();\n\n  const stateMessage = {\n    [PUBLICATION_STATES.DRAFT]: formatMessage({\n      id: getTranslation('relation.publicationState.draft'),\n      defaultMessage: 'Draft',\n    }),\n\n    [PUBLICATION_STATES.PUBLISHED]: formatMessage({\n      id: getTranslation('relation.publicationState.published'),\n      defaultMessage: 'Published',\n    }),\n  };\n\n  const statusColor = status === PUBLICATION_STATES.DRAFT ? 'secondary' : 'success';\n\n  return (\n    <Box style={{ width }}>\n      <Flex\n        paddingTop={2}\n        paddingBottom={2}\n        paddingLeft={2}\n        paddingRight={4}\n        hasRadius\n        borderWidth={1}\n        background=\"neutral0\"\n        borderColor=\"neutral200\"\n        justifyContent=\"space-between\"\n      >\n        <FlexWrapper gap={1}>\n          <IconButton aria-label=\"\" borderWidth={0}>\n            <Drag />\n          </IconButton>\n          <ChildrenWrapper maxWidth=\"100%\" justifyContent=\"space-between\">\n            <Box minWidth={0} paddingTop={1} paddingBottom={1} paddingRight={4}>\n              <LinkEllipsis href=\"\">\n                <Typography textColor=\"primary600\" ellipsis>\n                  {displayedValue}\n                </Typography>\n              </LinkEllipsis>\n            </Box>\n            {status && (\n              <Status variant={statusColor} showBullet={false} size=\"S\">\n                <Typography fontWeight=\"bold\" textColor={`${statusColor}700`}>\n                  {stateMessage[status]}\n                </Typography>\n              </Status>\n            )}\n          </ChildrenWrapper>\n        </FlexWrapper>\n        <Box paddingLeft={4}>\n          <DisconnectButton type=\"button\">\n            <Icon width=\"12px\" as={Cross} />\n          </DisconnectButton>\n        </Box>\n      </Flex>\n    </Box>\n  );\n};\n\nexport { RelationDragPreview };\nexport type { RelationDragPreviewProps };\n","import * as React from 'react';\n\nimport {\n  SubNav,\n  SubNavHeader,\n  SubNavLink,\n  SubNavSection,\n  SubNavSections,\n} from '@strapi/design-system/v2';\nimport { useCollator, useFilter } from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { getTranslation } from '../utils/translations';\n\nconst LeftMenu = () => {\n  const [search, setSearch] = React.useState('');\n  const { formatMessage, locale } = useIntl();\n  const collectionTypeLinks = useTypedSelector(\n    (state) => state['content-manager_app'].collectionTypeLinks\n  );\n  const singleTypeLinks = useTypedSelector((state) => state['content-manager_app'].singleTypeLinks);\n\n  const { startsWith } = useFilter(locale, {\n    sensitivity: 'base',\n  });\n\n  const formatter = useCollator(locale, {\n    sensitivity: 'base',\n  });\n\n  const menu = React.useMemo(\n    () =>\n      [\n        {\n          id: 'collectionTypes',\n          title: formatMessage({\n            id: getTranslation('components.LeftMenu.collection-types'),\n            defaultMessage: 'Collection Types',\n          }),\n          searchable: true,\n          links: collectionTypeLinks,\n        },\n        {\n          id: 'singleTypes',\n          title: formatMessage({\n            id: getTranslation('components.LeftMenu.single-types'),\n            defaultMessage: 'Single Types',\n          }),\n          searchable: true,\n          links: singleTypeLinks,\n        },\n      ].map((section) => ({\n        ...section,\n        links: section.links\n          /**\n           * Filter by the search value\n           */\n          .filter((link) => startsWith(link.title, search))\n          /**\n           * Sort correctly using the language\n           */\n          .sort((a, b) => formatter.compare(a.title, b.title))\n          /**\n           * Apply the formated strings to the links from react-intl\n           */\n          .map((link) => {\n            return {\n              ...link,\n              title: formatMessage({ id: link.title, defaultMessage: link.title }),\n            };\n          }),\n      })),\n    [collectionTypeLinks, search, singleTypeLinks, startsWith, formatMessage, formatter]\n  );\n\n  const handleClear = () => {\n    setSearch('');\n  };\n\n  const handleChangeSearch = ({ target: { value } }: { target: { value: string } }) => {\n    setSearch(value);\n  };\n\n  const label = formatMessage({\n    id: getTranslation('header.name'),\n    defaultMessage: 'Content',\n  });\n\n  return (\n    <SubNav ariaLabel={label}>\n      <SubNavHeader\n        label={label}\n        searchable\n        value={search}\n        onChange={handleChangeSearch}\n        onClear={handleClear}\n        searchLabel={formatMessage({\n          id: 'content-manager.components.LeftMenu.Search.label',\n          defaultMessage: 'Search for a content type',\n        })}\n      />\n      <SubNavSections>\n        {menu.map((section) => {\n          return (\n            <SubNavSection\n              key={section.id}\n              label={section.title}\n              badgeLabel={section.links.length.toString()}\n            >\n              {section.links.map((link) => {\n                const search = link.search ? `?${link.search}` : '';\n\n                return (\n                  // @ts-expect-error – DS inference does not work with the `as` prop.\n                  <SubNavLink as={NavLink} key={link.uid} to={`${link.to}${search}`}>\n                    {link.title}\n                  </SubNavLink>\n                );\n              })}\n            </SubNavSection>\n          );\n        })}\n      </SubNavSections>\n    </SubNav>\n  );\n};\n\nexport { LeftMenu };\n","import * as React from 'react';\n\nconst ModelsContext = React.createContext<{\n  refetchData: () => Promise<void>;\n}>({\n  refetchData: () => Promise.resolve(),\n});\n\nexport { ModelsContext };\n","import { useEffect, useRef } from 'react';\n\nimport { useNotifyAT } from '@strapi/design-system';\nimport {\n  Permission,\n  hasPermissions,\n  useFetchClient,\n  useNotification,\n  useRBACProvider,\n  useStrapiApp,\n} from '@strapi/helper-plugin';\nimport { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\n\nimport { HOOKS } from '../../constants';\nimport { useTypedDispatch, useTypedSelector } from '../../core/store/hooks';\nimport { getTranslation } from '../utils/translations';\n\nconst { MUTATE_COLLECTION_TYPES_LINKS, MUTATE_SINGLE_TYPES_LINKS } = HOOKS;\n\ninterface ContentManagerLink {\n  permissions: Permission[];\n  search: string | null;\n  kind: string;\n  title: string;\n  to: string;\n  uid: string;\n  name: string;\n  isDisplayed: boolean;\n}\n\n/**\n * TODO: refactor this whole thing.\n */\nconst useContentManagerInitData = () => {\n  const dispatch = useTypedDispatch();\n  const toggleNotification = useNotification();\n  const state = useTypedSelector((state) => state['content-manager_app']);\n\n  const { allPermissions } = useRBACProvider();\n  const { runHookWaterfall } = useStrapiApp();\n  const { notifyStatus } = useNotifyAT();\n  const { formatMessage } = useIntl();\n  const { get } = useFetchClient();\n\n  const fetchDataRef = useRef(async () => {\n    dispatch({\n      type: 'ContentManager/App/GET_INIT_DATA',\n    });\n\n    try {\n      const {\n        data: {\n          data: { components, contentTypes: models, fieldSizes },\n        },\n      } = await get<Contracts.Init.GetInitData.Response>('/content-manager/init');\n      notifyStatus(\n        formatMessage({\n          id: getTranslation('App.schemas.data-loaded'),\n          defaultMessage: 'The schemas have been successfully loaded.',\n        })\n      );\n\n      const {\n        data: { data: contentTypeConfigurations },\n      } = await get<Contracts.ContentTypes.FindContentTypesSettings.Response>(\n        '/content-manager/content-types-settings'\n      );\n\n      /**\n       * We group these by the two types we support. We do with an object because we can use default\n       * values of arrays to make sure we always have an array to manipulate further on if, for example,\n       * a user has not made any single types.\n       *\n       * This means we have to manually add new content types to this hook if we add a new type – but\n       * the safety is worth it.\n       */\n      const { collectionType: collectionTypeLinks, singleType: singleTypeLinks } = models.reduce<{\n        collectionType: Contracts.ContentTypes.ContentType[];\n        singleType: Contracts.ContentTypes.ContentType[];\n      }>(\n        (acc, model) => {\n          acc[model.kind].push(model);\n          return acc;\n        },\n        {\n          collectionType: [],\n          singleType: [],\n        }\n      );\n\n      const collectionTypeSectionLinks = generateLinks(\n        collectionTypeLinks,\n        'collectionTypes',\n        contentTypeConfigurations\n      );\n\n      const singleTypeSectionLinks = generateLinks(singleTypeLinks, 'singleTypes');\n\n      // Collection Types verifications\n      const collectionTypeLinksPermissions = await Promise.all(\n        collectionTypeSectionLinks.map(({ permissions }) =>\n          hasPermissions(allPermissions, permissions)\n        )\n      );\n      const authorizedCollectionTypeLinks = collectionTypeSectionLinks.filter(\n        (_, index) => collectionTypeLinksPermissions[index]\n      );\n\n      // Single Types verifications\n      const singleTypeLinksPermissions = await Promise.all(\n        singleTypeSectionLinks.map(({ permissions }) => hasPermissions(allPermissions, permissions))\n      );\n      const authorizedSingleTypeLinks = singleTypeSectionLinks.filter(\n        (_, index) => singleTypeLinksPermissions[index]\n      );\n\n      const { ctLinks } = runHookWaterfall(MUTATE_COLLECTION_TYPES_LINKS, {\n        ctLinks: authorizedCollectionTypeLinks,\n        models,\n      });\n      const { stLinks } = runHookWaterfall(MUTATE_SINGLE_TYPES_LINKS, {\n        stLinks: authorizedSingleTypeLinks,\n        models,\n      });\n\n      dispatch({\n        type: 'ContentManager/App/SET_INIT_DATA',\n        data: {\n          authorizedCollectionTypeLinks: ctLinks,\n          authorizedSingleTypeLinks: stLinks,\n          contentTypeSchemas: models,\n          components,\n          fieldSizes,\n        },\n      });\n    } catch (err) {\n      console.error(err);\n\n      toggleNotification({ type: 'warning', message: { id: 'notification.error' } });\n    }\n  });\n\n  useEffect(() => {\n    fetchDataRef.current();\n\n    return () => {\n      dispatch({\n        type: 'ContentManager/App/RESET_INIT_DATA',\n      });\n    };\n  }, [dispatch, toggleNotification]);\n\n  return { ...state, refetchData: fetchDataRef.current };\n};\n\nconst generateLinks = (\n  links: Contracts.ContentTypes.ContentType[],\n  type: 'collectionTypes' | 'singleTypes',\n  configurations: Contracts.ContentTypes.FindContentTypesSettings.Response['data'] = []\n) => {\n  return links\n    .filter((link) => link.isDisplayed)\n    .map((link) => {\n      const collectionTypesPermissions = [\n        { action: 'plugin::content-manager.explorer.create', subject: link.uid },\n        { action: 'plugin::content-manager.explorer.read', subject: link.uid },\n      ];\n      const singleTypesPermissions = [\n        { action: 'plugin::content-manager.explorer.read', subject: link.uid },\n      ];\n      const permissions =\n        type === 'collectionTypes' ? collectionTypesPermissions : singleTypesPermissions;\n\n      const currentContentTypeConfig = configurations.find(({ uid }) => uid === link.uid);\n\n      let search = null;\n\n      if (currentContentTypeConfig) {\n        const searchParams = {\n          page: 1,\n          pageSize: currentContentTypeConfig.settings.pageSize,\n          sort: `${currentContentTypeConfig.settings.defaultSortBy}:${currentContentTypeConfig.settings.defaultSortOrder}`,\n        };\n\n        search = stringify(searchParams, { encode: false });\n      }\n\n      return {\n        permissions,\n        search,\n        kind: link.kind,\n        title: link.info.displayName,\n        to: `/content-manager/${link.kind}/${link.uid}`,\n        uid: link.uid,\n        // Used for the list item key in the helper plugin\n        name: link.uid,\n        isDisplayed: link.isDisplayed,\n      } satisfies ContentManagerLink;\n    });\n};\n\nexport { useContentManagerInitData };\nexport type { ContentManagerLink };\n","import merge from 'lodash/merge';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\n\ntype ContentTypeLayoutData = Contracts.ContentTypes.FindContentTypeConfiguration.Response['data'];\ntype ComponentLayoutData = Contracts.Components.FindComponentConfiguration.Response['data'];\n\ntype LayoutData<TKey> = TKey extends 'component'\n  ? ComponentLayoutData\n  : TKey extends 'contentType'\n  ? ContentTypeLayoutData\n  : never;\n\ntype Models = Array<Contracts.Components.Component | Contracts.ContentTypes.ContentType>;\n\ntype ModifiedLayoutData<TKey> = TKey extends 'component'\n  ? Omit<ComponentsWithSchemas<ComponentLayoutData>, TKey> & {\n      [K in TKey]: Contracts.Components.ComponentConfiguration & Contracts.Components.Component;\n    }\n  : TKey extends 'contentType'\n  ? Omit<ComponentsWithSchemas<ContentTypeLayoutData>, TKey> & {\n      [K in TKey]: Contracts.ContentTypes.Configuration & Contracts.ContentTypes.ContentType;\n    }\n  : never;\n\ntype ComponentsWithSchemas<\n  TData extends { components: Record<string, Contracts.Components.ComponentConfiguration> }\n> = Omit<TData, 'components'> & {\n  components: Record<\n    string,\n    Contracts.Components.ComponentConfiguration & Contracts.Components.Component\n  >;\n};\n\n/**\n * TODO: this needs refactoring because typescript doesn't like the fact we just pass\n * a key that doesn't exist on both objects.\n */\nconst mergeMetasWithSchema = <TKey extends 'component' | 'contentType'>(\n  data: LayoutData<TKey>,\n  schemas: Models,\n  mainSchemaKey: TKey\n): ModifiedLayoutData<TKey> => {\n  const findSchema = (uid: string) => schemas.find((obj) => obj.uid === uid);\n  const merged = Object.assign({}, data);\n\n  // @ts-expect-error – TODO: fix me\n  const { uid } = data[mainSchemaKey];\n  const schema = findSchema(uid);\n\n  // TODO:\n  // In order to merge all the layers of the schema objects, we used the Lodash function \"merge\".\n  // If the destructuration is used, it will only merge the first layer of properties and overwrite the nested objects.\n\n  // @ts-expect-error – TODO: fix me\n  merged[mainSchemaKey] = merge({}, schema, data[mainSchemaKey]);\n\n  Object.keys(data.components).forEach((compoUID) => {\n    const compoSchema = findSchema(compoUID);\n\n    merged.components[compoUID] = {\n      ...data.components[compoUID],\n      ...compoSchema,\n    };\n  });\n\n  // @ts-expect-error – TODO: fix me\n  return merged;\n};\n\nexport { mergeMetasWithSchema };\nexport type { ModifiedLayoutData };\n","import cloneDeep from 'lodash/cloneDeep';\nimport omit from 'lodash/omit';\n\nimport { ModifiedLayoutData, mergeMetasWithSchema } from './schemas';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { Attribute, Schema } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * formatLayouts\n * -----------------------------------------------------------------------------------------------*/\n\ntype LayoutData = Contracts.ContentTypes.FindContentTypeConfiguration.Response['data'];\ntype Models = Array<Contracts.Components.Component | Contracts.ContentTypes.ContentType>;\n\nconst getRelationModel = (targetModel: string, models: Models) =>\n  models.find((model) => model.uid === targetModel);\n\ntype FormattedContentTypeLayout = Omit<SchemasWithMeta['contentType'], 'layouts'> & {\n  layouts: {\n    edit: EditLayoutRow[][];\n    list: ListLayoutRow[];\n  };\n};\n\ntype FormattedComponentLayout = Omit<SchemasWithMeta['components'][string], 'layouts'> & {\n  layouts: {\n    list: string[];\n    edit: EditLayoutRow[][];\n  };\n};\n\ninterface FormattedLayouts {\n  contentType: FormattedContentTypeLayout;\n  components: Record<string, FormattedComponentLayout>;\n}\n\nconst formatLayouts = (initialData: LayoutData, models: Models): FormattedLayouts => {\n  const data = createMetasSchema(initialData, models);\n\n  const contentType = {\n    ...data.contentType,\n    layouts: {\n      ...data.contentType.layouts,\n      edit: formatLayoutWithMetas(data.contentType, models),\n      list: formatListLayoutWithMetas(data.contentType, data.components),\n    },\n  } satisfies FormattedContentTypeLayout;\n\n  const components = Object.keys(data.components).reduce<Record<string, FormattedComponentLayout>>(\n    (acc, componentUid) => {\n      const formattedComponentEditLayout = formatLayoutWithMetas(\n        data.components[componentUid],\n        models\n      );\n\n      acc[componentUid] = {\n        ...data.components[componentUid],\n        layouts: {\n          ...data.components[componentUid].layouts,\n          edit: formattedComponentEditLayout,\n        },\n      } satisfies FormattedComponentLayout;\n\n      return acc;\n    },\n    {}\n  );\n\n  return {\n    contentType,\n    components,\n  };\n};\n\ninterface MainField {\n  name: string;\n  schema?: Attribute.Any;\n}\n\ninterface Metadata {\n  edit: Contracts.ContentTypes.Metadatas[string]['edit'] & {\n    mainField?: MainField;\n  };\n  list: Contracts.ContentTypes.Metadatas[string]['list'] & {\n    mainField?: MainField;\n  };\n}\n\ninterface SchemasWithMeta {\n  contentType: Omit<ModifiedLayoutData<'contentType'>['contentType'], 'metadatas'> & {\n    metadatas: Record<string, Metadata>;\n  };\n  components: Record<\n    string,\n    Omit<ModifiedLayoutData<'contentType'>['components'][string], 'metadatas'> & {\n      metadatas: Record<string, Metadata>;\n    }\n  >;\n}\n\nconst createMetasSchema = (initialData: LayoutData, models: Models): SchemasWithMeta => {\n  const data = mergeMetasWithSchema(cloneDeep(initialData), models, 'contentType');\n  const { components, contentType } = data;\n\n  const formatMetadatas = (\n    targetSchema:\n      | (Contracts.ContentTypes.Configuration & Contracts.ContentTypes.ContentType)\n      | (Contracts.Components.ComponentConfiguration & Contracts.Components.Component)\n  ) => {\n    return Object.keys(targetSchema.metadatas).reduce<Record<string, Metadata>>((acc, current) => {\n      const schema = targetSchema.attributes[current] ?? {};\n\n      let metadatas: Metadata = targetSchema.metadatas[current];\n\n      if (schema.type === 'relation' && 'target' in schema) {\n        const relationModel = getRelationModel(schema.target, models)!;\n\n        // @ts-expect-error TODO: fix this, im not sure why `mainField` is not in the type\n        const mainFieldName = metadatas.edit.mainField as string;\n\n        const mainField = {\n          name: mainFieldName,\n          schema: relationModel.attributes[mainFieldName],\n        };\n\n        metadatas = {\n          list: {\n            ...metadatas.list,\n            mainField,\n          },\n          edit: {\n            ...metadatas.edit,\n            mainField,\n          },\n        };\n      }\n\n      acc[current] = metadatas;\n\n      return acc;\n    }, {});\n  };\n\n  data.contentType.metadatas = formatMetadatas(contentType);\n\n  Object.keys(components).forEach((compoUID) => {\n    data.components[compoUID].metadatas = formatMetadatas(components[compoUID]);\n  });\n\n  return data;\n};\n\ninterface EditLayoutRow {\n  name: string;\n  size: number;\n  fieldSchema: Attribute.Any & {\n    /**\n     * This type is not part of the strapi types, because it doesn't exist\n     * on the schema, it's added by the server code.\n     */\n    customField?: string;\n  };\n  metadatas: Metadata['edit'];\n  targetModelPluginOptions?: Schema.ContentType['pluginOptions'];\n  queryInfos?: {\n    defaultParams?: object;\n    shouldDisplayRelationLink?: boolean;\n  };\n}\n\nconst formatLayoutWithMetas = (\n  contentTypeConfiguration: SchemasWithMeta['contentType'] | SchemasWithMeta['components'][string],\n  models: Models\n) =>\n  contentTypeConfiguration.layouts.edit.reduce<EditLayoutRow[][]>((acc, current) => {\n    const row = current.map((attribute) => {\n      const fieldSchema = contentTypeConfiguration.attributes[attribute.name] ?? {};\n\n      const data: EditLayoutRow = {\n        ...attribute,\n        fieldSchema,\n        metadatas: contentTypeConfiguration.metadatas[attribute.name].edit ?? {},\n      };\n\n      if (fieldSchema.type === 'relation') {\n        // @ts-expect-error TODO: fix this.\n        const targetModelSchema = getRelationModel(fieldSchema.target, models)!;\n        const targetModelPluginOptions = targetModelSchema.pluginOptions || {};\n\n        data.targetModelPluginOptions = targetModelPluginOptions;\n        data.queryInfos = {\n          shouldDisplayRelationLink: shouldDisplayRelationLink(\n            contentTypeConfiguration,\n            attribute.name,\n            models\n          ),\n        };\n      }\n\n      return data;\n    });\n\n    acc.push(row);\n\n    return acc;\n  }, []);\n\ninterface ListLayoutRow {\n  key: string;\n  name: string;\n  fieldSchema: Attribute.Any;\n  metadatas: Metadata['list'];\n}\n\nconst formatListLayoutWithMetas = (\n  contentTypeConfiguration: SchemasWithMeta['contentType'],\n  components: SchemasWithMeta['components']\n) => {\n  const formatted = contentTypeConfiguration.layouts.list.reduce<ListLayoutRow[]>(\n    (acc, current) => {\n      const fieldSchema = contentTypeConfiguration.attributes[current] ?? {};\n      const metadatas = contentTypeConfiguration.metadatas[current].list ?? {};\n\n      if (fieldSchema.type === 'component') {\n        const component = components[fieldSchema.component];\n        const mainFieldName = component.settings.mainField;\n        const mainFieldAttribute = component.attributes[mainFieldName];\n\n        acc.push({\n          key: `__${current}_key__`,\n          name: current,\n          fieldSchema,\n          metadatas: {\n            ...metadatas,\n            mainField: {\n              ...mainFieldAttribute,\n              name: mainFieldName,\n            },\n          },\n        });\n\n        return acc;\n      }\n\n      acc.push({ key: `__${current}_key__`, name: current, fieldSchema, metadatas });\n\n      return acc;\n    },\n    []\n  );\n\n  return formatted;\n};\n\nconst shouldDisplayRelationLink = (\n  contentTypeConfiguration: SchemasWithMeta['contentType'] | SchemasWithMeta['components'][string],\n  fieldName: string,\n  models: Models\n): boolean => {\n  // @ts-expect-error – TODO: fix this type issue.\n  const targetModel = contentTypeConfiguration.attributes[fieldName].targetModel ?? '';\n\n  return models.some((model) => model.uid === targetModel && model.isDisplayed);\n};\n\n/* -------------------------------------------------------------------------------------------------\n * formatLayoutForSettingsView\n * -----------------------------------------------------------------------------------------------*/\n\ninterface MetadataWithStringMainField {\n  edit: Omit<Metadata['edit'], 'mainField'> & {\n    mainField?: string;\n  };\n  list: Omit<Metadata['list'], 'mainField'>;\n}\n\ntype ReturnLayout<TLayout> = TLayout extends FormattedContentTypeLayout\n  ? SettingsViewContentTypeLayout\n  : SettingsViewComponentLayout;\n\nconst formatLayoutForSettingsView = <\n  TLayout extends FormattedContentTypeLayout | FormattedComponentLayout\n>({\n  layouts,\n  metadatas,\n  ...rest\n}: TLayout): ReturnLayout<TLayout> => {\n  // @ts-expect-error – TODO: fix this.\n  return {\n    ...rest,\n    layouts: {\n      edit: layouts.edit.map((row) =>\n        row.map(({ name, size }) => ({\n          name,\n          size,\n        }))\n      ),\n      list: layouts.list.map((obj) => {\n        if (typeof obj === 'object' && 'name' in obj) {\n          return obj.name;\n        }\n\n        return obj;\n      }),\n    },\n    metadatas: Object.keys(metadatas).reduce<Record<string, MetadataWithStringMainField>>(\n      (acc, current) => {\n        const currentMetadatas = metadatas[current] ?? {};\n\n        if (currentMetadatas.edit.mainField) {\n          return {\n            ...acc,\n            [current]: {\n              edit: {\n                ...currentMetadatas.edit,\n                mainField: currentMetadatas.edit.mainField.name,\n              },\n              list: omit(currentMetadatas.list, ['mainField']),\n            },\n          };\n        } else {\n          return {\n            ...acc,\n            [current]: {\n              edit: currentMetadatas.edit as MetadataWithStringMainField['edit'],\n              list: omit(currentMetadatas.list, ['mainField']),\n            },\n          };\n        }\n      },\n      {}\n    ),\n  };\n};\n\ninterface SettingsViewContentTypeLayout\n  extends Omit<FormattedContentTypeLayout, 'metadatas' | 'layouts'> {\n  layouts: {\n    edit: Array<Array<{ name: string; size: number }>>;\n    list: Array<string>;\n  };\n  metadatas: Record<string, MetadataWithStringMainField>;\n}\n\ninterface SettingsViewComponentLayout\n  extends Omit<FormattedComponentLayout, 'metadatas' | 'layouts'> {\n  layouts: {\n    edit: Array<Array<{ name: string; size: number }>>;\n    list: Array<string>;\n  };\n  metadatas: Record<string, MetadataWithStringMainField>;\n}\n\nexport { formatLayouts, formatLayoutForSettingsView };\nexport type {\n  FormattedLayouts,\n  FormattedContentTypeLayout,\n  FormattedComponentLayout,\n  EditLayoutRow,\n  Metadata,\n  SettingsViewContentTypeLayout,\n  SettingsViewComponentLayout,\n};\n","import * as React from 'react';\n\nimport { useFetchClient } from '@strapi/helper-plugin';\nimport { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport { useQuery } from 'react-query';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { selectSchemas } from '../pages/App';\nimport { formatLayouts } from '../utils/layouts';\n\nconst useContentTypeLayout = (contentTypeUID: string) => {\n  const schemas = useTypedSelector(selectSchemas);\n  const { get } = useFetchClient();\n\n  const { data, isLoading, refetch } = useQuery(\n    ['content-manager', 'content-types', contentTypeUID, 'configuration'],\n    async () => {\n      const {\n        data: { data },\n      } = await get<Contracts.ContentTypes.FindContentTypeConfiguration.Response>(\n        `/content-manager/content-types/${contentTypeUID}/configuration`\n      );\n\n      return data;\n    }\n  );\n\n  const layout = React.useMemo(() => (data ? formatLayouts(data, schemas) : null), [data, schemas]);\n\n  return {\n    isLoading,\n    layout,\n    updateLayout: refetch,\n  };\n};\n\nexport { useContentTypeLayout };\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nexport const LayoutDndContext = React.createContext();\n\nexport function LayoutDndProvider({\n  attributes,\n  buttonData,\n  children,\n  goTo,\n  layout,\n  metadatas,\n  moveItem,\n  moveRow,\n  onAddData,\n  relationsLayout,\n  removeField,\n  selectedItemName,\n  setEditFieldToSelect,\n  ...rest\n}) {\n  return (\n    <LayoutDndContext.Provider\n      value={{\n        attributes,\n        buttonData,\n        goTo,\n        layout,\n        metadatas,\n        moveItem,\n        moveRow,\n        onAddData,\n        relationsLayout,\n        removeField,\n        selectedItemName,\n        setEditFieldToSelect,\n        ...rest,\n      }}\n    >\n      {children}\n    </LayoutDndContext.Provider>\n  );\n}\n\nLayoutDndProvider.defaultProps = {\n  attributes: {},\n  buttonData: [],\n  goTo() {},\n  layout: [],\n  metadatas: {},\n  moveItem() {},\n  moveRow() {},\n  onAddData() {},\n  relationsLayout: [],\n  removeField() {},\n  selectedItemName: null,\n  setEditFieldToSelect() {},\n};\n\nLayoutDndProvider.propTypes = {\n  attributes: PropTypes.object,\n  buttonData: PropTypes.array,\n  children: PropTypes.node.isRequired,\n  goTo: PropTypes.func,\n  layout: PropTypes.array,\n  metadatas: PropTypes.object,\n  moveItem: PropTypes.func,\n  moveRow: PropTypes.func,\n  onAddData: PropTypes.func,\n  relationsLayout: PropTypes.array,\n  removeField: PropTypes.func,\n  selectedItemName: PropTypes.string,\n  setEditFieldToSelect: PropTypes.func,\n};\n","import * as React from 'react';\n\nimport { LayoutDndContext } from '../components/LayoutDndProvider';\n\nexport function useLayoutDnd() {\n  return React.useContext(LayoutDndContext);\n}\n","/**\n *\n * EditViewButton\n *\n */\n\nimport React from 'react';\n\nimport { CheckPermissions, LinkButton, useTracking } from '@strapi/helper-plugin';\nimport { Pencil } from '@strapi/icons';\nimport get from 'lodash/get';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nconst permissions = [{ action: 'plugin::content-type-builder.read', subject: null }];\n\n// Create link from content-type-builder to content-manager\nconst LinkToCTB = () => {\n  const { trackUsage } = useTracking();\n  const { formatMessage } = useIntl();\n  const { slug, modifiedData, isContentTypeView } = useLayoutDnd();\n  const type = isContentTypeView ? 'content-types' : 'components';\n\n  const baseUrl = `/plugins/content-type-builder/${\n    type === 'content-types' ? type : 'component-categories'\n  }`;\n  const category = get(modifiedData, 'category', '');\n\n  const suffixUrl = type === 'content-types' ? slug : `${category}/${slug}`;\n\n  const handleClick = () => {\n    trackUsage('willEditEditLayout');\n  };\n\n  if (slug === 'strapi::administrator') {\n    return null;\n  }\n\n  return (\n    <CheckPermissions permissions={permissions}>\n      <LinkButton\n        to={`${baseUrl}/${suffixUrl}`}\n        onClick={handleClick}\n        size=\"S\"\n        startIcon={<Pencil />}\n        variant=\"secondary\"\n      >\n        {formatMessage({\n          id: getTranslation(`edit-settings-view.link-to-ctb.${type}`),\n          defaultMessage: 'Edit the content type',\n        })}\n      </LinkButton>\n    </CheckPermissions>\n  );\n};\n\nexport default LinkToCTB;\n","import React from 'react';\n\nimport { Box, Flex, Grid, GridItem, Typography } from '@strapi/design-system';\nimport { Link } from '@strapi/helper-plugin';\nimport { Cog } from '@strapi/icons';\nimport get from 'lodash/get';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nconst ComponentFieldList = ({ componentUid }) => {\n  const { componentLayouts } = useLayoutDnd();\n  const { formatMessage } = useIntl();\n  const componentData = get(componentLayouts, [componentUid], {});\n  const componentLayout = get(componentData, ['layouts', 'edit'], []);\n\n  return (\n    <Box padding={3}>\n      {componentLayout.map((row, index) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <Grid gap={4} key={index}>\n          {row.map((rowContent) => (\n            <GridItem key={rowContent.name} col={rowContent.size}>\n              <Box paddingTop={2}>\n                <Flex\n                  alignItems=\"center\"\n                  background=\"neutral0\"\n                  paddingLeft={3}\n                  paddingRight={3}\n                  height={`${32 / 16}rem`}\n                  hasRadius\n                  borderColor=\"neutral200\"\n                >\n                  <Typography textColor=\"neutral800\">{rowContent.name}</Typography>\n                </Flex>\n              </Box>\n            </GridItem>\n          ))}\n        </Grid>\n      ))}\n      <Box paddingTop={2}>\n        <Link\n          startIcon={<Cog />}\n          to={`/content-manager/components/${componentUid}/configurations/edit`}\n        >\n          {formatMessage({\n            id: getTranslation('components.FieldItem.linkToComponentLayout'),\n            defaultMessage: \"Set the component's layout\",\n          })}\n        </Link>\n      </Box>\n    </Box>\n  );\n};\n\nComponentFieldList.propTypes = {\n  componentUid: PropTypes.string.isRequired,\n};\n\nexport default ComponentFieldList;\n","import { Flex, Icon } from '@strapi/design-system';\nimport * as Icons from '@strapi/icons';\n\nimport type { Schema } from '@strapi/types';\n\ninterface ComponentIconProps {\n  showBackground?: boolean;\n  icon?: Schema.ContentTypeInfo['icon'];\n}\n\nconst ComponentIcon = ({ showBackground = true, icon = 'cube' }: ComponentIconProps) => {\n  return (\n    <Flex\n      alignItems=\"center\"\n      background={showBackground ? 'neutral200' : undefined}\n      justifyContent=\"center\"\n      height={8}\n      width={8}\n      color=\"neutral600\"\n      borderRadius={showBackground ? '50%' : 0}\n    >\n      <Icon\n        as={COMPONENT_ICONS[icon as keyof typeof COMPONENT_ICONS] || COMPONENT_ICONS.cube}\n        height={5}\n        width={5}\n      />\n    </Flex>\n  );\n};\n\nconst COMPONENT_ICONS = {\n  alien: Icons.Alien,\n  apps: Icons.Apps,\n  archive: Icons.Archive,\n  arrowDown: Icons.ArrowDown,\n  arrowLeft: Icons.ArrowLeft,\n  arrowRight: Icons.ArrowRight,\n  arrowUp: Icons.ArrowUp,\n  attachment: Icons.Attachment,\n  bell: Icons.Bell,\n  bold: Icons.Bold,\n  book: Icons.Book,\n  briefcase: Icons.Briefcase,\n  brush: Icons.Brush,\n  bulletList: Icons.BulletList,\n  calendar: Icons.Calendar,\n  car: Icons.Car,\n  cast: Icons.Cast,\n  chartBubble: Icons.ChartBubble,\n  chartCircle: Icons.ChartCircle,\n  chartPie: Icons.ChartPie,\n  check: Icons.Check,\n  clock: Icons.Clock,\n  cloud: Icons.Cloud,\n  code: Icons.Code,\n  cog: Icons.Cog,\n  collapse: Icons.Collapse,\n  command: Icons.Command,\n  connector: Icons.Connector,\n  crop: Icons.Crop,\n  crown: Icons.Crown,\n  cube: Icons.Cube,\n  cup: Icons.Cup,\n  cursor: Icons.Cursor,\n  dashboard: Icons.Dashboard,\n  database: Icons.Database,\n  discuss: Icons.Discuss,\n  doctor: Icons.Doctor,\n  earth: Icons.Earth,\n  emotionHappy: Icons.EmotionHappy,\n  emotionUnhappy: Icons.EmotionUnhappy,\n  envelop: Icons.Envelop,\n  exit: Icons.Exit,\n  expand: Icons.Expand,\n  eye: Icons.Eye,\n  feather: Icons.Feather,\n  file: Icons.File,\n  fileError: Icons.FileError,\n  filePdf: Icons.FilePdf,\n  filter: Icons.Filter,\n  folder: Icons.Folder,\n  gate: Icons.Gate,\n  gift: Icons.Gift,\n  globe: Icons.Globe,\n  grid: Icons.Grid,\n  handHeart: Icons.HandHeart,\n  hashtag: Icons.Hashtag,\n  headphone: Icons.Headphone,\n  heart: Icons.Heart,\n  house: Icons.House,\n  information: Icons.Information,\n  italic: Icons.Italic,\n  key: Icons.Key,\n  landscape: Icons.Landscape,\n  layer: Icons.Layer,\n  layout: Icons.Layout,\n  lightbulb: Icons.Lightbulb,\n  link: Icons.Link,\n  lock: Icons.Lock,\n  magic: Icons.Magic,\n  manyToMany: Icons.ManyToMany,\n  manyToOne: Icons.ManyToOne,\n  manyWays: Icons.ManyWays,\n  medium: Icons.Medium,\n  message: Icons.Message,\n  microphone: Icons.Microphone,\n  monitor: Icons.Monitor,\n  moon: Icons.Moon,\n  music: Icons.Music,\n  oneToMany: Icons.OneToMany,\n  oneToOne: Icons.OneToOne,\n  oneWay: Icons.OneWay,\n  paint: Icons.Paint,\n  paintBrush: Icons.PaintBrush,\n  paperPlane: Icons.PaperPlane,\n  pencil: Icons.Pencil,\n  phone: Icons.Phone,\n  picture: Icons.Picture,\n  pin: Icons.Pin,\n  pinMap: Icons.PinMap,\n  plane: Icons.Plane,\n  play: Icons.Play,\n  plus: Icons.Plus,\n  priceTag: Icons.PriceTag,\n  puzzle: Icons.Puzzle,\n  question: Icons.Question,\n  quote: Icons.Quote,\n  refresh: Icons.Refresh,\n  repeat: Icons.Repeat,\n  restaurant: Icons.Restaurant,\n  rocket: Icons.Rocket,\n  rotate: Icons.Rotate,\n  scissors: Icons.Scissors,\n  search: Icons.Search,\n  seed: Icons.Seed,\n  server: Icons.Server,\n  shield: Icons.Shield,\n  shirt: Icons.Shirt,\n  shoppingCart: Icons.ShoppingCart,\n  slideshow: Icons.Slideshow,\n  stack: Icons.Stack,\n  star: Icons.Star,\n  store: Icons.Store,\n  strikeThrough: Icons.StrikeThrough,\n  sun: Icons.Sun,\n  television: Icons.Television,\n  thumbDown: Icons.ThumbDown,\n  thumbUp: Icons.ThumbUp,\n  train: Icons.Train,\n  twitter: Icons.Twitter,\n  typhoon: Icons.Typhoon,\n  underline: Icons.Underline,\n  user: Icons.User,\n  volumeMute: Icons.VolumeMute,\n  volumeUp: Icons.VolumeUp,\n  walk: Icons.Walk,\n  wheelchair: Icons.Wheelchair,\n  write: Icons.Write,\n};\n\nexport { ComponentIcon };\nexport type { ComponentIconProps };\n","import React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { ComponentIcon } from '../../../components/ComponentIcon';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nconst CustomLink = styled(Flex)`\n  text-decoration: none;\n\n  &:focus,\n  &:hover {\n    ${({ theme }) => `\n      background-color: ${theme.colors.primary100};\n      border-color: ${theme.colors.primary200};\n\n      ${Typography} {\n          color: ${theme.colors.primary600};\n      }\n    `}\n\n    /* > ComponentIcon */\n    > div:first-child {\n      background: ${({ theme }) => theme.colors.primary200};\n      color: ${({ theme }) => theme.colors.primary600};\n\n      svg {\n        path {\n          fill: ${({ theme }) => theme.colors.primary600};\n        }\n      }\n    }\n  }\n`;\n\nconst DynamicZoneList = ({ components }) => {\n  const { componentLayouts } = useLayoutDnd();\n\n  return (\n    <Flex gap={2} overflow=\"scroll hidden\" padding={3}>\n      {components.map((componentUid) => (\n        <CustomLink\n          hasRadius\n          background=\"neutral0\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          height={`${84 / 16}rem`}\n          minWidth={`${140 / 16}rem`}\n          key={componentUid}\n          padding={2}\n          direction=\"column\"\n          borderColor=\"neutral200\"\n          as={Link}\n          to={`/content-manager/components/${componentUid}/configurations/edit`}\n        >\n          <ComponentIcon icon={componentLayouts?.[componentUid]?.info?.icon} />\n\n          <Box paddingTop={1}>\n            <Typography fontSize={1} textColor=\"neutral600\" fontWeight=\"bold\">\n              {componentLayouts?.[componentUid]?.info?.displayName ?? ''}\n            </Typography>\n          </Box>\n        </CustomLink>\n      ))}\n    </Flex>\n  );\n};\n\nDynamicZoneList.propTypes = {\n  components: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default DynamicZoneList;\n","import React from 'react';\n\nimport { Box, Flex, IconButton, Typography } from '@strapi/design-system';\nimport { Pencil, Trash } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { getTranslation } from '../../../utils/translations';\n\nimport ComponentFieldList from './ComponentFieldList';\nimport DynamicZoneList from './DynamicZoneList';\n\nconst CustomIconButton = styled(IconButton)`\n  background-color: transparent;\n  path {\n    fill: ${({ theme }) => theme.colors.neutral600};\n  }\n`;\n\nconst FieldButtonContent = ({ attribute, onEditField, onDeleteField, children }) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Box overflow=\"hidden\" width=\"100%\">\n      <Flex paddingLeft={3} alignItems=\"center\" justifyContent=\"space-between\">\n        <Typography fontWeight=\"semiBold\" textColor=\"neutral800\" ellipsis>\n          {children}\n        </Typography>\n        <Flex>\n          <CustomIconButton\n            label={formatMessage(\n              {\n                id: getTranslation('containers.ListSettingsView.modal-form.edit-label'),\n                defaultMessage: `Edit {fieldName}`,\n              },\n              { fieldName: children }\n            )}\n            onClick={onEditField}\n            icon={<Pencil />}\n            noBorder\n          />\n          <CustomIconButton\n            label={formatMessage(\n              {\n                id: 'global.delete-target',\n                defaultMessage: `Delete {target}`,\n              },\n              {\n                target: children,\n              }\n            )}\n            data-testid=\"delete-field\"\n            onClick={onDeleteField}\n            icon={<Trash />}\n            noBorder\n          />\n        </Flex>\n      </Flex>\n      {attribute?.type === 'component' && <ComponentFieldList componentUid={attribute.component} />}\n      {attribute?.type === 'dynamiczone' && <DynamicZoneList components={attribute.components} />}\n    </Box>\n  );\n};\n\nFieldButtonContent.defaultProps = {\n  attribute: undefined,\n};\n\nFieldButtonContent.propTypes = {\n  attribute: PropTypes.shape({\n    components: PropTypes.array,\n    component: PropTypes.string,\n    type: PropTypes.string,\n  }),\n  onEditField: PropTypes.func.isRequired,\n  onDeleteField: PropTypes.func.isRequired,\n  children: PropTypes.string.isRequired,\n};\n\nexport default FieldButtonContent;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport { Box, Flex, GridItem } from '@strapi/design-system';\nimport { Drag } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport styled from 'styled-components';\n\nimport { ItemTypes } from '../../../utils/dragAndDrop';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nimport FieldButtonContent from './FieldButtonContent';\n\nconst Wrapper = styled(Flex)`\n  position: relative;\n  ${({ isFirst, isLast, hasHorizontalPadding }) => {\n    if (isFirst) {\n      return `\n        padding-right: 4px;\n      `;\n    }\n    if (isLast) {\n      return `\n        padding-left: 4px;\n      `;\n    }\n\n    if (hasHorizontalPadding) {\n      return `\n        padding: 0 4px;\n      `;\n    }\n\n    return '';\n  }}\n  ${({ showRightCarret, showLeftCarret, theme }) => {\n    if (showRightCarret) {\n      return `\n        &:after {\n          content: '';\n          position: absolute;\n          right: -1px;\n          background-color: ${theme.colors.primary600};\n          width: 2px;\n          height: 100%;\n          align-self: stretch;\n          z-index: 1;\n        }\n      `;\n    }\n\n    if (showLeftCarret) {\n      return `\n        &:before {\n          content: '';\n          position: absolute;\n          left: -1px;\n          background-color: ${theme.colors.primary600};\n          width: 2px;\n          height: 100%;\n          align-self: stretch;\n          z-index: 1;\n        }\n      `;\n    }\n\n    return '';\n  }};\n`;\nconst CustomDragIcon = styled(Drag)`\n  height: ${12 / 16}rem;\n  width: ${12 / 16}rem;\n  path {\n    fill: ${({ theme }) => theme.colors.neutral600};\n  }\n`;\nconst CustomFlex = styled(Flex)`\n  display: ${({ dragStart }) => (dragStart ? 'none' : 'flex')};\n  opacity: ${({ isDragging, isFullSize, isHidden }) => {\n    if (isDragging && !isFullSize) {\n      return 0.2;\n    }\n\n    if ((isDragging && isFullSize) || isHidden) {\n      return 0;\n    }\n\n    return 1;\n  }};\n`;\nconst DragButton = styled(Flex)`\n  cursor: all-scroll;\n  border-right: 1px solid ${({ theme }) => theme.colors.neutral200};\n`;\n\nconst DisplayedFieldButton = ({\n  attribute,\n  children,\n  index,\n  lastIndex,\n  moveItem,\n  moveRow,\n  name,\n  onDeleteField,\n  onEditField,\n  rowIndex,\n  size,\n}) => {\n  const [dragStart, setDragStart] = useState(false);\n  const isHidden = name === '_TEMP_';\n  const { setIsDraggingSibling } = useLayoutDnd();\n  const isFullSize = size === 12;\n\n  const dragRef = useRef(null);\n  const dropRef = useRef(null);\n  const [{ clientOffset, isOver }, drop] = useDrop({\n    accept: ItemTypes.EDIT_FIELD,\n    hover(item, monitor) {\n      if (!dropRef.current) {\n        return;\n      }\n\n      // We use the hover only to reorder full size items\n      if (item.size !== 12) {\n        return;\n      }\n\n      const dragIndex = monitor.getItem().index;\n      const hoverIndex = index;\n      const dragRow = monitor.getItem().rowIndex;\n      const targetRow = rowIndex;\n\n      // Don't replace item with themselves\n      if (dragIndex === hoverIndex && dragRow === targetRow) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = dropRef.current.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragRow < targetRow && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragRow > targetRow && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      moveRow(dragRow, targetRow);\n\n      item.rowIndex = targetRow;\n      item.itemIndex = hoverIndex;\n    },\n    drop(item, monitor) {\n      if (!dropRef.current) {\n        return;\n      }\n\n      const dragIndex = monitor.getItem().index;\n      const hoverIndex = index;\n      const dragRow = monitor.getItem().rowIndex;\n      const targetRow = rowIndex;\n\n      // Don't reorder on drop for full size elements since it is already done in the hover\n      if (item.size === 12) {\n        return;\n      }\n\n      // Don't replace item with themselves\n      if (dragIndex === hoverIndex && dragRow === targetRow) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = dropRef.current.getBoundingClientRect();\n\n      // Scroll window if mouse near vertical edge(100px)\n\n      // Horizontal Check --\n      if (\n        Math.abs(monitor.getClientOffset().x - hoverBoundingRect.left) >\n        hoverBoundingRect.width / 1.8\n      ) {\n        moveItem(dragIndex, hoverIndex + 1, dragRow, targetRow);\n\n        item.itemIndex = hoverIndex + 1;\n        item.rowIndex = targetRow;\n\n        return;\n      }\n\n      // Vertical Check |\n\n      // Time to actually perform the action\n      moveItem(dragIndex, hoverIndex, dragRow, targetRow);\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n\n      item.itemIndex = hoverIndex;\n      item.rowIndex = targetRow;\n    },\n    collect: (monitor) => ({\n      canDrop: monitor.canDrop(),\n      clientOffset: monitor.getClientOffset(),\n      isOver: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true }),\n      itemType: monitor.getItemType(),\n    }),\n  });\n  const [{ isDragging, getItem }, drag, dragPreview] = useDrag({\n    type: ItemTypes.EDIT_FIELD,\n    item() {\n      setIsDraggingSibling(true);\n\n      return {\n        index,\n        labelField: children,\n        rowIndex,\n        name,\n        size,\n      };\n    },\n    canDrag() {\n      // Each row of the layout has a max size of 12 (based on bootstrap grid system)\n      // So in order to offer a better drop zone we add the _TEMP_ div to complete the remaining substract (12 - existing)\n      // Those divs cannot be dragged\n      // If we wanted to offer the ability to create new lines in the layout (which will come later)\n      // We will need to add a 12 size _TEMP_ div to offer a drop target between each existing row.\n      return name !== '_TEMP_';\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n      getItem: monitor.getItem(),\n    }),\n    end() {\n      setIsDraggingSibling(false);\n    },\n  });\n\n  // Remove the default preview when the item is being dragged\n  // The preview is handled by the DragLayer\n  useEffect(() => {\n    dragPreview(getEmptyImage(), { captureDraggingState: true });\n  }, [dragPreview]);\n\n  // Create the refs\n  // We need 1 for the drop target\n  // 1 for the drag target\n  const refs = {\n    dragRef: drag(dragRef),\n    dropRef: drop(dropRef),\n  };\n\n  let showLeftCarret = false;\n  let showRightCarret = false;\n\n  if (dropRef.current && clientOffset) {\n    const hoverBoundingRect = dropRef.current.getBoundingClientRect();\n\n    showLeftCarret =\n      isOver &&\n      getItem.size !== 12 &&\n      Math.abs(clientOffset.x - hoverBoundingRect.left) < hoverBoundingRect.width / 2;\n    showRightCarret =\n      isOver &&\n      getItem.size !== 12 &&\n      Math.abs(clientOffset.x - hoverBoundingRect.left) > hoverBoundingRect.width / 2;\n\n    if (name === '_TEMP_') {\n      showLeftCarret = isOver && getItem.size !== 12;\n      showRightCarret = false;\n    }\n  }\n\n  const getHeight = () => {\n    if (attribute && isFullSize) {\n      return `${74 / 16}rem`;\n    }\n\n    return `${32 / 16}rem`;\n  };\n\n  const isFirst = index === 0 && !isFullSize;\n  const isLast = index === lastIndex && !isFullSize;\n  const hasHorizontalPadding = index !== 0 && !isFullSize;\n\n  return (\n    <GridItem col={size}>\n      <Wrapper\n        ref={refs.dropRef}\n        showLeftCarret={showLeftCarret}\n        showRightCarret={showRightCarret}\n        isFirst={isFirst}\n        isLast={isLast}\n        hasHorizontalPadding={hasHorizontalPadding}\n        onDrag={() => {\n          if (isFullSize && !dragStart) {\n            setDragStart(true);\n          }\n        }}\n        onDragEnd={() => {\n          if (isFullSize) {\n            setDragStart(false);\n          }\n        }}\n      >\n        {dragStart && isFullSize && (\n          <Box\n            // style={{ display: isDragging ? 'block' : 'none' }}\n            width=\"100%\"\n            height=\"2px\"\n            background=\"primary600\"\n          />\n        )}\n        <CustomFlex\n          width={isFullSize && dragStart ? 0 : '100%'}\n          borderColor=\"neutral150\"\n          hasRadius\n          background=\"neutral100\"\n          minHeight={getHeight()}\n          alignItems=\"stretch\"\n          isDragging={isDragging}\n          dragStart={dragStart}\n          isFullSize={isFullSize}\n          isHidden={isHidden}\n        >\n          <DragButton\n            as=\"span\"\n            type=\"button\"\n            ref={refs.dragRef}\n            onClick={(e) => e.stopPropagation()}\n            alignItems=\"center\"\n            paddingLeft={3}\n            paddingRight={3}\n            // Disable the keyboard navigation since the drag n drop isn't accessible with the keyboard for the moment\n            tabIndex={-1}\n          >\n            <CustomDragIcon />\n          </DragButton>\n          {!isHidden && (\n            <FieldButtonContent\n              attribute={attribute}\n              onEditField={onEditField}\n              onDeleteField={onDeleteField}\n            >\n              {children}\n            </FieldButtonContent>\n          )}\n        </CustomFlex>\n      </Wrapper>\n    </GridItem>\n  );\n};\n\nDisplayedFieldButton.defaultProps = {\n  attribute: undefined,\n};\n\nDisplayedFieldButton.propTypes = {\n  attribute: PropTypes.shape({\n    components: PropTypes.array,\n    component: PropTypes.string,\n    type: PropTypes.string,\n  }),\n  children: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  moveItem: PropTypes.func.isRequired,\n  moveRow: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  onDeleteField: PropTypes.func.isRequired,\n  onEditField: PropTypes.func.isRequired,\n  rowIndex: PropTypes.number.isRequired,\n  lastIndex: PropTypes.number.isRequired,\n  size: PropTypes.number.isRequired,\n};\n\nexport default DisplayedFieldButton;\n","import React from 'react';\n\nimport get from 'lodash/get';\nimport PropTypes from 'prop-types';\n\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nimport DisplayedFieldButton from './DisplayedFieldButton';\n\nconst RowItemsLayout = ({ rowItem, onRemoveField, rowId, rowIndex, index, lastIndex }) => {\n  const { setEditFieldToSelect, attributes, modifiedData, moveRow, moveItem } = useLayoutDnd();\n  const attribute = get(attributes, [rowItem.name], {});\n  const attributeLabel = get(modifiedData, ['metadatas', rowItem.name, 'edit', 'label'], '');\n\n  return (\n    <DisplayedFieldButton\n      onEditField={() => setEditFieldToSelect(rowItem.name)}\n      onDeleteField={() => onRemoveField(rowId, index)}\n      attribute={attribute}\n      index={index}\n      lastIndex={lastIndex}\n      rowIndex={rowIndex}\n      name={rowItem.name}\n      size={rowItem.size}\n      moveRow={moveRow}\n      moveItem={moveItem}\n    >\n      {attributeLabel || rowItem.name}\n    </DisplayedFieldButton>\n  );\n};\n\nRowItemsLayout.propTypes = {\n  index: PropTypes.number.isRequired,\n  lastIndex: PropTypes.number.isRequired,\n  onRemoveField: PropTypes.func.isRequired,\n  rowId: PropTypes.number.isRequired,\n  rowIndex: PropTypes.number.isRequired,\n  rowItem: PropTypes.object.isRequired,\n};\n\nexport default RowItemsLayout;\n","import React from 'react';\n\nimport { Grid } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\n\nimport RowItemsLayout from './RowItemsLayout';\n\nconst RowsLayout = ({ row, onRemoveField, rowIndex }) => {\n  return (\n    <Grid>\n      {row.rowContent.map((rowItem, index) => {\n        return (\n          <RowItemsLayout\n            key={rowItem.name}\n            rowItem={rowItem}\n            index={index}\n            rowId={row.rowId}\n            onRemoveField={onRemoveField}\n            rowIndex={rowIndex}\n            lastIndex={row.rowContent.length - 1}\n          />\n        );\n      })}\n    </Grid>\n  );\n};\n\nRowsLayout.propTypes = {\n  onRemoveField: PropTypes.func.isRequired,\n  row: PropTypes.object.isRequired,\n  rowIndex: PropTypes.number.isRequired,\n};\n\nexport default RowsLayout;\n","import React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { Menu } from '@strapi/design-system/v2';\nimport { Plus } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\n\nimport LinkToCTB from './LinkToCTB';\nimport RowsLayout from './RowsLayout';\n\nconst DisplayedFields = ({ editLayout, fields, onRemoveField, onAddField }) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n      <Flex justifyContent=\"space-between\">\n        <div>\n          <Box>\n            <Typography fontWeight=\"bold\">\n              {formatMessage({\n                id: getTranslation('containers.ListPage.displayedFields'),\n                defaultMessage: 'Displayed fields',\n              })}\n            </Typography>\n          </Box>\n          <Box>\n            <Typography variant=\"pi\" textColor=\"neutral600\">\n              {formatMessage({\n                id: 'containers.SettingPage.editSettings.description',\n                defaultMessage: 'Drag & drop the fields to build the layout',\n              })}\n            </Typography>\n          </Box>\n        </div>\n        <LinkToCTB />\n      </Flex>\n      <Box padding={4} hasRadius borderStyle=\"dashed\" borderWidth=\"1px\" borderColor=\"neutral300\">\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n          {editLayout.map((row, index) => (\n            <RowsLayout key={row.rowId} row={row} rowIndex={index} onRemoveField={onRemoveField} />\n          ))}\n          <Menu.Root>\n            <Menu.Trigger\n              startIcon={<Plus />}\n              endIcon={null}\n              disabled={fields.length === 0}\n              fullWidth\n              variant=\"secondary\"\n            >\n              {formatMessage({\n                id: getTranslation('containers.SettingPage.add.field'),\n                defaultMessage: 'Insert another field',\n              })}\n            </Menu.Trigger>\n            <Menu.Content>\n              {fields.map((field) => (\n                <Menu.Item key={field} onSelect={() => onAddField(field)}>\n                  {field}\n                </Menu.Item>\n              ))}\n            </Menu.Content>\n          </Menu.Root>\n        </Flex>\n      </Box>\n    </Flex>\n  );\n};\n\nDisplayedFields.propTypes = {\n  editLayout: PropTypes.array.isRequired,\n  fields: PropTypes.array.isRequired,\n  onAddField: PropTypes.func.isRequired,\n  onRemoveField: PropTypes.func.isRequired,\n};\n\nexport default DisplayedFields;\n","import React from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport { useCustomFields } from '@strapi/helper-plugin';\nimport {\n  Boolean,\n  Component,\n  Date,\n  DynamicZone,\n  Email,\n  Enumeration,\n  Json,\n  Media,\n  Number,\n  Relation,\n  Text,\n  Uid,\n} from '@strapi/icons';\nimport PropTypes from 'prop-types';\n\nconst iconByTypes = {\n  biginteger: <Number />,\n  boolean: <Boolean />,\n  date: <Date />,\n  datetime: <Date />,\n  decimal: <Number />,\n  email: <Email />,\n  enum: <Enumeration />,\n  enumeration: <Enumeration />,\n  file: <Media />,\n  files: <Media />,\n  float: <Number />,\n  integer: <Number />,\n  media: <Media />,\n  number: <Number />,\n  relation: <Relation />,\n  string: <Text />,\n  text: <Text />,\n  richtext: <Text />,\n  time: <Date />,\n  timestamp: <Date />,\n  json: <Json />,\n  uid: <Uid />,\n  component: <Component />,\n  dynamiczone: <DynamicZone />,\n};\n\nconst FieldTypeIcon = ({ type, customFieldUid }) => {\n  const customFieldsRegistry = useCustomFields();\n\n  let Compo = iconByTypes[type];\n\n  if (customFieldUid) {\n    const customField = customFieldsRegistry.get(customFieldUid);\n    const CustomFieldIcon = customField.icon;\n\n    if (CustomFieldIcon) {\n      Compo = (\n        <Box marginRight={3} width={7} height={6}>\n          <CustomFieldIcon />\n        </Box>\n      );\n    }\n  }\n\n  if (!iconByTypes[type]) {\n    return null;\n  }\n\n  return Compo;\n};\n\nFieldTypeIcon.defaultProps = {\n  customFieldUid: null,\n};\n\nFieldTypeIcon.propTypes = {\n  type: PropTypes.string.isRequired,\n  customFieldUid: PropTypes.string,\n};\n\nexport default FieldTypeIcon;\n","const createPossibleMainFieldsForModelsAndComponents = (array) => {\n  return array.reduce((acc, current) => {\n    const attributes = current?.attributes ?? {};\n    const possibleMainFields = Object.keys(attributes).filter((attr) => {\n      return ![\n        'boolean',\n        'component',\n        'dynamiczone',\n        'json',\n        'media',\n        'password',\n        'relation',\n        'text',\n        'richtext',\n        'blocks',\n      ].includes(attributes?.[attr]?.type ?? '');\n    });\n\n    acc[current.uid] = possibleMainFields;\n\n    return acc;\n  }, {});\n};\n\nexport default createPossibleMainFieldsForModelsAndComponents;\n","import { getTranslation } from '../../../utils/translations';\n\nconst getInputProps = (fieldName) => {\n  let type;\n\n  switch (fieldName) {\n    case 'description':\n    case 'label':\n    case 'placeholder':\n      type = 'text';\n      break;\n    case 'mainField':\n      type = 'select';\n      break;\n    case 'editable':\n      type = 'bool';\n      break;\n    default:\n      type = '';\n  }\n\n  const labelId =\n    fieldName === 'mainField'\n      ? getTranslation('containers.SettingPage.editSettings.entry.title')\n      : getTranslation(`form.Input.${fieldName}`);\n\n  return { type, label: { id: labelId } };\n};\n\nexport default getInputProps;\n","import React from 'react';\n\nimport { Option, Select, TextInput, ToggleInput } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nconst GenericInput = ({ type, options, onChange, value, name, ...inputProps }) => {\n  const { formatMessage } = useIntl();\n\n  switch (type) {\n    case 'text': {\n      return <TextInput onChange={onChange} value={value} name={name} {...inputProps} />;\n    }\n    case 'bool': {\n      return (\n        <ToggleInput\n          onChange={(e) => {\n            onChange({ target: { name, value: e.target.checked } });\n          }}\n          checked={value}\n          name={name}\n          onLabel={formatMessage({\n            id: 'app.components.ToggleCheckbox.on-label',\n            defaultMessage: 'On',\n          })}\n          offLabel={formatMessage({\n            id: 'app.components.ToggleCheckbox.off-label',\n            defaultMessage: 'Off',\n          })}\n          {...inputProps}\n        />\n      );\n    }\n    case 'select': {\n      return (\n        <Select\n          value={value}\n          name={name}\n          onChange={(value) => onChange({ target: { name, value } })}\n          {...inputProps}\n        >\n          {options.map((option) => (\n            <Option key={option} value={option}>\n              {option}\n            </Option>\n          ))}\n        </Select>\n      );\n    }\n    default:\n      return null;\n  }\n};\n\nGenericInput.defaultProps = {\n  options: undefined,\n};\n\nGenericInput.propTypes = {\n  type: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(PropTypes.string),\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]).isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nexport default GenericInput;\n","import React, { useCallback, useMemo } from 'react';\n\nimport { GridItem, Option, Select } from '@strapi/design-system';\nimport get from 'lodash/get';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport { useTypedSelector } from '../../../../core/store/hooks';\nimport { getTranslation } from '../../../utils/translations';\nimport { selectSchemas } from '../../App';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\nimport { createPossibleMainFieldsForModelsAndComponents, getInputProps } from '../utils';\n\nimport GenericInput from './GenericInput';\n\nconst FIELD_SIZES = [\n  [4, '33%'],\n  [6, '50%'],\n  [8, '66%'],\n  [12, '100%'],\n];\n\nconst ModalForm = ({ onMetaChange, onSizeChange }) => {\n  const { formatMessage } = useIntl();\n  const { modifiedData, selectedField, attributes, fieldForm } = useLayoutDnd();\n  const schemas = useSelector(selectSchemas);\n  const fieldSizes = useTypedSelector((state) => state['content-manager_app'].fieldSizes);\n\n  const formToDisplay = useMemo(() => {\n    if (!selectedField) {\n      return [];\n    }\n\n    const associatedMetas = get(modifiedData, ['metadatas', selectedField, 'edit'], {});\n\n    return Object.keys(associatedMetas).filter((meta) => meta !== 'visible');\n  }, [selectedField, modifiedData]);\n\n  const componentsAndModelsPossibleMainFields = useMemo(() => {\n    return createPossibleMainFieldsForModelsAndComponents(schemas);\n  }, [schemas]);\n\n  const getSelectedItemSelectOptions = useCallback(\n    (formType) => {\n      if (formType !== 'relation' && formType !== 'component') {\n        return [];\n      }\n\n      const targetKey = formType === 'component' ? 'component' : 'targetModel';\n      const key = get(modifiedData, ['attributes', selectedField, targetKey], '');\n\n      return get(componentsAndModelsPossibleMainFields, [key], []);\n    },\n\n    [selectedField, componentsAndModelsPossibleMainFields, modifiedData]\n  );\n\n  const metaFields = formToDisplay.map((meta) => {\n    const formType = get(attributes, [selectedField, 'type']);\n\n    if (\n      ['component', 'dynamiczone'].includes(formType) &&\n      !['label', 'description'].includes(meta)\n    ) {\n      return null;\n    }\n\n    if (formType === 'component' && meta !== 'label') {\n      return null;\n    }\n\n    if (['media', 'json', 'boolean'].includes(formType) && meta === 'placeholder') {\n      return null;\n    }\n\n    if (meta === 'step') {\n      return null;\n    }\n\n    return (\n      <GridItem col={6} key={meta}>\n        <GenericInput\n          type={getInputProps(meta).type}\n          hint={\n            meta === 'mainField'\n              ? formatMessage({\n                  id: getTranslation(\n                    'containers.SettingPage.editSettings.relation-field.description'\n                  ),\n                })\n              : ''\n          }\n          label={formatMessage({\n            id: get(getInputProps(meta), 'label.id', 'app.utils.defaultMessage'),\n          })}\n          name={meta}\n          onChange={onMetaChange}\n          value={get(fieldForm, ['metadata', meta], '')}\n          options={getSelectedItemSelectOptions(formType)}\n        />\n      </GridItem>\n    );\n  });\n\n  // Check for a custom input provided by a custom field, or use the default one for that type\n  const { type, customField } = attributes[selectedField];\n  const { isResizable } = fieldSizes[customField] ?? fieldSizes[type];\n\n  return (\n    <>\n      {metaFields}\n      {isResizable && (\n        <GridItem col={6} key=\"size\">\n          <Select\n            value={fieldForm?.size}\n            name=\"size\"\n            onChange={(value) => {\n              onSizeChange({ name: selectedField, value });\n            }}\n            label={formatMessage({\n              id: getTranslation('containers.SettingPage.editSettings.size.label'),\n              defaultMessage: 'Size',\n            })}\n          >\n            {FIELD_SIZES.map(([value, label]) => (\n              <Option key={value} value={value}>\n                {label}\n              </Option>\n            ))}\n          </Select>\n        </GridItem>\n      )}\n    </>\n  );\n};\n\nModalForm.propTypes = {\n  onMetaChange: PropTypes.func.isRequired,\n  onSizeChange: PropTypes.func.isRequired,\n};\n\nexport default ModalForm;\n","import React from 'react';\n\nimport {\n  Button,\n  Flex,\n  Grid,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  ModalLayout,\n  Typography,\n} from '@strapi/design-system';\nimport upperFirst from 'lodash/upperFirst';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport FieldTypeIcon from '../../../components/FieldTypeIcon';\nimport { getTranslation } from '../../../utils/translations';\nimport { useLayoutDnd } from '../hooks/useLayoutDnd';\n\nimport ModalForm from './ModalForm';\n\nconst HeaderContainer = styled(Flex)`\n  svg {\n    width: ${32 / 16}rem;\n    height: ${24 / 16}rem;\n    margin-right: ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nconst FormModal = ({ onToggle, onMetaChange, onSizeChange, onSubmit, type, customFieldUid }) => {\n  const { selectedField } = useLayoutDnd();\n  const { formatMessage } = useIntl();\n\n  const getAttrType = () => {\n    if (type === 'timestamp') {\n      return 'date';\n    }\n\n    if (['decimal', 'float', 'integer', 'biginter'].includes(type)) {\n      return 'number';\n    }\n\n    return type;\n  };\n\n  return (\n    <ModalLayout onClose={onToggle} labelledBy=\"title\">\n      <form onSubmit={onSubmit}>\n        <ModalHeader>\n          <HeaderContainer>\n            <FieldTypeIcon type={getAttrType()} customFieldUid={customFieldUid} />\n            <Typography fontWeight=\"bold\" textColor=\"neutral800\" as=\"h2\" id=\"title\">\n              {formatMessage(\n                {\n                  id: getTranslation('containers.ListSettingsView.modal-form.edit-label'),\n                  defaultMessage: 'Edit {fieldName}',\n                },\n                { fieldName: upperFirst(selectedField) }\n              )}\n            </Typography>\n          </HeaderContainer>\n        </ModalHeader>\n        <ModalBody>\n          <Grid gap={4}>\n            <ModalForm onMetaChange={onMetaChange} onSizeChange={onSizeChange} />\n          </Grid>\n        </ModalBody>\n        <ModalFooter\n          startActions={\n            <Button onClick={onToggle} variant=\"tertiary\">\n              {formatMessage({ id: 'app.components.Button.cancel', defaultMessage: 'Cancel' })}\n            </Button>\n          }\n          endActions={\n            <Button type=\"submit\">\n              {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n            </Button>\n          }\n        />\n      </form>\n    </ModalLayout>\n  );\n};\n\nFormModal.defaultProps = {\n  customFieldUid: null,\n};\n\nFormModal.propTypes = {\n  customFieldUid: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired,\n  onToggle: PropTypes.func.isRequired,\n  onMetaChange: PropTypes.func.isRequired,\n  onSizeChange: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nexport default FormModal;\n","const getRowSize = (arr) => arr.reduce((sum, value) => sum + value.size, 0);\n\nconst createLayout = (arr) => {\n  return arr.reduce((acc, current, index) => {\n    const row = { rowId: index, rowContent: current };\n\n    return acc.concat(row);\n  }, []);\n};\n\nconst formatLayout = (arr) => {\n  return arr\n    .reduce((acc, current) => {\n      let toPush = [];\n      const currentRow = current.rowContent.reduce((acc2, curr) => {\n        const acc2Size = getRowSize(acc2);\n\n        if (curr.name === '_TEMP_') {\n          return acc2;\n        }\n\n        if (acc2Size + curr.size <= 12) {\n          acc2.push(curr);\n        } else {\n          toPush.push(curr);\n        }\n\n        return acc2;\n      }, []);\n      const rowId =\n        acc.length === 0\n          ? 0\n          : Math.max.apply(\n              Math,\n              acc.map((o) => o.rowId)\n            ) + 1;\n\n      const currentRowSize = getRowSize(currentRow);\n\n      if (currentRowSize < 12) {\n        currentRow.push({ name: '_TEMP_', size: 12 - currentRowSize });\n      }\n\n      acc.push({ rowId, rowContent: currentRow });\n\n      if (toPush.length > 0) {\n        const toPushSize = getRowSize(toPush);\n\n        if (toPushSize < 12) {\n          toPush.push({ name: '_TEMP_', size: 12 - toPushSize });\n        }\n\n        acc.push({ rowId: rowId + 1, rowContent: toPush });\n        toPush = [];\n      }\n\n      return acc;\n    }, [])\n    .filter((row) => row.rowContent.length > 0)\n    .filter((row) => {\n      if (row.rowContent.length === 1) {\n        return row.rowContent[0].name !== '_TEMP_';\n      }\n\n      return true;\n    });\n};\n\nconst unformatLayout = (arr) => {\n  return arr.reduce((acc, current) => {\n    const currentRow = current.rowContent.filter((content) => content.name !== '_TEMP_');\n\n    return acc.concat([currentRow]);\n  }, []);\n};\n\nconst getFieldSize = (name, layouts = []) => {\n  return layouts.reduce((acc, { rowContent }) => {\n    const size = rowContent.find((row) => row.name === name)?.size ?? null;\n\n    if (size) {\n      acc = size;\n    }\n\n    return acc;\n  }, null);\n};\n\nconst setFieldSize = (name, size, layouts = []) => {\n  return layouts.map((row) => {\n    row.rowContent = row.rowContent.map((column) => {\n      if (column.name === name) {\n        return {\n          ...column,\n          size,\n        };\n      }\n\n      return column;\n    });\n\n    return row;\n  });\n};\n\nexport { createLayout, formatLayout, getFieldSize, getRowSize, setFieldSize, unformatLayout };\n","import cloneDeep from 'lodash/cloneDeep';\nimport set from 'lodash/set';\n\nimport { createLayout, formatLayout } from './utils/layout';\n\nconst init = (initialState, mainLayout, components) => {\n  let initialData = cloneDeep(mainLayout);\n\n  set(initialData, ['layouts', 'edit'], formatLayout(createLayout(mainLayout.layouts.edit)));\n\n  return {\n    ...initialState,\n    initialData,\n    modifiedData: initialData,\n    componentLayouts: components,\n  };\n};\n\nexport default init;\n","import cloneDeep from 'lodash/cloneDeep';\n\nconst arrayMoveItem = (arr, from, to) => {\n  if (\n    Array.isArray(arr) &&\n    from >= 0 &&\n    to >= 0 &&\n    from <= arr.length - 1 &&\n    to <= arr.length - 1\n  ) {\n    const newArray = cloneDeep(arr);\n\n    const item = newArray.splice(from, 1);\n    newArray.splice(to, 0, item[0]);\n\n    return newArray;\n  }\n\n  return arr;\n};\n\nexport default arrayMoveItem;\n","const checkIfAttributeIsDisplayable = (attribute) => {\n  const { type } = attribute;\n\n  if (type === 'relation') {\n    return !(attribute?.relationType ?? '').toLowerCase().includes('morph');\n  }\n\n  return !['json', 'dynamiczone', 'richtext', 'password', 'blocks'].includes(type) && !!type;\n};\n\nexport default checkIfAttributeIsDisplayable;\n","import produce from 'immer';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { arrayMoveItem } from '../../utils';\n\nimport { formatLayout, getFieldSize, setFieldSize } from './utils/layout';\n\nconst DEFAULT_FIELD_SIZE = 6;\n\nconst initialState = {\n  fieldForm: {},\n  componentLayouts: {},\n  metaToEdit: '',\n  initialData: {},\n  metaForm: {},\n  modifiedData: {},\n};\n\nconst reducer = (state = initialState, action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, (draftState) => {\n    const layoutPathEdit = ['modifiedData', 'layouts', 'edit'];\n\n    switch (action.type) {\n      case 'MOVE_ROW': {\n        const editFieldLayoutValue = get(state, layoutPathEdit, []);\n        const { fromIndex, toIndex } = action;\n        set(draftState, layoutPathEdit, arrayMoveItem(editFieldLayoutValue, fromIndex, toIndex));\n        break;\n      }\n      case 'ON_ADD_FIELD': {\n        const newState = cloneDeep(state);\n        const attribute = get(newState, ['modifiedData', 'attributes', action.name], {});\n\n        // Get the default size, checking custom fields first, then the type and generic defaults\n        const size =\n          action.fieldSizes[attribute?.customField]?.default ??\n          action.fieldSizes[attribute?.type]?.default ??\n          DEFAULT_FIELD_SIZE;\n\n        const listSize = get(newState, layoutPathEdit, []).length;\n        const actualRowContentPath = [...layoutPathEdit, listSize - 1, 'rowContent'];\n        const rowContentToSet = get(newState, actualRowContentPath, []);\n        let newList = get(newState, layoutPathEdit, []);\n\n        if (Array.isArray(rowContentToSet)) {\n          set(\n            newList,\n            [listSize > 0 ? listSize - 1 : 0, 'rowContent'],\n            [...rowContentToSet, { name: action.name, size }]\n          );\n        } else {\n          set(\n            newList,\n            [listSize > 0 ? listSize - 1 : 0, 'rowContent'],\n            [{ name: action.name, size }]\n          );\n        }\n\n        const formattedList = formatLayout(newList);\n        set(draftState, layoutPathEdit, formattedList);\n        break;\n      }\n      case 'ON_CHANGE': {\n        set(draftState, ['modifiedData', ...action.keys], action.value);\n        break;\n      }\n      case 'ON_CHANGE_META': {\n        set(draftState, ['metaForm', 'metadata', ...action.keys], action.value);\n        break;\n      }\n      case 'ON_CHANGE_SIZE': {\n        set(draftState, ['metaForm', 'size'], action.value);\n        break;\n      }\n      case 'ON_RESET': {\n        draftState.modifiedData = state.initialData;\n        break;\n      }\n      case 'REMOVE_FIELD': {\n        const row = get(state, [...layoutPathEdit, action.rowIndex, 'rowContent'], []);\n        let newState = cloneDeep(state);\n\n        if (row.length === 1 || (row.length === 2 && get(row, [1, 'name'], '') === '_TEMP_')) {\n          const currentRowFieldList = get(state, layoutPathEdit, []);\n          set(\n            newState,\n            layoutPathEdit,\n            currentRowFieldList.filter((_, index) => action.rowIndex !== index)\n          );\n        } else {\n          set(\n            newState,\n            [...layoutPathEdit, action.rowIndex, 'rowContent'],\n            row.filter((_, index) => index !== action.fieldIndex)\n          );\n        }\n        const updatedList = formatLayout(get(newState, layoutPathEdit, []));\n        set(draftState, layoutPathEdit, updatedList);\n        break;\n      }\n      case 'REORDER_DIFF_ROW': {\n        const actualRowContent = get(\n          state,\n          [...layoutPathEdit, action.dragRowIndex, 'rowContent'],\n          []\n        );\n        const targetRowContent = get(\n          state,\n          [...layoutPathEdit, action.hoverRowIndex, 'rowContent'],\n          []\n        );\n        const itemToInsert = get(\n          state,\n          [...layoutPathEdit, action.dragRowIndex, 'rowContent', action.dragIndex],\n          {}\n        );\n        const rowContent = [...targetRowContent, itemToInsert];\n        let newState = cloneDeep(state);\n\n        set(\n          newState,\n          [...layoutPathEdit, action.dragRowIndex, 'rowContent'],\n          actualRowContent.filter((_, index) => action.dragIndex !== index)\n        );\n        set(\n          newState,\n          [...layoutPathEdit, action.hoverRowIndex, 'rowContent'],\n          arrayMoveItem(rowContent, rowContent.length - 1, action.hoverIndex)\n        );\n\n        const updatedList = formatLayout(get(newState, layoutPathEdit, []));\n        set(draftState, layoutPathEdit, updatedList);\n        break;\n      }\n      case 'REORDER_ROW': {\n        const newState = cloneDeep(state);\n        const rowContent = get(\n          newState,\n          [...layoutPathEdit, action.dragRowIndex, 'rowContent'],\n          []\n        );\n\n        set(\n          newState,\n          [...layoutPathEdit, action.dragRowIndex, 'rowContent'],\n          arrayMoveItem(rowContent, action.dragIndex, action.hoverIndex)\n        );\n\n        const updatedList = formatLayout(get(newState, layoutPathEdit, []));\n        set(draftState, layoutPathEdit, updatedList);\n        break;\n      }\n      case 'SET_FIELD_TO_EDIT': {\n        draftState.metaToEdit = action.name;\n        draftState.metaForm = {\n          metadata: get(state, ['modifiedData', 'metadatas', action.name, 'edit'], {}),\n          size: getFieldSize(action.name, state.modifiedData?.layouts?.edit) ?? DEFAULT_FIELD_SIZE,\n        };\n\n        break;\n      }\n      case 'SUBMIT_META_FORM': {\n        set(\n          draftState,\n          ['modifiedData', 'metadatas', state.metaToEdit, 'edit'],\n          state.metaForm.metadata\n        );\n\n        const layoutsCopy = cloneDeep(get(state, layoutPathEdit, []));\n        const nextLayoutValue = setFieldSize(state.metaToEdit, state.metaForm.size, layoutsCopy);\n\n        if (nextLayoutValue.length > 0) {\n          set(draftState, layoutPathEdit, formatLayout(nextLayoutValue));\n        }\n\n        break;\n      }\n      case 'SUBMIT_SUCCEEDED': {\n        draftState.initialData = state.modifiedData;\n        break;\n      }\n      case 'UNSET_FIELD_TO_EDIT': {\n        draftState.metaToEdit = '';\n        draftState.metaForm = {};\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport default reducer;\nexport { initialState };\n","import React, { useReducer, useState } from 'react';\n\nimport {\n  Box,\n  Button,\n  ContentLayout,\n  Divider,\n  Flex,\n  Grid,\n  GridItem,\n  HeaderLayout,\n  Main,\n  Option,\n  Select,\n  Typography,\n} from '@strapi/design-system';\nimport {\n  ConfirmDialog,\n  Link,\n  useFetchClient,\n  useNotification,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport { ArrowLeft, Check } from '@strapi/icons';\nimport cloneDeep from 'lodash/cloneDeep';\nimport isEqual from 'lodash/isEqual';\nimport upperFirst from 'lodash/upperFirst';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { useHistory } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../../core/store/hooks';\nimport { getTranslation } from '../../utils/translations';\n\nimport DisplayedFields from './components/DisplayedFields';\nimport ModalForm from './components/FormModal';\nimport { LayoutDndProvider } from './components/LayoutDndProvider';\nimport init from './init';\nimport reducer, { initialState } from './reducer';\nimport { unformatLayout } from './utils/layout';\n\nconst EditSettingsView = ({ mainLayout, components, isContentTypeView, slug, updateLayout }) => {\n  const [reducerState, dispatch] = useReducer(reducer, initialState, () =>\n    init(initialState, mainLayout, components)\n  );\n  const [isDraggingSibling, setIsDraggingSibling] = useState(false);\n  const { trackUsage } = useTracking();\n  const toggleNotification = useNotification();\n  const { goBack } = useHistory();\n  const [isModalFormOpen, setIsModalFormOpen] = useState(false);\n  const [isConfirmDialogOpen, setIsConfirmDialogOpen] = useState(false);\n  const { componentLayouts, initialData, modifiedData, metaToEdit, metaForm } = reducerState;\n  const { formatMessage } = useIntl();\n  const modelName = mainLayout.info.displayName;\n  const attributes = modifiedData?.attributes ?? {};\n  const fieldSizes = useTypedSelector((state) => state['content-manager_app'].fieldSizes);\n  const { put } = useFetchClient();\n\n  const entryTitleOptions = Object.keys(attributes).filter((attr) => {\n    const type = attributes?.[attr]?.type ?? '';\n\n    return (\n      ![\n        'dynamiczone',\n        'json',\n        'text',\n        'relation',\n        'component',\n        'boolean',\n        'media',\n        'password',\n        'richtext',\n        'timestamp',\n        'blocks',\n      ].includes(type) && !!type\n    );\n  });\n  const editLayout = modifiedData.layouts.edit;\n  const displayedFields = editLayout.flatMap((layout) => layout.rowContent);\n  const editLayoutFields = Object.keys(modifiedData.attributes)\n    .filter((attr) => (modifiedData?.metadatas?.[attr]?.edit?.visible ?? false) === true)\n    .filter((attr) => displayedFields.findIndex((el) => el.name === attr) === -1)\n    .sort();\n\n  const handleChange = ({ target: { name, value } }) => {\n    dispatch({\n      type: 'ON_CHANGE',\n      keys: name.split('.'),\n      value,\n    });\n  };\n\n  const handleToggleModal = () => {\n    setIsModalFormOpen((prev) => !prev);\n  };\n\n  const toggleConfirmDialog = () => {\n    setIsConfirmDialogOpen((prev) => !prev);\n  };\n\n  const handleMetaChange = ({ target: { name, value } }) => {\n    dispatch({\n      type: 'ON_CHANGE_META',\n      keys: name.split('.'),\n      value,\n    });\n  };\n\n  const handleSizeChange = ({ name, value }) => {\n    dispatch({\n      type: 'ON_CHANGE_SIZE',\n      name,\n      value,\n    });\n  };\n\n  const handleMetaSubmit = (e) => {\n    e.preventDefault();\n    dispatch({\n      type: 'SUBMIT_META_FORM',\n    });\n    handleToggleModal();\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    toggleConfirmDialog();\n  };\n\n  const submitMutation = useMutation(\n    (body) => {\n      return put(\n        isContentTypeView\n          ? `/content-manager/content-types/${slug}/configuration`\n          : `/content-manager/components/${slug}/configuration`,\n        body\n      );\n    },\n    {\n      onSuccess({ data }) {\n        if (updateLayout) {\n          updateLayout(data.data);\n        }\n        dispatch({\n          type: 'SUBMIT_SUCCEEDED',\n        });\n        toggleConfirmDialog();\n        trackUsage('didEditEditSettings');\n      },\n      onError() {\n        toggleNotification({ type: 'warning', message: { id: 'notification.error' } });\n      },\n    }\n  );\n  const { isLoading: isSubmittingForm } = submitMutation;\n\n  const handleConfirm = () => {\n    const { layouts, metadatas, settings } = cloneDeep(modifiedData);\n    submitMutation.mutate({\n      layouts: {\n        ...layouts,\n        edit: unformatLayout(layouts.edit),\n      },\n      metadatas,\n      settings,\n    });\n  };\n\n  const handleMoveRelation = (fromIndex, toIndex) => {\n    dispatch({\n      type: 'MOVE_RELATION',\n      fromIndex,\n      toIndex,\n    });\n  };\n\n  const handleMoveField = (fromIndex, toIndex) => {\n    dispatch({\n      type: 'MOVE_FIELD',\n      fromIndex,\n      toIndex,\n    });\n  };\n\n  const moveItem = (dragIndex, hoverIndex, dragRowIndex, hoverRowIndex) => {\n    // Same row = just reorder\n    if (dragRowIndex === hoverRowIndex) {\n      dispatch({\n        type: 'REORDER_ROW',\n        dragRowIndex,\n        dragIndex,\n        hoverIndex,\n      });\n    } else {\n      dispatch({\n        type: 'REORDER_DIFF_ROW',\n        dragIndex,\n        hoverIndex,\n        dragRowIndex,\n        hoverRowIndex,\n      });\n    }\n  };\n\n  const moveRow = (fromIndex, toIndex) => {\n    dispatch({\n      type: 'MOVE_ROW',\n      fromIndex,\n      toIndex,\n    });\n  };\n\n  return (\n    <LayoutDndProvider\n      isContentTypeView={isContentTypeView}\n      attributes={attributes}\n      modifiedData={modifiedData}\n      slug={slug}\n      componentLayouts={componentLayouts}\n      selectedField={metaToEdit}\n      fieldForm={metaForm}\n      onMoveRelation={handleMoveRelation}\n      onMoveField={handleMoveField}\n      moveRow={moveRow}\n      moveItem={moveItem}\n      setEditFieldToSelect={(name) => {\n        dispatch({\n          type: 'SET_FIELD_TO_EDIT',\n          name,\n        });\n        handleToggleModal();\n      }}\n      isDraggingSibling={isDraggingSibling}\n      setIsDraggingSibling={setIsDraggingSibling}\n    >\n      <Main>\n        <form onSubmit={handleSubmit}>\n          <HeaderLayout\n            title={formatMessage(\n              {\n                id: getTranslation('components.SettingsViewWrapper.pluginHeader.title'),\n                defaultMessage: `Configure the view - ${upperFirst(modelName)}`,\n              },\n              { name: upperFirst(modelName) }\n            )}\n            subtitle={formatMessage({\n              id: getTranslation(\n                'components.SettingsViewWrapper.pluginHeader.description.edit-settings'\n              ),\n              defaultMessage: 'Customize how the edit view will look like.',\n            })}\n            navigationAction={\n              <Link\n                startIcon={<ArrowLeft />}\n                onClick={(e) => {\n                  e.preventDefault();\n                  goBack();\n                }}\n                to=\"/\"\n              >\n                {formatMessage({\n                  id: 'global.back',\n                  defaultMessage: 'Back',\n                })}\n              </Link>\n            }\n            primaryAction={\n              <Button\n                disabled={isEqual(initialData, modifiedData)}\n                startIcon={<Check />}\n                type=\"submit\"\n              >\n                {formatMessage({ id: 'global.save', defaultMessage: 'Save' })}\n              </Button>\n            }\n          />\n          <ContentLayout>\n            <Box\n              background=\"neutral0\"\n              hasRadius\n              shadow=\"filterShadow\"\n              paddingTop={6}\n              paddingBottom={6}\n              paddingLeft={7}\n              paddingRight={7}\n            >\n              <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n                <Typography variant=\"delta\" as=\"h2\">\n                  {formatMessage({\n                    id: getTranslation('containers.SettingPage.settings'),\n                    defaultMessage: 'Settings',\n                  })}\n                </Typography>\n                <Grid>\n                  <GridItem col={6} s={12}>\n                    <Select\n                      label={formatMessage({\n                        id: getTranslation('containers.SettingPage.editSettings.entry.title'),\n                        defaultMessage: 'Entry title',\n                      })}\n                      hint={formatMessage({\n                        id: getTranslation(\n                          'containers.SettingPage.editSettings.entry.title.description'\n                        ),\n                        defaultMessage: 'Set the display field of your entry',\n                      })}\n                      onChange={(value) => {\n                        handleChange({\n                          target: {\n                            name: 'settings.mainField',\n                            value: value === '' ? null : value,\n                          },\n                        });\n                      }}\n                      value={modifiedData.settings.mainField}\n                    >\n                      {entryTitleOptions.map((attribute) => (\n                        <Option key={attribute} value={attribute}>\n                          {attribute}\n                        </Option>\n                      ))}\n                    </Select>\n                  </GridItem>\n                </Grid>\n                <Box paddingTop={2} paddingBottom={2}>\n                  <Divider />\n                </Box>\n                <Typography variant=\"delta\" as=\"h3\">\n                  {formatMessage({\n                    id: getTranslation('containers.SettingPage.view'),\n                    defaultMessage: 'View',\n                  })}\n                </Typography>\n\n                <DisplayedFields\n                  attributes={attributes}\n                  editLayout={editLayout}\n                  fields={editLayoutFields}\n                  onAddField={(field) => {\n                    dispatch({\n                      type: 'ON_ADD_FIELD',\n                      name: field,\n                      fieldSizes,\n                    });\n                  }}\n                  onRemoveField={(rowId, index) => {\n                    dispatch({\n                      type: 'REMOVE_FIELD',\n                      rowIndex: rowId,\n                      fieldIndex: index,\n                    });\n                  }}\n                />\n              </Flex>\n            </Box>\n          </ContentLayout>\n          <ConfirmDialog\n            bodyText={{\n              id: getTranslation('popUpWarning.warning.updateAllSettings'),\n              defaultMessage: 'This will modify all your settings',\n            }}\n            iconRightButton={<Check />}\n            isConfirmButtonLoading={isSubmittingForm}\n            isOpen={isConfirmDialogOpen}\n            onToggleDialog={toggleConfirmDialog}\n            onConfirm={handleConfirm}\n            variantRightButton=\"success-light\"\n          />\n        </form>\n        {isModalFormOpen && (\n          <ModalForm\n            onSubmit={handleMetaSubmit}\n            onToggle={handleToggleModal}\n            onMetaChange={handleMetaChange}\n            onSizeChange={handleSizeChange}\n            type={attributes?.[metaToEdit]?.type ?? ''}\n            customFieldUid={attributes?.[metaToEdit]?.customField ?? ''}\n          />\n        )}\n      </Main>\n    </LayoutDndProvider>\n  );\n};\n\nEditSettingsView.defaultProps = {\n  isContentTypeView: false,\n  updateLayout: null,\n};\n\nEditSettingsView.propTypes = {\n  components: PropTypes.object.isRequired,\n  isContentTypeView: PropTypes.bool,\n  mainLayout: PropTypes.shape({\n    attributes: PropTypes.object.isRequired,\n    info: PropTypes.object.isRequired,\n    layouts: PropTypes.shape({\n      list: PropTypes.array.isRequired,\n      edit: PropTypes.array.isRequired,\n    }).isRequired,\n    metadatas: PropTypes.object.isRequired,\n    options: PropTypes.object.isRequired,\n  }).isRequired,\n  slug: PropTypes.string.isRequired,\n  updateLayout: PropTypes.func,\n};\n\nexport default EditSettingsView;\n","import { createTypedSelector } from './core/store/hooks';\n\n/**\n * @deprecated\n *\n * Use `useTypedSelector` and access the state directly, this was only used so we knew\n * we were using the correct path. Which is state.admin_app.permissions\n */\nexport const selectAdminPermissions = createTypedSelector((state) => state.admin_app.permissions);\n","import { useAdmin } from '../../contexts/admin';\nimport {\n  InjectionZoneArea,\n  InjectionZoneBlock,\n  InjectionZoneContainer,\n  InjectionZoneModule,\n} from '../components/InjectionZone';\n\nexport const useInjectionZone = (area: InjectionZoneArea) => {\n  const { getAdminInjectedComponents } = useAdmin();\n\n  const [moduleName, page, position] = area.split('.') as [\n    InjectionZoneModule,\n    InjectionZoneContainer,\n    InjectionZoneBlock\n  ];\n\n  return getAdminInjectedComponents(moduleName, page, position);\n};\n","import * as React from 'react';\n\nimport { useInjectionZone } from '../hooks/useInjectionZone';\n\nconst INJECTION_ZONES = {\n  admin: {\n    // Temporary injection zone, support for the react-tour plugin in foodadvisor\n    tutorials: {\n      links: [],\n    },\n  },\n  contentManager: {\n    editView: { informations: [], 'right-links': [] },\n    listView: {\n      actions: [],\n      deleteModalAdditionalInfos: [],\n      publishModalAdditionalInfos: [],\n      unpublishModalAdditionalInfos: [],\n    },\n  },\n} satisfies InjectionZones;\n\ninterface InjectionZoneComponent {\n  Component: React.ComponentType;\n  name: string;\n  // TODO: in theory this could receive and forward any React component prop\n  // but in practice there only seems to be once instance, where `slug` is\n  // forwarded. The type needs to become either more generic or we disallow\n  // prop spreading and offer a different way to access context data.\n  slug: string;\n}\n\ninterface InjectionZones {\n  admin: {\n    tutorials: {\n      links: InjectionZoneComponent[];\n    };\n  };\n  contentManager: {\n    editView: {\n      informations: InjectionZoneComponent[];\n      'right-links': InjectionZoneComponent[];\n    };\n    listView: {\n      actions: InjectionZoneComponent[];\n      deleteModalAdditionalInfos: InjectionZoneComponent[];\n      publishModalAdditionalInfos: InjectionZoneComponent[];\n      unpublishModalAdditionalInfos: InjectionZoneComponent[];\n    };\n  };\n}\n\ntype InjectionZoneArea =\n  | 'admin.tutorials.links'\n  | 'contentManager.editView.informations'\n  | 'contentManager.editView.right-links'\n  | 'contentManager.listView.actions'\n  | 'contentManager.listView.unpublishModalAdditionalInfos'\n  | 'contentManager.listView.deleteModalAdditionalInfos'\n  | 'contentManager.listView.publishModalAdditionalInfos'\n  | 'contentManager.listView.deleteModalAdditionalInfos';\n\ntype InjectionZoneModule = InjectionZoneArea extends `${infer Word}.${string}` ? Word : never;\ntype InjectionZoneContainer = InjectionZoneArea extends `${string}.${infer Word}.${string}`\n  ? Word\n  : never;\ntype InjectionZoneBlock = InjectionZoneArea extends `${string}.${string}.${infer Word}`\n  ? Word\n  : never;\n\n/**\n * You can't know what this component props will be because it's generic and used everywhere\n * e.g. content-manager edit view, we just send the slug but we might not in the listView,\n * therefore, people should type it themselves on the components they render.\n */\nconst InjectionZone = ({ area, ...props }: { area: InjectionZoneArea; [key: string]: unknown }) => {\n  const components = useInjectionZone(area);\n\n  return (\n    <>\n      {components.map((component) => (\n        <component.Component key={component.name} {...props} />\n      ))}\n    </>\n  );\n};\n\nexport { InjectionZone, INJECTION_ZONES };\n\nexport type {\n  InjectionZoneArea,\n  InjectionZoneComponent,\n  InjectionZones,\n  InjectionZoneModule,\n  InjectionZoneContainer,\n  InjectionZoneBlock,\n};\n","/**\n * @internal\n *\n * @description Checks if the given value is an object\n * with included type guard.\n */\nconst isObject = (obj: unknown): obj is object => {\n  return typeof obj === 'object' && obj !== null && Array.isArray(obj) === false;\n};\n\nexport { isObject };\n","import { useQueryParams } from '@strapi/helper-plugin';\nimport QueryString, { parse, stringify } from 'qs';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { isObject } from '../../utils/objects';\n\nimport type { ContentManagerAppState } from '../pages/App';\n\nconst useFindRedirectionLink = (slug: string) => {\n  const [{ rawQuery }] = useQueryParams();\n  const collectionTypesMenuLinks = useTypedSelector(\n    (state) => state['content-manager_app'].collectionTypeLinks\n  );\n  const redirectionLink = getRedirectionLink(collectionTypesMenuLinks, slug, rawQuery);\n\n  return redirectionLink;\n};\n\n/**\n * Updates the leafs of the first argument\n */\nconst mergeParams = (\n  initialParams: QueryString.ParsedQs,\n  params: QueryString.ParsedQs\n): QueryString.ParsedQs => {\n  return Object.keys(initialParams).reduce<QueryString.ParsedQs>((acc, current) => {\n    const initialValue = initialParams[current];\n    const nextValue = params[current] ?? initialValue;\n\n    if (isObject(initialValue)) {\n      // @ts-expect-error – TODO: fix this type error.\n      return { ...acc, [current]: mergeParams(initialValue, nextValue) };\n    }\n\n    acc[current] = nextValue;\n\n    return acc;\n  }, {});\n};\n\nconst getRedirectionLink = (\n  links: ContentManagerAppState['collectionTypeLinks'],\n  slug: string,\n  rawQuery: string\n) => {\n  const matchingLink = links.find(({ to }) => to.includes(slug));\n\n  if (!matchingLink) {\n    return '/';\n  }\n\n  const { to, search } = matchingLink;\n  const searchQueryParams = parse(search ?? '');\n  const currentQueryParams = parse(rawQuery.substring(1));\n\n  const mergedParams = mergeParams(searchQueryParams, currentQueryParams);\n\n  const link = `${to}?${stringify(mergedParams, { encode: false })}`;\n\n  return link;\n};\n\nexport { useFindRedirectionLink };\n","export const GET_DATA = 'ContentManager/CrudReducer/GET_DATA';\nexport const GET_DATA_SUCCEEDED = 'ContentManager/CrudReducer/GET_DATA_SUCCEEDED';\nexport const INIT_FORM = 'ContentManager/CrudReducer/INIT_FORM';\nexport const RESET_PROPS = 'ContentManager/CrudReducer/RESET_PROPS';\nexport const SET_DATA_STRUCTURES = 'ContentManager/CrudReducer/SET_DATA_STRUCTURES';\nexport const SET_STATUS = 'ContentManager/CrudReducer/SET_STATUS';\nexport const SUBMIT_SUCCEEDED = 'ContentManager/CrudReducer/SUBMIT_SUCCEEDED';\nexport const CLEAR_SET_MODIFIED_DATA_ONLY =\n  'ContentManager/CrudReducer/CLEAR_SET_MODIFIED_DATA_ONLY';\n","import {\n  CLEAR_SET_MODIFIED_DATA_ONLY,\n  GET_DATA,\n  GET_DATA_SUCCEEDED,\n  INIT_FORM,\n  RESET_PROPS,\n  SET_DATA_STRUCTURES,\n  SET_STATUS,\n  SUBMIT_SUCCEEDED,\n} from './constants';\nimport { CrudState } from './reducer';\n\ninterface GetDataAction {\n  type: typeof GET_DATA;\n}\n\nconst getData = () => {\n  return {\n    type: GET_DATA,\n  } satisfies GetDataAction;\n};\n\ninterface GetDataSucceededAction extends Pick<CrudState, 'data'> {\n  type: typeof GET_DATA_SUCCEEDED;\n  setModifiedDataOnly?: boolean;\n}\n\nconst getDataSucceeded = (data: GetDataSucceededAction['data']) =>\n  ({\n    type: GET_DATA_SUCCEEDED,\n    data,\n  } satisfies GetDataSucceededAction);\n\ninterface InitFormAction extends Partial<Pick<CrudState, 'data'>> {\n  type: typeof INIT_FORM;\n  rawQuery?: unknown;\n  isSingleType?: boolean;\n}\n\nconst initForm = (rawQuery?: InitFormAction['rawQuery'], isSingleType = false) =>\n  ({\n    type: INIT_FORM,\n    rawQuery,\n    isSingleType,\n  } satisfies InitFormAction);\n\ninterface ResetPropsAction {\n  type: typeof RESET_PROPS;\n}\n\nconst resetProps = () => ({ type: RESET_PROPS } satisfies ResetPropsAction);\n\ninterface SetDataStructuresAction\n  extends Pick<CrudState, 'componentsDataStructure' | 'contentTypeDataStructure'> {\n  type: typeof SET_DATA_STRUCTURES;\n}\n\nconst setDataStructures = (\n  componentsDataStructure: SetDataStructuresAction['componentsDataStructure'],\n  contentTypeDataStructure: SetDataStructuresAction['contentTypeDataStructure']\n) =>\n  ({\n    type: SET_DATA_STRUCTURES,\n    componentsDataStructure,\n    contentTypeDataStructure,\n  } satisfies SetDataStructuresAction);\n\ninterface SetStatusAction extends Pick<CrudState, 'status'> {\n  type: typeof SET_STATUS;\n}\n\nconst setStatus = (status: SetStatusAction['status']) =>\n  ({\n    type: SET_STATUS,\n    status,\n  } satisfies SetStatusAction);\n\ninterface SubmitSucceededAction extends Pick<CrudState, 'data'> {\n  type: typeof SUBMIT_SUCCEEDED;\n}\n\nconst submitSucceeded = (data: SubmitSucceededAction['data']) =>\n  ({\n    type: SUBMIT_SUCCEEDED,\n    data,\n  } satisfies SubmitSucceededAction);\n\ninterface ClearSetModifiedDataOnlyAction {\n  type: typeof CLEAR_SET_MODIFIED_DATA_ONLY;\n}\n\nconst clearSetModifiedDataOnly = () =>\n  ({\n    type: CLEAR_SET_MODIFIED_DATA_ONLY,\n  } satisfies ClearSetModifiedDataOnlyAction);\n\nexport {\n  getData,\n  getDataSucceeded,\n  initForm,\n  resetProps,\n  setDataStructures,\n  setStatus,\n  submitSucceeded,\n  clearSetModifiedDataOnly,\n};\n\ntype CrudAction =\n  | GetDataAction\n  | GetDataSucceededAction\n  | InitFormAction\n  | ResetPropsAction\n  | SetDataStructuresAction\n  | SetStatusAction\n  | SubmitSucceededAction\n  | ClearSetModifiedDataOnlyAction;\n\nexport type {\n  GetDataAction,\n  GetDataSucceededAction,\n  InitFormAction,\n  ResetPropsAction,\n  SetDataStructuresAction,\n  SetStatusAction,\n  SubmitSucceededAction,\n  ClearSetModifiedDataOnlyAction,\n  CrudAction,\n};\n","import type { FormattedComponentLayout, FormattedContentTypeLayout } from './layouts';\nimport type { Attribute, Common, Schema } from '@strapi/types';\n\nconst createDefaultDataStructure = (\n  attributes: Schema.Attributes,\n  allComponentsSchema: Record<string, FormattedComponentLayout> = {}\n) => {\n  return Object.keys(attributes).reduce<Record<string, Attribute.GetValue<Attribute.Any>>>(\n    (acc, current) => {\n      const attribute = attributes[current] ?? {};\n      const { type, required } = attribute;\n\n      if ('default' in attribute) {\n        acc[current] = attribute.default;\n      }\n\n      if (type === 'component') {\n        const currentComponentSchema = allComponentsSchema[attribute.component]?.attributes ?? {};\n        const currentComponentDefaultForm = createDefaultDataStructure(\n          currentComponentSchema,\n          allComponentsSchema\n        );\n\n        if (required === true) {\n          acc[current] = attribute.repeatable === true ? [] : currentComponentDefaultForm;\n        }\n\n        if (attribute.min && attribute.repeatable === true && required) {\n          acc[current] = [];\n\n          for (let i = 0; i < attribute.min; i += 1) {\n            acc[current].push(currentComponentDefaultForm);\n          }\n        }\n      }\n\n      if (type === 'dynamiczone') {\n        if (required === true) {\n          acc[current] = [];\n        }\n      }\n\n      return acc;\n    },\n    {}\n  );\n};\n\nconst removePasswordFieldsFromData = <\n  TSchema extends FormattedContentTypeLayout,\n  TData extends { [K in keyof TSchema['attributes']]: Attribute.GetValue<TSchema['attributes'][K]> }\n>(\n  data: TData,\n  contentTypeSchema: TSchema,\n  componentSchema: Record<string, FormattedComponentLayout>\n) => {\n  const recursiveCleanData = <\n    TSchemum extends FormattedContentTypeLayout | FormattedComponentLayout,\n    TDatum extends {\n      [P in keyof TSchemum['attributes']]: Attribute.GetValue<TSchemum['attributes'][P]>;\n    }\n  >(\n    datum: TDatum,\n    schema: TSchemum\n  ) => {\n    return Object.keys(datum).reduce<Record<string, Attribute.GetValue<Attribute.Any>>>(\n      (acc, current) => {\n        const attribute = schema.attributes[current];\n\n        const value = datum[current];\n\n        /**\n         * This is really dumb, this basically keeps random metadata in the object,\n         * but it's really not clear and doesn't make a lot of sense because you're\n         * assuming that if there's no attribute we still want it? TODO: refactor.\n         */\n        if (!attribute) {\n          acc[current] = value;\n          return acc;\n        }\n\n        if (attribute.type === 'dynamiczone' && Array.isArray(value)) {\n          acc[current] = (value as Attribute.GetValue<Attribute.DynamicZone>).map(\n            (componentValue) => {\n              const subCleanedData = recursiveCleanData(\n                componentValue,\n                componentSchema[componentValue.__component]\n              );\n\n              return subCleanedData;\n            }\n          );\n\n          return acc;\n        }\n\n        if (attribute.type === 'component') {\n          if (attribute.repeatable) {\n            acc[current] =\n              value && Array.isArray(value)\n                ? (\n                    value as Attribute.GetValue<Attribute.Component<Common.UID.Component, true>>\n                  ).map((compoData) => {\n                    const subCleanedData = recursiveCleanData(\n                      compoData,\n                      componentSchema[attribute.component]\n                    );\n\n                    return subCleanedData;\n                  })\n                : value;\n          } else {\n            acc[current] = value\n              ? recursiveCleanData(value, componentSchema[attribute.component])\n              : value;\n          }\n\n          return acc;\n        }\n\n        if (attribute.type !== 'password') {\n          acc[current] = value;\n        }\n\n        return acc;\n      },\n      {}\n    );\n  };\n\n  return recursiveCleanData(data, contentTypeSchema);\n};\n\nexport { createDefaultDataStructure, removePasswordFieldsFromData };\n","import * as React from 'react';\n\nimport {\n  ApiError,\n  formatContentTypeData,\n  useAPIErrorHandler,\n  useFetchClient,\n  useGuidedTour,\n  useNotification,\n  useQueryParams,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport axios, { AxiosError, AxiosResponse, CancelTokenSource } from 'axios';\nimport get from 'lodash/get';\nimport { useQueryClient } from 'react-query';\nimport { useHistory } from 'react-router-dom';\n\nimport { useTypedDispatch, useTypedSelector } from '../../core/store/hooks';\nimport { useFindRedirectionLink } from '../hooks/useFindRedirectionLink';\nimport {\n  getData,\n  getDataSucceeded,\n  initForm,\n  resetProps,\n  setDataStructures,\n  setStatus,\n  submitSucceeded,\n} from '../sharedReducers/crud/actions';\nimport { createDefaultDataStructure, removePasswordFieldsFromData } from '../utils/data';\nimport { getTranslation } from '../utils/translations';\n\nimport type { RenderChildProps } from './SingleTypeFormWrapper';\nimport type { EntityData } from '../sharedReducers/crud/reducer';\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { Entity } from '@strapi/types';\n\ninterface CollectionTypeFormWrapperProps {\n  children: (props: RenderChildProps) => React.JSX.Element;\n  slug: string;\n  id?: Entity.ID;\n  origin?: string;\n}\n\n// This container is used to handle the CRUD\nconst CollectionTypeFormWrapper = ({\n  children,\n  slug,\n  id,\n  origin,\n}: CollectionTypeFormWrapperProps) => {\n  const allLayoutData = useTypedSelector(\n    (state) => state['content-manager_editViewLayoutManager'].currentLayout\n  );\n  const queryClient = useQueryClient();\n  const toggleNotification = useNotification();\n  const { setCurrentStep } = useGuidedTour();\n  const { trackUsage } = useTracking();\n  const { push, replace } = useHistory();\n  const [{ query, rawQuery }] = useQueryParams();\n  const dispatch = useTypedDispatch();\n  const { componentsDataStructure, contentTypeDataStructure, data, isLoading, status } =\n    useTypedSelector((state) => state['content-manager_editViewCrudReducer']);\n  const redirectionLink = useFindRedirectionLink(slug);\n  const { formatAPIError } = useAPIErrorHandler(getTranslation);\n\n  const isMounted = React.useRef(true);\n\n  const fetchClient = useFetchClient();\n  const { put, post, del } = fetchClient;\n\n  const isCreatingEntry = !id;\n\n  const requestURL =\n    isCreatingEntry && !origin ? null : `/content-manager/collection-types/${slug}/${origin || id}`;\n\n  const cleanReceivedData = React.useCallback(\n    (data: EntityData) => {\n      const cleaned = removePasswordFieldsFromData(\n        data,\n        allLayoutData.contentType!,\n        allLayoutData.components\n      );\n\n      return formatContentTypeData(cleaned, allLayoutData.contentType!, allLayoutData.components);\n    },\n    [allLayoutData]\n  );\n\n  // SET THE DEFAULT LAYOUT the effect is applied when the slug changes\n  React.useEffect(() => {\n    const componentsDataStructure = Object.keys(allLayoutData.components).reduce<\n      Record<string, any>\n    >((acc, current) => {\n      const defaultComponentForm = createDefaultDataStructure(\n        allLayoutData.components[current].attributes,\n        allLayoutData.components\n      );\n\n      acc[current] = formatContentTypeData(\n        defaultComponentForm,\n        // @ts-expect-error – the helper-plugin doesn't (and can't) know about the types we have in the admin. TODO: fix this.\n        allLayoutData.components[current],\n        allLayoutData.components\n      );\n\n      return acc;\n    }, {});\n\n    const contentTypeDataStructure = createDefaultDataStructure(\n      allLayoutData.contentType!.attributes,\n      allLayoutData.components\n    );\n\n    const contentTypeDataStructureFormatted = formatContentTypeData(\n      contentTypeDataStructure,\n      allLayoutData.contentType!,\n      allLayoutData.components\n    );\n\n    dispatch(setDataStructures(componentsDataStructure, contentTypeDataStructureFormatted));\n  }, [allLayoutData, dispatch]);\n\n  React.useEffect(() => {\n    return () => {\n      dispatch(resetProps());\n    };\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n\n    const fetchData = async (source: CancelTokenSource) => {\n      if (!requestURL) {\n        return;\n      }\n\n      dispatch(getData());\n\n      try {\n        const { data } = await fetchClient.get(requestURL, { cancelToken: source.token });\n\n        dispatch(getDataSucceeded(cleanReceivedData(data)));\n      } catch (err) {\n        if (axios.isCancel(err)) {\n          return;\n        }\n        const resStatus = get(err, 'response.status', null);\n\n        if (resStatus === 404) {\n          push(redirectionLink);\n\n          return;\n        }\n\n        // Not allowed to read a document\n        if (resStatus === 403) {\n          toggleNotification({\n            type: 'info',\n            message: { id: getTranslation('permissions.not-allowed.update') },\n          });\n\n          push(redirectionLink);\n        }\n      }\n    };\n\n    // This is needed in order to reset the form when the query changes\n    const init = async () => {\n      dispatch(getData());\n      dispatch(initForm(rawQuery));\n    };\n\n    if (!isMounted.current) {\n      return () => {};\n    }\n\n    if (requestURL) {\n      fetchData(source);\n    } else {\n      init();\n    }\n\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  }, [\n    fetchClient,\n    cleanReceivedData,\n    push,\n    requestURL,\n    dispatch,\n    rawQuery,\n    redirectionLink,\n    toggleNotification,\n  ]);\n\n  const displayErrors = React.useCallback(\n    (err: AxiosError<{ error: ApiError }>) => {\n      toggleNotification({ type: 'warning', message: formatAPIError(err) });\n    },\n    [toggleNotification, formatAPIError]\n  );\n\n  const onDelete: RenderChildProps['onDelete'] = React.useCallback(\n    async (trackerProperty) => {\n      try {\n        trackUsage('willDeleteEntry', trackerProperty);\n\n        const { data } = await del<Contracts.CollectionTypes.Delete.Response>(\n          `/content-manager/collection-types/${slug}/${id}`\n        );\n\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.delete') },\n        });\n\n        trackUsage('didDeleteEntry', trackerProperty);\n\n        replace(redirectionLink);\n\n        return Promise.resolve(data);\n      } catch (err) {\n        trackUsage('didNotDeleteEntry', { error: err, ...trackerProperty });\n\n        return Promise.reject(err);\n      }\n    },\n    [trackUsage, del, slug, id, toggleNotification, replace, redirectionLink]\n  );\n\n  const onPost: RenderChildProps['onPost'] = React.useCallback(\n    async (body, trackerProperty) => {\n      const isCloning = typeof origin === 'string';\n      /**\n       * If we're cloning we want to post directly to this endpoint\n       * so that the relations even if they're not listed in the EditView\n       * are correctly attached to the entry.\n       */\n      try {\n        // Show a loading button in the EditView/Header.js && lock the app => no navigation\n        dispatch(setStatus('submit-pending'));\n\n        const { id: _id, ...restBody } = body;\n\n        const { data } = await post<\n          Contracts.CollectionTypes.Create.Response | Contracts.CollectionTypes.Clone.Response,\n          AxiosResponse<\n            Contracts.CollectionTypes.Create.Response | Contracts.CollectionTypes.Clone.Response\n          >,\n          | Contracts.CollectionTypes.Create.Request['body']\n          | Contracts.CollectionTypes.Clone.Request['body']\n        >(\n          isCloning\n            ? `/content-manager/collection-types/${slug}/clone/${origin}`\n            : `/content-manager/collection-types/${slug}`,\n          isCloning ? restBody : body,\n          {\n            params: query,\n          }\n        );\n\n        trackUsage('didCreateEntry', trackerProperty);\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.save') },\n        });\n\n        setCurrentStep('contentManager.success');\n\n        // TODO: need to find a better place, or a better abstraction\n        queryClient.invalidateQueries(['relation']);\n\n        dispatch(submitSucceeded(cleanReceivedData(data)));\n\n        // Enable navigation and remove loaders\n        dispatch(setStatus('resolved'));\n\n        // @ts-expect-error – TODO: look into this, the type is probably wrong.\n        replace(`/content-manager/collectionType/${slug}/${data.id}${rawQuery}`);\n\n        return Promise.resolve(data);\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    },\n    [\n      origin,\n      slug,\n      dispatch,\n      post,\n      query,\n      trackUsage,\n      toggleNotification,\n      setCurrentStep,\n      queryClient,\n      cleanReceivedData,\n      replace,\n      rawQuery,\n      displayErrors,\n    ]\n  );\n\n  const onDraftRelationCheck: RenderChildProps['onDraftRelationCheck'] =\n    React.useCallback(async () => {\n      try {\n        trackUsage('willCheckDraftRelations');\n\n        dispatch(setStatus('draft-relation-check-pending'));\n\n        const {\n          data: { data },\n        } = await fetchClient.get<Contracts.CollectionTypes.CountDraftRelations.Response>(\n          `/content-manager/collection-types/${slug}/${id}/actions/countDraftRelations`\n        );\n        trackUsage('didCheckDraftRelations');\n\n        dispatch(setStatus('resolved'));\n\n        return data;\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    }, [trackUsage, slug, id, dispatch, fetchClient, displayErrors]);\n\n  const onPublish: RenderChildProps['onPublish'] = React.useCallback(async () => {\n    try {\n      trackUsage('willPublishEntry');\n\n      dispatch(setStatus('publish-pending'));\n\n      const { data } = await post<Contracts.CollectionTypes.Publish.Response>(\n        `/content-manager/collection-types/${slug}/${id}/actions/publish`\n      );\n\n      trackUsage('didPublishEntry');\n\n      dispatch(submitSucceeded(cleanReceivedData(data)));\n      dispatch(setStatus('resolved'));\n\n      toggleNotification({\n        type: 'success',\n        message: { id: getTranslation('success.record.publish') },\n      });\n\n      return Promise.resolve(data);\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        displayErrors(err);\n      }\n\n      dispatch(setStatus('resolved'));\n\n      return Promise.reject(err);\n    }\n  }, [trackUsage, slug, id, dispatch, post, cleanReceivedData, toggleNotification, displayErrors]);\n\n  const onPut: RenderChildProps['onPut'] = React.useCallback(\n    async (body, trackerProperty) => {\n      try {\n        trackUsage('willEditEntry', trackerProperty);\n\n        dispatch(setStatus('submit-pending'));\n\n        const { data } = await put<\n          Contracts.CollectionTypes.Update.Response,\n          AxiosResponse<Contracts.CollectionTypes.Update.Response>,\n          Contracts.CollectionTypes.Update.Request['body']\n        >(`/content-manager/collection-types/${slug}/${id}`, body);\n\n        trackUsage('didEditEntry', trackerProperty);\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.save') },\n        });\n\n        // TODO: need to find a better place, or a better abstraction\n        queryClient.invalidateQueries(['relation']);\n\n        dispatch(submitSucceeded(cleanReceivedData(data)));\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.resolve(data);\n      } catch (err) {\n        trackUsage('didNotEditEntry', { error: err, ...trackerProperty });\n\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    },\n    [\n      trackUsage,\n      dispatch,\n      put,\n      slug,\n      id,\n      toggleNotification,\n      queryClient,\n      cleanReceivedData,\n      displayErrors,\n    ]\n  );\n\n  const onUnpublish: RenderChildProps['onUnpublish'] = React.useCallback(async () => {\n    dispatch(setStatus('unpublish-pending'));\n\n    try {\n      trackUsage('willUnpublishEntry');\n\n      const { data } = await post<Contracts.CollectionTypes.Unpublish.Response>(\n        `/content-manager/collection-types/${slug}/${id}/actions/unpublish`\n      );\n\n      trackUsage('didUnpublishEntry');\n      toggleNotification({\n        type: 'success',\n        message: { id: getTranslation('success.record.unpublish') },\n      });\n\n      dispatch(submitSucceeded(cleanReceivedData(data)));\n      dispatch(setStatus('resolved'));\n    } catch (err) {\n      dispatch(setStatus('resolved'));\n\n      if (err instanceof AxiosError) {\n        displayErrors(err);\n      }\n\n      return Promise.reject(err);\n    }\n  }, [slug, id, dispatch, trackUsage, post, toggleNotification, cleanReceivedData, displayErrors]);\n\n  return children({\n    componentsDataStructure,\n    contentTypeDataStructure,\n    data,\n    isCreatingEntry,\n    isLoadingForData: isLoading,\n    onDelete,\n    onPost,\n    onPublish,\n    onDraftRelationCheck,\n    onPut,\n    onUnpublish,\n    status,\n    redirectionLink,\n  });\n};\n\nexport { CollectionTypeFormWrapper };\n","import { useCallback } from 'react';\n\nimport { useTypedSelector } from '../../core/store/hooks';\n\nconst useContentTypeLayout = () => {\n  const currentLayout = useTypedSelector(\n    (state) => state['content-manager_editViewLayoutManager'].currentLayout\n  );\n\n  const getComponentLayout = useCallback(\n    (componentUid: string) => {\n      return currentLayout?.components?.[componentUid] ?? {};\n    },\n    [currentLayout]\n  );\n\n  return { ...currentLayout, getComponentLayout };\n};\n\nexport { useContentTypeLayout };\n","import * as React from 'react';\n\nimport { BaseButton, Flex, Typography } from '@strapi/design-system';\nimport { PlusCircle } from '@strapi/icons';\nimport styled from 'styled-components';\n\ninterface AddComponentButtonProps {\n  children: React.ReactNode;\n  hasError?: boolean;\n  isDisabled?: boolean;\n  isOpen?: boolean;\n  onClick: React.MouseEventHandler<HTMLButtonElement> & React.MouseEventHandler<HTMLDivElement>;\n}\n\nconst AddComponentButton = ({\n  hasError,\n  isDisabled,\n  isOpen,\n  children,\n  onClick,\n}: AddComponentButtonProps) => {\n  return (\n    <StyledButton\n      type=\"button\"\n      onClick={onClick}\n      disabled={isDisabled}\n      background=\"neutral0\"\n      paddingTop={3}\n      paddingBottom={3}\n      paddingLeft={4}\n      paddingRight={4}\n      style={{ cursor: isDisabled ? 'not-allowed' : 'pointer' }}\n    >\n      <Flex as=\"span\" gap={2}>\n        <StyledAddIcon aria-hidden $isOpen={isOpen} $hasError={hasError && !isOpen} />\n        <Typography\n          variant=\"pi\"\n          fontWeight=\"bold\"\n          textColor={hasError && !isOpen ? 'danger600' : 'neutral500'}\n        >\n          {children}\n        </Typography>\n      </Flex>\n    </StyledButton>\n  );\n};\n\nconst StyledAddIcon = styled(PlusCircle)<{ $isOpen?: boolean; $hasError?: boolean }>`\n  height: ${({ theme }) => theme.spaces[6]};\n  width: ${({ theme }) => theme.spaces[6]};\n  transform: ${({ $isOpen }) => ($isOpen ? 'rotate(45deg)' : 'rotate(0deg)')};\n\n  > circle {\n    fill: ${({ theme, $hasError }) =>\n      $hasError ? theme.colors.danger200 : theme.colors.neutral150};\n  }\n  > path {\n    fill: ${({ theme, $hasError }) =>\n      $hasError ? theme.colors.danger600 : theme.colors.neutral600};\n  }\n`;\n\nconst StyledButton = styled(BaseButton)`\n  border-radius: 26px;\n  border-color: ${({ theme }) => theme.colors.neutral150};\n  box-shadow: ${({ theme }) => theme.shadows.filterShadow};\n\n  &:hover {\n    ${Typography} {\n      color: ${({ theme }) => theme.colors.primary600};\n    }\n\n    ${StyledAddIcon} {\n      > circle {\n        fill: ${({ theme }) => theme.colors.primary600};\n      }\n      > path {\n        fill: ${({ theme }) => theme.colors.neutral100};\n      }\n    }\n  }\n  &:active {\n    ${Typography} {\n      color: ${({ theme }) => theme.colors.primary600};\n    }\n    ${StyledAddIcon} {\n      > circle {\n        fill: ${({ theme }) => theme.colors.primary600};\n      }\n      > path {\n        fill: ${({ theme }) => theme.colors.neutral100};\n      }\n    }\n  }\n`;\n\nexport { AddComponentButton };\nexport type { AddComponentButtonProps };\n","import * as React from 'react';\n\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionToggle,\n  AccordionVariant,\n  Box,\n  Flex,\n  Typography,\n} from '@strapi/design-system';\nimport { pxToRem } from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { ComponentIcon } from '../ComponentIcon';\n\nimport type { FormattedComponentLayout } from '../../utils/layouts';\nimport type { Attribute } from '@strapi/types';\n\ninterface ComponentCategoryProps {\n  category: string;\n  components?: Array<\n    Pick<FormattedComponentLayout, 'info' | 'attributes'> & {\n      componentUid: Attribute.DynamicZone['components'][number];\n    }\n  >;\n  isOpen?: boolean;\n  onAddComponent: (\n    componentUid: string\n  ) => React.MouseEventHandler<HTMLButtonElement> & React.MouseEventHandler<HTMLDivElement>;\n  onToggle: (category: string) => void;\n  variant?: AccordionVariant;\n}\n\nconst ComponentCategory = ({\n  category,\n  components = [],\n  variant = 'primary',\n  isOpen,\n  onAddComponent,\n  onToggle,\n}: ComponentCategoryProps) => {\n  const { formatMessage } = useIntl();\n\n  const handleToggle = () => {\n    onToggle(category);\n  };\n\n  return (\n    <Accordion expanded={isOpen} onToggle={handleToggle} size=\"S\">\n      <AccordionToggle\n        // @ts-expect-error – Error in the design-system\n        variant={variant}\n        title={formatMessage({ id: category, defaultMessage: category })}\n        togglePosition=\"left\"\n      />\n      <AccordionContent>\n        <Box paddingTop={4} paddingBottom={4} paddingLeft={3} paddingRight={3}>\n          <Grid>\n            {components.map(({ componentUid, info: { displayName, icon } }) => (\n              <ComponentBox\n                key={componentUid}\n                as=\"button\"\n                type=\"button\"\n                background=\"neutral100\"\n                justifyContent=\"center\"\n                onClick={onAddComponent(componentUid)}\n                hasRadius\n                height={pxToRem(84)}\n                shrink={0}\n                borderColor=\"neutral200\"\n              >\n                <Flex direction=\"column\" gap={1} alignItems=\"center\" justifyContent=\"center\">\n                  <ComponentIcon icon={icon} />\n\n                  <Typography variant=\"pi\" fontWeight=\"bold\" textColor=\"neutral600\">\n                    {formatMessage({ id: displayName, defaultMessage: displayName })}\n                  </Typography>\n                </Flex>\n              </ComponentBox>\n            ))}\n          </Grid>\n        </Box>\n      </AccordionContent>\n    </Accordion>\n  );\n};\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, ${140 / 16}rem);\n  grid-gap: ${({ theme }) => theme.spaces[1]};\n`;\n\nconst ComponentBox = styled(Flex)`\n  &:focus,\n  &:hover {\n    border: 1px solid ${({ theme }) => theme.colors.primary200};\n    background: ${({ theme }) => theme.colors.primary100};\n\n    ${Typography} {\n      color: ${({ theme }) => theme.colors.primary600};\n    }\n\n    /* > Flex > ComponentIcon */\n    > div > div:first-child {\n      background: ${({ theme }) => theme.colors.primary200};\n      color: ${({ theme }) => theme.colors.primary600};\n    }\n  }\n`;\n\nexport { ComponentCategory };\nexport type { ComponentCategoryProps };\n","import * as React from 'react';\n\nimport { Box, Flex, KeyboardNavigable, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../utils/translations';\n\nimport { ComponentCategory, ComponentCategoryProps } from './ComponentCategory';\n\ninterface ComponentPickerProps {\n  dynamicComponentsByCategory?: Record<string, NonNullable<ComponentCategoryProps['components']>>;\n  isOpen?: boolean;\n  onClickAddComponent: (componentUid: string) => void;\n}\n\nconst ComponentPicker = ({\n  dynamicComponentsByCategory = {},\n  isOpen,\n  onClickAddComponent,\n}: ComponentPickerProps) => {\n  const { formatMessage } = useIntl();\n\n  const [categoryToOpen, setCategoryToOpen] = React.useState('');\n\n  React.useEffect(() => {\n    const categoryKeys = Object.keys(dynamicComponentsByCategory);\n\n    if (isOpen && categoryKeys.length > 0) {\n      setCategoryToOpen(categoryKeys[0]);\n    }\n  }, [isOpen, dynamicComponentsByCategory]);\n\n  const handleAddComponentToDz = (componentUid: string) => () => {\n    onClickAddComponent(componentUid);\n    setCategoryToOpen('');\n  };\n\n  const handleClickToggle = (categoryName: string) => {\n    setCategoryToOpen((currentCat) => (currentCat === categoryName ? '' : categoryName));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <Box\n      paddingTop={6}\n      paddingBottom={6}\n      paddingLeft={5}\n      paddingRight={5}\n      background=\"neutral0\"\n      shadow=\"tableShadow\"\n      borderColor=\"neutral150\"\n      hasRadius\n    >\n      <Flex justifyContent=\"center\">\n        <Typography fontWeight=\"bold\" textColor=\"neutral600\">\n          {formatMessage({\n            id: getTranslation('components.DynamicZone.ComponentPicker-label'),\n            defaultMessage: 'Pick one component',\n          })}\n        </Typography>\n      </Flex>\n      <Box paddingTop={2}>\n        <KeyboardNavigable attributeName=\"data-strapi-accordion-toggle\">\n          {Object.entries(dynamicComponentsByCategory).map(([category, components], index) => (\n            <ComponentCategory\n              key={category}\n              category={category}\n              components={components}\n              onAddComponent={handleAddComponentToDz}\n              isOpen={category === categoryToOpen}\n              onToggle={handleClickToggle}\n              variant={index % 2 === 1 ? 'primary' : 'secondary'}\n            />\n          ))}\n        </KeyboardNavigable>\n      </Box>\n    </Box>\n  );\n};\n\nexport { ComponentPicker };\nexport type { ComponentPickerProps };\n","import isNaN from 'lodash/isNaN';\n\nconst getFieldName = (stringName: string) =>\n  stringName.split('.').filter((string) => isNaN(parseInt(string, 10)));\n\nconst getMaxTempKey = (arr: Array<{ __temp_key__?: number }>) => {\n  if (arr.length === 0) {\n    return -1;\n  }\n\n  const maxTempKey = Math.max(...arr.map((o) => o.__temp_key__ ?? 0));\n\n  return Number.isNaN(maxTempKey) ? -1 : maxTempKey;\n};\n\nconst isFieldTypeNumber = (type: string) => {\n  return ['integer', 'biginteger', 'decimal', 'float', 'number'].includes(type);\n};\n\nexport { getFieldName, getMaxTempKey, isFieldTypeNumber };\n","import * as React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { TranslationMessage, pxToRem } from '@strapi/helper-plugin';\nimport { PlusCircle } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { getTranslation } from '../utils/translations';\n\ninterface ComponentInitializerProps {\n  error?: TranslationMessage;\n  isReadOnly?: boolean;\n  onClick: React.MouseEventHandler<HTMLButtonElement> & React.MouseEventHandler<HTMLDivElement>;\n}\n\nconst ComponentInitializer = ({ error, isReadOnly, onClick }: ComponentInitializerProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <>\n      <Box\n        as=\"button\"\n        background=\"neutral100\"\n        borderColor={error ? 'danger600' : 'neutral200'}\n        disabled={isReadOnly}\n        hasRadius\n        onClick={onClick}\n        paddingTop={9}\n        paddingBottom={9}\n        type=\"button\"\n      >\n        <Flex direction=\"column\" gap={2}>\n          <Flex justifyContent=\"center\" style={{ cursor: isReadOnly ? 'not-allowed' : 'inherit' }}>\n            <CircleIcon />\n          </Flex>\n          <Flex justifyContent=\"center\">\n            <Typography textColor=\"primary600\" variant=\"pi\" fontWeight=\"bold\">\n              {formatMessage({\n                id: getTranslation('components.empty-repeatable'),\n                defaultMessage: 'No entry yet. Click on the button below to add one.',\n              })}\n            </Typography>\n          </Flex>\n        </Flex>\n      </Box>\n      {error?.id && (\n        <Typography textColor=\"danger600\" variant=\"pi\">\n          {formatMessage(error, { ...error.values })}\n        </Typography>\n      )}\n    </>\n  );\n};\n\nconst CircleIcon = styled(PlusCircle)`\n  width: ${pxToRem(24)};\n  height: ${pxToRem(24)};\n  > circle {\n    fill: ${({ theme }) => theme.colors.primary200};\n  }\n  > path {\n    fill: ${({ theme }) => theme.colors.primary600};\n  }\n`;\n\nexport { ComponentInitializer };\nexport type { ComponentInitializerProps };\n","import { ComponentType, useCallback, useEffect, useState } from 'react';\n\nimport { CustomField, useCustomFields } from '@strapi/helper-plugin';\n\nconst componentStore = new Map<string, ComponentType | undefined>();\n\ntype LazyComponentStore = Record<string, ComponentType | undefined>;\n\ninterface UseLazyComponentsReturn {\n  isLazyLoading: boolean;\n  lazyComponentStore: LazyComponentStore;\n  cleanup: () => void;\n}\n\n/**\n * @description A hook to lazy load custom field components\n */\nconst useLazyComponents = (componentUids: string[] = []): UseLazyComponentsReturn => {\n  const [lazyComponentStore, setLazyComponentStore] = useState(Object.fromEntries(componentStore));\n  /**\n   * Start loading only if there are any components passed in\n   * and there are some new to load\n   */\n  const newUids = componentUids.filter((uid) => !componentStore.get(uid));\n  const [loading, setLoading] = useState(() => !!newUids.length);\n  const customFieldsRegistry = useCustomFields();\n\n  useEffect(() => {\n    const setStore = (store: Record<string, ComponentType | undefined>) => {\n      setLazyComponentStore(store);\n      setLoading(false);\n    };\n\n    const lazyLoadComponents = async (\n      uids: string[],\n      components: Array<ReturnType<CustomField['components']['Input']>>\n    ) => {\n      const modules = await Promise.all(components);\n\n      uids.forEach((uid, index) => {\n        componentStore.set(uid, modules[index].default);\n      });\n\n      setStore(Object.fromEntries(componentStore));\n    };\n\n    if (newUids.length > 0) {\n      setLoading(true);\n\n      const componentPromises = newUids.reduce<\n        Array<ReturnType<CustomField['components']['Input']>>\n      >((arrayOfPromises, uid) => {\n        const customField = customFieldsRegistry.get(uid);\n\n        if (customField) {\n          arrayOfPromises.push(customField.components.Input());\n        }\n\n        return arrayOfPromises;\n      }, []);\n\n      if (componentPromises.length > 0) {\n        lazyLoadComponents(newUids, componentPromises);\n      }\n    }\n  }, [newUids, customFieldsRegistry]);\n\n  /**\n   * Wrap this in a callback so it can be used in\n   * effects to cleanup the cached store if required\n   */\n  const cleanup = useCallback(() => {\n    componentStore.clear();\n    setLazyComponentStore({});\n  }, []);\n\n  return { isLazyLoading: loading, lazyComponentStore, cleanup };\n};\n\nexport { useLazyComponents };\nexport type { UseLazyComponentsReturn, LazyComponentStore };\n","import { Typography } from '@strapi/design-system';\n\ninterface HintProps {\n  id?: string;\n  error?: string;\n  name: string;\n  hint?: string;\n}\n\nconst Hint = ({ id, error, name, hint = '' }: HintProps) => {\n  if (hint.length === 0 || error) {\n    return null;\n  }\n\n  return (\n    <Typography as=\"p\" variant=\"pi\" id={`${id || name}-hint`} textColor=\"neutral600\">\n      {hint}\n    </Typography>\n  );\n};\n\nexport { Hint };\nexport type { HintProps };\n","import * as React from 'react';\n\nimport { type Element, type Path, Editor, Transforms } from 'slate';\n\n/**\n * Extracts some logic that is common to most blocks' handleConvert functions.\n * @returns The path of the converted block\n */\nconst baseHandleConvert = <T extends Element>(\n  editor: Editor,\n  attributesToSet: Partial<T> & { type: T['type'] }\n): void | Path => {\n  // If the selection is inside a list, split the list so that the modified block is outside of it\n  Transforms.unwrapNodes(editor, {\n    match: (node) => !Editor.isEditor(node) && node.type === 'list',\n    split: true,\n  });\n\n  // Make sure we get a block node, not an inline node\n  const entry = Editor.above(editor, {\n    match: (node) => !Editor.isEditor(node) && node.type !== 'text' && node.type !== 'link',\n  });\n\n  if (!entry || Editor.isEditor(entry[0])) {\n    return;\n  }\n\n  const [element, elementPath] = entry;\n\n  Transforms.setNodes(\n    editor,\n    {\n      ...getAttributesToClear(element),\n      ...attributesToSet,\n    } as Partial<Element>,\n    { at: elementPath }\n  );\n\n  return elementPath;\n};\n\n/**\n * Set all attributes except type and children to null so that Slate deletes them\n */\nconst getAttributesToClear = (element: Element) => {\n  const { children: _children, type: _type, ...extra } = element;\n\n  const attributesToClear = Object.keys(extra).reduce(\n    (currentAttributes, key) => ({ ...currentAttributes, [key]: null }),\n    {}\n  );\n\n  return attributesToClear as Record<string, null>;\n};\n\nexport { baseHandleConvert, getAttributesToClear };\n","import { type Text, Editor, Node, Transforms } from 'slate';\n\nconst isText = (node: unknown): node is Text => {\n  return Node.isNode(node) && !Editor.isEditor(node) && node.type === 'text';\n};\n\n/**\n * Inserts a line break the first time the user presses enter, and exits the node the second time.\n */\nconst pressEnterTwiceToExit = (editor: Editor) => {\n  /**\n   * To determine if we should break out of the node, check 2 things:\n   * 1. If the cursor is at the end of the node\n   * 2. If the last line of the node is empty\n   */\n  const nodeEntry = Editor.above(editor, {\n    match: (node) => !Editor.isEditor(node) && !['link', 'text'].includes(node.type),\n  });\n  if (!nodeEntry || !editor.selection) {\n    return;\n  }\n  const [node, nodePath] = nodeEntry;\n  const isNodeEnd = Editor.isEnd(editor, editor.selection.anchor, nodePath);\n  const lastTextNode = node.children.at(-1);\n  const isEmptyLine = isText(lastTextNode) && lastTextNode.text.endsWith('\\n');\n\n  if (isNodeEnd && isEmptyLine) {\n    // Remove the last line break\n    Transforms.delete(editor, { distance: 1, unit: 'character', reverse: true });\n    // Break out of the node by creating a new paragraph\n    Transforms.insertNodes(editor, {\n      type: 'paragraph',\n      children: [{ type: 'text', text: '' }],\n    });\n    return;\n  }\n\n  // Otherwise insert a new line within the node\n  Transforms.insertText(editor, '\\n');\n\n  // If there's nothing after the cursor, disable modifiers\n  if (isNodeEnd) {\n    ['bold', 'italic', 'underline', 'strikethrough', 'code'].forEach((modifier) => {\n      Editor.removeMark(editor, modifier);\n    });\n  }\n};\n\nexport { pressEnterTwiceToExit };\n","import * as React from 'react';\n\nimport { Code } from '@strapi/icons';\nimport styled from 'styled-components';\n\nimport { type BlocksStore } from '../BlocksEditor';\nimport { baseHandleConvert } from '../utils/conversions';\nimport { pressEnterTwiceToExit } from '../utils/enterKey';\nimport { type Block } from '../utils/types';\n\nconst CodeBlock = styled.pre.attrs({ role: 'code' })`\n  border-radius: ${({ theme }) => theme.borderRadius};\n  background-color: ${({ theme }) => theme.colors.neutral100};\n  max-width: 100%;\n  overflow: auto;\n  padding: ${({ theme }) => `${theme.spaces[3]} ${theme.spaces[4]}`};\n  flex-shrink: 0;\n  & > code {\n    font-family: 'SF Mono', SFMono-Regular, ui-monospace, 'DejaVu Sans Mono', Menlo, Consolas,\n      monospace;\n    color: ${({ theme }) => theme.colors.neutral800};\n    overflow: auto;\n    max-width: 100%;\n  }\n`;\n\nconst codeBlocks: Pick<BlocksStore, 'code'> = {\n  code: {\n    renderElement: (props) => (\n      <CodeBlock {...props.attributes}>\n        <code>{props.children}</code>\n      </CodeBlock>\n    ),\n    icon: Code,\n    label: {\n      id: 'components.Blocks.blocks.code',\n      defaultMessage: 'Code block',\n    },\n    matchNode: (node) => node.type === 'code',\n    isInBlocksSelector: true,\n    handleConvert(editor) {\n      baseHandleConvert<Block<'code'>>(editor, { type: 'code' });\n    },\n    handleEnterKey(editor) {\n      pressEnterTwiceToExit(editor);\n    },\n    snippets: ['```'],\n  },\n};\n\nexport { codeBlocks };\n","import * as React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport {\n  HeadingFive,\n  HeadingFour,\n  HeadingOne,\n  HeadingSix,\n  HeadingThree,\n  HeadingTwo,\n} from '@strapi/icons';\nimport { Editor } from 'slate';\nimport styled from 'styled-components';\n\nimport { type BlocksStore } from '../BlocksEditor';\nimport { baseHandleConvert } from '../utils/conversions';\nimport { type Block } from '../utils/types';\n\nconst H1 = styled(Typography).attrs({ as: 'h1' })`\n  font-size: ${42 / 16}rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\nconst H2 = styled(Typography).attrs({ as: 'h2' })`\n  font-size: ${35 / 16}rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\nconst H3 = styled(Typography).attrs({ as: 'h3' })`\n  font-size: ${29 / 16}rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\nconst H4 = styled(Typography).attrs({ as: 'h4' })`\n  font-size: ${24 / 16}rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\nconst H5 = styled(Typography).attrs({ as: 'h5' })`\n  font-size: ${20 / 16}rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\nconst H6 = styled(Typography).attrs({ as: 'h6' })`\n  font-size: 1rem;\n  line-height: ${({ theme }) => theme.lineHeights[1]};\n`;\n\n/**\n * Common handler for converting a node to a heading\n */\nconst handleConvertToHeading = (editor: Editor, level: Block<'heading'>['level']) => {\n  baseHandleConvert<Block<'heading'>>(editor, { type: 'heading', level });\n};\n\nconst headingBlocks: Pick<\n  BlocksStore,\n  'heading-one' | 'heading-two' | 'heading-three' | 'heading-four' | 'heading-five' | 'heading-six'\n> = {\n  'heading-one': {\n    renderElement: (props) => <H1 {...props.attributes}>{props.children}</H1>,\n    icon: HeadingOne,\n    label: {\n      id: 'components.Blocks.blocks.heading1',\n      defaultMessage: 'Heading 1',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 1),\n    matchNode: (node) => node.type === 'heading' && node.level === 1,\n    isInBlocksSelector: true,\n    snippets: ['#'],\n  },\n  'heading-two': {\n    renderElement: (props) => <H2 {...props.attributes}>{props.children}</H2>,\n    icon: HeadingTwo,\n    label: {\n      id: 'components.Blocks.blocks.heading2',\n      defaultMessage: 'Heading 2',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 2),\n    matchNode: (node) => node.type === 'heading' && node.level === 2,\n    isInBlocksSelector: true,\n    snippets: ['##'],\n  },\n  'heading-three': {\n    renderElement: (props) => <H3 {...props.attributes}>{props.children}</H3>,\n    icon: HeadingThree,\n    label: {\n      id: 'components.Blocks.blocks.heading3',\n      defaultMessage: 'Heading 3',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 3),\n    matchNode: (node) => node.type === 'heading' && node.level === 3,\n    isInBlocksSelector: true,\n    snippets: ['###'],\n  },\n  'heading-four': {\n    renderElement: (props) => <H4 {...props.attributes}>{props.children}</H4>,\n    icon: HeadingFour,\n    label: {\n      id: 'components.Blocks.blocks.heading4',\n      defaultMessage: 'Heading 4',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 4),\n    matchNode: (node) => node.type === 'heading' && node.level === 4,\n    isInBlocksSelector: true,\n    snippets: ['####'],\n  },\n  'heading-five': {\n    renderElement: (props) => <H5 {...props.attributes}>{props.children}</H5>,\n    icon: HeadingFive,\n    label: {\n      id: 'components.Blocks.blocks.heading5',\n      defaultMessage: 'Heading 5',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 5),\n    matchNode: (node) => node.type === 'heading' && node.level === 5,\n    isInBlocksSelector: true,\n    snippets: ['#####'],\n  },\n  'heading-six': {\n    renderElement: (props) => <H6 {...props.attributes}>{props.children}</H6>,\n    icon: HeadingSix,\n    label: {\n      id: 'components.Blocks.blocks.heading6',\n      defaultMessage: 'Heading 6',\n    },\n    handleConvert: (editor) => handleConvertToHeading(editor, 6),\n    matchNode: (node) => node.type === 'heading' && node.level === 6,\n    isInBlocksSelector: true,\n    snippets: ['######'],\n  },\n};\n\nexport { headingBlocks };\n","import * as React from 'react';\n\nimport { Box, Flex } from '@strapi/design-system';\nimport { prefixFileUrlWithBackendUrl, useLibrary } from '@strapi/helper-plugin';\nimport { Picture } from '@strapi/icons';\nimport { type Attribute } from '@strapi/types';\nimport { type Element, Transforms, Editor } from 'slate';\nimport { useFocused, type RenderElementProps, useSelected } from 'slate-react';\nimport styled, { css } from 'styled-components';\n\nimport { useBlocksEditorContext, type BlocksStore } from '../BlocksEditor';\nimport { type Block } from '../utils/types';\n\ninterface ImageWrapperProps extends React.ComponentProps<typeof Box> {\n  isFocused: boolean;\n}\n\nconst ImageWrapper = styled(Flex)<ImageWrapperProps>`\n  transition-property: box-shadow;\n  transition-duration: 0.2s;\n  ${(props) =>\n    props.isFocused &&\n    css`\n      box-shadow: ${props.theme.colors.primary600} 0px 0px 0px 3px;\n    `}\n\n  & > img {\n    height: auto;\n    // The max-height is decided with the design team, the 56px is the height of the toolbar\n    max-height: calc(512px - 56px);\n    max-width: 100%;\n    object-fit: contain;\n  }\n`;\n\nconst IMAGE_SCHEMA_FIELDS = [\n  'name',\n  'alternativeText',\n  'url',\n  'caption',\n  'width',\n  'height',\n  'formats',\n  'hash',\n  'ext',\n  'mime',\n  'size',\n  'previewUrl',\n  'provider',\n  'provider_metadata',\n  'createdAt',\n  'updatedAt',\n];\n\nconst pick = <T extends object, K extends keyof T>(object: T, keys: K[]): Pick<T, K> => {\n  const entries = keys.map((key) => [key, object[key]]);\n  return Object.fromEntries(entries);\n};\n\n// Type guard to force TypeScript to narrow the type of the element in Blocks component\nconst isImage = (element: Element): element is Block<'image'> => {\n  return element.type === 'image';\n};\n\n// Added a background color to the image wrapper to make it easier to recognize the image block\nconst Image = ({ attributes, children, element }: RenderElementProps) => {\n  const editorIsFocused = useFocused();\n  const imageIsSelected = useSelected();\n\n  if (!isImage(element)) {\n    return null;\n  }\n  const { url, alternativeText, width, height } = element.image;\n\n  return (\n    <Box {...attributes}>\n      {children}\n      <ImageWrapper\n        background=\"neutral100\"\n        contentEditable={false}\n        justifyContent=\"center\"\n        isFocused={editorIsFocused && imageIsSelected}\n        hasRadius\n      >\n        <img src={url} alt={alternativeText} width={width} height={height} />\n      </ImageWrapper>\n    </Box>\n  );\n};\n\nconst ImageDialog = () => {\n  const [isOpen, setIsOpen] = React.useState(true);\n  const { editor } = useBlocksEditorContext('ImageDialog');\n  const { components } = useLibrary();\n\n  if (!components || !isOpen) return null;\n\n  const MediaLibraryDialog = components['media-library'] as React.ComponentType<{\n    allowedTypes: Attribute.MediaKind[];\n    onClose: () => void;\n    onSelectAssets: (_images: Attribute.MediaValue<true>) => void;\n  }>;\n\n  const insertImages = (images: Block<'image'>['image'][]) => {\n    // If the selection is inside a list, split the list so that the modified block is outside of it\n    Transforms.unwrapNodes(editor, {\n      match: (node) => !Editor.isEditor(node) && node.type === 'list',\n      split: true,\n    });\n\n    // Save the path of the node that is being replaced by an image to insert the images there later\n    // It's the closest full block node above the selection\n    const nodeEntryBeingReplaced = Editor.above(editor, {\n      match(node) {\n        if (Editor.isEditor(node)) return false;\n\n        const isInlineNode = ['text', 'link'].includes(node.type);\n\n        return !isInlineNode;\n      },\n    });\n\n    if (!nodeEntryBeingReplaced) return;\n    const [, pathToInsert] = nodeEntryBeingReplaced;\n\n    // Remove the previous node that is being replaced by an image\n    Transforms.removeNodes(editor);\n\n    // Convert images to nodes and insert them\n    const nodesToInsert = images.map((image) => {\n      const imageNode: Block<'image'> = {\n        type: 'image',\n        image,\n        children: [{ type: 'text', text: '' }],\n      };\n      return imageNode;\n    });\n    Transforms.insertNodes(editor, nodesToInsert, { at: pathToInsert });\n\n    // Set the selection on the image since it was cleared by calling removeNodes\n    Transforms.select(editor, pathToInsert);\n  };\n\n  const handleSelectAssets = (images: Attribute.MediaValue<true>) => {\n    const formattedImages = images.map((image) => {\n      // Create an object with imageSchema defined and exclude unnecessary props coming from media library config\n      const expectedImage = pick(image, IMAGE_SCHEMA_FIELDS);\n\n      const nodeImage: Block<'image'>['image'] = {\n        ...expectedImage,\n        alternativeText: expectedImage.alternativeText || expectedImage.name,\n        url: prefixFileUrlWithBackendUrl(image.url),\n      };\n\n      return nodeImage;\n    });\n\n    insertImages(formattedImages);\n    setIsOpen(false);\n  };\n\n  return (\n    <MediaLibraryDialog\n      allowedTypes={['images']}\n      onClose={() => setIsOpen(false)}\n      onSelectAssets={handleSelectAssets}\n    />\n  );\n};\n\nconst imageBlocks: Pick<BlocksStore, 'image'> = {\n  image: {\n    renderElement: (props) => <Image {...props} />,\n    icon: Picture,\n    label: {\n      id: 'components.Blocks.blocks.image',\n      defaultMessage: 'Image',\n    },\n    matchNode: (node) => node.type === 'image',\n    isInBlocksSelector: true,\n    handleBackspaceKey(editor) {\n      // Prevent issue where the image remains when it's the only block in the document\n      if (editor.children.length === 1) {\n        Transforms.setNodes(editor, {\n          type: 'paragraph',\n          // @ts-expect-error we're only setting image as null so that Slate deletes it\n          image: null,\n          children: [{ type: 'text', text: '' }],\n        });\n      } else {\n        Transforms.removeNodes(editor);\n      }\n    },\n    handleEnterKey(editor) {\n      Transforms.insertNodes(editor, {\n        type: 'paragraph',\n        children: [{ type: 'text', text: '' }],\n      });\n    },\n    handleConvert: () => {\n      // All the logic is managed inside the ImageDialog component,\n      // because the blocks are only created when the user selects images in the modal and submits\n      // and if he closes the modal, then no changes are made to the editor\n      return () => <ImageDialog />;\n    },\n    snippets: ['!['],\n  },\n};\n\nexport { imageBlocks };\n","import { Transforms, Editor, Element as SlateElement, Node, Range } from 'slate';\n\nimport { type Block } from './types';\n\nconst addProtocol = (url: string, protocol = 'https://') => {\n  const allowedProtocols = ['http://', 'https://', 'mailto:', 'tel:'];\n\n  if (allowedProtocols.some((allowedProtocol) => url.startsWith(allowedProtocol))) {\n    return url;\n  }\n\n  return `${protocol}${url}`;\n};\n\nconst removeLink = (editor: Editor) => {\n  Transforms.unwrapNodes(editor, {\n    match: (node) => !Editor.isEditor(node) && SlateElement.isElement(node) && node.type === 'link',\n  });\n};\n\nconst insertLink = (editor: Editor, { url }: { url: string }) => {\n  if (editor.selection) {\n    // We want to remove all link on the selection\n    const linkNodes = Array.from(\n      Editor.nodes(editor, {\n        at: editor.selection,\n        match: (node) => !Editor.isEditor(node) && node.type === 'link',\n      })\n    );\n\n    linkNodes.forEach(([, path]) => {\n      Transforms.unwrapNodes(editor, { at: path });\n    });\n\n    if (Range.isCollapsed(editor.selection)) {\n      const link: Block<'link'> = {\n        type: 'link',\n        url: url ? addProtocol(url) : '',\n        children: [{ type: 'text', text: url }],\n      };\n\n      Transforms.insertNodes(editor, link);\n    } else {\n      Transforms.wrapNodes(\n        editor,\n        { type: 'link', url: url ? addProtocol(url) : '' } as Block<'link'>,\n        { split: true }\n      );\n    }\n  }\n};\n\nconst editLink = (editor: Editor, link: { url: string; text: string }) => {\n  const { url, text } = link;\n\n  if (!editor.selection) {\n    return;\n  }\n\n  const linkEntry = Editor.above(editor, {\n    match: (node) => !Editor.isEditor(node) && node.type === 'link',\n  });\n\n  if (linkEntry) {\n    const [, linkPath] = linkEntry;\n    Transforms.setNodes(editor, { url: addProtocol(url) }, { at: linkPath });\n\n    // If link text is different, we remove the old text and insert the new one\n    if (text !== '' && text !== Editor.string(editor, linkPath)) {\n      const linkNodeChildrens = Array.from(Node.children(editor, linkPath, { reverse: true }));\n\n      linkNodeChildrens.forEach(([, childPath]) => {\n        Transforms.removeNodes(editor, { at: childPath });\n      });\n\n      Transforms.insertNodes(editor, [{ type: 'text', text }], { at: linkPath.concat(0) });\n    }\n  }\n};\n\nexport { insertLink, editLink, removeLink };\n","import * as React from 'react';\n\nimport {\n  BaseLink,\n  Button,\n  Field,\n  FieldInput,\n  FieldLabel,\n  Flex,\n  Icon,\n  Popover,\n  Tooltip,\n  Typography,\n} from '@strapi/design-system';\nimport { Pencil, Trash } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { type Element, Editor, Path, Range, Transforms } from 'slate';\nimport { type RenderElementProps, ReactEditor } from 'slate-react';\nimport styled from 'styled-components';\n\nimport { composeRefs } from '../../../utils/refs';\nimport { type BlocksStore, useBlocksEditorContext } from '../BlocksEditor';\nimport { editLink, removeLink } from '../utils/links';\nimport { type Block } from '../utils/types';\n\nconst StyledBaseLink = styled(BaseLink)`\n  text-decoration: none;\n`;\n\n// Make sure the tooltip is above the popover\nconst TooltipCustom = styled(Tooltip)`\n  z-index: 6;\n`;\n\n// Used for the Edit and Cancel buttons in the link popover\nconst CustomButton = styled(Button)`\n  & > span {\n    line-height: normal;\n  }\n`;\n\ninterface LinkContentProps extends RenderElementProps {\n  link: Block<'link'>;\n}\n\nconst LinkContent = React.forwardRef<HTMLAnchorElement, LinkContentProps>(\n  ({ link, children, attributes }, forwardedRef) => {\n    const { formatMessage } = useIntl();\n    const { editor } = useBlocksEditorContext('Link');\n    const path = ReactEditor.findPath(editor, link);\n    const [popoverOpen, setPopoverOpen] = React.useState(\n      editor.lastInsertedLinkPath ? Path.equals(path, editor.lastInsertedLinkPath) : false\n    );\n    const [isEditing, setIsEditing] = React.useState(link.url === '');\n    const linkRef = React.useRef<HTMLAnchorElement>(null!);\n    const elementText = link.children.map((child) => child.text).join('');\n    const [linkText, setLinkText] = React.useState(elementText);\n    const [linkUrl, setLinkUrl] = React.useState(link.url);\n\n    const handleOpenEditPopover: React.MouseEventHandler<HTMLAnchorElement> = (e) => {\n      e.preventDefault();\n      setPopoverOpen(true);\n    };\n\n    const handleSave: React.FormEventHandler = (e) => {\n      e.stopPropagation();\n\n      // If the selection is collapsed, we select the parent node because we want all the link to be replaced)\n      if (editor.selection && Range.isCollapsed(editor.selection)) {\n        const [, parentPath] = Editor.parent(editor, editor.selection.focus?.path);\n        Transforms.select(editor, parentPath);\n      }\n\n      editLink(editor, { url: linkUrl, text: linkText });\n      setIsEditing(false);\n    };\n\n    const handleCancel = () => {\n      setIsEditing(false);\n\n      if (link.url === '') {\n        removeLink(editor);\n      }\n    };\n\n    const handleDismiss = () => {\n      setPopoverOpen(false);\n\n      if (link.url === '') {\n        removeLink(editor);\n      }\n\n      ReactEditor.focus(editor);\n    };\n\n    const composedRefs = composeRefs(linkRef, forwardedRef);\n\n    return (\n      <>\n        <StyledBaseLink\n          {...attributes}\n          ref={composedRefs}\n          href={link.url}\n          onClick={handleOpenEditPopover}\n          color=\"primary600\"\n        >\n          {children}\n        </StyledBaseLink>\n        {popoverOpen && (\n          <Popover source={linkRef} onDismiss={handleDismiss} padding={4} contentEditable={false}>\n            {isEditing ? (\n              <Flex as=\"form\" onSubmit={handleSave} direction=\"column\" gap={4}>\n                <Field width=\"300px\">\n                  <FieldLabel>\n                    {formatMessage({\n                      id: 'components.Blocks.popover.text',\n                      defaultMessage: 'Text',\n                    })}\n                  </FieldLabel>\n                  <FieldInput\n                    name=\"text\"\n                    placeholder={formatMessage({\n                      id: 'components.Blocks.popover.text.placeholder',\n                      defaultMessage: 'Enter link text',\n                    })}\n                    value={linkText}\n                    onChange={(e) => setLinkText(e.target.value)}\n                  />\n                </Field>\n                <Field width=\"300px\">\n                  <FieldLabel>\n                    {formatMessage({\n                      id: 'components.Blocks.popover.link',\n                      defaultMessage: 'Link',\n                    })}\n                  </FieldLabel>\n                  <FieldInput\n                    name=\"url\"\n                    placeholder=\"https://strapi.io\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                  />\n                </Field>\n                <Flex justifyContent=\"end\" width=\"100%\" gap={2}>\n                  <Button variant=\"tertiary\" onClick={handleCancel}>\n                    {formatMessage({\n                      id: 'components.Blocks.popover.cancel',\n                      defaultMessage: 'Cancel',\n                    })}\n                  </Button>\n                  <Button type=\"submit\" disabled={!linkText || !linkUrl}>\n                    {formatMessage({\n                      id: 'components.Blocks.popover.save',\n                      defaultMessage: 'Save',\n                    })}\n                  </Button>\n                </Flex>\n              </Flex>\n            ) : (\n              <Flex direction=\"column\" gap={4} alignItems=\"start\" width=\"400px\">\n                <Typography>{elementText}</Typography>\n                <Typography>\n                  <StyledBaseLink href={link.url} target=\"_blank\" color=\"primary600\">\n                    {link.url}\n                  </StyledBaseLink>\n                </Typography>\n                <Flex justifyContent=\"end\" width=\"100%\" gap={2}>\n                  <TooltipCustom\n                    description={formatMessage({\n                      id: 'components.Blocks.popover.delete',\n                      defaultMessage: 'Delete',\n                    })}\n                  >\n                    <CustomButton\n                      size=\"S\"\n                      width=\"2rem\"\n                      variant=\"danger-light\"\n                      onClick={() => removeLink(editor)}\n                      aria-label={formatMessage({\n                        id: 'components.Blocks.popover.delete',\n                        defaultMessage: 'Delete',\n                      })}\n                      type=\"button\"\n                      justifyContent=\"center\"\n                    >\n                      <Icon width={3} height={3} as={Trash} />\n                    </CustomButton>\n                  </TooltipCustom>\n\n                  <TooltipCustom\n                    description={formatMessage({\n                      id: 'components.Blocks.popover.edit',\n                      defaultMessage: 'Edit',\n                    })}\n                  >\n                    <CustomButton\n                      size=\"S\"\n                      width=\"2rem\"\n                      variant=\"tertiary\"\n                      onClick={() => setIsEditing(true)}\n                      aria-label={formatMessage({\n                        id: 'components.Blocks.popover.edit',\n                        defaultMessage: 'Edit',\n                      })}\n                      type=\"button\"\n                      justifyContent=\"center\"\n                    >\n                      <Icon width={3} height={3} as={Pencil} />\n                    </CustomButton>\n                  </TooltipCustom>\n                </Flex>\n              </Flex>\n            )}\n          </Popover>\n        )}\n      </>\n    );\n  }\n);\n\nconst isLink = (element: Element): element is Block<'link'> => {\n  return element.type === 'link';\n};\n\nconst Link = React.forwardRef<HTMLAnchorElement, RenderElementProps>((props, forwardedRef) => {\n  if (!isLink(props.element)) {\n    return null;\n  }\n\n  // LinkContent uses React hooks that rely on props.element being a link. If the type guard above\n  // doesn't pass, those hooks would be called conditionnally, which is not allowed.\n  // Hence the need for a separate component.\n  return <LinkContent {...props} link={props.element} ref={forwardedRef} />;\n});\n\nconst linkBlocks: Pick<BlocksStore, 'link'> = {\n  link: {\n    renderElement: (props) => (\n      <Link element={props.element} attributes={props.attributes}>\n        {props.children}\n      </Link>\n    ),\n    // No handleConvert here, links are created via the link button in the toolbar\n    matchNode: (node) => node.type === 'link',\n    isInBlocksSelector: false,\n  },\n};\n\nexport { linkBlocks };\n","import * as React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport { BulletList, NumberList } from '@strapi/icons';\nimport { type Text, Editor, Node, Transforms, Path } from 'slate';\nimport { type RenderElementProps } from 'slate-react';\nimport styled, { css } from 'styled-components';\n\nimport { type BlocksStore } from '../BlocksEditor';\nimport { baseHandleConvert } from '../utils/conversions';\nimport { type Block } from '../utils/types';\n\nconst listStyle = css`\n  margin-block-start: ${({ theme }) => theme.spaces[4]};\n  margin-block-end: ${({ theme }) => theme.spaces[4]};\n  margin-inline-start: ${({ theme }) => theme.spaces[0]};\n  margin-inline-end: ${({ theme }) => theme.spaces[0]};\n  padding-inline-start: ${({ theme }) => theme.spaces[4]};\n\n  ol,\n  ul {\n    margin-block-start: ${({ theme }) => theme.spaces[0]};\n    margin-block-end: ${({ theme }) => theme.spaces[0]};\n  }\n`;\n\nconst Orderedlist = styled.ol`\n  list-style-type: decimal;\n  ${listStyle}\n`;\n\nconst Unorderedlist = styled.ul`\n  list-style-type: disc;\n  ${listStyle}\n`;\n\nconst isListNode = (node: unknown): node is Block<'list'> => {\n  return Node.isNode(node) && !Editor.isEditor(node) && node.type === 'list';\n};\n\nconst List = ({ attributes, children, element }: RenderElementProps) => {\n  if (!isListNode(element)) {\n    return null;\n  }\n\n  if (element.format === 'ordered') {\n    return <Orderedlist {...attributes}>{children}</Orderedlist>;\n  }\n\n  return <Unorderedlist {...attributes}>{children}</Unorderedlist>;\n};\n\nconst replaceListWithEmptyBlock = (editor: Editor, currentListPath: Path) => {\n  // Delete the empty list\n  Transforms.removeNodes(editor, { at: currentListPath });\n\n  if (currentListPath[0] === 0) {\n    // If the list was the only (or first) block element then insert empty paragraph as editor needs default value\n    Transforms.insertNodes(\n      editor,\n      {\n        type: 'paragraph',\n        children: [{ type: 'text', text: '' }],\n      },\n      { at: currentListPath }\n    );\n    Transforms.select(editor, currentListPath);\n  }\n};\n\nconst isText = (node: unknown): node is Text => {\n  return Node.isNode(node) && !Editor.isEditor(node) && node.type === 'text';\n};\n\n/**\n * Common handler for the backspace event on ordered and unordered lists\n */\nconst handleBackspaceKeyOnList = (editor: Editor, event: React.KeyboardEvent<HTMLElement>) => {\n  if (!editor.selection) return;\n\n  const [currentListItem, currentListItemPath] = Editor.parent(editor, editor.selection.anchor);\n  const [currentList, currentListPath] = Editor.parent(editor, currentListItemPath);\n  const isListEmpty =\n    currentList.children.length === 1 &&\n    isText(currentListItem.children[0]) &&\n    currentListItem.children[0].text === '';\n  const isNodeStart = Editor.isStart(editor, editor.selection.anchor, currentListItemPath);\n  const isFocusAtTheBeginningOfAChild =\n    editor.selection.focus.offset === 0 && editor.selection.focus.path.at(-1) === 0;\n\n  if (isListEmpty) {\n    event.preventDefault();\n    replaceListWithEmptyBlock(editor, currentListPath);\n  } else if (isNodeStart) {\n    Transforms.liftNodes(editor, {\n      match: (node) => !Editor.isEditor(node) && node.type === 'list-item',\n    });\n    // Transforms the list item into a paragraph\n    Transforms.setNodes(\n      editor,\n      { type: 'paragraph' },\n      {\n        hanging: true,\n      }\n    );\n  } else if (isFocusAtTheBeginningOfAChild) {\n    Transforms.liftNodes(editor, {\n      match: (node) => !Editor.isEditor(node) && node.type === 'list-item',\n    });\n    // If the focus is at the beginning of a child node we need to replace it with a paragraph\n    Transforms.setNodes(editor, { type: 'paragraph' });\n  }\n};\n\n/**\n * Common handler for the enter key on ordered and unordered lists\n */\nconst handleEnterKeyOnList = (editor: Editor) => {\n  const currentListItemEntry = Editor.above(editor, {\n    match: (node) => !Editor.isEditor(node) && node.type === 'list-item',\n  });\n\n  if (!currentListItemEntry || !editor.selection) {\n    return;\n  }\n\n  const [currentListItem, currentListItemPath] = currentListItemEntry;\n  const [currentList, currentListPath] = Editor.parent(editor, currentListItemPath);\n  const isListEmpty =\n    currentList.children.length === 1 &&\n    isText(currentListItem.children[0]) &&\n    currentListItem.children[0].text === '';\n  const isListItemEmpty =\n    currentListItem.children.length === 1 &&\n    isText(currentListItem.children[0]) &&\n    currentListItem.children[0].text === '';\n\n  if (isListEmpty) {\n    replaceListWithEmptyBlock(editor, currentListPath);\n  } else if (isListItemEmpty) {\n    // Delete the empty list item\n    Transforms.removeNodes(editor, { at: currentListItemPath });\n\n    // Create a new paragraph below the parent list\n    const listNodeEntry = Editor.above(editor, {\n      match: (node) => !Editor.isEditor(node) && node.type === 'list',\n    });\n\n    if (!listNodeEntry) {\n      return;\n    }\n\n    const createdParagraphPath = Path.next(listNodeEntry[1]);\n    Transforms.insertNodes(\n      editor,\n      {\n        type: 'paragraph',\n        children: [{ type: 'text', text: '' }],\n      },\n      { at: createdParagraphPath }\n    );\n\n    // Move the selection to the newly created paragraph\n    Transforms.select(editor, createdParagraphPath);\n  } else {\n    // Check if the cursor is at the end of the list item\n    const isNodeEnd = Editor.isEnd(editor, editor.selection.anchor, currentListItemPath);\n\n    if (isNodeEnd) {\n      // If there was nothing after the cursor, create a fresh new list item,\n      // in order to avoid carrying over the modifiers from the previous list item\n      Transforms.insertNodes(editor, { type: 'list-item', children: [{ type: 'text', text: '' }] });\n    } else {\n      // If there is something after the cursor, split the current list item,\n      // so that we keep the content and the modifiers\n      Transforms.splitNodes(editor);\n    }\n  }\n};\n\n/**\n * Common handler for converting a node to a list\n */\nconst handleConvertToList = (editor: Editor, format: Block<'list'>['format']) => {\n  const convertedPath = baseHandleConvert<Block<'list-item'>>(editor, { type: 'list-item' });\n\n  if (!convertedPath) return;\n\n  Transforms.wrapNodes(editor, { type: 'list', format, children: [] }, { at: convertedPath });\n};\n\nconst listBlocks: Pick<BlocksStore, 'list-ordered' | 'list-unordered' | 'list-item'> = {\n  'list-ordered': {\n    renderElement: (props) => <List {...props} />,\n    label: {\n      id: 'components.Blocks.blocks.orderedList',\n      defaultMessage: 'Numbered list',\n    },\n    icon: NumberList,\n    matchNode: (node) => node.type === 'list' && node.format === 'ordered',\n    isInBlocksSelector: true,\n    handleConvert: (editor) => handleConvertToList(editor, 'ordered'),\n    handleEnterKey: handleEnterKeyOnList,\n    handleBackspaceKey: handleBackspaceKeyOnList,\n    snippets: ['1.'],\n  },\n  'list-unordered': {\n    renderElement: (props) => <List {...props} />,\n    label: {\n      id: 'components.Blocks.blocks.unorderedList',\n      defaultMessage: 'Bulleted list',\n    },\n    icon: BulletList,\n    matchNode: (node) => node.type === 'list' && node.format === 'unordered',\n    isInBlocksSelector: true,\n    handleConvert: (editor) => handleConvertToList(editor, 'unordered'),\n    handleEnterKey: handleEnterKeyOnList,\n    handleBackspaceKey: handleBackspaceKeyOnList,\n    snippets: ['-', '*', '+'],\n  },\n  'list-item': {\n    renderElement: (props) => (\n      <Typography as=\"li\" {...props.attributes}>\n        {props.children}\n      </Typography>\n    ),\n    // No handleConvert, list items are created when converting to the parent list\n    matchNode: (node) => node.type === 'list-item',\n    isInBlocksSelector: false,\n  },\n};\n\nexport { listBlocks };\n","import * as React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport { Paragraph } from '@strapi/icons';\nimport { type Text, Editor, Transforms } from 'slate';\n\nimport { type BlocksStore } from '../BlocksEditor';\nimport { baseHandleConvert } from '../utils/conversions';\nimport { type Block } from '../utils/types';\n\nconst paragraphBlocks: Pick<BlocksStore, 'paragraph'> = {\n  paragraph: {\n    renderElement: (props) => (\n      <Typography as=\"p\" variant=\"omega\" {...props.attributes}>\n        {props.children}\n      </Typography>\n    ),\n    icon: Paragraph,\n    label: {\n      id: 'components.Blocks.blocks.text',\n      defaultMessage: 'Text',\n    },\n    matchNode: (node) => node.type === 'paragraph',\n    isInBlocksSelector: true,\n    handleConvert(editor) {\n      baseHandleConvert<Block<'paragraph'>>(editor, { type: 'paragraph' });\n    },\n    handleEnterKey(editor) {\n      if (!editor.selection) {\n        return;\n      }\n\n      // We need to keep track of the initial position of the cursor\n      const anchorPathInitialPosition = editor.selection.anchor.path;\n      /**\n       * Split the nodes where the cursor is. This will create a new paragraph with the content\n       * after the cursor, while retaining all the children, modifiers etc.\n       */\n      Transforms.splitNodes(editor, {\n        // Makes sure we always create a new node,\n        // even if there's nothing to the right of the cursor in the node.\n        always: true,\n      });\n\n      // Check if the created node is empty (if there was no text after the cursor in the node)\n      // This lets us know if we need to carry over the modifiers from the previous node\n      const parentBlockEntry = Editor.above(editor, {\n        match: (node) => !Editor.isEditor(node) && node.type !== 'text',\n      });\n      if (!parentBlockEntry) {\n        return;\n      }\n      const [, parentBlockPath] = parentBlockEntry;\n      const isNodeEnd = Editor.isEnd(editor, editor.selection.anchor, parentBlockPath);\n\n      /**\n       * Delete and recreate the node that was created at the right of the cursor.\n       * This is to avoid node pollution\n       * (e.g. keeping the level attribute when converting a heading to a paragraph).\n       * Select the parent of the selection because we want the full block, not the leaf.\n       * And copy its children to make sure we keep the modifiers.\n       */\n      const [fragmentedNode] = Editor.parent(editor, editor.selection.anchor.path);\n      Transforms.removeNodes(editor);\n\n      // Check if after the current position there is another node\n      const hasNextNode = editor.children.length - anchorPathInitialPosition[0] > 1;\n\n      // Insert the new node at the right position.\n      // The next line after the editor selection if present or otherwise at the end of the editor.\n      Transforms.insertNodes(\n        editor,\n        {\n          type: 'paragraph',\n          // Don't carry over the modifiers from the previous node if there was no text after the cursor\n          children: (isNodeEnd ? [{ type: 'text', text: '' }] : fragmentedNode.children) as Text[],\n        },\n        {\n          at: hasNextNode ? [anchorPathInitialPosition[0] + 1] : [editor.children.length],\n        }\n      );\n\n      /**\n       * The new selection will by default be at the end of the created node.\n       * Instead we manually move it to the start of the created node.\n       * Make sure to we go to the start of the node and not the start of the leaf.\n       */\n      Transforms.select(editor, editor.start([anchorPathInitialPosition[0] + 1]));\n    },\n  },\n};\n\nexport { paragraphBlocks };\n","import * as React from 'react';\n\nimport { Quote } from '@strapi/icons';\nimport styled from 'styled-components';\n\nimport { type BlocksStore } from '../BlocksEditor';\nimport { baseHandleConvert } from '../utils/conversions';\nimport { pressEnterTwiceToExit } from '../utils/enterKey';\nimport { type Block } from '../utils/types';\n\nconst Blockquote = styled.blockquote.attrs({ role: 'blockquote' })`\n  margin: ${({ theme }) => `${theme.spaces[4]} 0`};\n  font-weight: ${({ theme }) => theme.fontWeights.regular};\n  border-left: ${({ theme }) => `${theme.spaces[1]} solid ${theme.colors.neutral200}`};\n  padding: ${({ theme }) => theme.spaces[2]} ${({ theme }) => theme.spaces[5]};\n  color: ${({ theme }) => theme.colors.neutral600};\n`;\n\nconst quoteBlocks: Pick<BlocksStore, 'quote'> = {\n  quote: {\n    renderElement: (props) => (\n      // The div is needed to make sure the padding bottom from BlocksContent is applied properly\n      // when the quote is the last block in the editor\n      <div>\n        <Blockquote {...props.attributes}>{props.children}</Blockquote>\n      </div>\n    ),\n    icon: Quote,\n    label: {\n      id: 'components.Blocks.blocks.quote',\n      defaultMessage: 'Quote',\n    },\n    matchNode: (node) => node.type === 'quote',\n    isInBlocksSelector: true,\n    handleConvert(editor) {\n      baseHandleConvert<Block<'quote'>>(editor, { type: 'quote' });\n    },\n    handleEnterKey(editor) {\n      pressEnterTwiceToExit(editor);\n    },\n    snippets: ['>'],\n  },\n};\n\nexport { quoteBlocks };\n","import { type Element, Node } from 'slate';\n\nexport type Block<T extends Element['type']> = Extract<Node, { type: T }>;\n\n// Wrap Object.entries to get the correct types\nexport const getEntries = <T extends object>(object: T) =>\n  Object.entries(object) as [keyof T, T[keyof T]][];\n\n// Wrap Object.keys to get the correct types\nexport const getKeys = <T extends object>(object: T) => Object.keys(object) as (keyof T)[];\n","import * as React from 'react';\n\nimport * as Toolbar from '@radix-ui/react-toolbar';\nimport { Flex, Icon, Tooltip, SingleSelect, SingleSelectOption, Box } from '@strapi/design-system';\nimport { pxToRem } from '@strapi/helper-plugin';\nimport { Link } from '@strapi/icons';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { Editor, Transforms, Element as SlateElement, Node } from 'slate';\nimport { ReactEditor } from 'slate-react';\nimport styled from 'styled-components';\n\nimport {\n  type BlocksStore,\n  type SelectorBlockKey,\n  isSelectorBlockKey,\n  useBlocksEditorContext,\n} from './BlocksEditor';\nimport { insertLink } from './utils/links';\nimport { type Block, getEntries, getKeys } from './utils/types';\n\nconst ToolbarWrapper = styled(Flex)`\n  &[aria-disabled='true'] {\n    cursor: not-allowed;\n  }\n`;\n\nconst Separator = styled(Toolbar.Separator)`\n  background: ${({ theme }) => theme.colors.neutral150};\n  width: 1px;\n  height: ${pxToRem(24)};\n`;\n\nconst FlexButton = styled(Flex)`\n  // Inherit the not-allowed cursor from ToolbarWrapper when disabled\n  &[aria-disabled] {\n    cursor: inherit;\n  }\n\n  &[aria-disabled='false'] {\n    cursor: pointer;\n\n    // Only apply hover styles if the button is enabled\n    &:hover {\n      background: ${({ theme }) => theme.colors.primary100};\n    }\n  }\n`;\n\nconst SelectWrapper = styled(Box)`\n  // Styling changes to SingleSelect component don't work, so adding wrapper to target SingleSelect\n  div[role='combobox'] {\n    border: none;\n    cursor: pointer;\n    min-height: unset;\n    padding-top: 6px;\n    padding-bottom: 6px;\n\n    &[aria-disabled='false']:hover {\n      cursor: pointer;\n      background: ${({ theme }) => theme.colors.primary100};\n    }\n\n    &[aria-disabled] {\n      background: transparent;\n      cursor: inherit;\n\n      // Select text and icons should also have disabled color\n      span {\n        color: ${({ theme }) => theme.colors.neutral600};\n      }\n    }\n  }\n`;\n\n/**\n * Handles the modal component that may be returned by a block when converting it\n */\nfunction useConversionModal() {\n  const [modalElement, setModalComponent] = React.useState<React.JSX.Element | null>(null);\n\n  const handleConversionResult = (renderModal: void | (() => React.JSX.Element) | undefined) => {\n    // Not all blocks return a modal\n    if (renderModal) {\n      // Use cloneElement to apply a key because to create a new instance of the component\n      // Without the new key, the state is kept from previous times that option was picked\n      setModalComponent(React.cloneElement(renderModal(), { key: Date.now() }));\n    }\n  };\n\n  return { modalElement, handleConversionResult };\n}\n\ninterface ToolbarButtonProps {\n  icon: React.ComponentType;\n  name: string;\n  label: MessageDescriptor;\n  isActive: boolean;\n  disabled: boolean;\n  handleClick: () => void;\n}\n\nconst ToolbarButton = ({\n  icon,\n  name,\n  label,\n  isActive,\n  disabled,\n  handleClick,\n}: ToolbarButtonProps) => {\n  const { editor } = useBlocksEditorContext('ToolbarButton');\n  const { formatMessage } = useIntl();\n  const labelMessage = formatMessage(label);\n\n  const enabledColor = isActive ? 'primary600' : 'neutral600';\n\n  return (\n    <Tooltip description={labelMessage}>\n      <Toolbar.ToggleItem\n        value={name}\n        data-state={isActive ? 'on' : 'off'}\n        onMouseDown={(e) => {\n          e.preventDefault();\n          handleClick();\n          ReactEditor.focus(editor);\n        }}\n        aria-disabled={disabled}\n        disabled={disabled}\n        aria-label={labelMessage}\n        asChild\n      >\n        <FlexButton\n          as=\"button\"\n          background={isActive ? 'primary100' : ''}\n          alignItems=\"center\"\n          justifyContent=\"center\"\n          width={7}\n          height={7}\n          hasRadius\n        >\n          <Icon width={3} height={3} as={icon} color={disabled ? 'neutral300' : enabledColor} />\n        </FlexButton>\n      </Toolbar.ToggleItem>\n    </Tooltip>\n  );\n};\n\nconst BlocksDropdown = () => {\n  const { editor, blocks, disabled } = useBlocksEditorContext('BlocksDropdown');\n  const { formatMessage } = useIntl();\n  const { modalElement, handleConversionResult } = useConversionModal();\n\n  const blockKeysToInclude: SelectorBlockKey[] = getEntries(blocks).reduce<\n    ReturnType<typeof getEntries>\n  >((currentKeys, entry) => {\n    const [key, block] = entry;\n\n    return block.isInBlocksSelector ? [...currentKeys, key] : currentKeys;\n  }, []);\n\n  const [blockSelected, setBlockSelected] = React.useState<SelectorBlockKey>('paragraph');\n\n  const selectOption = (optionKey: unknown) => {\n    if (!isSelectorBlockKey(optionKey)) {\n      return;\n    }\n\n    const editorIsEmpty =\n      editor.children.length === 1 && Editor.isEmpty(editor, editor.children[0]);\n\n    if (!editor.selection && !editorIsEmpty) {\n      // When there is no selection, create an empty block at the end of the editor\n      // so that it can be converted to the selected block\n      Transforms.insertNodes(\n        editor,\n        {\n          type: 'quote',\n          children: [{ type: 'text', text: '' }],\n        },\n        {\n          select: true,\n          // Since there's no selection, Slate will automatically insert the node at the end\n        }\n      );\n    } else if (!editor.selection && editorIsEmpty) {\n      // When there is no selection and the editor is empty,\n      // select the empty paragraph from Slate's initialValue so it gets converted\n      Transforms.select(editor, Editor.start(editor, [0, 0]));\n    }\n\n    // Let the block handle the Slate conversion logic\n    const maybeRenderModal = blocks[optionKey].handleConvert?.(editor);\n    handleConversionResult(maybeRenderModal);\n\n    setBlockSelected(optionKey);\n\n    ReactEditor.focus(editor);\n  };\n\n  /**\n   * Prevent the select from focusing itself so ReactEditor.focus(editor) can focus the editor instead.\n   *\n   * The editor first loses focus to a blur event when clicking the select button. However,\n   * refocusing the editor is not enough since the select's default behavior is to refocus itself\n   * after an option is selected.\n   *\n   */\n  const preventSelectFocus = (e: Event) => e.preventDefault();\n\n  // Listen to the selection change and update the selected block in the dropdown\n  React.useEffect(() => {\n    if (editor.selection) {\n      // Get the parent node of the anchor\n      // with a depth of two to retrieve also the list item parents\n      const [anchorNode] = Editor.parent(editor, editor.selection.anchor, {\n        edge: 'start',\n        depth: 2,\n      });\n      // Find the block key that matches the anchor node\n      const anchorBlockKey = getKeys(blocks).find(\n        (blockKey) => !Editor.isEditor(anchorNode) && blocks[blockKey].matchNode(anchorNode)\n      );\n\n      // Change the value selected in the dropdown if it doesn't match the anchor block key\n      if (anchorBlockKey && anchorBlockKey !== blockSelected) {\n        setBlockSelected(anchorBlockKey as SelectorBlockKey);\n      }\n    }\n  }, [editor.selection, editor, blocks, blockSelected]);\n\n  return (\n    <>\n      <SelectWrapper>\n        <SingleSelect\n          startIcon={<Icon as={blocks[blockSelected].icon} />}\n          onChange={selectOption}\n          placeholder={formatMessage(blocks[blockSelected].label)}\n          value={blockSelected}\n          onCloseAutoFocus={preventSelectFocus}\n          aria-label={formatMessage({\n            id: 'components.Blocks.blocks.selectBlock',\n            defaultMessage: 'Select a block',\n          })}\n          disabled={disabled}\n        >\n          {blockKeysToInclude.map((key) => (\n            <BlockOption\n              key={key}\n              value={key}\n              label={blocks[key].label}\n              icon={blocks[key].icon}\n              blockSelected={blockSelected}\n            />\n          ))}\n        </SingleSelect>\n      </SelectWrapper>\n      {modalElement}\n    </>\n  );\n};\n\ninterface BlockOptionProps {\n  value: string;\n  icon: React.ComponentType;\n  label: MessageDescriptor;\n  blockSelected: string;\n}\n\nconst BlockOption = ({ value, icon, label, blockSelected }: BlockOptionProps) => {\n  const { formatMessage } = useIntl();\n\n  const isSelected = value === blockSelected;\n\n  return (\n    <SingleSelectOption\n      startIcon={<Icon as={icon} color={isSelected ? 'primary600' : 'neutral600'} />}\n      value={value}\n    >\n      {formatMessage(label)}\n    </SingleSelectOption>\n  );\n};\n\nconst isListNode = (node: unknown): node is Block<'list'> => {\n  return Node.isNode(node) && !Editor.isEditor(node) && node.type === 'list';\n};\n\nconst isListActive = (editor: Editor, matchNode: (node: Node) => boolean) => {\n  const { selection } = editor;\n\n  if (!selection) return false;\n\n  const [match] = Array.from(\n    Editor.nodes(editor, {\n      at: Editor.unhangRange(editor, selection),\n      match: matchNode,\n    })\n  );\n\n  return Boolean(match);\n};\n\nconst toggleList = (editor: Editor, isActive: boolean, format: Block<'list'>['format']) => {\n  // If we have selected a portion of content in the editor,\n  // we want to convert it to a list or if it is already a list,\n  // convert it back to a paragraph\n  if (editor.selection) {\n    Transforms.unwrapNodes(editor, {\n      match: (node) => isListNode(node) && ['ordered', 'unordered'].includes(node.format),\n      split: true,\n    });\n\n    Transforms.setNodes(editor, {\n      type: isActive ? 'paragraph' : 'list-item',\n    });\n\n    if (!isActive) {\n      const block = { type: 'list' as const, format, children: [] };\n      Transforms.wrapNodes(editor, block);\n    }\n  } else {\n    // There is no selection, convert the last inserted node to a list\n    // If it is already a list, convert it back to a paragraph\n    const [, lastNodePath] = Editor.last(editor, []);\n\n    const [parentNode] = Editor.parent(editor, lastNodePath);\n\n    Transforms.removeNodes(editor, {\n      voids: true,\n      hanging: true,\n      at: {\n        anchor: { path: lastNodePath, offset: 0 },\n        focus: { path: lastNodePath, offset: 0 },\n      },\n    });\n\n    Transforms.insertNodes(\n      editor,\n      {\n        type: isActive ? 'paragraph' : 'list-item',\n        children: [...parentNode.children],\n      } as Node,\n      {\n        at: [lastNodePath[0]],\n        select: true,\n      }\n    );\n\n    if (!isActive) {\n      // If the selection is now a list item, wrap it inside a list\n      const block = { type: 'list' as const, format, children: [] };\n      Transforms.wrapNodes(editor, block);\n    }\n  }\n};\n\ninterface ListButtonProps {\n  block: BlocksStore['list-ordered'] | BlocksStore['list-unordered'];\n  format: Block<'list'>['format'];\n}\n\nconst ListButton = ({ block, format }: ListButtonProps) => {\n  const { editor, disabled } = useBlocksEditorContext('ListButton');\n\n  const { icon, matchNode, label } = block;\n\n  const isActive = isListActive(\n    editor,\n    (node) => !Editor.isEditor(node) && node.type !== 'text' && matchNode(node)\n  );\n\n  return (\n    <ToolbarButton\n      icon={icon}\n      name={format}\n      label={label}\n      isActive={isActive}\n      disabled={disabled}\n      handleClick={() => toggleList(editor, isActive, format)}\n    />\n  );\n};\n\nconst LinkButton = ({ disabled }: { disabled: boolean }) => {\n  const { editor } = useBlocksEditorContext('LinkButton');\n\n  const isLinkActive = () => {\n    const { selection } = editor;\n\n    if (!selection) return false;\n\n    const [match] = Array.from(\n      Editor.nodes(editor, {\n        at: Editor.unhangRange(editor, selection),\n        match: (node) => SlateElement.isElement(node) && node.type === 'link',\n      })\n    );\n\n    return Boolean(match);\n  };\n\n  const isLinkDisabled = () => {\n    // Always disabled when the whole editor is disabled\n    if (disabled) {\n      return true;\n    }\n\n    // Always enabled when there's no selection\n    if (!editor.selection) {\n      return false;\n    }\n\n    // Get the block node closest to the anchor and focus\n    const anchorNodeEntry = Editor.above(editor, {\n      at: editor.selection.anchor,\n      match: (node) => !Editor.isEditor(node) && node.type !== 'text',\n    });\n    const focusNodeEntry = Editor.above(editor, {\n      at: editor.selection.focus,\n      match: (node) => !Editor.isEditor(node) && node.type !== 'text',\n    });\n\n    if (!anchorNodeEntry || !focusNodeEntry) {\n      return false;\n    }\n\n    // Disabled if the anchor and focus are not in the same block\n    return anchorNodeEntry[0] !== focusNodeEntry[0];\n  };\n\n  const addLink = () => {\n    // We insert an empty anchor, so we split the DOM to have a element we can use as reference for the popover\n    insertLink(editor, { url: '' });\n  };\n\n  return (\n    <ToolbarButton\n      icon={Link}\n      name=\"link\"\n      label={{\n        id: 'components.Blocks.link',\n        defaultMessage: 'Link',\n      }}\n      isActive={isLinkActive()}\n      handleClick={addLink}\n      disabled={isLinkDisabled()}\n    />\n  );\n};\n\nconst BlocksToolbar = () => {\n  const { editor, blocks, modifiers, disabled } = useBlocksEditorContext('BlocksToolbar');\n\n  /**\n   * The modifier buttons are disabled when an image is selected.\n   */\n  const checkButtonDisabled = () => {\n    // Always disabled when the whole editor is disabled\n    if (disabled) {\n      return true;\n    }\n\n    if (!editor.selection) {\n      return false;\n    }\n\n    const selectedNode = editor.children[editor.selection.anchor.path[0]];\n\n    if (['image', 'code'].includes(selectedNode.type)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const isButtonDisabled = checkButtonDisabled();\n\n  return (\n    <Toolbar.Root aria-disabled={disabled} asChild>\n      <ToolbarWrapper gap={2} padding={2}>\n        <BlocksDropdown />\n        <Separator />\n        <Toolbar.ToggleGroup type=\"multiple\" asChild>\n          <Flex gap={1}>\n            {Object.entries(modifiers).map(([name, modifier]) => (\n              <ToolbarButton\n                key={name}\n                name={name}\n                icon={modifier.icon}\n                label={modifier.label}\n                isActive={modifier.checkIsActive(editor)}\n                handleClick={() => modifier.handleToggle(editor)}\n                disabled={isButtonDisabled}\n              />\n            ))}\n            <LinkButton disabled={isButtonDisabled} />\n          </Flex>\n        </Toolbar.ToggleGroup>\n        <Separator />\n        <Toolbar.ToggleGroup type=\"single\" asChild>\n          <Flex gap={1}>\n            <ListButton block={blocks['list-unordered']} format=\"unordered\" />\n            <ListButton block={blocks['list-ordered']} format=\"ordered\" />\n          </Flex>\n        </Toolbar.ToggleGroup>\n      </ToolbarWrapper>\n    </Toolbar.Root>\n  );\n};\n\nexport { BlocksToolbar, useConversionModal };\n","import * as React from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport { Editor, Transforms } from 'slate';\nimport {\n  type ReactEditor,\n  type RenderElementProps,\n  type RenderLeafProps,\n  Editable,\n} from 'slate-react';\nimport styled from 'styled-components';\n\nimport { type BlocksStore, useBlocksEditorContext } from './BlocksEditor';\nimport { useConversionModal } from './BlocksToolbar';\nimport { type ModifiersStore } from './Modifiers';\nimport { getEntries } from './utils/types';\n\nconst StyledEditable = styled(Editable)`\n  // The outline style is set on the wrapper with :focus-within\n  outline: none;\n  display: flex;\n  flex-direction: column;\n  gap: ${({ theme }) => theme.spaces[2]};\n  height: 100%;\n\n  > *:last-child {\n    padding-bottom: ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nconst baseRenderLeaf = (props: RenderLeafProps, modifiers: ModifiersStore) => {\n  // Recursively wrap the children for each active modifier\n  const wrappedChildren = getEntries(modifiers).reduce((currentChildren, modifierEntry) => {\n    const [name, modifier] = modifierEntry;\n\n    if (props.leaf[name]) {\n      return modifier.renderLeaf(currentChildren);\n    }\n\n    return currentChildren;\n  }, props.children);\n\n  return <span {...props.attributes}>{wrappedChildren}</span>;\n};\n\nconst baseRenderElement = (props: RenderElementProps, blocks: BlocksStore) => {\n  const blockMatch = Object.values(blocks).find((block) => block.matchNode(props.element));\n  const block = blockMatch || blocks.paragraph;\n\n  return block.renderElement(props);\n};\n\ninterface BlocksInputProps {\n  placeholder?: string;\n}\n\nconst BlocksContent = ({ placeholder }: BlocksInputProps) => {\n  const { editor, disabled, blocks, modifiers } = useBlocksEditorContext('BlocksContent');\n  const blocksRef = React.useRef<HTMLDivElement>(null);\n  const { modalElement, handleConversionResult } = useConversionModal();\n\n  // Create renderLeaf function based on the modifiers store\n  const renderLeaf = React.useCallback(\n    (props: RenderLeafProps) => baseRenderLeaf(props, modifiers),\n    [modifiers]\n  );\n\n  // Create renderElement function base on the blocks store\n  const renderElement = React.useCallback(\n    (props: RenderElementProps) => baseRenderElement(props, blocks),\n    [blocks]\n  );\n\n  const checkSnippet = (event: React.KeyboardEvent<HTMLElement>) => {\n    // Get current text block\n    if (!editor.selection) {\n      return;\n    }\n\n    const [textNode, textNodePath] = Editor.node(editor, editor.selection.anchor.path);\n\n    // Narrow the type to a text node\n    if (Editor.isEditor(textNode) || textNode.type !== 'text') {\n      return;\n    }\n\n    // Don't check for snippets if we're not at the start of a block\n    if (textNodePath.at(-1) !== 0) {\n      return;\n    }\n\n    // Check if the text node starts with a known snippet\n    const blockMatchingSnippet = Object.values(blocks).find((block) => {\n      return block.snippets?.includes(textNode.text);\n    });\n\n    if (blockMatchingSnippet?.handleConvert) {\n      // Prevent the space from being created and delete the snippet\n      event.preventDefault();\n      Transforms.delete(editor, {\n        distance: textNode.text.length,\n        unit: 'character',\n        reverse: true,\n      });\n\n      // Convert the selected block\n      const maybeRenderModal = blockMatchingSnippet.handleConvert(editor);\n      handleConversionResult(maybeRenderModal);\n    }\n  };\n\n  const handleEnter = (event: React.KeyboardEvent<HTMLElement>) => {\n    if (!editor.selection) {\n      return;\n    }\n\n    // Get the selected node\n    const selectedNode = editor.children[editor.selection.anchor.path[0]];\n\n    // Find the matching block\n    const selectedBlock = Object.values(blocks).find((block) => block.matchNode(selectedNode));\n    if (!selectedBlock) {\n      return;\n    }\n\n    // Allow forced line breaks when shift is pressed\n    if (event.shiftKey && selectedNode.type !== 'image') {\n      Transforms.insertText(editor, '\\n');\n      return;\n    }\n\n    // Check if there's an enter handler for the selected block\n    if (selectedBlock.handleEnterKey) {\n      selectedBlock.handleEnterKey(editor);\n    } else {\n      // If not, insert a new paragraph\n      blocks.paragraph.handleEnterKey!(editor);\n    }\n  };\n\n  const handleBackspaceEvent = (event: React.KeyboardEvent<HTMLElement>) => {\n    if (!editor.selection) {\n      return;\n    }\n\n    const selectedNode = editor.children[editor.selection.anchor.path[0]];\n    const selectedBlock = Object.values(blocks).find((block) => block.matchNode(selectedNode));\n\n    if (!selectedBlock) {\n      return;\n    }\n\n    if (selectedBlock.handleBackspaceKey) {\n      selectedBlock.handleBackspaceKey(editor, event);\n    }\n  };\n\n  /**\n   * Modifier keyboard shortcuts\n   */\n  const handleModifierShortcuts = (event: React.KeyboardEvent<HTMLElement>) => {\n    const isCtrlOrCmd = event.metaKey || event.ctrlKey;\n\n    if (isCtrlOrCmd) {\n      Object.values(modifiers).forEach((value) => {\n        if (value.isValidEventKey(event)) {\n          value.handleToggle(editor);\n        }\n      });\n    }\n  };\n\n  const handleKeyDown: React.KeyboardEventHandler<HTMLElement> = (event) => {\n    // Find the right block-specific handlers for enter and backspace key presses\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      return handleEnter(event);\n    }\n    if (event.key === 'Backspace') {\n      return handleBackspaceEvent(event);\n    }\n\n    // Check if there's a modifier to toggle\n    handleModifierShortcuts(event);\n\n    // Check if a snippet was triggered\n    if (event.key === ' ') {\n      checkSnippet(event);\n    }\n  };\n\n  /**\n   *  scrollSelectionIntoView : Slate's default method to scroll a DOM selection into the view,\n   *  thats shifting layout for us when there is a overflowY:scroll on the viewport.\n   *  We are overriding it to check if the selection is not fully within the visible area of the editor,\n   *  we use scrollBy one line to the bottom\n   */\n  const handleScrollSelectionIntoView = (_: ReactEditor, domRange: Range) => {\n    const domRect = domRange.getBoundingClientRect();\n    const blocksInput = blocksRef.current;\n\n    if (!blocksInput) {\n      return;\n    }\n\n    const editorRect = blocksInput.getBoundingClientRect();\n\n    // Check if the selection is not fully within the visible area of the editor\n    if (domRect.top < editorRect.top || domRect.bottom > editorRect.bottom) {\n      // Scroll by one line to the bottom\n      blocksInput.scrollBy({\n        top: 28, // 20px is the line-height + 8px line gap\n        behavior: 'smooth',\n      });\n    }\n  };\n\n  return (\n    <Box\n      ref={blocksRef}\n      grow={1}\n      width=\"100%\"\n      overflow=\"auto\"\n      fontSize={2}\n      background=\"neutral0\"\n      color=\"neutral800\"\n      lineHeight={6}\n      paddingLeft={4}\n      paddingRight={4}\n      paddingTop={3}\n      paddingBottom={3}\n    >\n      <StyledEditable\n        readOnly={disabled}\n        placeholder={placeholder}\n        renderElement={renderElement}\n        renderLeaf={renderLeaf}\n        onKeyDown={handleKeyDown}\n        scrollSelectionIntoView={handleScrollSelectionIntoView}\n      />\n      {modalElement}\n    </Box>\n  );\n};\n\nexport { BlocksContent };\n","import * as React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport { Bold, Italic, Underline, StrikeThrough, Code } from '@strapi/icons';\nimport { type MessageDescriptor } from 'react-intl';\nimport { Editor, Text, Transforms } from 'slate';\nimport styled, { css } from 'styled-components';\n\nconst stylesToInherit = css`\n  font-size: inherit;\n  color: inherit;\n  line-height: inherit;\n`;\n\nconst BoldText = styled(Typography).attrs({ fontWeight: 'bold' })`\n  ${stylesToInherit}\n`;\n\nconst ItalicText = styled(Typography)`\n  font-style: italic;\n  ${stylesToInherit}\n`;\n\nconst UnderlineText = styled(Typography).attrs({ textDecoration: 'underline' })`\n  ${stylesToInherit}\n`;\n\nconst StrikeThroughText = styled(Typography).attrs({ textDecoration: 'line-through' })`\n  ${stylesToInherit}\n`;\n\nconst InlineCode = styled.code`\n  background-color: ${({ theme }) => theme.colors.neutral150};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  padding: ${({ theme }) => `0 ${theme.spaces[2]}`};\n  font-family: 'SF Mono', SFMono-Regular, ui-monospace, 'DejaVu Sans Mono', Menlo, Consolas,\n    monospace;\n  color: inherit;\n`;\n\ntype ModifierKey = Exclude<keyof Text, 'type' | 'text'>;\n\ntype ModifiersStore = {\n  [K in ModifierKey]: {\n    icon: React.ComponentType;\n    isValidEventKey: (event: React.KeyboardEvent<HTMLElement>) => boolean;\n    label: MessageDescriptor;\n    checkIsActive: (editor: Editor) => boolean;\n    handleToggle: (editor: Editor) => void;\n    renderLeaf: (children: React.JSX.Element | string) => React.JSX.Element;\n  };\n};\n\n/**\n * The default handler for checking if a modifier is active\n */\nconst baseCheckIsActive = (editor: Editor, name: ModifierKey) => {\n  const marks = Editor.marks(editor);\n  if (!marks) return false;\n\n  return Boolean(marks[name]);\n};\n\n/**\n * The default handler for toggling a modifier\n */\nconst baseHandleToggle = (editor: Editor, name: ModifierKey) => {\n  const marks = Editor.marks(editor);\n\n  // If there is no selection, set selection to the end of line\n  if (!editor.selection) {\n    const endOfEditor = Editor.end(editor, []);\n    Transforms.select(editor, endOfEditor);\n  }\n\n  // Toggle the modifier\n  if (marks?.[name]) {\n    Editor.removeMark(editor, name);\n  } else {\n    Editor.addMark(editor, name, true);\n  }\n};\n\nconst modifiers: ModifiersStore = {\n  bold: {\n    icon: Bold,\n    isValidEventKey: (event) => event.key === 'b',\n    label: { id: 'components.Blocks.modifiers.bold', defaultMessage: 'Bold' },\n    checkIsActive: (editor) => baseCheckIsActive(editor, 'bold'),\n    handleToggle: (editor) => baseHandleToggle(editor, 'bold'),\n    renderLeaf: (children) => <BoldText>{children}</BoldText>,\n  },\n  italic: {\n    icon: Italic,\n    isValidEventKey: (event) => event.key === 'i',\n    label: { id: 'components.Blocks.modifiers.italic', defaultMessage: 'Italic' },\n    checkIsActive: (editor) => baseCheckIsActive(editor, 'italic'),\n    handleToggle: (editor) => baseHandleToggle(editor, 'italic'),\n    renderLeaf: (children) => <ItalicText>{children}</ItalicText>,\n  },\n  underline: {\n    icon: Underline,\n    isValidEventKey: (event) => event.key === 'u',\n    label: { id: 'components.Blocks.modifiers.underline', defaultMessage: 'Underline' },\n    checkIsActive: (editor) => baseCheckIsActive(editor, 'underline'),\n    handleToggle: (editor) => baseHandleToggle(editor, 'underline'),\n    renderLeaf: (children) => <UnderlineText>{children}</UnderlineText>,\n  },\n  strikethrough: {\n    icon: StrikeThrough,\n    isValidEventKey: (event) => event.key === 'S' && event.shiftKey,\n    label: { id: 'components.Blocks.modifiers.strikethrough', defaultMessage: 'Strikethrough' },\n    checkIsActive: (editor) => baseCheckIsActive(editor, 'strikethrough'),\n    handleToggle: (editor) => baseHandleToggle(editor, 'strikethrough'),\n    renderLeaf: (children) => <StrikeThroughText>{children}</StrikeThroughText>,\n  },\n  code: {\n    icon: Code,\n    isValidEventKey: (event) => event.key === 'e',\n    label: { id: 'components.Blocks.modifiers.code', defaultMessage: 'Inline code' },\n    checkIsActive: (editor) => baseCheckIsActive(editor, 'code'),\n    handleToggle: (editor) => baseHandleToggle(editor, 'code'),\n    renderLeaf: (children) => <InlineCode>{children}</InlineCode>,\n  },\n};\n\nexport { type ModifiersStore, modifiers };\n","import { type Editor } from 'slate';\n\n/**\n * Images are void elements. They handle the rendering of their children instead of Slate.\n * See the Slate documentation for more information:\n * - https://docs.slatejs.org/api/nodes/element#void-vs-not-void\n * - https://docs.slatejs.org/api/nodes/element#rendering-void-elements\n */\nconst withImages = (editor: Editor) => {\n  const { isVoid } = editor;\n\n  editor.isVoid = (element) => {\n    return element.type === 'image' ? true : isVoid(element);\n  };\n\n  return editor;\n};\n\nexport { withImages };\n","import { type BaseEditor, Path, Transforms, Range, Point, Editor } from 'slate';\n\nimport { insertLink } from '../utils/links';\n\ninterface LinkEditor extends BaseEditor {\n  lastInsertedLinkPath: Path | null;\n}\n\nconst withLinks = (editor: Editor) => {\n  const { isInline, apply, insertText, insertData } = editor;\n\n  // Links are inline elements, so we need to override the isInline method for slate\n  editor.isInline = (element) => {\n    return element.type === 'link' ? true : isInline(element);\n  };\n\n  // We keep a track of the last inserted link path\n  // So we can show the popover on the link component if that link is the last one inserted\n  editor.lastInsertedLinkPath = null;\n\n  // We intercept the apply method, so everytime we insert a new link, we save its path\n  editor.apply = (operation) => {\n    if (operation.type === 'insert_node') {\n      if (!Editor.isEditor(operation.node) && operation.node.type === 'link') {\n        editor.lastInsertedLinkPath = operation.path;\n      }\n    } else if (operation.type === 'move_node') {\n      // We need to update the last inserted link path when link is moved\n      // If link is the first word in the paragraph we dont need to update the path\n      if (Path.hasPrevious(operation.path) && editor.lastInsertedLinkPath) {\n        editor.lastInsertedLinkPath = Path.transform(editor.lastInsertedLinkPath, operation);\n      }\n    }\n\n    apply(operation);\n  };\n\n  editor.insertText = (text) => {\n    // When selection is at the end of a link and user types a space, we want to break the link\n    if (editor.selection && Range.isCollapsed(editor.selection) && text === ' ') {\n      const linksInSelection = Array.from(\n        Editor.nodes(editor, {\n          at: editor.selection,\n          match: (node) => !Editor.isEditor(node) && node.type === 'link',\n        })\n      );\n\n      const selectionIsInLink = editor.selection && linksInSelection.length > 0;\n      const selectionIsAtEndOfLink =\n        selectionIsInLink &&\n        Point.equals(editor.selection.anchor, Editor.end(editor, linksInSelection[0][1]));\n\n      if (selectionIsAtEndOfLink) {\n        Transforms.insertNodes(\n          editor,\n          { text: ' ', type: 'text' },\n          { at: Path.next(linksInSelection[0][1]), select: true }\n        );\n\n        return;\n      }\n    }\n\n    insertText(text);\n  };\n\n  // Add data as a clickable link if its a valid URL\n  editor.insertData = (data) => {\n    const pastedText = data.getData('text/plain');\n\n    if (pastedText) {\n      try {\n        // eslint-disable-next-line no-new\n        new URL(pastedText);\n        insertLink(editor, { url: pastedText });\n\n        return;\n      } catch (error) {\n        // continue normal data insertion\n      }\n    }\n\n    insertData(data);\n  };\n\n  return editor;\n};\n\nexport { withLinks, type LinkEditor };\n","import { type Text, Node, Editor, Element, Transforms } from 'slate';\n\nconst isText = (node: unknown): node is Text => {\n  return Node.isNode(node) && !Editor.isEditor(node) && node.type === 'text';\n};\n\n/**\n * This plugin is used to normalize the Slate document to match the Strapi schema.\n */\nconst withStrapiSchema = (editor: Editor) => {\n  const { normalizeNode } = editor;\n\n  /**\n   * On the strapi schema, we want text nodes to have type: text\n   * By default, Slate add text nodes without type: text\n   * So we add this normalization for the cases when Slate add text nodes automatically\n   */\n  editor.normalizeNode = (entry) => {\n    const [node, path] = entry;\n\n    if (!Element.isElement(node) && !isText(node)) {\n      Transforms.setNodes(editor, { type: 'text' }, { at: path });\n\n      return;\n    }\n\n    normalizeNode(entry);\n  };\n\n  return editor;\n};\n\nexport { withStrapiSchema };\n","import * as React from 'react';\n\nimport { createContext } from '@radix-ui/react-context';\nimport { InputWrapper, Divider } from '@strapi/design-system';\nimport { type Attribute } from '@strapi/types';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { type Editor, type Descendant, createEditor } from 'slate';\nimport { withHistory } from 'slate-history';\nimport { type RenderElementProps, Slate, withReact, ReactEditor, useSlate } from 'slate-react';\nimport styled from 'styled-components';\n\nimport { codeBlocks } from './Blocks/Code';\nimport { headingBlocks } from './Blocks/Heading';\nimport { imageBlocks } from './Blocks/Image';\nimport { linkBlocks } from './Blocks/Link';\nimport { listBlocks } from './Blocks/List';\nimport { paragraphBlocks } from './Blocks/Paragraph';\nimport { quoteBlocks } from './Blocks/Quote';\nimport { BlocksContent } from './BlocksContent';\nimport { BlocksToolbar } from './BlocksToolbar';\nimport { type ModifiersStore, modifiers } from './Modifiers';\nimport { withImages } from './plugins/withImages';\nimport { withLinks } from './plugins/withLinks';\nimport { withStrapiSchema } from './plugins/withStrapiSchema';\n\n/* -------------------------------------------------------------------------------------------------\n * BlocksEditorProvider\n * -----------------------------------------------------------------------------------------------*/\n\ninterface BaseBlock {\n  renderElement: (props: RenderElementProps) => React.JSX.Element;\n  matchNode: (node: Attribute.BlocksNode) => boolean;\n  handleConvert?: (editor: Editor) => void | (() => React.JSX.Element);\n  handleEnterKey?: (editor: Editor) => void;\n  handleBackspaceKey?: (editor: Editor, event: React.KeyboardEvent<HTMLElement>) => void;\n  snippets?: string[];\n}\n\ninterface NonSelectorBlock extends BaseBlock {\n  isInBlocksSelector: false;\n}\n\ninterface SelectorBlock extends BaseBlock {\n  isInBlocksSelector: true;\n  icon: React.ComponentType;\n  label: MessageDescriptor;\n}\n\ntype NonSelectorBlockKey = 'list-item' | 'link';\n\nconst selectorBlockKeys = [\n  'paragraph',\n  'heading-one',\n  'heading-two',\n  'heading-three',\n  'heading-four',\n  'heading-five',\n  'heading-six',\n  'list-ordered',\n  'list-unordered',\n  'image',\n  'quote',\n  'code',\n] as const;\n\ntype SelectorBlockKey = (typeof selectorBlockKeys)[number];\n\nconst isSelectorBlockKey = (key: unknown): key is SelectorBlockKey => {\n  return typeof key === 'string' && selectorBlockKeys.includes(key as SelectorBlockKey);\n};\n\ntype BlocksStore = {\n  [K in SelectorBlockKey]: SelectorBlock;\n} & {\n  [K in NonSelectorBlockKey]: NonSelectorBlock;\n};\n\ninterface BlocksEditorContextValue {\n  blocks: BlocksStore;\n  modifiers: ModifiersStore;\n  disabled: boolean;\n}\n\nconst [BlocksEditorProvider, usePartialBlocksEditorContext] =\n  createContext<BlocksEditorContextValue>('BlocksEditor');\n\nfunction useBlocksEditorContext(\n  consumerName: string\n): BlocksEditorContextValue & { editor: Editor } {\n  const context = usePartialBlocksEditorContext(consumerName);\n  const editor = useSlate();\n\n  return {\n    ...context,\n    editor,\n  };\n}\n\n/* -------------------------------------------------------------------------------------------------\n * BlocksEditor\n * -----------------------------------------------------------------------------------------------*/\n\nconst EditorDivider = styled(Divider)`\n  background: ${({ theme }) => theme.colors.neutral200};\n`;\n\n/**\n * Forces an update of the Slate editor when the value prop changes from outside of Slate.\n * The root cause is that Slate is not a controlled component: https://github.com/ianstormtaylor/slate/issues/4612\n * Why not use JSON.stringify(value) as the key?\n * Because it would force a rerender of the entire editor every time the user types a character.\n * Why not use the entity id as the key, since it's unique for each locale?\n * Because it would not solve the problem when using the \"fill in from other locale\" feature\n */\nfunction useResetKey(value?: Attribute.BlocksValue): {\n  key: number;\n  incrementSlateUpdatesCount: () => void;\n} {\n  // Keep track how how many times Slate detected a change from a user interaction in the editor\n  const slateUpdatesCount = React.useRef(0);\n  // Keep track of how many times the value prop was updated, whether from within editor or from outside\n  const valueUpdatesCount = React.useRef(0);\n  // Use a key to force a rerender of the Slate editor when needed\n  const [key, setKey] = React.useState(0);\n\n  React.useEffect(() => {\n    valueUpdatesCount.current += 1;\n\n    // If the 2 refs are not equal, it means the value was updated from outside\n    if (valueUpdatesCount.current !== slateUpdatesCount.current) {\n      // So we change the key to force a rerender of the Slate editor,\n      // which will pick up the new value through its initialValue prop\n      setKey((previousKey) => previousKey + 1);\n\n      // Then bring the 2 refs back in sync\n      slateUpdatesCount.current = valueUpdatesCount.current;\n    }\n  }, [value]);\n\n  return { key, incrementSlateUpdatesCount: () => (slateUpdatesCount.current += 1) };\n}\n\nconst pipe =\n  (...fns: ((baseEditor: Editor) => Editor)[]) =>\n  (value: Editor) =>\n    fns.reduce<Editor>((prev, fn) => fn(prev), value);\n\ninterface BlocksEditorProps {\n  name: string;\n  onChange: (event: {\n    target: { name: string; value: Attribute.BlocksValue; type: 'blocks' };\n  }) => void;\n  disabled?: boolean;\n  value?: Attribute.BlocksValue;\n  placeholder?: MessageDescriptor;\n  error?: string;\n}\n\nconst BlocksEditor = React.forwardRef<{ focus: () => void }, BlocksEditorProps>(\n  ({ disabled = false, name, placeholder, onChange, value, error }, forwardedRef) => {\n    const { formatMessage } = useIntl();\n\n    const [editor] = React.useState(() =>\n      pipe(withHistory, withImages, withStrapiSchema, withReact, withLinks)(createEditor())\n    );\n    const formattedPlaceholder =\n      placeholder &&\n      formatMessage({ id: placeholder.id, defaultMessage: placeholder.defaultMessage });\n\n    /**\n     * Editable is not able to hold the ref, https://github.com/ianstormtaylor/slate/issues/4082\n     * so with \"useImperativeHandle\" we can use ReactEditor methods to expose to the parent above\n     * also not passing forwarded ref here, gives console warning.\n     */\n    React.useImperativeHandle(\n      forwardedRef,\n      () => ({\n        focus() {\n          ReactEditor.focus(editor);\n        },\n      }),\n      [editor]\n    );\n\n    const { key, incrementSlateUpdatesCount } = useResetKey(value);\n\n    const handleSlateChange = (state: Descendant[]) => {\n      const isAstChange = editor.operations.some((op) => op.type !== 'set_selection');\n\n      if (isAstChange) {\n        incrementSlateUpdatesCount();\n\n        onChange({\n          // Casting is needed because Slate's onChange type doesn't take into consideration\n          // that we set Editor['children'] to Attribute.BlocksValue in custom.d.ts\n          target: { name, value: state as Attribute.BlocksValue, type: 'blocks' },\n        });\n      }\n    };\n\n    const blocks: BlocksStore = {\n      ...paragraphBlocks,\n      ...headingBlocks,\n      ...listBlocks,\n      ...linkBlocks,\n      ...imageBlocks,\n      ...quoteBlocks,\n      ...codeBlocks,\n    };\n\n    return (\n      <Slate\n        editor={editor}\n        initialValue={value || [{ type: 'paragraph', children: [{ type: 'text', text: '' }] }]}\n        onChange={handleSlateChange}\n        key={key}\n      >\n        <BlocksEditorProvider blocks={blocks} modifiers={modifiers} disabled={disabled}>\n          <InputWrapper\n            direction=\"column\"\n            alignItems=\"flex-start\"\n            height=\"512px\"\n            disabled={disabled}\n            hasError={Boolean(error)}\n            style={{ overflow: 'hidden' }}\n          >\n            <BlocksToolbar />\n            <EditorDivider width=\"100%\" />\n            <BlocksContent placeholder={formattedPlaceholder} />\n          </InputWrapper>\n        </BlocksEditorProvider>\n      </Slate>\n    );\n  }\n);\n\nexport {\n  type BlocksStore,\n  type SelectorBlockKey,\n  BlocksEditor,\n  BlocksEditorProvider,\n  useBlocksEditorContext,\n  isSelectorBlockKey,\n};\n","import * as React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { type MessageDescriptor, useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { Hint, HintProps } from '../Hint';\n\nimport { BlocksEditor } from './BlocksEditor';\n\nconst LabelAction = styled(Box)`\n  svg path {\n    fill: ${({ theme }) => theme.colors.neutral500};\n  }\n`;\n\ninterface BlocksInputProps\n  extends React.ComponentPropsWithoutRef<typeof BlocksEditor>,\n    Pick<HintProps, 'hint'> {\n  intlLabel: MessageDescriptor;\n  attribute: { type: string; [key: string]: unknown };\n  description?: MessageDescriptor;\n  labelAction?: React.ReactNode;\n  required?: boolean;\n}\n\nconst BlocksInput = React.forwardRef<{ focus: () => void }, BlocksInputProps>(\n  (\n    { intlLabel, labelAction, name, required = false, error = '', hint, ...editorProps },\n    forwardedRef\n  ) => {\n    const { formatMessage } = useIntl();\n\n    const label = intlLabel.id ? formatMessage(intlLabel) : name;\n\n    return (\n      <>\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={1}>\n          <Flex gap={1}>\n            <Typography variant=\"pi\" fontWeight=\"bold\" textColor=\"neutral800\">\n              {label}\n              {required && (\n                <Typography textColor=\"danger600\" lineHeight=\"0px\">\n                  *\n                </Typography>\n              )}\n            </Typography>\n            {labelAction && <LabelAction paddingLeft={1}>{labelAction}</LabelAction>}\n          </Flex>\n          <BlocksEditor name={name} error={error} ref={forwardedRef} {...editorProps} />\n          <Hint hint={hint} name={name} error={error} />\n        </Flex>\n        {error && (\n          <Box paddingTop={1}>\n            <Typography variant=\"pi\" textColor=\"danger600\" data-strapi-field-error>\n              {error}\n            </Typography>\n          </Box>\n        )}\n      </>\n    );\n  }\n);\n\nexport { BlocksInput };\n","import * as React from 'react';\n\nexport function useDebounce<TValue>(value: TValue, delay: number): TValue {\n  const [debouncedValue, setDebouncedValue] = React.useState(value);\n\n  React.useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n","import * as React from 'react';\n\nimport { FieldAction, Flex, TextInput, TextInputProps, Typography } from '@strapi/design-system';\nimport {\n  CMEditViewDataManagerContextValue,\n  TranslationMessage,\n  useAPIErrorHandler,\n  useCMEditViewDataManager,\n  useFetchClient,\n  useNotification,\n} from '@strapi/helper-plugin';\nimport { CheckCircle, ExclamationMarkCircle, Loader, Refresh } from '@strapi/icons';\nimport { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport { AxiosError, AxiosResponse } from 'axios';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQuery } from 'react-query';\nimport styled, { keyframes } from 'styled-components';\n\nimport { useDebounce } from '../../hooks/useDebounce';\n\n/* -------------------------------------------------------------------------------------------------\n * InputUID\n * -----------------------------------------------------------------------------------------------*/\n\nconst UID_REGEX = /^[A-Za-z0-9-_.~]*$/;\n\ninterface InputUIDProps\n  extends Pick<TextInputProps, 'disabled' | 'error' | 'hint' | 'labelAction' | 'required'>,\n    Required<Pick<CMEditViewDataManagerContextValue, 'onChange'>> {\n  contentTypeUID: string;\n  intlLabel: TranslationMessage;\n  name: string;\n  placeholder?: TranslationMessage;\n  value: string;\n}\n\nconst InputUID = React.forwardRef<\n  {\n    inputWrapperRef: React.MutableRefObject<HTMLDivElement>;\n    input: React.MutableRefObject<HTMLInputElement>;\n  },\n  InputUIDProps\n>(\n  (\n    {\n      contentTypeUID,\n      hint,\n      disabled,\n      error,\n      intlLabel,\n      labelAction,\n      name,\n      onChange,\n      value = '',\n      placeholder,\n      required,\n    },\n    forwardedRef\n  ) => {\n    const [availability, setAvailability] =\n      React.useState<Contracts.UID.CheckUIDAvailability.Response>();\n    const [showRegenerate, setShowRegenerate] = React.useState(false);\n    const debouncedValue = useDebounce(value, 300);\n    const { modifiedData, initialData } = useCMEditViewDataManager();\n    const toggleNotification = useNotification();\n    const { formatAPIError } = useAPIErrorHandler();\n    const { formatMessage } = useIntl();\n    const { post } = useFetchClient();\n\n    const label = intlLabel.id\n      ? formatMessage(\n          { id: intlLabel.id, defaultMessage: intlLabel.defaultMessage },\n          { ...intlLabel.values }\n        )\n      : name;\n\n    const formattedPlaceholder = placeholder\n      ? formatMessage(\n          { id: placeholder.id, defaultMessage: placeholder.defaultMessage },\n          { ...placeholder.values }\n        )\n      : '';\n\n    const { data: defaultGeneratedUID, isLoading: isGeneratingDefaultUID } = useQuery({\n      queryKey: ['uid', { contentTypeUID, field: name, data: modifiedData }] as const,\n      async queryFn({ queryKey }) {\n        const [, body] = queryKey;\n\n        const {\n          data: { data },\n        } = await post<\n          Contracts.UID.GenerateUID.Response,\n          AxiosResponse<Contracts.UID.GenerateUID.Response>,\n          Contracts.UID.GenerateUID.Request['body']\n          // @ts-expect-error – TODO: fix this\n        >('/content-manager/uid/generate', body);\n\n        return data;\n      },\n      onError(err) {\n        if (err instanceof AxiosError) {\n          toggleNotification({\n            type: 'warning',\n            message: formatAPIError(err),\n          });\n        }\n      },\n      enabled: !value && required,\n    });\n\n    /**\n     * If the defaultGeneratedUID is available, then we set it as the value,\n     * but we also want to set it as the initialValue too.\n     */\n    React.useEffect(() => {\n      if (defaultGeneratedUID) {\n        onChange({ target: { name, value: defaultGeneratedUID, type: 'text' } }, true);\n      }\n    }, [defaultGeneratedUID, name, onChange]);\n\n    const { mutate: generateUID, isLoading: isGeneratingUID } = useMutation<\n      Contracts.UID.GenerateUID.Response['data'],\n      Contracts.UID.GenerateUID.Response['error'],\n      Contracts.UID.GenerateUID.Request['body']\n    >({\n      async mutationFn(body) {\n        const {\n          data: { data },\n        } = await post<\n          Contracts.UID.GenerateUID.Response,\n          AxiosResponse<Contracts.UID.GenerateUID.Response>,\n          Contracts.UID.GenerateUID.Request['body']\n        >('/content-manager/uid/generate', body);\n\n        return data;\n      },\n      onSuccess(data) {\n        onChange({ target: { name, value: data, type: 'text' } });\n      },\n      onError(err) {\n        if (err instanceof AxiosError) {\n          toggleNotification({\n            type: 'warning',\n            message: formatAPIError(err),\n          });\n        }\n      },\n    });\n\n    const { data: availabilityData, isLoading: isCheckingAvailability } = useQuery({\n      queryKey: [\n        'uid',\n        { contentTypeUID, field: name, value: debouncedValue ? debouncedValue.trim() : '' },\n      ] as const,\n      async queryFn({ queryKey }) {\n        const [, body] = queryKey;\n\n        const { data } = await post<\n          Contracts.UID.CheckUIDAvailability.Response,\n          AxiosResponse<Contracts.UID.CheckUIDAvailability.Response>,\n          Contracts.UID.CheckUIDAvailability.Request['body']\n        >('/content-manager/uid/check-availability', body);\n\n        return data;\n      },\n      enabled: Boolean(\n        debouncedValue !== initialData[name] &&\n          debouncedValue &&\n          UID_REGEX.test(debouncedValue.trim())\n      ),\n      onError(err) {\n        if (err instanceof AxiosError) {\n          toggleNotification({\n            type: 'warning',\n            message: formatAPIError(err),\n          });\n        }\n      },\n    });\n\n    React.useEffect(() => {\n      /**\n       * always store the data in state because that way as seen below\n       * we can then remove the data to stop showing the label.\n       */\n      setAvailability(availabilityData);\n\n      let timer: number;\n\n      if (availabilityData?.isAvailable) {\n        timer = window.setTimeout(() => {\n          setAvailability(undefined);\n        }, 4000);\n      }\n\n      return () => {\n        if (timer) {\n          clearTimeout(timer);\n        }\n      };\n    }, [availabilityData]);\n\n    const isLoading = isGeneratingDefaultUID || isGeneratingUID || isCheckingAvailability;\n\n    return (\n      <TextInput\n        ref={forwardedRef}\n        disabled={disabled}\n        error={error}\n        endAction={\n          <Flex position=\"relative\" gap={1}>\n            {availability && !showRegenerate && (\n              <TextValidation\n                alignItems=\"center\"\n                gap={1}\n                justifyContent=\"flex-end\"\n                available={!!availability?.isAvailable}\n                data-not-here-outer\n                position=\"absolute\"\n                pointerEvents=\"none\"\n                right={6}\n                width=\"100px\"\n              >\n                {availability?.isAvailable ? <CheckCircle /> : <ExclamationMarkCircle />}\n\n                <Typography\n                  textColor={availability.isAvailable ? 'success600' : 'danger600'}\n                  variant=\"pi\"\n                >\n                  {formatMessage(\n                    availability.isAvailable\n                      ? {\n                          id: 'content-manager.components.uid.available',\n                          defaultMessage: 'Available',\n                        }\n                      : {\n                          id: 'content-manager.components.uid.unavailable',\n                          defaultMessage: 'Unavailable',\n                        }\n                  )}\n                </Typography>\n              </TextValidation>\n            )}\n\n            {!disabled && (\n              <>\n                {showRegenerate && (\n                  <TextValidation alignItems=\"center\" justifyContent=\"flex-end\" gap={1}>\n                    <Typography textColor=\"primary600\" variant=\"pi\">\n                      {formatMessage({\n                        id: 'content-manager.components.uid.regenerate',\n                        defaultMessage: 'Regenerate',\n                      })}\n                    </Typography>\n                  </TextValidation>\n                )}\n\n                <FieldActionWrapper\n                  // @ts-expect-error – TODO: fix this\n                  onClick={() => generateUID({ contentTypeUID, field: name, data: modifiedData })}\n                  label={formatMessage({\n                    id: 'content-manager.components.uid.regenerate',\n                    defaultMessage: 'Regenerate',\n                  })}\n                  onMouseEnter={() => setShowRegenerate(true)}\n                  onMouseLeave={() => setShowRegenerate(false)}\n                >\n                  {isLoading ? (\n                    <LoadingWrapper data-testid=\"loading-wrapper\">\n                      <Loader />\n                    </LoadingWrapper>\n                  ) : (\n                    <Refresh />\n                  )}\n                </FieldActionWrapper>\n              </>\n            )}\n          </Flex>\n        }\n        hint={hint}\n        label={label}\n        labelAction={labelAction}\n        name={name}\n        onChange={onChange}\n        placeholder={formattedPlaceholder}\n        value={value}\n        required={required}\n      />\n    );\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * FieldActionWrapper\n * -----------------------------------------------------------------------------------------------*/\n\nconst FieldActionWrapper = styled(FieldAction)`\n  svg {\n    height: 1rem;\n    width: 1rem;\n    path {\n      fill: ${({ theme }) => theme.colors.neutral400};\n    }\n  }\n\n  svg:hover {\n    path {\n      fill: ${({ theme }) => theme.colors.primary600};\n    }\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * TextValidation\n * -----------------------------------------------------------------------------------------------*/\n\nconst TextValidation = styled(Flex)<{ available?: boolean }>`\n  svg {\n    height: ${12 / 16}rem;\n    width: ${12 / 16}rem;\n\n    path {\n      fill: ${({ theme, available }) =>\n        available ? theme.colors.success600 : theme.colors.danger600};\n    }\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * LoadingWrapper\n * -----------------------------------------------------------------------------------------------*/\n\nconst rotation = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(359deg);\n  }\n`;\n\nconst LoadingWrapper = styled(Flex)`\n  animation: ${rotation} 2s infinite linear;\n`;\n\nexport { InputUID };\nexport type { InputUIDProps };\n","import { getLanguage, highlight, highlightAuto } from 'highlight.js';\nimport Markdown from 'markdown-it';\n// @ts-expect-error - library does not export types\nimport abbr from 'markdown-it-abbr';\nimport container from 'markdown-it-container';\n// @ts-expect-error - library does not export types\nimport deflist from 'markdown-it-deflist';\nimport emoji from 'markdown-it-emoji';\nimport footnote from 'markdown-it-footnote';\n// @ts-expect-error - library does not export types\nimport ins from 'markdown-it-ins';\n// @ts-expect-error - library does not export types\nimport mark from 'markdown-it-mark';\n// @ts-expect-error - library does not export types\nimport sub from 'markdown-it-sub';\n// @ts-expect-error - library does not export types\nimport sup from 'markdown-it-sup';\n\nconst loadCss = async () => {\n  // @ts-expect-error – idm\n  await import('highlight.js/styles/solarized-dark.css');\n};\n\nloadCss();\n\nconst md: Markdown = new Markdown({\n  html: true, // Enable HTML tags in source\n  xhtmlOut: false,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  // Code from: https://github.com/markdown-it/markdown-it/blob/master/support/demo_template/index.js#L83\n  highlight(str, lang) {\n    if (lang && lang !== 'auto' && getLanguage(lang)) {\n      return (\n        '<pre class=\"hljs language-' +\n        md.utils.escapeHtml(lang.toLowerCase()) +\n        '\"><code>' +\n        highlight(lang, str, true).value +\n        '</code></pre>'\n      );\n    }\n\n    if (lang === 'auto') {\n      const result = highlightAuto(str);\n\n      return (\n        '<pre class=\"hljs language-' +\n        md.utils.escapeHtml(result.language!) +\n        '\"><code>' +\n        result.value +\n        '</code></pre>'\n      );\n    }\n\n    return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n  },\n})\n  .use(abbr)\n  .use(container, 'warning')\n  .use(container, 'tip')\n  .use(deflist)\n  .use(emoji)\n  .use(footnote)\n  .use(ins)\n  .use(mark)\n  .use(sub)\n  .use(sup);\n\n// Code from: https://github.com/markdown-it/markdown-it-footnote/blob/master/index.js#L29\nmd.renderer.rules.footnote_ref = (tokens, idx, options, env, slf) => {\n  const caption = slf.rules.footnote_caption?.(tokens, idx, options, env, slf);\n\n  return '<sup class=\"footnote-ref\"><span>' + caption + '</span></sup>';\n};\n\nmd.renderer.rules.footnote_anchor = () => {\n  /* ↩ with escape code to prevent display as Apple Emoji on iOS */\n  return ' <span class=\"footnote-backref\">\\u21a9\\uFE0E</span>';\n};\n\nexport { md };\n","import * as React from 'react';\n\nimport sanitizeHtml from 'sanitize-html';\nimport styled from 'styled-components';\n\nimport { md } from './utils/mdRenderer';\n\ninterface PreviewWysiwygProps {\n  data?: string;\n}\n\nconst PreviewWysiwyg = ({ data = '' }: PreviewWysiwygProps) => {\n  const html = React.useMemo(\n    () =>\n      sanitizeHtml(md.render(data.replaceAll('\\\\n', '\\n') || ''), {\n        ...sanitizeHtml.defaults,\n        allowedTags: false,\n        allowedAttributes: {\n          '*': ['href', 'align', 'alt', 'center', 'width', 'height', 'type', 'controls', 'target'],\n          img: ['src', 'alt'],\n          source: ['src', 'type'],\n        },\n      }),\n    [data]\n  );\n\n  return (\n    <Wrapper>\n      <div dangerouslySetInnerHTML={{ __html: html }} />\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  padding: ${({ theme }) => `${theme.spaces[3]} ${theme.spaces[4]}`};\n  font-size: ${14 / 16}rem;\n  background-color: ${({ theme }) => theme.colors.neutral0};\n  color: ${({ theme }) => theme.colors.neutral800};\n  line-height: ${({ theme }) => theme.lineHeights[6]};\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin-block-start: ${({ theme }) => theme.spaces[2]};\n    margin-block-end: ${({ theme }) => theme.spaces[2]};\n  }\n\n  p {\n    margin-bottom: ${({ theme }) => theme.spaces[2]};\n  }\n\n  h1 {\n    font-size: ${36 / 16}rem;\n    font-weight: 600;\n  }\n\n  h2 {\n    font-size: ${30 / 16}rem;\n    font-weight: 500;\n  }\n\n  h3 {\n    font-size: ${24 / 16}rem;\n    font-weight: 500;\n  }\n\n  h4 {\n    font-size: ${20 / 16}rem;\n    font-weight: 500;\n  }\n\n  strong {\n    font-weight: 800;\n  }\n\n  em {\n    font-style: italic;\n  }\n\n  blockquote {\n    margin-top: ${({ theme }) => theme.spaces[8]};\n    margin-bottom: ${({ theme }) => theme.spaces[7]};\n    font-size: ${14 / 16}rem;\n    font-weight: 400;\n    border-left: 4px solid ${({ theme }) => theme.colors.neutral150};\n    font-style: italic;\n    padding: ${({ theme }) => theme.spaces[2]} ${({ theme }) => theme.spaces[5]};\n  }\n\n  img {\n    max-width: 100%;\n  }\n\n  table {\n    thead {\n      background: ${({ theme }) => theme.colors.neutral150};\n\n      th {\n        padding: ${({ theme }) => theme.spaces[4]};\n      }\n    }\n    tr {\n      border: 1px solid ${({ theme }) => theme.colors.neutral200};\n    }\n    th,\n    td {\n      padding: ${({ theme }) => theme.spaces[4]};\n      border: 1px solid ${({ theme }) => theme.colors.neutral200};\n      border-bottom: 0;\n      border-top: 0;\n    }\n  }\n\n  pre,\n  code {\n    font-size: ${14 / 16}rem;\n    border-radius: 4px;\n    /* \n      Hard coded since the color is the same between themes,\n      theme.colors.neutral800 changes between themes.\n\n      Matches the color of the JSON Input component.\n    */\n    background-color: #32324d;\n    max-width: 100%;\n    overflow: auto;\n    padding: ${({ theme }) => theme.spaces[2]};\n  }\n\n  /* Inline code */\n  p,\n  pre,\n  td {\n    > code {\n      color: #839496;\n    }\n  }\n\n  ol {\n    list-style-type: decimal;\n    margin-block-start: ${({ theme }) => theme.spaces[4]};\n    margin-block-end: ${({ theme }) => theme.spaces[4]};\n    margin-inline-start: 0px;\n    margin-inline-end: 0px;\n    padding-inline-start: ${({ theme }) => theme.spaces[4]};\n\n    ol,\n    ul {\n      margin-block-start: 0px;\n      margin-block-end: 0px;\n    }\n  }\n\n  ul {\n    list-style-type: disc;\n    margin-block-start: ${({ theme }) => theme.spaces[4]};\n    margin-block-end: ${({ theme }) => theme.spaces[4]};\n    margin-inline-start: 0px;\n    margin-inline-end: 0px;\n    padding-inline-start: ${({ theme }) => theme.spaces[4]};\n\n    ul,\n    ol {\n      margin-block-start: 0px;\n      margin-block-end: 0px;\n    }\n  }\n`;\n\nexport { PreviewWysiwyg };\n","import CodeMirror from 'codemirror5';\n\n// Disabling eslint on purpose\n/* eslint-disable */\n\nvar listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n  emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n  unorderedListRE = /[*+-]\\s/;\n\n/*\n  functions coming from CodeMirror addons continuelist.js\n  ===> https://github.com/codemirror/CodeMirror/blob/master/addon/edit/continuelist.js\n\n  we imported it because the way the addon ask to use markdown mode\n  since we have our own markdown preview system we couldn't use it directly\n  only thing we changed is removing the part that enabled addon only with markdown mode\n*/\n\nfunction newlineAndIndentContinueMarkdownList(cm: CodeMirror.Editor) {\n  // @ts-expect-error - cm does not recognize disableInput.\n  if (cm.getOption('disableInput')) return CodeMirror.Pass;\n  var ranges = cm.listSelections(),\n    replacements = [];\n  for (var i = 0; i < ranges.length; i++) {\n    var pos = ranges[i].head;\n\n    var eolState = cm.getStateAfter(pos.line);\n    var inList = eolState.list !== false;\n    var inQuote = eolState.quote !== 0;\n\n    var line = cm.getLine(pos.line),\n      match = listRE.exec(line);\n    var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n    if (!ranges[i].empty() || (!inList && !inQuote) || !match || cursorBeforeBullet) {\n      cm.execCommand('newlineAndIndent');\n      return;\n    }\n    if (emptyListRE.test(line)) {\n      var endOfQuote = inQuote && />\\s*$/.test(line);\n      var endOfList = !/>\\s*$/.test(line);\n      if (endOfQuote || endOfList)\n        cm.replaceRange(\n          '',\n          {\n            line: pos.line,\n            ch: 0,\n          },\n          {\n            line: pos.line,\n            ch: pos.ch + 1,\n          }\n        );\n      replacements[i] = '\\n';\n    } else {\n      var indent = match[1],\n        after = match[5];\n      var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf('>') >= 0);\n      var bullet = numbered ? parseInt(match[3], 10) + 1 + match[4] : match[2].replace('x', ' ');\n      replacements[i] = '\\n' + indent + bullet + after;\n\n      if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n    }\n  }\n\n  cm.replaceSelections(replacements);\n}\n\nfunction incrementRemainingMarkdownListNumbers(cm: CodeMirror.Editor, pos: CodeMirror.Position) {\n  var startLine = pos.line,\n    lookAhead = 0,\n    skipCount = 0;\n  var startItem = listRE.exec(cm.getLine(startLine)),\n    startIndent = startItem![1];\n\n  do {\n    lookAhead += 1;\n    var nextLineNumber = startLine + lookAhead;\n    var nextLine = cm.getLine(nextLineNumber);\n    var nextItem = listRE.exec(nextLine);\n\n    if (nextItem) {\n      var nextIndent = nextItem[1];\n      var newNumber = parseInt(startItem![3], 10) + lookAhead - skipCount;\n      var nextNumber = parseInt(nextItem[3], 10),\n        itemNumber = nextNumber;\n\n      if (startIndent === nextIndent && !isNaN(nextNumber)) {\n        if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n        if (newNumber > nextNumber) itemNumber = newNumber + 1;\n        cm.replaceRange(\n          nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]),\n          {\n            line: nextLineNumber,\n            ch: 0,\n          },\n          {\n            line: nextLineNumber,\n            ch: nextLine.length,\n          }\n        );\n      } else {\n        if (startIndent.length > nextIndent.length) return;\n        // This doesn't run if the next line immediately indents, as it is\n        // not clear of the users intention (new indented item or same level)\n        if (startIndent.length < nextIndent.length && lookAhead === 1) return;\n        skipCount += 1;\n      }\n    }\n  } while (nextItem);\n}\n\nexport { newlineAndIndentContinueMarkdownList };\n","import * as React from 'react';\n\nimport CodeMirror, { EditorFromTextArea } from 'codemirror5';\nimport styled from 'styled-components';\n\nimport { PreviewWysiwyg } from './PreviewWysiwyg';\nimport { newlineAndIndentContinueMarkdownList } from './utils/continueList';\n\nimport 'codemirror5/addon/display/placeholder';\n\ninterface EditorApi {\n  focus: () => void;\n  scrollIntoView: (args?: Parameters<HTMLElement['scrollIntoView']>[0]) => void;\n}\n\ninterface EditorProps {\n  disabled?: boolean;\n  editorRef: React.MutableRefObject<EditorFromTextArea>;\n  error?: string;\n  isPreviewMode?: boolean;\n  isExpandMode?: boolean;\n  name: string;\n  onChange: (event: { target: { name: string; value: string; type: string } }) => void;\n  placeholder?: string;\n  textareaRef: React.RefObject<HTMLTextAreaElement>;\n  value?: string;\n}\n\nconst Editor = React.forwardRef<EditorApi, EditorProps>(\n  (\n    {\n      disabled,\n      editorRef,\n      error,\n      isPreviewMode,\n      isExpandMode,\n      name,\n      onChange,\n      placeholder,\n      textareaRef,\n      value,\n    },\n    forwardedRef\n  ) => {\n    const onChangeRef = React.useRef(onChange);\n\n    React.useEffect(() => {\n      editorRef.current = CodeMirror.fromTextArea(textareaRef.current!, {\n        lineWrapping: true,\n        extraKeys: {\n          Enter: 'newlineAndIndentContinueMarkdownList',\n          Tab: false,\n          'Shift-Tab': false,\n        },\n        readOnly: false,\n        smartIndent: false,\n        placeholder,\n        spellcheck: true,\n        inputStyle: 'contenteditable',\n      });\n\n      // @ts-expect-error – doesn't think command exists?\n      CodeMirror.commands.newlineAndIndentContinueMarkdownList =\n        newlineAndIndentContinueMarkdownList;\n      editorRef.current.on('change', (doc) => {\n        onChangeRef.current({ target: { name, value: doc.getValue(), type: 'wysiwyg' } });\n      });\n    }, [editorRef, textareaRef, name, placeholder]);\n\n    React.useEffect(() => {\n      if (value && !editorRef.current.hasFocus()) {\n        editorRef.current.setValue(value);\n      }\n    }, [editorRef, value]);\n\n    React.useEffect(() => {\n      if (isPreviewMode || disabled) {\n        editorRef.current.setOption('readOnly', 'nocursor');\n      } else {\n        editorRef.current.setOption('readOnly', false);\n      }\n    }, [disabled, isPreviewMode, editorRef]);\n\n    React.useEffect(() => {\n      if (error) {\n        editorRef.current.setOption('screenReaderLabel', error);\n      } else {\n        // to replace with translation\n        editorRef.current.setOption('screenReaderLabel', 'Editor');\n      }\n    }, [editorRef, error]);\n\n    React.useImperativeHandle(\n      forwardedRef,\n      () => ({\n        focus() {\n          editorRef.current.getInputField().focus();\n        },\n        scrollIntoView(args?: Parameters<HTMLElement['scrollIntoView']>[0]) {\n          editorRef.current.getInputField().scrollIntoView(args);\n        },\n      }),\n      [editorRef]\n    );\n\n    return (\n      <EditorAndPreviewWrapper>\n        <EditorStylesContainer isExpandMode={isExpandMode} disabled={disabled || isPreviewMode}>\n          <textarea ref={textareaRef} />\n        </EditorStylesContainer>\n        {isPreviewMode && <PreviewWysiwyg data={value} />}\n      </EditorAndPreviewWrapper>\n    );\n  }\n);\n\nconst EditorAndPreviewWrapper = styled.div`\n  position: relative;\n  height: calc(100% - 48px);\n`;\n\nconst EditorStylesContainer = styled.div<{ disabled?: boolean; isExpandMode?: boolean }>`\n  cursor: ${({ disabled }) => (disabled ? 'not-allowed !important' : 'auto')};\n  height: 100%;\n  /* BASICS */\n  .CodeMirror-placeholder {\n    color: ${({ theme }) => theme.colors.neutral600} !important;\n  }\n\n  .CodeMirror {\n    /* Set height, width, borders, and global font properties here */\n    font-size: ${14 / 16}rem;\n    height: ${({ isExpandMode }) =>\n      isExpandMode\n        ? '100%'\n        : '410px'}; //  512px(total height) - 48px (header) - 52px(footer) - 2px border\n    color: ${({ theme }) => theme.colors.neutral800};\n    direction: ltr;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,\n      'Open Sans', 'Helvetica Neue', sans-serif;\n  }\n\n  /* PADDING */\n\n  .CodeMirror-lines {\n    padding: ${({ theme }) => `${theme.spaces[3]} ${theme.spaces[4]}`};\n    /* Vertical padding around content */\n  }\n\n  .CodeMirror-scrollbar-filler,\n  .CodeMirror-gutter-filler {\n    /* The little square between H and V scrollbars */\n    background-color: ${({ theme }) => `${theme.colors.neutral0}`};\n  }\n\n  /* GUTTER */\n\n  .CodeMirror-gutters {\n    border-right: 1px solid #ddd;\n    background-color: #f7f7f7;\n    white-space: nowrap;\n  }\n  .CodeMirror-linenumbers {\n  }\n  .CodeMirror-linenumber {\n    padding: 0 3px 0 5px;\n    min-width: 20px;\n    text-align: right;\n    color: #999;\n    white-space: nowrap;\n  }\n\n  .CodeMirror-guttermarker {\n    color: black;\n  }\n  .CodeMirror-guttermarker-subtle {\n    color: #999;\n  }\n\n  /* CURSOR */\n\n  .CodeMirror-cursor {\n    border-left: 1px solid black;\n    border-right: none;\n    width: 0;\n  }\n  /* Shown when moving in bi-directional text */\n  .CodeMirror div.CodeMirror-secondarycursor {\n    border-left: 1px solid silver;\n  }\n  .cm-fat-cursor .CodeMirror-cursor {\n    width: auto;\n    border: 0 !important;\n    background: #7e7;\n  }\n  .cm-fat-cursor div.CodeMirror-cursors {\n    /* z-index: 1; */\n  }\n\n  .cm-fat-cursor-mark {\n    background-color: rgba(20, 255, 20, 0.5);\n    -webkit-animation: blink 1.06s steps(1) infinite;\n    -moz-animation: blink 1.06s steps(1) infinite;\n    animation: blink 1.06s steps(1) infinite;\n  }\n  .cm-animate-fat-cursor {\n    width: auto;\n    border: 0;\n    -webkit-animation: blink 1.06s steps(1) infinite;\n    -moz-animation: blink 1.06s steps(1) infinite;\n    animation: blink 1.06s steps(1) infinite;\n    background-color: #7e7;\n  }\n\n  /* Can style cursor different in overwrite (non-insert) mode */\n  .CodeMirror-overwrite .CodeMirror-cursor {\n  }\n\n  .cm-tab {\n    display: inline-block;\n    text-decoration: inherit;\n  }\n\n  .CodeMirror-rulers {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: -50px;\n    bottom: 0;\n    overflow: hidden;\n  }\n  .CodeMirror-ruler {\n    border-left: 1px solid #ccc;\n    top: 0;\n    bottom: 0;\n    position: absolute;\n  }\n\n  /* DEFAULT THEME */\n\n  .cm-header,\n  .cm-strong {\n    font-weight: bold;\n  }\n  .cm-em {\n    font-style: italic;\n  }\n  .cm-link {\n    text-decoration: underline;\n  }\n  .cm-strikethrough {\n    text-decoration: line-through;\n  }\n\n  .CodeMirror-composing {\n    border-bottom: 2px solid;\n  }\n\n  /* Default styles for common addons */\n\n  div.CodeMirror span.CodeMirror-matchingbracket {\n    color: #0b0;\n  }\n  div.CodeMirror span.CodeMirror-nonmatchingbracket {\n    color: #a22;\n  }\n  .CodeMirror-matchingtag {\n    background: rgba(255, 150, 0, 0.3);\n  }\n  .CodeMirror-activeline-background {\n    background: #e8f2ff;\n  }\n\n  /* STOP */\n\n  /* The rest of this file contains styles related to the mechanics of\n    the editor. You probably shouldn't touch them. */\n\n  .CodeMirror {\n    position: relative;\n    overflow: hidden;\n    background: ${({ theme }) => `${theme.colors.neutral0}`};\n  }\n\n  .CodeMirror-scroll {\n    overflow: scroll !important; /* Things will break if this is overridden */\n    /* 50px is the magic margin used to hide the element's real scrollbars */\n    /* See overflow: hidden in .CodeMirror */\n    margin-bottom: -50px;\n    margin-right: -50px;\n    padding-bottom: 50px;\n    height: 100%;\n    outline: none; /* Prevent dragging from highlighting the element */\n    position: relative;\n  }\n  .CodeMirror-sizer {\n    position: relative;\n    border-right: 50px solid transparent;\n  }\n\n  /* The fake, visible scrollbars. Used to force redraw during scrolling\n    before actual scrolling happens, thus preventing shaking and\n    flickering artifacts. */\n  .CodeMirror-vscrollbar,\n  .CodeMirror-hscrollbar,\n  .CodeMirror-scrollbar-filler,\n  .CodeMirror-gutter-filler {\n    position: absolute;\n    z-index: 1;\n    display: none;\n    outline: none;\n  }\n\n  .CodeMirror-vscrollbar {\n    right: 0;\n    top: 0;\n    overflow-x: hidden;\n    overflow-y: scroll;\n  }\n  .CodeMirror-hscrollbar {\n    bottom: 0;\n    left: 0;\n    overflow-y: hidden;\n    overflow-x: scroll;\n  }\n  .CodeMirror-scrollbar-filler {\n    right: 0;\n    bottom: 0;\n  }\n\n  .CodeMirror-lines {\n    cursor: text;\n    min-height: 1px; /* prevents collapsing before first draw */\n  }\n  /* Reset some styles that the rest of the page might have set */\n  .CodeMirror pre.CodeMirror-line,\n  .CodeMirror pre.CodeMirror-line-like {\n    -moz-border-radius: 0;\n    -webkit-border-radius: 0;\n    border-radius: 0;\n    border-width: 0;\n    background: transparent;\n    font-family: inherit;\n    font-size: inherit;\n    margin: 0;\n    white-space: pre;\n    word-wrap: normal;\n    line-height: 1.5;\n    color: inherit;\n    /* z-index: 2; */\n    position: relative;\n    overflow: visible;\n    -webkit-tap-highlight-color: transparent;\n    -webkit-font-variant-ligatures: contextual;\n    font-variant-ligatures: contextual;\n  }\n\n  .CodeMirror pre.CodeMirror-line-like {\n    z-index: 2;\n  }\n\n  .CodeMirror-wrap pre.CodeMirror-line,\n  .CodeMirror-wrap pre.CodeMirror-line-like {\n    word-wrap: break-word;\n    white-space: pre-wrap;\n    word-break: normal;\n  }\n\n  .CodeMirror-linebackground {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 0;\n  }\n\n  .CodeMirror-linewidget {\n    position: relative;\n    /* z-index: 2; */\n    padding: 0.1px; /* Force widget margins to stay inside of the container */\n  }\n\n  .CodeMirror-widget {\n  }\n\n  .CodeMirror-rtl pre {\n    direction: rtl;\n  }\n\n  .CodeMirror-code {\n    outline: none;\n  }\n\n  /* Force content-box sizing for the elements where we expect it */\n  .CodeMirror-scroll,\n  .CodeMirror-sizer,\n  .CodeMirror-gutter,\n  .CodeMirror-gutters,\n  .CodeMirror-linenumber {\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n  }\n\n  .CodeMirror-measure {\n    position: absolute;\n    width: 100%;\n    height: 0;\n    overflow: hidden;\n    visibility: hidden;\n  }\n\n  .CodeMirror-cursor {\n    position: absolute;\n    pointer-events: none;\n    border-color: ${({ theme }) => `${theme.colors.neutral800}`};\n  }\n  .CodeMirror-measure pre {\n    position: static;\n  }\n\n  div.CodeMirror-cursors {\n    visibility: hidden;\n    position: relative;\n    + div {\n      z-index: 0 !important;\n    }\n  }\n\n  div.CodeMirror-dragcursors {\n    visibility: visible;\n  }\n\n  .CodeMirror-focused div.CodeMirror-cursors {\n    visibility: visible;\n  }\n\n  .CodeMirror-selected {\n    background: ${({ theme }) => theme.colors.neutral200};\n    /* z-index: -10; */\n  }\n  .CodeMirror-crosshair {\n    cursor: crosshair;\n  }\n\n  /* Used to force a border model for a node */\n  .cm-force-border {\n    padding-right: 0.1px;\n  }\n\n  /* See issue #2901 */\n  .cm-tab-wrap-hack:after {\n    content: '';\n  }\n\n  /* Help users use markselection to safely style text background */\n  span.CodeMirror-selectedtext {\n    background: none;\n  }\n\n  span {\n    color: ${({ theme }) => theme.colors.neutral800} !important;\n  }\n`;\n\nexport { Editor };\nexport type { EditorProps, EditorApi };\n","import * as React from 'react';\n\nimport { BaseButton, Box, Flex, FocusTrap, Portal, Typography } from '@strapi/design-system';\nimport { pxToRem, useLockScroll } from '@strapi/helper-plugin';\nimport { Collapse } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { PreviewWysiwyg } from './PreviewWysiwyg';\n\ninterface EditorLayoutProps {\n  children: React.ReactNode;\n  isExpandMode: boolean;\n  error?: string;\n  previewContent?: string;\n  onCollapse: () => void;\n}\n\nconst EditorLayout = ({\n  children,\n  isExpandMode,\n  error,\n  previewContent = '',\n  onCollapse,\n}: EditorLayoutProps) => {\n  const { formatMessage } = useIntl();\n\n  useLockScroll({ lockScroll: isExpandMode });\n\n  if (isExpandMode) {\n    return (\n      <Portal role=\"dialog\" aria-modal={false}>\n        <FocusTrap onEscape={onCollapse}>\n          <ExpandWrapper\n            position=\"fixed\"\n            top={0}\n            left={0}\n            right={0}\n            bottom={0}\n            zIndex={4}\n            justifyContent=\"center\"\n            onClick={onCollapse}\n          >\n            <Box\n              background=\"neutral0\"\n              hasRadius\n              shadow=\"popupShadow\"\n              overflow=\"hidden\"\n              width=\"90%\"\n              height=\"90%\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <Flex height=\"100%\" alignItems=\"flex-start\">\n                <BoxWithBorder flex=\"1\" height=\"100%\">\n                  {children}\n                </BoxWithBorder>\n                <Flex alignItems=\"start\" direction=\"column\" flex={1} height=\"100%\" width=\"100%\">\n                  <Flex\n                    height={pxToRem(48)}\n                    background=\"neutral100\"\n                    justifyContent=\"flex-end\"\n                    shrink={0}\n                    width=\"100%\"\n                  >\n                    <ExpandButton onClick={onCollapse}>\n                      <Typography>\n                        {formatMessage({\n                          id: 'components.Wysiwyg.collapse',\n                          defaultMessage: 'Collapse',\n                        })}\n                      </Typography>\n                      <Collapse />\n                    </ExpandButton>\n                  </Flex>\n\n                  <Box position=\"relative\" height=\"100%\" width=\"100%\">\n                    <PreviewWysiwyg data={previewContent} />\n                  </Box>\n                </Flex>\n              </Flex>\n            </Box>\n          </ExpandWrapper>\n        </FocusTrap>\n      </Portal>\n    );\n  }\n\n  return (\n    <Box\n      borderColor={error ? 'danger600' : 'neutral200'}\n      borderStyle=\"solid\"\n      borderWidth=\"1px\"\n      hasRadius\n    >\n      {children}\n    </Box>\n  );\n};\n\nconst ExpandWrapper = styled(Flex)`\n  background: ${({ theme }) =>\n    `${theme.colors.neutral800}${Math.floor(0.2 * 255)\n      .toString(16)\n      .padStart(2, '0')}`};\n`;\n\nconst BoxWithBorder = styled(Box)`\n  border-right: 1px solid ${({ theme }) => theme.colors.neutral200};\n`;\n\nconst ExpandButton = styled(BaseButton)`\n  background-color: transparent;\n  border: none;\n  align-items: center;\n\n  svg {\n    margin-left: ${({ theme }) => `${theme.spaces[2]}`};\n\n    path {\n      fill: ${({ theme }) => theme.colors.neutral700};\n      width: ${12 / 16}rem;\n      height: ${12 / 16}rem;\n    }\n  }\n`;\n\nexport { EditorLayout, ExpandButton };\nexport type { EditorLayoutProps };\n","import { MutableRefObject } from 'react';\n\nimport CodeMirror from 'codemirror5';\n\nexport const replaceText = (markdownName: string, textToChange: string) => {\n  let editedText;\n\n  switch (markdownName) {\n    case 'Strikethrough':\n      editedText = `~~${textToChange}~~`;\n      break;\n    case 'Bold':\n      editedText = `**${textToChange}**`;\n      break;\n    case 'Italic':\n      editedText = `_${textToChange}_`;\n      break;\n    case 'Underline':\n      editedText = `<u>${textToChange}</u>`;\n      break;\n    case 'Code':\n      editedText = `\\`\\`\\`\\n${textToChange}\\n\\`\\`\\``;\n      break;\n    case 'Link':\n      editedText = `[${textToChange}](link)`;\n      break;\n    case 'Quote':\n      editedText = `>${textToChange}`;\n      break;\n    default:\n      editedText = textToChange;\n  }\n\n  return editedText;\n};\n\nexport const insertText = (markdownName: string) => {\n  let editedText;\n  // object to calculate text that will be selected after insert of markdown\n  const selection = { start: markdownName.length, end: 0 };\n\n  switch (markdownName) {\n    case 'Strikethrough':\n      editedText = `~~${markdownName}~~`;\n      selection.end = 2;\n      break;\n    case 'Bold':\n      editedText = `**${markdownName}**`;\n      selection.end = 2;\n      break;\n    case 'Italic':\n      editedText = `_${markdownName}_`;\n      selection.end = 1;\n      break;\n    case 'alt':\n      editedText = `[${markdownName}]()`;\n      selection.end = 3;\n      break;\n    case 'Underline':\n      editedText = `<u>${markdownName}</u>`;\n      selection.end = 4;\n      break;\n    case 'Code':\n      editedText = `\\`\\`\\`\\n${markdownName}\\n\\`\\`\\``;\n      selection.end = 3;\n      break;\n    case 'Link':\n      editedText = `[${markdownName}](link)`;\n      selection.end = 7;\n      break;\n    case 'Quote':\n      editedText = `>${markdownName}`;\n      selection.end = 0;\n      break;\n    default:\n      editedText = '';\n  }\n\n  return { editedText, selection };\n};\n\nexport const insertListOrTitle = (markdown: string) => {\n  let textToInsert;\n\n  switch (markdown) {\n    case 'BulletList':\n      textToInsert = '- ';\n      break;\n    case 'NumberList':\n      textToInsert = '1. ';\n      break;\n    case 'h1':\n      textToInsert = '# ';\n      break;\n    case 'h2':\n      textToInsert = '## ';\n      break;\n    case 'h3':\n      textToInsert = '### ';\n      break;\n    case 'h4':\n      textToInsert = '#### ';\n      break;\n    case 'h5':\n      textToInsert = '##### ';\n      break;\n    case 'h6':\n      textToInsert = '###### ';\n      break;\n    default:\n      return '';\n  }\n\n  return textToInsert;\n};\n\n// EDITOR ACTIONS FUNCTIONS\n\nexport const markdownHandler = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  markdownType: string\n) => {\n  const textToEdit = editor.current.getSelection();\n  let textToInsert;\n\n  if (textToEdit) {\n    const editedText = replaceText(markdownType, textToEdit);\n    editor.current.replaceSelection(editedText);\n    editor.current.focus();\n  } else {\n    textToInsert = insertText(markdownType);\n    editor.current.replaceSelection(textToInsert.editedText);\n    editor.current.focus();\n    // set selection-focus to text to replace with content\n    const { line, ch } = editor.current.getCursor();\n    const endSelection = ch - textToInsert.selection.end;\n    const startSelection = ch - textToInsert.selection.end - textToInsert.selection.start;\n    editor.current.setSelection({ line, ch: startSelection }, { line, ch: endSelection });\n  }\n};\n\nexport const listHandler = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  listType: string\n) => {\n  const doc = editor.current.getDoc();\n  const insertion = listType === 'BulletList' ? '- ' : '1. ';\n\n  if (doc.somethingSelected()) {\n    const selections = doc.listSelections();\n    let remove: boolean | null = null;\n\n    editor.current.operation(function () {\n      selections.forEach(function (selection) {\n        const pos = [selection.head.line, selection.anchor.line].sort();\n\n        // Remove if the first text starts with it\n        if (remove == null) {\n          remove = doc.getLine(pos[0]).startsWith(insertion);\n        }\n\n        for (let i = pos[0]; i <= pos[1]; i++) {\n          if (remove) {\n            // Don't remove if we don't start with it\n            if (doc.getLine(i).startsWith(insertion)) {\n              doc.replaceRange('', { line: i, ch: 0 }, { line: i, ch: insertion.length });\n            }\n          } else {\n            const lineInsertion = listType === 'BulletList' ? '- ' : `${i + 1}. `;\n            doc.replaceRange(lineInsertion, { line: i, ch: 0 });\n          }\n        }\n      });\n    });\n  } else {\n    const { line: currentLine } = doc.getCursor();\n    const listToInsert = insertListOrTitle(listType);\n    const lineContent = editor.current.getLine(currentLine);\n\n    const textToInsert = listToInsert + lineContent;\n    editor.current.setSelection(\n      { line: currentLine, ch: 0 },\n      { line: currentLine, ch: lineContent.length }\n    );\n    editor.current.replaceSelection(textToInsert);\n  }\n\n  editor.current.focus();\n};\n\nexport const titleHandler = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  titleType: string\n) => {\n  const { line: currentLine } = editor.current.getCursor();\n  const titleToInsert = insertListOrTitle(titleType);\n  const lineContent = editor.current.getLine(currentLine);\n\n  // replace hashtags followed by a space in case user want to change the type of title\n  const lineWithNoTitle = lineContent.replace(/#{1,6}\\s/g, '').trim();\n\n  const textToInsert = titleToInsert + lineWithNoTitle;\n  editor.current.setSelection(\n    { line: currentLine, ch: 0 },\n    { line: currentLine, ch: lineContent.length }\n  );\n  editor.current.replaceSelection(textToInsert);\n\n  setTimeout(() => {\n    const newLastLineLength = editor.current.getLine(currentLine).length;\n    editor.current.focus();\n    editor.current.setCursor({ line: currentLine, ch: newLastLineLength });\n  }, 0);\n};\n\nexport const insertFile = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  files: any[]\n) => {\n  let { line } = editor.current.getCursor();\n  const { ch } = editor.current.getCursor();\n\n  files.forEach((file, i) => {\n    let contentLength = editor.current.getLine(line).length;\n    editor.current.setCursor({ line, ch: contentLength });\n    // create a new line after first image markdown inserted\n    // or if there is content in current line\n\n    if (i > 0 || (i === 0 && ch !== 0)) {\n      contentLength = editor.current.getLine(line).length;\n      editor.current.setCursor({ line, ch: contentLength });\n      line++;\n      editor.current.replaceSelection('\\n');\n    }\n\n    if (file.mime.includes('image')) {\n      editor.current.replaceSelection(`![${file.alt}](${file.url})`);\n    } else {\n      editor.current.replaceSelection(`[${file.alt}](${file.url})`);\n    }\n  });\n\n  setTimeout(() => editor.current.focus(), 0);\n};\n\n// NEXT FUNCTIONS FOR QUOTE OR CODE MARKDOWN\n\nconst insertWithTextToEdit = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  markdownType: string,\n  line: number,\n  contentLength: number,\n  textToEdit: string\n) => {\n  const textToInsert = replaceText(markdownType, textToEdit);\n\n  // remove content after current line\n  const contentToMove = editor.current.getRange(\n    { line: line + 1, ch: 0 },\n    { line: Infinity, ch: Infinity }\n  );\n  editor.current.replaceRange('', { line: line + 1, ch: 0 }, { line: Infinity, ch: Infinity });\n\n  // remove word that was selected\n  // set cursor end of line + move to next line\n  // add text to insert\n  editor.current.replaceSelection('');\n  editor.current.setCursor({ line, ch: contentLength });\n  editor.current.replaceSelection('\\n');\n  editor.current.replaceSelection(textToInsert);\n\n  if (markdownType === 'Code') {\n    const { line: newLine } = editor.current.getCursor();\n    editor.current.setCursor({ line: newLine - 1, ch: textToEdit.length });\n  }\n\n  // add content we had to remove earlier\n  editor.current.replaceRange(\n    contentToMove,\n    { line: line + 4, ch: 0 },\n    { line: Infinity, ch: Infinity }\n  );\n\n  editor.current.focus();\n};\n\nconst insertWithoutTextToEdit = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  markdownType: string,\n  line: number,\n  contentLength: number\n) => {\n  const textToInsert = insertText(markdownType);\n\n  // remove content after current line\n  const contentToMove = editor.current.getRange(\n    { line: line + 1, ch: 0 },\n    { line: Infinity, ch: Infinity }\n  );\n  editor.current.replaceRange('', { line: line + 1, ch: 0 }, { line: Infinity, ch: Infinity });\n\n  // replace cursor to next line\n  editor.current.setCursor({ line, ch: contentLength });\n  editor.current.replaceSelection('\\n');\n  editor.current.replaceSelection(textToInsert.editedText);\n\n  // set selection on \"Code\" or \"Quote\" word\n\n  if (markdownType === 'Code') {\n    line += 2;\n\n    editor.current.setSelection({ line, ch: 0 }, { line, ch: 4 });\n  } else {\n    line += 1;\n\n    const { ch } = editor.current.getCursor();\n    const endSelection = ch - textToInsert.selection.end;\n    const startSelection = ch - textToInsert.selection.end - textToInsert.selection.start;\n    editor.current.setSelection({ line, ch: startSelection }, { line, ch: endSelection });\n  }\n\n  // add content we had to remove earlier\n  editor.current.replaceRange(\n    contentToMove,\n    { line: line + 2, ch: 0 },\n    { line: Infinity, ch: Infinity }\n  );\n  editor.current.focus();\n};\n\nexport const quoteAndCodeHandler = (\n  editor: MutableRefObject<CodeMirror.EditorFromTextArea>,\n  markdownType: string\n) => {\n  const textToEdit = editor.current.getSelection();\n  const { line } = editor.current.getCursor();\n  const contentLength = editor.current.getLine(line).length;\n\n  if (textToEdit) {\n    insertWithTextToEdit(editor, markdownType, line, contentLength, textToEdit);\n  } else {\n    insertWithoutTextToEdit(editor, markdownType, line, contentLength);\n  }\n};\n","import { BaseButton, IconButton, IconButtonGroup } from '@strapi/design-system';\nimport styled from 'styled-components';\n\n// NAV BUTTONS\nexport const CustomIconButton = styled(IconButton)`\n  padding: ${({ theme }) => theme.spaces[2]};\n  /* Trick to prevent the outline from overflowing because of the general outline-offset */\n  outline-offset: -2px !important;\n\n  svg {\n    width: ${18 / 16}rem;\n    height: ${18 / 16}rem;\n  }\n`;\n\nexport const CustomLinkIconButton = styled(CustomIconButton)`\n  svg {\n    width: ${8 / 16}rem;\n    height: ${8 / 16}rem;\n  }\n`;\n\nexport const MainButtons = styled(IconButtonGroup)`\n  margin-left: ${({ theme }) => theme.spaces[4]};\n`;\n\nexport const MoreButton = styled(IconButton)`\n  margin: ${({ theme }) => `0 ${theme.spaces[2]}`};\n  padding: ${({ theme }) => theme.spaces[2]};\n\n  svg {\n    width: ${18 / 16}rem;\n    height: ${18 / 16}rem;\n  }\n`;\n\n// NAV\n\nexport const IconButtonGroupMargin = styled(IconButtonGroup)`\n  margin-right: ${({ theme }) => `${theme.spaces[2]}`};\n`;\n\n// FOOTER\nexport const ExpandButton = styled(BaseButton)`\n  background-color: transparent;\n  border: none;\n  align-items: center;\n\n  svg {\n    margin-left: ${({ theme }) => `${theme.spaces[2]}`};\n    path {\n      fill: ${({ theme }) => theme.colors.neutral700};\n      width: ${12 / 16}rem;\n      height: ${12 / 16}rem;\n    }\n  }\n`;\n","import { BaseButtonProps, Box, Flex, Typography } from '@strapi/design-system';\nimport { Expand } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { ExpandButton } from './WysiwygStyles';\n\ninterface WysiwygFooterProps {\n  onToggleExpand: BaseButtonProps['onClick'];\n}\n\nconst WysiwygFooter = ({ onToggleExpand }: WysiwygFooterProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Box padding={2} background=\"neutral100\" borderRadius={`0 0 ${4 / 16}rem ${4 / 16}rem`}>\n      <Flex justifyContent=\"flex-end\" alignItems=\"flex-end\">\n        <ExpandButton id=\"expand\" onClick={onToggleExpand}>\n          <Typography>\n            {formatMessage({\n              id: 'components.WysiwygBottomControls.fullscreen',\n              defaultMessage: 'Expand',\n            })}\n          </Typography>\n          <Expand />\n        </ExpandButton>\n      </Flex>\n    </Box>\n  );\n};\n\nexport { WysiwygFooter };\nexport type { WysiwygFooterProps };\n","import * as React from 'react';\n\nimport {\n  Button,\n  Flex,\n  IconButtonGroup,\n  SingleSelectOption,\n  Popover,\n  SingleSelect,\n} from '@strapi/design-system';\nimport {\n  Bold,\n  BulletList,\n  Code,\n  Italic,\n  Link,\n  More,\n  NumberList,\n  Picture as Image,\n  Quote,\n  StrikeThrough,\n  Underline,\n} from '@strapi/icons';\nimport { EditorFromTextArea } from 'codemirror5';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport {\n  CustomIconButton,\n  CustomLinkIconButton,\n  IconButtonGroupMargin,\n  MainButtons,\n  MoreButton,\n} from './WysiwygStyles';\n\ninterface WysiwygNavProps {\n  disabled?: boolean;\n  editorRef: React.MutableRefObject<EditorFromTextArea>;\n  isExpandMode?: boolean;\n  isPreviewMode?: boolean;\n  onActionClick: (\n    action: string,\n    editorRef: React.MutableRefObject<EditorFromTextArea>,\n    callback?: () => void\n  ) => void;\n  onToggleMediaLib: () => void;\n  onTogglePreviewMode?: () => void;\n}\n\n/**\n * TODO: refactor this mess.\n */\nconst WysiwygNav = ({\n  disabled,\n  editorRef,\n  isExpandMode,\n  isPreviewMode,\n  onActionClick,\n  onToggleMediaLib,\n  onTogglePreviewMode,\n}: WysiwygNavProps) => {\n  const [visiblePopover, setVisiblePopover] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const selectPlaceholder = formatMessage({\n    id: 'components.Wysiwyg.selectOptions.title',\n    defaultMessage: 'Add a title',\n  });\n  const buttonMoreRef = React.useRef<HTMLButtonElement>(null!);\n\n  const handleTogglePopover = () => {\n    setVisiblePopover((prev) => !prev);\n  };\n\n  if (disabled || isPreviewMode) {\n    return (\n      <Flex\n        padding={2}\n        background=\"neutral100\"\n        justifyContent=\"space-between\"\n        borderRadius={`${4 / 16}rem ${4 / 16}rem 0 0`}\n      >\n        <StyledFlex>\n          <SingleSelect disabled placeholder={selectPlaceholder} size=\"S\" label={selectPlaceholder}>\n            <SingleSelectOption value=\"h1\">h1</SingleSelectOption>\n            <SingleSelectOption value=\"h2\">h2</SingleSelectOption>\n            <SingleSelectOption value=\"h3\">h3</SingleSelectOption>\n            <SingleSelectOption value=\"h4\">h4</SingleSelectOption>\n            <SingleSelectOption value=\"h5\">h5</SingleSelectOption>\n            <SingleSelectOption value=\"h6\">h6</SingleSelectOption>\n          </SingleSelect>\n\n          <MainButtons>\n            <CustomIconButton disabled label=\"Bold\" name=\"Bold\" icon={<Bold />} />\n            <CustomIconButton disabled label=\"Italic\" name=\"Italic\" icon={<Italic />} />\n            <CustomIconButton disabled label=\"Underline\" name=\"Underline\" icon={<Underline />} />\n          </MainButtons>\n\n          <MoreButton disabled label=\"More\" icon={<More />} />\n        </StyledFlex>\n\n        {!isExpandMode && (\n          <Button onClick={onTogglePreviewMode} variant=\"tertiary\">\n            {formatMessage({\n              id: 'components.Wysiwyg.ToggleMode.markdown-mode',\n              defaultMessage: 'Markdown mode',\n            })}\n          </Button>\n        )}\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex\n      padding={2}\n      background=\"neutral100\"\n      justifyContent=\"space-between\"\n      borderRadius={`${4 / 16}rem ${4 / 16}rem 0 0`}\n    >\n      <StyledFlex>\n        <SingleSelect\n          placeholder={selectPlaceholder}\n          label={selectPlaceholder}\n          size=\"S\"\n          // @ts-expect-error – DS v2 will only allow strings.\n          onChange={(value) => onActionClick(value, editorRef)}\n        >\n          <SingleSelectOption value=\"h1\">h1</SingleSelectOption>\n          <SingleSelectOption value=\"h2\">h2</SingleSelectOption>\n          <SingleSelectOption value=\"h3\">h3</SingleSelectOption>\n          <SingleSelectOption value=\"h4\">h4</SingleSelectOption>\n          <SingleSelectOption value=\"h5\">h5</SingleSelectOption>\n          <SingleSelectOption value=\"h6\">h6</SingleSelectOption>\n        </SingleSelect>\n\n        <MainButtons>\n          <CustomIconButton\n            onClick={() => onActionClick('Bold', editorRef)}\n            label=\"Bold\"\n            name=\"Bold\"\n            icon={<Bold />}\n          />\n          <CustomIconButton\n            onClick={() => onActionClick('Italic', editorRef)}\n            label=\"Italic\"\n            name=\"Italic\"\n            icon={<Italic />}\n          />\n          <CustomIconButton\n            onClick={() => onActionClick('Underline', editorRef)}\n            label=\"Underline\"\n            name=\"Underline\"\n            icon={<Underline />}\n          />\n        </MainButtons>\n\n        <MoreButton\n          ref={buttonMoreRef}\n          onClick={handleTogglePopover}\n          label=\"More\"\n          icon={<More />}\n        />\n        {visiblePopover && (\n          <Popover onDismiss={handleTogglePopover} centered source={buttonMoreRef} spacing={4}>\n            <Flex>\n              <IconButtonGroupMargin>\n                <CustomIconButton\n                  onClick={() => onActionClick('Strikethrough', editorRef, handleTogglePopover)}\n                  label=\"Strikethrough\"\n                  name=\"Strikethrough\"\n                  icon={<StrikeThrough />}\n                />\n                <CustomIconButton\n                  onClick={() => onActionClick('BulletList', editorRef, handleTogglePopover)}\n                  label=\"BulletList\"\n                  name=\"BulletList\"\n                  icon={<BulletList />}\n                />\n                <CustomIconButton\n                  onClick={() => onActionClick('NumberList', editorRef, handleTogglePopover)}\n                  label=\"NumberList\"\n                  name=\"NumberList\"\n                  icon={<NumberList />}\n                />\n              </IconButtonGroupMargin>\n              <IconButtonGroup>\n                <CustomIconButton\n                  onClick={() => onActionClick('Code', editorRef, handleTogglePopover)}\n                  label=\"Code\"\n                  name=\"Code\"\n                  icon={<Code />}\n                />\n                <CustomIconButton\n                  onClick={() => {\n                    handleTogglePopover();\n                    onToggleMediaLib();\n                  }}\n                  label=\"Image\"\n                  name=\"Image\"\n                  icon={<Image />}\n                />\n                <CustomLinkIconButton\n                  onClick={() => onActionClick('Link', editorRef, handleTogglePopover)}\n                  label=\"Link\"\n                  name=\"Link\"\n                  // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                  icon={<Link />}\n                />\n                <CustomIconButton\n                  onClick={() => onActionClick('Quote', editorRef, handleTogglePopover)}\n                  label=\"Quote\"\n                  name=\"Quote\"\n                  icon={<Quote />}\n                />\n              </IconButtonGroup>\n            </Flex>\n          </Popover>\n        )}\n      </StyledFlex>\n\n      {onTogglePreviewMode && (\n        <Button onClick={onTogglePreviewMode} variant=\"tertiary\">\n          {formatMessage({\n            id: 'components.Wysiwyg.ToggleMode.preview-mode',\n            defaultMessage: 'Preview mode',\n          })}\n        </Button>\n      )}\n    </Flex>\n  );\n};\n\nexport { WysiwygNav };\nexport type { WysiwygNavProps };\n\nconst StyledFlex = styled(Flex)`\n  /* Hide the label, every input needs a label. */\n  label {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n  }\n`;\n","import * as React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { prefixFileUrlWithBackendUrl, TranslationMessage, useLibrary } from '@strapi/helper-plugin';\nimport { EditorFromTextArea } from 'codemirror5';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { Hint, HintProps } from '../Hint';\n\nimport { Editor, EditorApi, EditorProps } from './Editor';\nimport { EditorLayout, EditorLayoutProps } from './EditorLayout';\nimport {\n  insertFile,\n  listHandler,\n  markdownHandler,\n  quoteAndCodeHandler,\n  titleHandler,\n} from './utils/utils';\nimport { WysiwygFooter } from './WysiwygFooter';\nimport { WysiwygNav } from './WysiwygNav';\n\ninterface WysiwygProps\n  extends Pick<EditorProps, 'disabled' | 'name' | 'onChange' | 'value'>,\n    Pick<EditorLayoutProps, 'error'>,\n    Pick<HintProps, 'hint'> {\n  intlLabel: TranslationMessage;\n  labelAction?: React.ReactNode;\n  placeholder?: TranslationMessage;\n  required?: boolean;\n}\n\nconst Wysiwyg = React.forwardRef<EditorApi, WysiwygProps>(\n  (\n    { hint, disabled, error, intlLabel, labelAction, name, onChange, placeholder, value, required },\n    forwardedRef\n  ) => {\n    const { formatMessage } = useIntl();\n    const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n    const editorRef = React.useRef<EditorFromTextArea>(\n      null\n    ) as React.MutableRefObject<EditorFromTextArea>;\n    const [isPreviewMode, setIsPreviewMode] = React.useState(false);\n    const [mediaLibVisible, setMediaLibVisible] = React.useState(false);\n    const [isExpandMode, setIsExpandMode] = React.useState(false);\n    const { components = {} } = useLibrary();\n\n    const MediaLibraryDialog = components['media-library'];\n\n    const handleToggleMediaLib = () => setMediaLibVisible((prev) => !prev);\n    const handleTogglePreviewMode = () => setIsPreviewMode((prev) => !prev);\n    const handleToggleExpand = () => {\n      setIsPreviewMode(false);\n      setIsExpandMode((prev) => !prev);\n    };\n\n    const handleActionClick = (\n      value: string,\n      currentEditorRef: React.MutableRefObject<EditorFromTextArea>,\n      togglePopover?: () => void\n    ) => {\n      switch (value) {\n        case 'Link':\n        case 'Strikethrough': {\n          markdownHandler(currentEditorRef, value);\n          togglePopover?.();\n          break;\n        }\n        case 'Code':\n        case 'Quote': {\n          quoteAndCodeHandler(currentEditorRef, value);\n          togglePopover?.();\n          break;\n        }\n        case 'Bold':\n        case 'Italic':\n        case 'Underline': {\n          markdownHandler(currentEditorRef, value);\n          break;\n        }\n        case 'BulletList':\n        case 'NumberList': {\n          listHandler(currentEditorRef, value);\n          togglePopover?.();\n          break;\n        }\n        case 'h1':\n        case 'h2':\n        case 'h3':\n        case 'h4':\n        case 'h5':\n        case 'h6': {\n          titleHandler(currentEditorRef, value);\n          break;\n        }\n        default: {\n          // Nothing\n        }\n      }\n    };\n\n    const handleSelectAssets = (files: any[]) => {\n      const formattedFiles = files.map((f) => ({\n        alt: f.alternativeText || f.name,\n        url: prefixFileUrlWithBackendUrl(f.url),\n        mime: f.mime,\n      }));\n\n      insertFile(editorRef, formattedFiles);\n      setMediaLibVisible(false);\n    };\n\n    const formattedPlaceholder = placeholder\n      ? formatMessage(\n          { id: placeholder.id, defaultMessage: placeholder.defaultMessage },\n          { ...placeholder.values }\n        )\n      : '';\n\n    const label = intlLabel.id\n      ? formatMessage(\n          { id: intlLabel.id, defaultMessage: intlLabel.defaultMessage },\n          { ...intlLabel.values }\n        )\n      : name;\n\n    return (\n      <>\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={1}>\n          <Flex gap={1}>\n            <Typography variant=\"pi\" fontWeight=\"bold\" textColor=\"neutral800\">\n              {label}\n              {required && <TypographyAsterisk textColor=\"danger600\">*</TypographyAsterisk>}\n            </Typography>\n            {labelAction && <LabelAction paddingLeft={1}>{labelAction}</LabelAction>}\n          </Flex>\n\n          <EditorLayout\n            isExpandMode={isExpandMode}\n            error={error}\n            previewContent={value}\n            onCollapse={handleToggleExpand}\n          >\n            <WysiwygNav\n              isExpandMode={isExpandMode}\n              editorRef={editorRef}\n              isPreviewMode={isPreviewMode}\n              onActionClick={handleActionClick}\n              onToggleMediaLib={handleToggleMediaLib}\n              onTogglePreviewMode={isExpandMode ? undefined : handleTogglePreviewMode}\n              disabled={disabled}\n            />\n\n            <Editor\n              disabled={disabled}\n              isExpandMode={isExpandMode}\n              editorRef={editorRef}\n              error={error}\n              isPreviewMode={isPreviewMode}\n              name={name}\n              onChange={onChange}\n              placeholder={formattedPlaceholder}\n              textareaRef={textareaRef}\n              value={value}\n              ref={forwardedRef}\n            />\n\n            {!isExpandMode && <WysiwygFooter onToggleExpand={handleToggleExpand} />}\n          </EditorLayout>\n          <Hint hint={hint} name={name} error={error} />\n        </Flex>\n\n        {error && (\n          <Box paddingTop={1}>\n            <Typography variant=\"pi\" textColor=\"danger600\" data-strapi-field-error>\n              {error}\n            </Typography>\n          </Box>\n        )}\n\n        {mediaLibVisible && (\n          // @ts-expect-error – TODO: fix this way of injecting because it's not really typeable without a registry.\n          <MediaLibraryDialog onClose={handleToggleMediaLib} onSelectAssets={handleSelectAssets} />\n        )}\n      </>\n    );\n  }\n);\n\nconst LabelAction = styled(Box)`\n  svg path {\n    fill: ${({ theme }) => theme.colors.neutral500};\n  }\n`;\n\nconst TypographyAsterisk = styled(Typography)`\n  line-height: 0;\n`;\n\nexport { Wysiwyg };\nexport type { WysiwygProps };\n","import * as React from 'react';\n\nimport {\n  GenericInput,\n  NotAllowedInput,\n  useCMEditViewDataManager,\n  useLibrary,\n} from '@strapi/helper-plugin';\nimport get from 'lodash/get';\nimport omit from 'lodash/omit';\nimport take from 'lodash/take';\nimport { useIntl } from 'react-intl';\n\nimport { useContentTypeLayout } from '../hooks/useContentTypeLayout';\nimport { LazyComponentStore } from '../hooks/useLazyComponents';\nimport { getFieldName } from '../utils/fields';\nimport { EditLayoutRow } from '../utils/layouts';\n\nimport { BlocksInput } from './BlocksInput/BlocksInput';\nimport { InputUID } from './InputUID';\nimport { RelationInputDataManager } from './Relations/RelationInputDataManager';\nimport { Wysiwyg } from './Wysiwyg/Field';\n\nconst VALIDATIONS_TO_OMIT = [\n  'type',\n  'model',\n  'via',\n  'collection',\n  'default',\n  'plugin',\n  'enum',\n  'regex',\n  'pluginOptions',\n];\n\n/* -------------------------------------------------------------------------------------------------\n * Inputs\n * -----------------------------------------------------------------------------------------------*/\n\ninterface InputProps\n  extends Pick<EditLayoutRow, 'fieldSchema' | 'metadatas' | 'queryInfos' | 'size'> {\n  componentUid?: string;\n  keys: string;\n  labelAction?: React.ReactNode;\n  customFieldInputs: LazyComponentStore;\n}\n\nconst Inputs = ({\n  componentUid,\n  fieldSchema,\n  keys,\n  labelAction,\n  metadatas,\n  queryInfos,\n  size,\n  customFieldInputs,\n}: InputProps) => {\n  const {\n    createActionAllowedFields,\n    formErrors,\n    isCreatingEntry,\n    modifiedData,\n    onChange,\n    readActionAllowedFields,\n    shouldNotRunValidations,\n    updateActionAllowedFields,\n  } = useCMEditViewDataManager();\n\n  const { fields } = useLibrary();\n  const { formatMessage } = useIntl();\n  const { contentType: currentContentTypeLayout } = useContentTypeLayout();\n\n  const allowedFields = React.useMemo(() => {\n    return isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields;\n  }, [isCreatingEntry, createActionAllowedFields, updateActionAllowedFields]);\n\n  const readableFields = React.useMemo(() => {\n    return isCreatingEntry ? [] : readActionAllowedFields;\n  }, [isCreatingEntry, readActionAllowedFields]);\n\n  const value = get(modifiedData, keys, null);\n\n  const disabled = React.useMemo(() => !get(metadatas, 'editable', true), [metadatas]);\n  const { type, customField: customFieldUid } = fieldSchema;\n  const error = get(formErrors, [keys], undefined);\n\n  const fieldName = getFieldName(keys);\n\n  const validations = React.useMemo(() => {\n    const inputValidations = omit(\n      fieldSchema,\n      shouldNotRunValidations\n        ? [...VALIDATIONS_TO_OMIT, 'required', 'minLength']\n        : VALIDATIONS_TO_OMIT\n    );\n\n    const regexpString = 'regex' in fieldSchema ? fieldSchema.regex : null;\n\n    if (regexpString) {\n      const regexp = new RegExp(regexpString);\n\n      if (regexp) {\n        // @ts-expect-error – TODO: fix me\n        inputValidations.regex = regexp;\n      }\n    }\n\n    return inputValidations;\n  }, [fieldSchema, shouldNotRunValidations]);\n\n  const isRequired = React.useMemo(() => get(validations, ['required'], false), [validations]);\n\n  const isChildOfDynamicZone = React.useMemo(() => {\n    const attributes = get(currentContentTypeLayout, ['attributes'], {});\n    const foundAttributeType = get(attributes, [fieldName[0], 'type'], null);\n\n    return foundAttributeType === 'dynamiczone';\n  }, [currentContentTypeLayout, fieldName]);\n\n  const inputType = getInputType(type);\n\n  const inputValue = type === 'media' && !value ? [] : value;\n\n  const isUserAllowedToEditField = React.useMemo(() => {\n    const joinedName = fieldName.join('.');\n\n    if (allowedFields.includes(joinedName)) {\n      return true;\n    }\n\n    if (isChildOfDynamicZone) {\n      return allowedFields.includes(fieldName[0]);\n    }\n\n    const isChildOfComponent = fieldName.length > 1;\n\n    if (isChildOfComponent) {\n      const parentFieldName = take(fieldName, fieldName.length - 1).join('.');\n\n      return allowedFields.includes(parentFieldName);\n    }\n\n    return false;\n  }, [allowedFields, fieldName, isChildOfDynamicZone]);\n\n  const isUserAllowedToReadField = React.useMemo(() => {\n    const joinedName = fieldName.join('.');\n\n    if (readableFields.includes(joinedName)) {\n      return true;\n    }\n\n    if (isChildOfDynamicZone) {\n      return readableFields.includes(fieldName[0]);\n    }\n\n    const isChildOfComponent = fieldName.length > 1;\n\n    if (isChildOfComponent) {\n      const parentFieldName = take(fieldName, fieldName.length - 1).join('.');\n\n      return readableFields.includes(parentFieldName);\n    }\n\n    return false;\n  }, [readableFields, fieldName, isChildOfDynamicZone]);\n\n  const shouldDisplayNotAllowedInput = isUserAllowedToReadField || isUserAllowedToEditField;\n\n  const shouldDisableField = React.useMemo(() => {\n    if (!isCreatingEntry) {\n      const doesNotHaveRight = isUserAllowedToReadField && !isUserAllowedToEditField;\n\n      if (doesNotHaveRight) {\n        return true;\n      }\n\n      return disabled;\n    }\n\n    return disabled;\n  }, [disabled, isCreatingEntry, isUserAllowedToEditField, isUserAllowedToReadField]);\n\n  const options = [\n    {\n      metadatas: {\n        intlLabel: {\n          id: 'components.InputSelect.option.placeholder',\n          defaultMessage: 'Choose here',\n        },\n        disabled: isRequired,\n        hidden: isRequired,\n      },\n      key: '__enum_option_null',\n      value: '',\n    },\n    // @ts-expect-error – TODO: fix me\n    ...(fieldSchema.enum ?? []).map((option) => {\n      return {\n        metadatas: {\n          intlLabel: {\n            id: option,\n            defaultMessage: option,\n          },\n          hidden: false,\n          disabled: false,\n        },\n        key: option,\n        value: option,\n      };\n    }),\n  ];\n\n  const { label, description, placeholder, visible } = metadatas;\n\n  if (visible === false) {\n    return null;\n  }\n\n  if (!shouldDisplayNotAllowedInput) {\n    return (\n      <NotAllowedInput\n        description={description ? { id: description, defaultMessage: description } : undefined}\n        intlLabel={{ id: label, defaultMessage: label }}\n        labelAction={labelAction}\n        error={error ? formatMessage(error) : undefined}\n        name={keys}\n      />\n    );\n  }\n\n  if (type === 'relation') {\n    return (\n      // @ts-expect-error – TODO: fix this, it won't work because you assume too much based off it's type so you can't narrow everything else down.\n      <RelationInputDataManager\n        {...metadatas}\n        {...fieldSchema}\n        componentUid={componentUid}\n        description={\n          metadatas.description\n            ? formatMessage({\n                id: metadatas.description,\n                defaultMessage: metadatas.description,\n              })\n            : undefined\n        }\n        intlLabel={{\n          id: metadatas.label,\n          defaultMessage: metadatas.label,\n        }}\n        labelAction={labelAction}\n        isUserAllowedToEditField={isUserAllowedToEditField}\n        isUserAllowedToReadField={isUserAllowedToReadField}\n        name={keys}\n        placeholder={\n          metadatas.placeholder\n            ? {\n                id: metadatas.placeholder,\n                defaultMessage: metadatas.placeholder,\n              }\n            : undefined\n        }\n        queryInfos={queryInfos ?? {}}\n        size={size}\n        error={error ? formatMessage(error) : undefined}\n      />\n    );\n  }\n\n  const customInputs = {\n    uid: InputUID,\n    media: fields!.media,\n    wysiwyg: Wysiwyg,\n    blocks: BlocksInput,\n    ...fields,\n    ...customFieldInputs,\n  };\n\n  return (\n    <GenericInput\n      attribute={fieldSchema}\n      autoComplete=\"new-password\"\n      intlLabel={{ id: label, defaultMessage: label }}\n      // in case the default value of the boolean is null, attribute.default doesn't exist\n      isNullable={\n        inputType === 'bool' &&\n        'default' in fieldSchema &&\n        (fieldSchema.default === null || fieldSchema.default === undefined)\n      }\n      description={description ? { id: description, defaultMessage: description } : undefined}\n      disabled={shouldDisableField}\n      error={error}\n      labelAction={labelAction}\n      contentTypeUID={currentContentTypeLayout!.uid}\n      // @ts-expect-error – TODO: fix this later...\n      customInputs={customInputs}\n      multiple={'multiple' in fieldSchema ? fieldSchema.multiple : false}\n      name={keys}\n      // @ts-expect-error – TODO: fix this later...\n      onChange={onChange}\n      options={options}\n      placeholder={placeholder ? { id: placeholder, defaultMessage: placeholder } : undefined}\n      required={fieldSchema.required || false}\n      step={getStep(type)}\n      type={customFieldUid || inputType}\n      // validations={validations}\n      value={inputValue}\n      withDefaultValue={false}\n    />\n  );\n};\n\nconst getStep = (type: string) => {\n  switch (type) {\n    case 'float':\n    case 'decimal':\n      return 0.01;\n    default:\n      return 1;\n  }\n};\n\nconst getInputType = (type = '') => {\n  switch (type.toLowerCase()) {\n    case 'blocks':\n      return 'blocks';\n    case 'boolean':\n      return 'bool';\n    case 'biginteger':\n      return 'text';\n    case 'decimal':\n    case 'float':\n    case 'integer':\n      return 'number';\n    case 'date':\n    case 'datetime':\n    case 'time':\n      return type;\n    case 'email':\n      return 'email';\n    case 'enumeration':\n      return 'select';\n    case 'password':\n      return 'password';\n    case 'string':\n      return 'text';\n    case 'text':\n      return 'textarea';\n    case 'media':\n    case 'file':\n    case 'files':\n      return 'media';\n    case 'json':\n      return 'json';\n    case 'wysiwyg':\n    case 'WYSIWYG':\n    case 'richtext':\n      return 'wysiwyg';\n    case 'uid':\n      return 'uid';\n    default:\n      return type || 'text';\n  }\n};\n\nexport { Inputs };\n","import { Box, Flex, Grid, GridItem } from '@strapi/design-system';\n\nimport { useContentTypeLayout } from '../hooks/useContentTypeLayout';\nimport { useLazyComponents } from '../hooks/useLazyComponents';\n\nimport { FieldComponent } from './FieldComponent';\nimport { Inputs } from './Inputs';\n\ninterface NonRepeatableComponentProps {\n  componentUid: string;\n  isFromDynamicZone?: boolean;\n  isNested?: boolean;\n  name: string;\n}\n\nconst NonRepeatableComponent = ({\n  componentUid,\n  isFromDynamicZone,\n  isNested,\n  name,\n}: NonRepeatableComponentProps) => {\n  const { getComponentLayout } = useContentTypeLayout();\n  const componentLayoutData = getComponentLayout(componentUid);\n\n  const fields = componentLayoutData.layouts.edit;\n\n  const { lazyComponentStore } = useLazyComponents();\n\n  return (\n    <Box\n      background={isFromDynamicZone ? '' : 'neutral100'}\n      paddingLeft={6}\n      paddingRight={6}\n      paddingTop={6}\n      paddingBottom={6}\n      hasRadius={isNested}\n      borderColor={isNested ? 'neutral200' : undefined}\n    >\n      <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n        {fields.map((fieldRow, key) => {\n          return (\n            <Grid gap={4} key={key}>\n              {fieldRow.map(({ name: fieldName, size, metadatas, fieldSchema, queryInfos }) => {\n                const isComponent = fieldSchema.type === 'component';\n                const keys = `${name}.${fieldName}`;\n\n                if (isComponent) {\n                  const compoUid = fieldSchema.component;\n\n                  return (\n                    <GridItem col={size} s={12} xs={12} key={fieldName}>\n                      <FieldComponent\n                        componentUid={compoUid}\n                        intlLabel={{\n                          id: metadatas.label,\n                          defaultMessage: metadatas.label,\n                        }}\n                        isNested\n                        isRepeatable={fieldSchema.repeatable}\n                        max={fieldSchema.max}\n                        min={fieldSchema.min}\n                        name={keys}\n                        required={fieldSchema.required || false}\n                      />\n                    </GridItem>\n                  );\n                }\n\n                return (\n                  <GridItem col={size} key={fieldName} s={12} xs={12}>\n                    <Inputs\n                      componentUid={componentUid}\n                      keys={keys}\n                      fieldSchema={fieldSchema}\n                      metadatas={metadatas}\n                      queryInfos={queryInfos}\n                      size={size}\n                      customFieldInputs={lazyComponentStore}\n                    />\n                  </GridItem>\n                );\n              })}\n            </Grid>\n          );\n        })}\n      </Flex>\n    </Box>\n  );\n};\n\nexport { NonRepeatableComponent };\nexport type { NonRepeatableComponentProps };\n","import * as React from 'react';\n\nimport {\n  Box,\n  Flex,\n  TextButton,\n  VisuallyHidden,\n  Accordion,\n  AccordionContent as DSAccordionContent,\n  AccordionToggle,\n  Grid,\n  GridItem,\n  IconButton,\n  Typography,\n  KeyboardNavigable,\n} from '@strapi/design-system';\nimport {\n  TranslationMessage,\n  useCMEditViewDataManager,\n  useNotification,\n  useQuery,\n} from '@strapi/helper-plugin';\nimport { Plus, Drag, Trash } from '@strapi/icons';\nimport get from 'lodash/get';\nimport toString from 'lodash/toString';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { useContentTypeLayout } from '../hooks/useContentTypeLayout';\nimport { UseDragAndDropOptions, useDragAndDrop } from '../hooks/useDragAndDrop';\nimport { useLazyComponents } from '../hooks/useLazyComponents';\nimport { ItemTypes } from '../utils/dragAndDrop';\nimport { getMaxTempKey } from '../utils/fields';\nimport { composeRefs } from '../utils/refs';\nimport { getTranslation } from '../utils/translations';\n\nimport { ComponentInitializer } from './ComponentInitializer';\nimport { FieldComponent } from './FieldComponent';\nimport { Inputs } from './Inputs';\n\nimport type { EditLayoutRow } from '../utils/layouts';\n\n/* -------------------------------------------------------------------------------------------------\n * RepeatableComponent\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RepeatableComponentProps {\n  componentUid: string;\n  componentValue?: Array<{ __temp_key__: number }>;\n  componentValueLength?: number;\n  isReadOnly?: boolean;\n  max?: number;\n  min?: number;\n  name: string;\n}\n\nconst RepeatableComponent = ({\n  componentUid,\n  componentValue = [],\n  componentValueLength = 0,\n  isReadOnly,\n  max = Infinity,\n  min = -Infinity,\n  name,\n}: RepeatableComponentProps) => {\n  const { addRepeatableComponentToField, formErrors, moveComponentField } =\n    useCMEditViewDataManager();\n  const toggleNotification = useNotification();\n  const { formatMessage } = useIntl();\n  const [collapseToOpen, setCollapseToOpen] = React.useState<number | null>(null);\n  const [liveText, setLiveText] = React.useState('');\n  const { getComponentLayout, components } = useContentTypeLayout();\n  const componentLayoutData = getComponentLayout(componentUid);\n\n  const search = useQuery();\n\n  /**\n   * Get the temp key of the component that has the field that is currently focussed\n   * as defined by the `field` query param. We can then force this specific component\n   * to be in it's \"open\" state.\n   */\n  const componentTmpKeyWithFocussedField = React.useMemo(() => {\n    if (search.has('field')) {\n      const field = search.get('field');\n\n      if (!field) {\n        return undefined;\n      }\n\n      const [, path] = field.split(`${name}.`);\n\n      if (get(componentValue, path, undefined) !== undefined) {\n        const [subpath] = path.split('.');\n\n        return componentValue[parseInt(subpath, 10)]?.__temp_key__;\n      }\n    }\n\n    return undefined;\n  }, [componentValue, search, name]);\n\n  React.useEffect(() => {\n    if (typeof componentTmpKeyWithFocussedField === 'number') {\n      setCollapseToOpen(componentTmpKeyWithFocussedField);\n    }\n  }, [componentTmpKeyWithFocussedField]);\n\n  const nextTempKey = getMaxTempKey(componentValue) + 1;\n\n  const componentErrorKeys = getComponentErrorKeys(name, formErrors);\n\n  const missingComponentsValue = min - componentValueLength;\n\n  const hasMinError = formErrors[name]?.id?.includes('min') ?? false;\n\n  const toggleCollapses = () => {\n    setCollapseToOpen(null);\n  };\n\n  const handleClick = () => {\n    if (!isReadOnly) {\n      if (componentValueLength < max) {\n        const shouldCheckErrors = hasMinError;\n\n        addRepeatableComponentToField?.(name, componentLayoutData, components, shouldCheckErrors);\n\n        setCollapseToOpen(nextTempKey);\n      } else if (componentValueLength >= max) {\n        toggleNotification({\n          type: 'info',\n          message: { id: getTranslation('components.notification.info.maximum-requirement') },\n        });\n      }\n    }\n  };\n\n  const handleMoveComponentField: ComponentProps['moveComponentField'] = (\n    newIndex,\n    currentIndex\n  ) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.reorder'),\n          defaultMessage: '{item}, moved. New position in list: {position}.',\n        },\n        {\n          item: `${name}.${currentIndex}`,\n          position: getItemPos(newIndex),\n        }\n      )\n    );\n\n    moveComponentField?.({\n      name,\n      newIndex,\n      currentIndex,\n    });\n  };\n\n  const mainField =\n    'settings' in componentLayoutData ? componentLayoutData.settings.mainField ?? 'id' : 'id';\n\n  const handleToggle = (key: number) => () => {\n    if (collapseToOpen === key) {\n      setCollapseToOpen(null);\n    } else {\n      setCollapseToOpen(key);\n    }\n  };\n\n  const getItemPos = (index: number) => `${index + 1} of ${componentValueLength}`;\n\n  const handleCancel = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.cancel-item'),\n          defaultMessage: '{item}, dropped. Re-order cancelled.',\n        },\n        {\n          item: `${name}.${index}`,\n        }\n      )\n    );\n  };\n\n  const handleGrabItem = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.grab-item'),\n          defaultMessage: `{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel.`,\n        },\n        {\n          item: `${name}.${index}`,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  const handleDropItem = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.drop-item'),\n          defaultMessage: `{item}, dropped. Final position in list: {position}.`,\n        },\n        {\n          item: `${name}.${index}`,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  let errorMessage = formErrors[name];\n\n  if (hasMinError) {\n    errorMessage = {\n      id: getTranslation('components.DynamicZone.missing-components'),\n      defaultMessage:\n        'There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}',\n      values: { number: missingComponentsValue },\n    };\n  } else if (componentErrorKeys.some((error) => error.split('.').length > 1) && !hasMinError) {\n    errorMessage = {\n      id: getTranslation('components.RepeatableComponent.error-message'),\n      defaultMessage: 'The component(s) contain error(s)',\n    };\n  }\n\n  if (componentValueLength === 0) {\n    return (\n      <ComponentInitializer error={errorMessage} isReadOnly={isReadOnly} onClick={handleClick} />\n    );\n  }\n\n  const ariaDescriptionId = `${name}-item-instructions`;\n\n  return (\n    <Box hasRadius>\n      <VisuallyHidden id={ariaDescriptionId}>\n        {formatMessage({\n          id: getTranslation('dnd.instructions'),\n          defaultMessage: `Press spacebar to grab and re-order`,\n        })}\n      </VisuallyHidden>\n      <VisuallyHidden aria-live=\"assertive\">{liveText}</VisuallyHidden>\n      <AccordionGroup error={errorMessage}>\n        <AccordionContent aria-describedby={ariaDescriptionId}>\n          {componentValue.map(({ __temp_key__: key }, index) => (\n            <Component\n              componentFieldName={`${name}.${index}`}\n              componentUid={componentUid}\n              fields={componentLayoutData.layouts.edit}\n              key={key}\n              index={index}\n              isOpen={collapseToOpen === key}\n              isReadOnly={isReadOnly}\n              mainField={mainField}\n              moveComponentField={handleMoveComponentField}\n              onClickToggle={handleToggle(key)}\n              toggleCollapses={toggleCollapses}\n              onCancel={handleCancel}\n              onDropItem={handleDropItem}\n              onGrabItem={handleGrabItem}\n            />\n          ))}\n        </AccordionContent>\n        <AccordionFooter>\n          <Flex justifyContent=\"center\" height=\"48px\" background=\"neutral0\">\n            <TextButtonCustom disabled={isReadOnly} onClick={handleClick} startIcon={<Plus />}>\n              {formatMessage({\n                id: getTranslation('containers.EditView.add.new-entry'),\n                defaultMessage: 'Add an entry',\n              })}\n            </TextButtonCustom>\n          </Flex>\n        </AccordionFooter>\n      </AccordionGroup>\n    </Box>\n  );\n};\n\nconst TextButtonCustom = styled(TextButton)`\n  height: 100%;\n  width: 100%;\n  border-radius: 0 0 4px 4px;\n  display: flex;\n  justify-content: center;\n  span {\n    font-weight: 600;\n    font-size: 14px;\n  }\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * Accordion\n * -----------------------------------------------------------------------------------------------*/\n\nconst AccordionFooter = styled(Box)`\n  overflow: hidden;\n  border-bottom: 1px solid ${({ theme }) => theme.colors.neutral200};\n  border-right: 1px solid ${({ theme }) => theme.colors.neutral200};\n  border-left: 1px solid ${({ theme }) => theme.colors.neutral200};\n  border-radius: 0 0 ${({ theme }) => theme.borderRadius} ${({ theme }) => theme.borderRadius};\n`;\n\nconst AccordionContent = styled(Box)`\n  border-bottom: none;\n\n  /* add the borders and make sure the top is transparent to avoid jumping with the hover effect  */\n  & > div > div {\n    border: 1px solid ${({ theme }) => theme.colors.neutral200};\n    border-top-color: transparent;\n  }\n\n  /* the top accordion _does_ need a border though */\n  & > div:first-child > div {\n    border-top: 1px solid ${({ theme }) => theme.colors.neutral200};\n  }\n\n  /* Reset all the border-radius' */\n  & > div > div,\n  & > div > div > div {\n    border-radius: unset;\n  }\n\n  /* Give the border radius back to the first accordion */\n  & > div:first-child > div,\n  & > div:first-child > div > div {\n    border-radius: ${({ theme }) => theme.borderRadius} ${({ theme }) => theme.borderRadius} 0 0;\n  }\n\n  & > div > div[data-strapi-expanded='true'] {\n    border: 1px solid ${({ theme }) => theme.colors.primary600};\n  }\n`;\n\ninterface AccordionGroupProps {\n  children: React.ReactNode;\n  error?: TranslationMessage;\n}\n\nconst AccordionGroup = ({ children, error }: AccordionGroupProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <KeyboardNavigable attributeName=\"data-strapi-accordion-toggle\">\n      {children}\n      {error && (\n        <Box paddingTop={1}>\n          <Typography variant=\"pi\" textColor=\"danger600\">\n            {formatMessage(\n              { id: error.id, defaultMessage: error.defaultMessage },\n              { ...error.values }\n            )}\n          </Typography>\n        </Box>\n      )}\n    </KeyboardNavigable>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Field\n * -----------------------------------------------------------------------------------------------*/\n\nconst CustomIconButton = styled(IconButton)<{ expanded?: boolean }>`\n  background-color: transparent;\n\n  svg {\n    path {\n      fill: ${({ theme, expanded }) =>\n        expanded ? theme.colors.primary600 : theme.colors.neutral600};\n    }\n  }\n\n  &:hover {\n    svg {\n      path {\n        fill: ${({ theme }) => theme.colors.primary600};\n      }\n    }\n  }\n`;\n\nconst ActionsFlex = styled(Flex)<{ expanded?: boolean }>`\n  & .drag-handle {\n    background: unset;\n\n    svg {\n      path {\n        fill: ${({ theme, expanded }) => (expanded ? theme.colors.primary600 : undefined)};\n      }\n    }\n\n    &:hover {\n      svg {\n        path {\n          /* keeps the hover style of the accordion */\n          fill: ${({ theme }) => theme.colors.primary600};\n        }\n      }\n    }\n  }\n`;\n\ninterface ComponentProps\n  extends Pick<UseDragAndDropOptions, 'onGrabItem' | 'onDropItem' | 'onCancel'> {\n  componentFieldName: string;\n  componentUid: string;\n  fields?: EditLayoutRow[][];\n  index: number;\n  isOpen?: boolean;\n  isReadOnly?: boolean;\n  mainField: string;\n  moveComponentField: (newIndex: number, currentIndex: number) => void;\n  onClickToggle: () => void;\n  toggleCollapses: () => void;\n}\n\nconst Component = ({\n  componentFieldName,\n  componentUid,\n  fields = [],\n  index,\n  isOpen,\n  isReadOnly,\n  mainField,\n  moveComponentField,\n  onClickToggle,\n  toggleCollapses,\n  onGrabItem,\n  onDropItem,\n  onCancel,\n}: ComponentProps) => {\n  // @ts-expect-error – we need to add `triggerFormValidation` to the context.\n  const { modifiedData, removeRepeatableField, triggerFormValidation } = useCMEditViewDataManager();\n\n  const displayedValue = toString(\n    get(modifiedData, [...componentFieldName.split('.'), mainField], '')\n  );\n  const accordionRef = React.useRef<HTMLButtonElement>(null!);\n  const { formatMessage } = useIntl();\n\n  /**\n   * The last item in the fieldName array will be the index of this component.\n   * Drag and drop should be isolated to the parent component so nested repeatable\n   * components are not affected by the drag and drop of the parent component in\n   * their own re-ordering context.\n   */\n  const componentKey = componentFieldName.split('.').slice(0, -1).join('.');\n\n  const [{ handlerId, isDragging, handleKeyDown }, boxRef, dropRef, dragRef, dragPreviewRef] =\n    useDragAndDrop(!isReadOnly, {\n      type: `${ItemTypes.COMPONENT}_${componentKey}`,\n      index,\n      item: {\n        index,\n        displayedValue,\n      },\n      onMoveItem: moveComponentField,\n      onStart() {\n        // Close all collapses\n        toggleCollapses();\n      },\n      onEnd() {\n        // Update the errors\n        triggerFormValidation();\n      },\n      onGrabItem,\n      onDropItem,\n      onCancel,\n    });\n\n  React.useEffect(() => {\n    dragPreviewRef(getEmptyImage(), { captureDraggingState: false });\n  }, [dragPreviewRef, index]);\n\n  const composedAccordionRefs = composeRefs<HTMLButtonElement>(accordionRef, dragRef);\n  const composedBoxRefs = composeRefs(boxRef, dropRef);\n\n  const { lazyComponentStore } = useLazyComponents();\n\n  return (\n    <Box ref={(ref) => composedBoxRefs(ref!)}>\n      {isDragging ? (\n        <Preview />\n      ) : (\n        <Accordion expanded={isOpen} onToggle={onClickToggle} id={componentFieldName} size=\"S\">\n          <AccordionToggle\n            action={\n              isReadOnly ? null : (\n                <ActionsFlex gap={0} expanded={isOpen}>\n                  <CustomIconButton\n                    expanded={isOpen}\n                    noBorder\n                    onClick={() => {\n                      removeRepeatableField?.(componentFieldName);\n                      toggleCollapses();\n                    }}\n                    label={formatMessage({\n                      id: getTranslation('containers.Edit.delete'),\n                      defaultMessage: 'Delete',\n                    })}\n                    icon={<Trash />}\n                  />\n                  <IconButton\n                    className=\"drag-handle\"\n                    ref={composedAccordionRefs}\n                    forwardedAs=\"div\"\n                    role=\"button\"\n                    noBorder\n                    tabIndex={0}\n                    onClick={(e) => e.stopPropagation()}\n                    data-handler-id={handlerId}\n                    label={formatMessage({\n                      id: getTranslation('components.DragHandle-label'),\n                      defaultMessage: 'Drag',\n                    })}\n                    onKeyDown={handleKeyDown}\n                  >\n                    <Drag />\n                  </IconButton>\n                </ActionsFlex>\n              )\n            }\n            title={displayedValue}\n            togglePosition=\"left\"\n          />\n          <DSAccordionContent>\n            <Flex\n              direction=\"column\"\n              alignItems=\"stretch\"\n              background=\"neutral100\"\n              padding={6}\n              gap={6}\n            >\n              {fields.map((fieldRow, key) => {\n                return (\n                  <Grid gap={4} key={key}>\n                    {fieldRow.map(({ name, fieldSchema, metadatas, queryInfos, size }) => {\n                      const isComponent = fieldSchema.type === 'component';\n                      const keys = `${componentFieldName}.${name}`;\n\n                      if (isComponent) {\n                        const componentUid = fieldSchema.component;\n\n                        return (\n                          <GridItem col={size} s={12} xs={12} key={name}>\n                            <FieldComponent\n                              componentUid={componentUid}\n                              intlLabel={{\n                                id: metadatas.label,\n                                defaultMessage: metadatas.label,\n                              }}\n                              isRepeatable={fieldSchema.repeatable}\n                              isNested\n                              name={keys}\n                              max={fieldSchema.max}\n                              min={fieldSchema.min}\n                              required={fieldSchema.required}\n                            />\n                          </GridItem>\n                        );\n                      }\n\n                      return (\n                        <GridItem key={keys} col={size} s={12} xs={12}>\n                          <Inputs\n                            componentUid={componentUid}\n                            fieldSchema={fieldSchema}\n                            keys={keys}\n                            metadatas={metadatas}\n                            queryInfos={queryInfos}\n                            size={size}\n                            customFieldInputs={lazyComponentStore}\n                          />\n                        </GridItem>\n                      );\n                    })}\n                  </Grid>\n                );\n              })}\n            </Flex>\n          </DSAccordionContent>\n        </Accordion>\n      )}\n    </Box>\n  );\n};\n\nconst Preview = () => {\n  return <StyledSpan as=\"span\" padding={6} background=\"primary100\" />;\n};\n\nconst StyledSpan = styled(Box)`\n  display: block;\n  outline: 1px dashed ${({ theme }) => theme.colors.primary500};\n  outline-offset: -1px;\n`;\n\nfunction getComponentErrorKeys(name: string, formErrors = {}) {\n  return Object.keys(formErrors)\n    .filter((errorKey) => errorKey.startsWith(name))\n    .map((errorKey) =>\n      errorKey\n        .split('.')\n        .slice(0, name.split('.').length + 1)\n        .join('.')\n    );\n}\n\nexport { RepeatableComponent };\nexport type { RepeatableComponentProps };\n","import * as React from 'react';\n\nimport { Box, Flex, IconButton, Typography } from '@strapi/design-system';\nimport {\n  NotAllowedInput,\n  TranslationMessage,\n  useCMEditViewDataManager,\n} from '@strapi/helper-plugin';\nimport { Trash } from '@strapi/icons';\nimport size from 'lodash/size';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { useContentTypeLayout } from '../hooks/useContentTypeLayout';\nimport { getFieldName } from '../utils/fields';\nimport { getTranslation } from '../utils/translations';\n\nimport { ComponentInitializer } from './ComponentInitializer';\nimport { NonRepeatableComponent } from './NonRepeatableComponent';\nimport { RepeatableComponent } from './RepeatableComponent';\n\ninterface FieldComponentProps {\n  componentUid: string;\n  intlLabel?: TranslationMessage;\n  isFromDynamicZone?: boolean;\n  isRepeatable?: boolean;\n  isNested?: boolean;\n  labelAction?: React.ReactNode;\n  max?: number;\n  min?: number;\n  name: string;\n  required?: boolean;\n}\n\nconst FieldComponent = ({\n  componentUid,\n  intlLabel,\n  isFromDynamicZone,\n  isRepeatable,\n  isNested,\n  labelAction,\n  max = Infinity,\n  min = -Infinity,\n  name,\n  required,\n}: FieldComponentProps) => {\n  const { formatMessage } = useIntl();\n  const {\n    addNonRepeatableComponentToField,\n    createActionAllowedFields,\n    isCreatingEntry,\n    modifiedData,\n    removeComponentFromField,\n    readActionAllowedFields,\n    updateActionAllowedFields,\n  } = useCMEditViewDataManager();\n  const { contentType } = useContentTypeLayout();\n\n  // This is used for the readonly mode when updating an entry\n  const allDynamicZoneFields = React.useMemo(() => {\n    const attributes = contentType?.attributes ?? {};\n\n    return Object.keys(attributes).filter(\n      (attrName) => attributes[attrName].type === 'dynamiczone'\n    );\n  }, [contentType]);\n\n  const allowedFields = isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields;\n\n  const componentValue = modifiedData[name] ?? null;\n  const compoName = getFieldName(name);\n\n  const hasChildrenAllowedFields = React.useMemo(() => {\n    if (isFromDynamicZone && isCreatingEntry) {\n      return true;\n    }\n\n    const includedDynamicZoneFields = allowedFields.filter((name) => name === compoName[0]);\n\n    if (includedDynamicZoneFields.length > 0) {\n      return true;\n    }\n\n    const relatedChildrenAllowedFields = allowedFields\n      .map((fieldName) => {\n        return fieldName.split('.');\n      })\n      .filter((fieldName) => {\n        if (fieldName.length < compoName.length) {\n          return false;\n        }\n\n        return fieldName.slice(0, compoName.length).join('.') === compoName.join('.');\n      });\n\n    return relatedChildrenAllowedFields.length > 0;\n  }, [isFromDynamicZone, isCreatingEntry, allowedFields, compoName]);\n\n  // This is used only when updating an entry\n  const hasChildrenReadableFields = React.useMemo(() => {\n    if (isFromDynamicZone) {\n      return true;\n    }\n    if (allDynamicZoneFields.includes(compoName[0])) {\n      return true;\n    }\n\n    const allowedFields = isCreatingEntry ? [] : readActionAllowedFields;\n\n    const relatedChildrenAllowedFields = allowedFields\n      .map((fieldName) => {\n        return fieldName.split('.');\n      })\n      .filter((fieldName) => {\n        if (fieldName.length < compoName.length) {\n          return false;\n        }\n\n        return fieldName.slice(0, compoName.length).join('.') === compoName.join('.');\n      });\n\n    return relatedChildrenAllowedFields.length > 0;\n  }, [\n    isFromDynamicZone,\n    allDynamicZoneFields,\n    compoName,\n    isCreatingEntry,\n    readActionAllowedFields,\n  ]);\n\n  const isReadOnly = isCreatingEntry\n    ? false\n    : hasChildrenAllowedFields\n    ? false\n    : hasChildrenReadableFields;\n\n  const componentValueLength = size(componentValue);\n  const isInitialized = componentValue !== null || isFromDynamicZone;\n  const showResetComponent =\n    !isRepeatable && isInitialized && !isFromDynamicZone && hasChildrenAllowedFields;\n\n  const { getComponentLayout, components } = useContentTypeLayout();\n  const componentLayoutData = getComponentLayout(componentUid);\n\n  if (!hasChildrenAllowedFields && isCreatingEntry) {\n    return <NotAllowedInput labelAction={labelAction} intlLabel={intlLabel} name={name} />;\n  }\n\n  if (!hasChildrenAllowedFields && !isCreatingEntry && !hasChildrenReadableFields) {\n    return <NotAllowedInput labelAction={labelAction} intlLabel={intlLabel} name={name} />;\n  }\n\n  const handleClickAddNonRepeatableComponentToField = () => {\n    addNonRepeatableComponentToField?.(name, componentLayoutData, components);\n  };\n\n  return (\n    <Box>\n      <Flex justifyContent=\"space-between\">\n        {intlLabel && (\n          <Flex paddingBottom={1}>\n            <Typography\n              textColor=\"neutral800\"\n              htmlFor={name}\n              variant=\"pi\"\n              fontWeight=\"bold\"\n              as=\"label\"\n            >\n              {formatMessage(intlLabel)}\n              {isRepeatable && <>&nbsp;({componentValueLength})</>}\n              {required && <Typography textColor=\"danger600\">*</Typography>}\n            </Typography>\n            {labelAction && <LabelAction paddingLeft={1}>{labelAction}</LabelAction>}\n          </Flex>\n        )}\n\n        {showResetComponent && (\n          <IconButton\n            label={formatMessage({\n              id: getTranslation('components.reset-entry'),\n              defaultMessage: 'Reset Entry',\n            })}\n            icon={<Trash />}\n            noBorder\n            onClick={() => {\n              removeComponentFromField?.(name, componentUid);\n            }}\n          />\n        )}\n      </Flex>\n      <Flex direction=\"column\" alignItems=\"stretch\" gap={1}>\n        {!isRepeatable && !isInitialized && (\n          <ComponentInitializer\n            isReadOnly={isReadOnly}\n            onClick={handleClickAddNonRepeatableComponentToField}\n          />\n        )}\n        {!isRepeatable && isInitialized && (\n          <NonRepeatableComponent\n            componentUid={componentUid}\n            isFromDynamicZone={isFromDynamicZone}\n            isNested={isNested}\n            name={name}\n          />\n        )}\n        {isRepeatable && (\n          <RepeatableComponent\n            componentValue={componentValue ?? undefined}\n            componentValueLength={componentValueLength}\n            componentUid={componentUid}\n            isReadOnly={isReadOnly}\n            max={max}\n            min={min}\n            name={name}\n          />\n        )}\n      </Flex>\n    </Box>\n  );\n};\n\nconst LabelAction = styled(Box)`\n  svg path {\n    fill: ${({ theme }) => theme.colors.neutral500};\n  }\n`;\n\nexport { FieldComponent };\n","import * as React from 'react';\n\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionToggle,\n  Box,\n  Flex,\n  IconButton,\n  VisuallyHidden,\n} from '@strapi/design-system';\nimport { Menu, MenuItem } from '@strapi/design-system/v2';\nimport { useCMEditViewDataManager } from '@strapi/helper-plugin';\nimport { Drag, More, Trash } from '@strapi/icons';\nimport get from 'lodash/get';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { useContentTypeLayout } from '../../hooks/useContentTypeLayout';\nimport { useDragAndDrop } from '../../hooks/useDragAndDrop';\nimport { ItemTypes } from '../../utils/dragAndDrop';\nimport { composeRefs } from '../../utils/refs';\nimport { getTranslation } from '../../utils/translations';\nimport { ComponentIcon } from '../ComponentIcon';\nimport { FieldComponent } from '../FieldComponent';\n\nimport type { ComponentPickerProps } from './ComponentPicker';\n\ninterface DynamicComponentProps extends Pick<ComponentPickerProps, 'dynamicComponentsByCategory'> {\n  componentUid: string;\n  formErrors?: Record<string, unknown>;\n  index?: number;\n  isFieldAllowed?: boolean;\n  name: string;\n  onAddComponent?: (componentUid: string, index: number) => void;\n  onRemoveComponentClick: () => void;\n  onMoveComponent: (dragIndex: number, hoverIndex: number) => void;\n  onGrabItem?: (index: number) => void;\n  onDropItem?: (index: number) => void;\n  onCancel?: (index: number) => void;\n}\n\nconst DynamicComponent = ({\n  componentUid,\n  formErrors = {},\n  index = 0,\n  isFieldAllowed = false,\n  name,\n  onRemoveComponentClick,\n  onMoveComponent,\n  onGrabItem,\n  onDropItem,\n  onCancel,\n  dynamicComponentsByCategory = {},\n  onAddComponent,\n}: DynamicComponentProps) => {\n  const [isOpen, setIsOpen] = React.useState(true);\n  const { formatMessage } = useIntl();\n  const { getComponentLayout } = useContentTypeLayout();\n  const { modifiedData } = useCMEditViewDataManager();\n  const { icon, friendlyName, mainValue } = React.useMemo(() => {\n    const componentLayoutData = getComponentLayout(componentUid);\n\n    const {\n      info: { icon, displayName },\n    } = componentLayoutData;\n\n    const mainFieldKey = get(componentLayoutData, ['settings', 'mainField'], 'id');\n\n    const mainField = get(modifiedData, [name, index, mainFieldKey]) ?? '';\n\n    const displayedValue = mainFieldKey === 'id' ? '' : String(mainField).trim();\n\n    const mainValue = displayedValue.length > 0 ? ` - ${displayedValue}` : displayedValue;\n\n    return { friendlyName: displayName, icon, mainValue };\n  }, [componentUid, getComponentLayout, modifiedData, name, index]);\n\n  const fieldsErrors = Object.keys(formErrors).filter((errorKey) => {\n    const errorKeysArray = errorKey.split('.');\n\n    if (`${errorKeysArray[0]}.${errorKeysArray[1]}` === `${name}.${index}`) {\n      return true;\n    }\n\n    return false;\n  });\n\n  let errorMessage;\n\n  if (fieldsErrors.length > 0) {\n    errorMessage = formatMessage({\n      id: getTranslation('components.DynamicZone.error-message'),\n      defaultMessage: 'The component contains error(s)',\n    });\n  }\n\n  const handleToggle = () => {\n    setIsOpen((s) => !s);\n  };\n\n  const [{ handlerId, isDragging, handleKeyDown }, boxRef, dropRef, dragRef, dragPreviewRef] =\n    useDragAndDrop(isFieldAllowed, {\n      type: `${ItemTypes.DYNAMIC_ZONE}_${name}`,\n      index,\n      item: {\n        index,\n        displayedValue: `${friendlyName}${mainValue}`,\n        icon,\n      },\n      onMoveItem: onMoveComponent,\n      onGrabItem,\n      onDropItem,\n      onCancel,\n    });\n\n  React.useEffect(() => {\n    dragPreviewRef(getEmptyImage(), { captureDraggingState: false });\n  }, [dragPreviewRef, index]);\n\n  const composedBoxRefs = composeRefs(boxRef, dropRef);\n\n  const accordionActions = !isFieldAllowed ? null : (\n    <ActionsFlex gap={0}>\n      <IconButtonCustom\n        noBorder\n        label={formatMessage(\n          {\n            id: getTranslation('components.DynamicZone.delete-label'),\n            defaultMessage: 'Delete {name}',\n          },\n          { name: friendlyName }\n        )}\n        onClick={onRemoveComponentClick}\n      >\n        <Trash />\n      </IconButtonCustom>\n      <IconButton\n        forwardedAs=\"div\"\n        role=\"button\"\n        noBorder\n        tabIndex={0}\n        onClick={(e) => e.stopPropagation()}\n        data-handler-id={handlerId}\n        ref={dragRef}\n        label={formatMessage({\n          id: getTranslation('components.DragHandle-label'),\n          defaultMessage: 'Drag',\n        })}\n        onKeyDown={handleKeyDown}\n      >\n        <Drag />\n      </IconButton>\n      <Menu.Root>\n        <Menu.Trigger size=\"S\" endIcon={null} paddingLeft={2} paddingRight={2}>\n          <More aria-hidden focusable={false} />\n          <VisuallyHidden as=\"span\">\n            {formatMessage({\n              id: getTranslation('components.DynamicZone.more-actions'),\n              defaultMessage: 'More actions',\n            })}\n          </VisuallyHidden>\n        </Menu.Trigger>\n        <Menu.Content>\n          <Menu.SubRoot>\n            <Menu.SubTrigger>\n              {formatMessage({\n                id: getTranslation('components.DynamicZone.add-item-above'),\n                defaultMessage: 'Add component above',\n              })}\n            </Menu.SubTrigger>\n            <Menu.SubContent>\n              {Object.entries(dynamicComponentsByCategory).map(([category, components]) => (\n                <React.Fragment key={category}>\n                  <Menu.Label>{category}</Menu.Label>\n                  {components.map(({ componentUid, info: { displayName } }) => (\n                    <MenuItem\n                      key={componentUid}\n                      onSelect={() => onAddComponent?.(componentUid, index)}\n                    >\n                      {displayName}\n                    </MenuItem>\n                  ))}\n                </React.Fragment>\n              ))}\n            </Menu.SubContent>\n          </Menu.SubRoot>\n          <Menu.SubRoot>\n            <Menu.SubTrigger>\n              {formatMessage({\n                id: getTranslation('components.DynamicZone.add-item-below'),\n                defaultMessage: 'Add component below',\n              })}\n            </Menu.SubTrigger>\n            <Menu.SubContent>\n              {Object.entries(dynamicComponentsByCategory).map(([category, components]) => (\n                <React.Fragment key={category}>\n                  <Menu.Label>{category}</Menu.Label>\n                  {components.map(({ componentUid, info: { displayName } }) => (\n                    <MenuItem\n                      key={componentUid}\n                      onSelect={() => onAddComponent?.(componentUid, index + 1)}\n                    >\n                      {displayName}\n                    </MenuItem>\n                  ))}\n                </React.Fragment>\n              ))}\n            </Menu.SubContent>\n          </Menu.SubRoot>\n        </Menu.Content>\n      </Menu.Root>\n    </ActionsFlex>\n  );\n\n  return (\n    <ComponentContainer as=\"li\" width=\"100%\">\n      <Flex justifyContent=\"center\">\n        <Rectangle background=\"neutral200\" />\n      </Flex>\n      {/* @ts-expect-error – Fix this ref issue */}\n      <StyledBox ref={composedBoxRefs} hasRadius>\n        {isDragging ? (\n          <Preview />\n        ) : (\n          <Accordion expanded={isOpen} onToggle={handleToggle} size=\"S\" error={errorMessage}>\n            <AccordionToggle\n              // @ts-expect-error – Issue in DS where AccordionToggle props don't extend TextButton\n              startIcon={<ComponentIcon icon={icon} showBackground={false} size=\"S\" />}\n              action={accordionActions}\n              title={`${friendlyName}${mainValue}`}\n              togglePosition=\"left\"\n            />\n            <AccordionContent>\n              <AccordionContentRadius background=\"neutral0\">\n                <FieldComponent\n                  componentUid={componentUid}\n                  name={`${name}.${index}`}\n                  isFromDynamicZone\n                />\n              </AccordionContentRadius>\n            </AccordionContent>\n          </Accordion>\n        )}\n      </StyledBox>\n    </ComponentContainer>\n  );\n};\n\nconst ActionsFlex = styled(Flex)`\n  /* \n    we need to remove the background from the button but we can't \n    wrap the element in styled because it breaks the forwardedAs which\n    we need for drag handler to work on firefox\n  */\n  div[role='button'] {\n    background: transparent;\n  }\n`;\n\nconst IconButtonCustom = styled(IconButton)<{ expanded?: boolean }>`\n  background-color: transparent;\n\n  svg path {\n    fill: ${({ theme, expanded }) =>\n      expanded ? theme.colors.primary600 : theme.colors.neutral600};\n  }\n`;\n\n// TODO: Delete once https://github.com/strapi/design-system/pull/858\n// is merged and released.\nconst StyledBox = styled(Box)`\n  > div:first-child {\n    box-shadow: ${({ theme }) => theme.shadows.tableShadow};\n  }\n`;\n\nconst AccordionContentRadius = styled(Box)`\n  border-radius: 0 0 ${({ theme }) => theme.spaces[1]} ${({ theme }) => theme.spaces[1]};\n`;\n\nconst Rectangle = styled(Box)`\n  width: ${({ theme }) => theme.spaces[2]};\n  height: ${({ theme }) => theme.spaces[4]};\n`;\n\nconst Preview = styled.span`\n  display: block;\n  background-color: ${({ theme }) => theme.colors.primary100};\n  outline: 1px dashed ${({ theme }) => theme.colors.primary500};\n  outline-offset: -1px;\n  padding: ${({ theme }) => theme.spaces[6]};\n`;\n\nconst ComponentContainer = styled(Box)`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`;\n\nexport { DynamicComponent };\nexport type { DynamicComponentProps };\n","import * as React from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { pxToRem } from '@strapi/helper-plugin';\nimport { MessageDescriptor, useIntl } from 'react-intl';\n\ninterface DynamicZoneLabelProps {\n  label?: string;\n  labelAction?: React.ReactNode;\n  name: string;\n  numberOfComponents?: number;\n  required?: boolean;\n  intlDescription?: MessageDescriptor;\n}\n\nconst DynamicZoneLabel = ({\n  label,\n  labelAction,\n  name,\n  numberOfComponents = 0,\n  required,\n  intlDescription,\n}: DynamicZoneLabelProps) => {\n  const { formatMessage } = useIntl();\n  const intlLabel = formatMessage({ id: label || name, defaultMessage: label || name });\n\n  return (\n    <Flex justifyContent=\"center\">\n      <Box\n        paddingTop={3}\n        paddingBottom={3}\n        paddingRight={4}\n        paddingLeft={4}\n        borderRadius=\"26px\"\n        background=\"neutral0\"\n        shadow=\"filterShadow\"\n        color=\"neutral500\"\n      >\n        <Flex direction=\"column\" justifyContent=\"center\">\n          <Flex maxWidth={pxToRem(356)}>\n            <Typography variant=\"pi\" textColor=\"neutral600\" fontWeight=\"bold\" ellipsis>\n              {intlLabel}&nbsp;\n            </Typography>\n            <Typography variant=\"pi\" textColor=\"neutral600\" fontWeight=\"bold\">\n              ({numberOfComponents})\n            </Typography>\n            {required && <Typography textColor=\"danger600\">*</Typography>}\n            {labelAction && <Box paddingLeft={1}>{labelAction}</Box>}\n          </Flex>\n          {intlDescription && (\n            <Box paddingTop={1} maxWidth={pxToRem(356)}>\n              <Typography variant=\"pi\" textColor=\"neutral600\" ellipsis>\n                {formatMessage(intlDescription)}\n              </Typography>\n            </Box>\n          )}\n        </Flex>\n      </Box>\n    </Flex>\n  );\n};\n\nexport { DynamicZoneLabel };\nexport type { DynamicZoneLabelProps };\n","import * as React from 'react';\n\nimport { Box, Flex, VisuallyHidden } from '@strapi/design-system';\nimport { NotAllowedInput, useCMEditViewDataManager, useNotification } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { useContentTypeLayout } from '../../hooks/useContentTypeLayout';\nimport { getTranslation } from '../../utils/translations';\n\nimport { AddComponentButton } from './AddComponentButton';\nimport { ComponentPicker } from './ComponentPicker';\nimport { DynamicComponent, DynamicComponentProps } from './DynamicComponent';\nimport { DynamicZoneLabel } from './DynamicZoneLabel';\n\nimport type { EditLayoutRow } from '../../utils/layouts';\nimport type { Attribute } from '@strapi/types';\n\ninterface DynamicZoneProps extends Pick<EditLayoutRow, 'metadatas'> {\n  name: string;\n  fieldSchema?: Attribute.DynamicZone;\n  labelAction?: React.ReactNode;\n}\n\nconst DynamicZone = ({ name, labelAction, fieldSchema, metadatas }: DynamicZoneProps) => {\n  // We cannot use the default props here\n  const { max = Infinity, min = -Infinity, components = [], required = false } = fieldSchema ?? {};\n\n  const [addComponentIsOpen, setAddComponentIsOpen] = React.useState(false);\n  const [liveText, setLiveText] = React.useState('');\n\n  const {\n    addComponentToDynamicZone,\n    createActionAllowedFields,\n    isCreatingEntry,\n    formErrors,\n    modifiedData,\n    moveComponentField,\n    removeComponentFromDynamicZone,\n    readActionAllowedFields,\n    updateActionAllowedFields,\n  } = useCMEditViewDataManager();\n\n  const dynamicDisplayedComponents = React.useMemo(\n    () =>\n      ((modifiedData?.[name] as []) ?? []).map(\n        (data: Attribute.GetValue<Attribute.DynamicZone>[number] & { __temp_key__: number }) => {\n          return {\n            componentUid: data.__component,\n            id: data.id ?? data.__temp_key__,\n          };\n        }\n      ),\n    [modifiedData, name]\n  );\n\n  const { getComponentLayout, components: allComponents } = useContentTypeLayout();\n\n  const dynamicComponentsByCategory = React.useMemo(() => {\n    return components.reduce<NonNullable<DynamicComponentProps['dynamicComponentsByCategory']>>(\n      (acc, componentUid) => {\n        const layout = getComponentLayout(componentUid);\n\n        const { category, info, attributes } = layout;\n\n        const component = { componentUid, info, attributes };\n\n        if (!acc[category]) {\n          acc[category] = [];\n        }\n\n        acc[category] = [...acc[category], component];\n\n        return acc;\n      },\n      {}\n    );\n  }, [components, getComponentLayout]);\n\n  const { formatMessage } = useIntl();\n\n  const toggleNotification = useNotification();\n\n  const isFieldAllowed = (\n    isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields\n  ).includes(name);\n\n  const isFieldReadable = (isCreatingEntry ? [] : readActionAllowedFields).includes(name);\n\n  const dynamicDisplayedComponentsLength = dynamicDisplayedComponents.length;\n  const intlDescription = metadatas.description\n    ? { id: metadatas.description, defaultMessage: metadatas.description }\n    : undefined;\n\n  const dynamicZoneError = formErrors[name];\n\n  const missingComponentNumber = min - dynamicDisplayedComponentsLength;\n  const hasError = !!dynamicZoneError;\n\n  const handleAddComponent = (componentUid: string, position?: number) => {\n    setAddComponentIsOpen(false);\n\n    const componentLayoutData = getComponentLayout(componentUid);\n\n    /**\n     * You have to pass _every component_ because the EditViewDataManager is not part of redux\n     * and you could have a dynamic component option that contains a component that is not part\n     * of the former list. Therefore it's schema is inaccessible leading to a crash.\n     */\n    addComponentToDynamicZone?.(name, componentLayoutData, allComponents, hasError, position);\n  };\n\n  const handleClickOpenPicker = () => {\n    if (dynamicDisplayedComponentsLength < max) {\n      setAddComponentIsOpen((prev) => !prev);\n    } else {\n      toggleNotification({\n        type: 'info',\n        message: { id: getTranslation('components.notification.info.maximum-requirement') },\n      });\n    }\n  };\n\n  const handleMoveComponent = (newIndex: number, currentIndex: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.reorder'),\n          defaultMessage: '{item}, moved. New position in list: {position}.',\n        },\n        {\n          item: `${name}.${currentIndex}`,\n          position: getItemPos(newIndex),\n        }\n      )\n    );\n\n    moveComponentField?.({\n      name,\n      newIndex,\n      currentIndex,\n    });\n  };\n\n  const getItemPos = (index: number) => `${index + 1} of ${dynamicDisplayedComponents.length}`;\n\n  const handleCancel = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.cancel-item'),\n          defaultMessage: '{item}, dropped. Re-order cancelled.',\n        },\n        {\n          item: `${name}.${index}`,\n        }\n      )\n    );\n  };\n\n  const handleGrabItem = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.grab-item'),\n          defaultMessage: `{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel.`,\n        },\n        {\n          item: `${name}.${index}`,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  const handleDropItem = (index: number) => {\n    setLiveText(\n      formatMessage(\n        {\n          id: getTranslation('dnd.drop-item'),\n          defaultMessage: `{item}, dropped. Final position in list: {position}.`,\n        },\n        {\n          item: `${name}.${index}`,\n          position: getItemPos(index),\n        }\n      )\n    );\n  };\n\n  const handleRemoveComponent = (name: string, currentIndex: number) => () => {\n    removeComponentFromDynamicZone?.(name, currentIndex);\n  };\n\n  const renderButtonLabel = () => {\n    if (addComponentIsOpen) {\n      return formatMessage({ id: 'app.utils.close-label', defaultMessage: 'Close' });\n    }\n\n    if (hasError && dynamicZoneError.id?.includes('max')) {\n      return formatMessage({\n        id: 'components.Input.error.validation.max',\n        defaultMessage: 'The value is too high.',\n      });\n    }\n\n    if (hasError && dynamicZoneError.id?.includes('min')) {\n      return formatMessage(\n        {\n          id: getTranslation(`components.DynamicZone.missing-components`),\n          defaultMessage:\n            'There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}',\n        },\n        { number: missingComponentNumber }\n      );\n    }\n\n    return formatMessage(\n      {\n        id: getTranslation('components.DynamicZone.add-component'),\n        defaultMessage: 'Add a component to {componentName}',\n      },\n      { componentName: metadatas.label || name }\n    );\n  };\n\n  if (!isFieldAllowed && (isCreatingEntry || (!isFieldReadable && !isCreatingEntry))) {\n    return (\n      <NotAllowedInput\n        description={intlDescription}\n        intlLabel={{ id: metadatas.label, defaultMessage: metadatas.label }}\n        labelAction={labelAction}\n        name={name}\n      />\n    );\n  }\n\n  const ariaDescriptionId = `${name}-item-instructions`;\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n      {dynamicDisplayedComponentsLength > 0 && (\n        <Box>\n          <DynamicZoneLabel\n            intlDescription={intlDescription}\n            label={metadatas.label}\n            labelAction={labelAction}\n            name={name}\n            numberOfComponents={dynamicDisplayedComponentsLength}\n            required={required}\n          />\n          <VisuallyHidden id={ariaDescriptionId}>\n            {formatMessage({\n              id: getTranslation('dnd.instructions'),\n              defaultMessage: `Press spacebar to grab and re-order`,\n            })}\n          </VisuallyHidden>\n          <VisuallyHidden aria-live=\"assertive\">{liveText}</VisuallyHidden>\n          <ol aria-describedby={ariaDescriptionId}>\n            {dynamicDisplayedComponents.map(({ componentUid, id }, index) => (\n              <DynamicComponent\n                componentUid={componentUid}\n                formErrors={formErrors}\n                key={`${componentUid}-${id}`}\n                index={index}\n                isFieldAllowed={isFieldAllowed}\n                name={name}\n                onMoveComponent={handleMoveComponent}\n                onRemoveComponentClick={handleRemoveComponent(name, index)}\n                onCancel={handleCancel}\n                onDropItem={handleDropItem}\n                onGrabItem={handleGrabItem}\n                onAddComponent={handleAddComponent}\n                dynamicComponentsByCategory={dynamicComponentsByCategory}\n              />\n            ))}\n          </ol>\n        </Box>\n      )}\n      <Flex justifyContent=\"center\">\n        <AddComponentButton\n          hasError={hasError}\n          isDisabled={!isFieldAllowed}\n          isOpen={addComponentIsOpen}\n          onClick={handleClickOpenPicker}\n        >\n          {renderButtonLabel()}\n        </AddComponentButton>\n      </Flex>\n      <ComponentPicker\n        dynamicComponentsByCategory={dynamicComponentsByCategory}\n        isOpen={addComponentIsOpen}\n        onClickAddComponent={handleAddComponent}\n      />\n    </Flex>\n  );\n};\n\nDynamicZone.defaultProps = {\n  fieldSchema: {},\n  labelAction: null,\n};\n\nDynamicZone.propTypes = {\n  fieldSchema: PropTypes.shape({\n    components: PropTypes.array,\n    max: PropTypes.number,\n    min: PropTypes.number,\n    required: PropTypes.bool,\n  }),\n  labelAction: PropTypes.element,\n  metadatas: PropTypes.shape({\n    description: PropTypes.string,\n    label: PropTypes.string,\n  }).isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nexport { DynamicZone };\nexport type { DynamicZoneProps };\n","import { translatedErrors as errorsTrads } from '@strapi/helper-plugin';\nimport { Attribute } from '@strapi/types';\nimport isBoolean from 'lodash/isBoolean';\nimport isEmpty from 'lodash/isEmpty';\nimport isNaN from 'lodash/isNaN';\nimport toNumber from 'lodash/toNumber';\nimport * as yup from 'yup';\n\nimport { isFieldTypeNumber } from './fields';\nimport { FormattedComponentLayout, FormattedContentTypeLayout } from './layouts';\n\nimport type Lazy from 'yup/lib/Lazy';\nimport type { MixedSchema } from 'yup/lib/mixed';\n\n/* -------------------------------------------------------------------------------------------------\n * createYupSchema\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * TODO: this whole thing needs actually fixing because it's useless without types\n * but it obviously something has gone wrong between conception and now for it to need\n * this many ts-error directives.\n *\n * See CONTENT-2107\n */\n\ninterface CreateYupSchemaOpts {\n  isCreatingEntry?: boolean;\n  isDraft?: boolean;\n  isFromComponent?: boolean;\n  isJSONTestDisabled?: boolean;\n}\n\nconst createYupSchema = (\n  model: FormattedContentTypeLayout | FormattedComponentLayout,\n  { components }: { components: Record<string, FormattedComponentLayout> },\n  options: CreateYupSchemaOpts = {\n    isCreatingEntry: true,\n    isDraft: true,\n    isFromComponent: false,\n    isJSONTestDisabled: false,\n  }\n) => {\n  const { attributes } = model;\n\n  return yup.object().shape(\n    Object.keys(attributes).reduce<Record<string, MixedSchema | Lazy<any>>>((acc, current) => {\n      const attribute = attributes[current];\n\n      if (\n        attribute.type !== 'relation' &&\n        attribute.type !== 'component' &&\n        attribute.type !== 'dynamiczone'\n      ) {\n        // @ts-expect-error – see comment at top of file\n        const formatted = createYupSchemaAttribute(attribute.type, attribute, options);\n        acc[current] = formatted;\n      }\n\n      if (attribute.type === 'relation') {\n        acc[current] = [\n          'oneWay',\n          'oneToOne',\n          'manyToOne',\n          'oneToManyMorph',\n          'oneToOneMorph',\n          // @ts-expect-error – see comment at top of file\n        ].includes(attribute.relationType)\n          ? yup.object().nullable()\n          : yup.array().nullable();\n      }\n\n      if (attribute.type === 'component') {\n        const componentFieldSchema = createYupSchema(\n          components[attribute.component],\n          {\n            components,\n          },\n          { ...options, isFromComponent: true }\n        );\n\n        if (attribute.repeatable === true) {\n          const { min, max, required } = attribute;\n\n          const componentSchema = yup.lazy((value) => {\n            let baseSchema = yup.array().of(componentFieldSchema);\n\n            if (min) {\n              if (required) {\n                baseSchema = baseSchema.min(min, errorsTrads.min);\n                // @ts-expect-error – see comment at top of file\n              } else if (required !== true && isEmpty(value)) {\n                // @ts-expect-error – see comment at top of file\n                baseSchema = baseSchema.nullable();\n              } else {\n                baseSchema = baseSchema.min(min, errorsTrads.min);\n              }\n            } else if (required && !options.isDraft) {\n              baseSchema = baseSchema.min(1, errorsTrads.required);\n            }\n\n            if (max) {\n              baseSchema = baseSchema.max(max, errorsTrads.max);\n            }\n\n            return baseSchema;\n          });\n\n          acc[current] = componentSchema;\n\n          return acc;\n        }\n        const componentSchema = yup.lazy((obj) => {\n          if (obj !== undefined) {\n            return attribute.required === true && !options.isDraft\n              ? componentFieldSchema.defined()\n              : componentFieldSchema.nullable();\n          }\n\n          return attribute.required === true ? yup.object().defined() : yup.object().nullable();\n        });\n\n        acc[current] = componentSchema;\n\n        return acc;\n      }\n\n      if (attribute.type === 'dynamiczone') {\n        let dynamicZoneSchema = yup.array().of(\n          // @ts-expect-error – see comment at top of file\n          yup.lazy(({ __component }) => {\n            return createYupSchema(\n              components[__component],\n              { components },\n              { ...options, isFromComponent: true }\n            );\n          })\n        );\n\n        const { max, min } = attribute;\n\n        if (min) {\n          if (attribute.required) {\n            dynamicZoneSchema = dynamicZoneSchema\n              // @ts-expect-error – see comment at top of file\n              .test('min', errorsTrads.min, (value) => {\n                if (options.isCreatingEntry) {\n                  return value && value.length >= min;\n                }\n\n                if (value === undefined) {\n                  return true;\n                }\n\n                return value !== null && value.length >= min;\n              })\n              .test('required', errorsTrads.required, (value) => {\n                if (options.isCreatingEntry) {\n                  return value !== null || value !== undefined;\n                }\n\n                if (value === undefined) {\n                  return true;\n                }\n\n                return value !== null;\n              });\n          } else {\n            // @ts-expect-error – see comment at top of file\n            dynamicZoneSchema = dynamicZoneSchema.notEmptyMin(min);\n          }\n        } else if (attribute.required && !options.isDraft) {\n          dynamicZoneSchema = dynamicZoneSchema.test('required', errorsTrads.required, (value) => {\n            if (options.isCreatingEntry) {\n              return value !== null || value !== undefined;\n            }\n\n            if (value === undefined) {\n              return true;\n            }\n\n            return value !== null;\n          });\n        }\n\n        if (max) {\n          dynamicZoneSchema = dynamicZoneSchema.max(max, errorsTrads.max);\n        }\n\n        acc[current] = dynamicZoneSchema;\n      }\n\n      return acc;\n    }, {})\n  );\n};\n\nconst createYupSchemaAttribute = (\n  type: Attribute.Any['type'],\n  validations: Exclude<\n    Attribute.Any,\n    { type: 'dynamiczone' } | { type: 'component' } | { type: 'relation' }\n  >,\n  options: Required<CreateYupSchemaOpts>\n) => {\n  let schema = yup.mixed();\n\n  if (['string', 'uid', 'text', 'richtext', 'email', 'password', 'enumeration'].includes(type)) {\n    schema = yup.string();\n  }\n\n  if (type === 'blocks') {\n    schema = yup.mixed().test('isJSON', errorsTrads.json, (value) => {\n      // Disable the test for bulk publish, it's valid when it comes from the db\n      if (options.isJSONTestDisabled) {\n        return true;\n      }\n\n      // Don't run validations on drafts\n      if (options.isDraft) {\n        return true;\n      }\n\n      // The backend validates the actual schema, check if a value different than null is not an array\n      if (value && !Array.isArray(value)) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  if (type === 'json') {\n    schema = yup\n      // @ts-expect-error – see comment at top of file\n      .mixed(errorsTrads.json)\n      .test('isJSON', errorsTrads.json, (value) => {\n        // Disable the test for bulk publish, it's valid when it comes from the db\n        if (options.isJSONTestDisabled) {\n          return true;\n        }\n\n        if (!value || !value.length) {\n          return true;\n        }\n\n        try {\n          JSON.parse(value);\n\n          return true;\n        } catch (err) {\n          return false;\n        }\n      })\n      .nullable()\n      .test('required', errorsTrads.required, (value) => {\n        if (validations.required && (!value || !value.length)) {\n          return false;\n        }\n\n        return true;\n      });\n  }\n\n  if (type === 'email') {\n    // @ts-expect-error – see comment at top of file\n    schema = schema.email(errorsTrads.email);\n  }\n\n  if (['number', 'integer', 'float', 'decimal'].includes(type)) {\n    schema = yup\n      .number()\n      .transform((cv) => (isNaN(cv) ? undefined : cv))\n      // @ts-expect-error – see comment at top of file\n      .typeError();\n  }\n\n  if (type === 'biginteger') {\n    schema = yup.string().matches(/^-?\\d*$/);\n  }\n\n  if (['date', 'datetime'].includes(type)) {\n    schema = yup.date();\n  }\n\n  Object.keys(validations).forEach((validation) => {\n    const validationValue = validations[validation as keyof typeof validations];\n\n    if (\n      !!validationValue ||\n      // @ts-expect-error – see comment at top of file\n      (!isBoolean(validationValue) && Number.isInteger(Math.floor(validationValue))) ||\n      // @ts-expect-error – see comment at top of file\n      validationValue === 0\n    ) {\n      switch (validation) {\n        case 'required': {\n          if (!options.isDraft) {\n            if (type === 'password' && options.isCreatingEntry) {\n              schema = schema.required(errorsTrads.required);\n            }\n\n            if (type !== 'password') {\n              if (options.isCreatingEntry) {\n                schema = schema.required(errorsTrads.required);\n              } else {\n                schema = schema.test('required', errorsTrads.required, (value) => {\n                  // Field is not touched and the user is editing the entry\n                  if (value === undefined && !options.isFromComponent) {\n                    return true;\n                  }\n\n                  if (isFieldTypeNumber(type)) {\n                    if (value === 0) {\n                      return true;\n                    }\n\n                    return !!value;\n                  }\n\n                  if (type === 'boolean') {\n                    // Boolean value can be undefined/unset in modifiedData when generated in a new component\n                    return value !== null && value !== undefined;\n                  }\n\n                  if (type === 'date' || type === 'datetime') {\n                    if (typeof value === 'string') {\n                      return !isEmpty(value);\n                    }\n\n                    return !isEmpty(value?.toString());\n                  }\n\n                  return !isEmpty(value);\n                });\n              }\n            }\n          }\n\n          break;\n        }\n\n        case 'max': {\n          if (type === 'biginteger') {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.isInferior(errorsTrads.max, validationValue);\n          } else {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.max(validationValue, errorsTrads.max);\n          }\n          break;\n        }\n        case 'maxLength':\n          // @ts-expect-error – see comment at top of file\n          schema = schema.max(validationValue, errorsTrads.maxLength);\n          break;\n        case 'min': {\n          if (type === 'biginteger') {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.isSuperior(errorsTrads.min, validationValue);\n          } else {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.min(validationValue, errorsTrads.min);\n          }\n          break;\n        }\n        case 'minLength': {\n          if (!options.isDraft) {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.min(validationValue, errorsTrads.minLength);\n          }\n          break;\n        }\n        case 'regex':\n          // @ts-expect-error – see comment at top of file\n          schema = schema.matches(new RegExp(validationValue), {\n            message: errorsTrads.regex,\n            excludeEmptyString: !validations.required,\n          });\n          break;\n        case 'lowercase':\n          if (['text', 'textarea', 'email', 'string'].includes(type)) {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.strict().lowercase();\n          }\n          break;\n        case 'uppercase':\n          if (['text', 'textarea', 'email', 'string'].includes(type)) {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.strict().uppercase();\n          }\n          break;\n        case 'positive':\n          if (isFieldTypeNumber(type)) {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.positive();\n          }\n          break;\n        case 'negative':\n          if (isFieldTypeNumber(type)) {\n            // @ts-expect-error – see comment at top of file\n            schema = schema.negative();\n          }\n          break;\n        default:\n          schema = schema.nullable();\n      }\n    }\n  });\n\n  return schema;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Addition Yup methods\n * -----------------------------------------------------------------------------------------------*/\n\nyup.addMethod(yup.mixed, 'defined', function () {\n  return this.test('defined', errorsTrads.required, (value) => value !== undefined);\n});\n\nyup.addMethod(yup.array, 'notEmptyMin', function (min) {\n  return this.test('notEmptyMin', errorsTrads.min, (value) => {\n    if (!value || !value.length) {\n      return true;\n    }\n\n    return value.length >= min;\n  });\n});\n\nyup.addMethod(yup.string, 'isInferior', function (message, max) {\n  return this.test('isInferior', message, function (value) {\n    if (!value) {\n      return true;\n    }\n\n    if (Number.isNaN(toNumber(value))) {\n      return true;\n    }\n\n    return toNumber(max) >= toNumber(value);\n  });\n});\n\nyup.addMethod(yup.string, 'isSuperior', function (message, min) {\n  return this.test('isSuperior', message, function (value) {\n    if (!value) {\n      return true;\n    }\n\n    if (Number.isNaN(toNumber(value))) {\n      return true;\n    }\n\n    return toNumber(value) >= toNumber(min);\n  });\n});\n\nexport { createYupSchema };\n","const CREATOR_FIELDS = ['createdBy', 'updatedBy'];\n\nexport { CREATOR_FIELDS };\n","import type { FormattedComponentLayout } from '../../../utils/layouts';\nimport type { Attribute, Common } from '@strapi/types';\n\ntype ReplacementFn<\n  TData extends Record<string, any>,\n  TKey extends keyof TData,\n  TReplacementValue\n> = (data: TData[TKey], args: { path: string[]; parent: TData }) => TReplacementValue;\n\n/**\n * This function will recursively find everything and replace it with a value\n * based on the boolean return of the predicate function e.g. `type === 'relation'`.\n *\n * If you provide a function it will call that function with data value you're replacing with\n * a second argument with the path to the value and it's parent.\n *\n * It's original use was for the preperation of action items for the INIT_FORM action. It requires\n * knowledge of the `components` in the entity, however `components` doesn't change nor does the predicate\n * function so we don't need to pass it everytime hence why it's curried.\n *\n */\nconst findAllAndReplaceSetup = <\n  TReplacementValue,\n  TData extends Record<string, any> = Record<string, any>\n>(\n  components: Record<string, FormattedComponentLayout>,\n  predicate: (\n    value: FormattedComponentLayout['attributes'][string],\n    args: { path: string[]; parent: { [key: string]: Attribute.Any } | Attribute.Any }\n  ) => boolean = () => false,\n  replacement?: ReplacementFn<TData, keyof TData, TReplacementValue> | TReplacementValue\n) => {\n  const findAllAndReplace = <TData extends Record<string, any> = Record<string, any>>(\n    data: TData,\n    attributes: { [key: string]: Attribute.Any },\n    {\n      ignoreFalseyValues = false,\n      path = [],\n      parent = attributes,\n    }: {\n      ignoreFalseyValues?: boolean;\n      path?: string[];\n      parent?: { [key: string]: Attribute.Any } | Attribute.Any;\n    } = {}\n  ) => {\n    return Object.entries(attributes).reduce<Record<string, any>>(\n      (acc, [key, value]) => {\n        if (\n          ignoreFalseyValues &&\n          (acc === null || acc === undefined || acc[key] === undefined || acc[key] === null)\n        ) {\n          return acc;\n        }\n\n        if (predicate(value, { path: [...path, key], parent })) {\n          acc[key] =\n            typeof replacement === 'function'\n              ? // @ts-expect-error – TODO: Fix this.\n                replacement(acc[key], { path: [...path, key], parent: acc })\n              : replacement;\n        }\n\n        if (value.type === 'component') {\n          const componentAttributes = components[value.component].attributes;\n\n          if (!value.repeatable && acc[key] && typeof acc[key] === 'object') {\n            acc[key] = findAllAndReplace(acc[key], componentAttributes, {\n              ignoreFalseyValues,\n              path: [...path, key],\n              parent: attributes[key],\n            });\n          } else if (value.repeatable && Array.isArray(acc[key])) {\n            acc[key] = (\n              acc[key] as Attribute.GetValue<Attribute.Component<Common.UID.Component, true>>\n            ).map((datum, index) => {\n              const data = findAllAndReplace(datum, componentAttributes, {\n                ignoreFalseyValues,\n                path: [...path, key, index.toString()],\n                parent: attributes[key],\n              });\n\n              return data;\n            });\n          }\n        } else if (value.type === 'dynamiczone' && Array.isArray(acc[key])) {\n          acc[key] = (acc[key] as Attribute.GetValue<Attribute.DynamicZone>).map((datum, index) => {\n            const componentAttributes = components[datum.__component].attributes;\n            const data = findAllAndReplace(datum, componentAttributes, {\n              ignoreFalseyValues,\n              path: [...path, key, index.toString()],\n              parent: attributes[key],\n            });\n\n            return data;\n          });\n        }\n\n        return acc;\n      },\n      { ...data }\n    );\n  };\n\n  return findAllAndReplace;\n};\n\nexport { findAllAndReplaceSetup as findAllAndReplace };\n","const moveFields = <TValue>(initialValue: TValue[], from: number, to: number, value: TValue) => {\n  const returnedValue = initialValue.slice();\n\n  returnedValue.splice(from, 1);\n  returnedValue.splice(to, 0, value);\n\n  return returnedValue;\n};\n\nexport { moveFields };\n","import { generateNKeysBetween } from 'fractional-indexing';\nimport produce from 'immer';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport take from 'lodash/take';\nimport uniqBy from 'lodash/uniqBy';\nimport unset from 'lodash/unset';\n\nimport { CREATOR_FIELDS } from '../../constants/attributes';\nimport { getMaxTempKey } from '../../utils/fields';\n\nimport { findAllAndReplace } from './utils/findAllAndReplace';\nimport { moveFields } from './utils/moveFields';\n\nimport type { FormattedComponentLayout, FormattedContentTypeLayout } from '../../utils/layouts';\nimport type { Attribute, Entity } from '@strapi/types';\n\ninterface EditViewDataManagerState {\n  componentsDataStructure: Record<string, any>;\n  contentTypeDataStructure: Record<string, any>;\n  formErrors: Record<string, any>;\n  initialData: Record<string, Attribute.GetValue<Attribute.Any>>;\n  modifiedData: Record<string, Attribute.GetValue<Attribute.Any>>;\n  shouldCheckErrors: boolean;\n  modifiedDZName: string | null;\n  publishConfirmation: {\n    show: boolean;\n    draftCount: number;\n  };\n}\n\nconst initialState = {\n  componentsDataStructure: {},\n  contentTypeDataStructure: {},\n  formErrors: {},\n  initialData: {},\n  modifiedData: {},\n  shouldCheckErrors: false,\n  modifiedDZName: null,\n  publishConfirmation: {\n    show: false,\n    draftCount: 0,\n  },\n} satisfies EditViewDataManagerState;\n\ninterface AddNonRepeatableComponentToFieldAction {\n  type: 'ADD_NON_REPEATABLE_COMPONENT_TO_FIELD';\n  componentLayoutData: FormattedComponentLayout;\n  allComponents: Record<string, FormattedComponentLayout>;\n  keys: string[];\n}\n\ninterface AddComponentToDynamicZoneAction {\n  type: 'ADD_COMPONENT_TO_DYNAMIC_ZONE';\n  componentLayoutData: FormattedComponentLayout;\n  allComponents: Record<string, FormattedComponentLayout>;\n  keys: string[];\n  shouldCheckErrors: boolean;\n  position?: number;\n}\n\ninterface AddRepeatableComponentToFieldAction\n  extends Omit<AddComponentToDynamicZoneAction, 'type'> {\n  type: 'ADD_REPEATABLE_COMPONENT_TO_FIELD';\n}\n\ninterface LoadRelationAction {\n  type: 'LOAD_RELATION';\n  initialDataPath: string[];\n  modifiedDataPath: string[];\n  value: Omit<RelationData, '__temp_key__'>[];\n}\n\ninterface ConnectRelationAction {\n  type: 'CONNECT_RELATION';\n  keys: string[];\n  value: Omit<RelationData, '__temp_key__'>;\n  toOneRelation?: boolean;\n}\n\ninterface DisconnectRelationAction {\n  type: 'DISCONNECT_RELATION';\n  keys: string[];\n  id: Entity.ID;\n}\n\ninterface MoveComponentFieldAction {\n  type: 'MOVE_COMPONENT_FIELD';\n  keys: string[];\n  oldIndex: number;\n  newIndex: number;\n}\n\ninterface MoveComponentUpAction {\n  type: 'MOVE_COMPONENT_UP';\n  currentIndex: number;\n  dynamicZoneName: string;\n  shouldCheckErrors: boolean;\n}\n\ninterface MoveComponentDownAction extends Omit<MoveComponentUpAction, 'type'> {\n  type: 'MOVE_COMPONENT_DOWN';\n}\n\ninterface MoveFieldAction {\n  type: 'MOVE_FIELD';\n  keys: string[];\n  dragIndex: number;\n  overIndex: number;\n}\n\ninterface InitFormAction {\n  type: 'INIT_FORM';\n  initialValues: Record<string, any>;\n  components: Record<string, FormattedComponentLayout>;\n  attributes: FormattedContentTypeLayout['attributes'];\n  setModifiedDataOnly?: boolean;\n}\n\ninterface OnChangeAction {\n  type: 'ON_CHANGE';\n  keys: string[];\n  value: Attribute.GetValue<Attribute.Any>;\n  shouldSetInitialValue?: boolean;\n}\n\ninterface RemoveComponentFromDynamicZoneAction {\n  type: 'REMOVE_COMPONENT_FROM_DYNAMIC_ZONE';\n  dynamicZoneName: string;\n  index: number;\n  shouldCheckErrors: boolean;\n}\n\ninterface RemoveComponentFromFieldAction {\n  type: 'REMOVE_COMPONENT_FROM_FIELD';\n  keys: string[];\n}\n\ninterface RemovePasswordFieldAction {\n  type: 'REMOVE_PASSWORD_FIELD';\n  keys: string[];\n}\n\ninterface RemoveRepeatableFieldAction {\n  type: 'REMOVE_REPEATABLE_FIELD';\n  keys: string[];\n}\n\ninterface ReorderRelationAction {\n  type: 'REORDER_RELATION';\n  keys: string[];\n  oldIndex: number;\n  newIndex: number;\n}\n\ninterface SetDefaultDataStructuresAction {\n  type: 'SET_DEFAULT_DATA_STRUCTURES';\n  componentsDataStructure: Record<string, any>;\n  contentTypeDataStructure: Record<string, any>;\n}\n\ninterface SetFormErrorsAction {\n  type: 'SET_FORM_ERRORS';\n  errors: Record<string, any>;\n}\n\ninterface TriggerFormValidationAction {\n  type: 'TRIGGER_FORM_VALIDATION';\n}\n\ninterface SetPublishConfirmationAction {\n  type: 'SET_PUBLISH_CONFIRMATION';\n  publishConfirmation: {\n    show: boolean;\n    draftCount: number;\n  };\n}\n\ninterface ResetPublishConfirmationAction {\n  type: 'RESET_PUBLISH_CONFIRMATION';\n}\n\ntype Action =\n  | AddNonRepeatableComponentToFieldAction\n  | AddComponentToDynamicZoneAction\n  | AddRepeatableComponentToFieldAction\n  | LoadRelationAction\n  | ConnectRelationAction\n  | DisconnectRelationAction\n  | MoveComponentFieldAction\n  | MoveComponentUpAction\n  | MoveComponentDownAction\n  | MoveFieldAction\n  | InitFormAction\n  | OnChangeAction\n  | RemoveComponentFromDynamicZoneAction\n  | RemoveComponentFromFieldAction\n  | RemovePasswordFieldAction\n  | RemoveRepeatableFieldAction\n  | ReorderRelationAction\n  | SetDefaultDataStructuresAction\n  | SetFormErrorsAction\n  | TriggerFormValidationAction\n  | SetPublishConfirmationAction\n  | ResetPublishConfirmationAction;\n\nexport interface RelationData {\n  id: Entity.ID;\n  __temp_key__: number;\n}\n\nconst reducer = (state: EditViewDataManagerState, action: Action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case 'ADD_NON_REPEATABLE_COMPONENT_TO_FIELD': {\n        const { componentLayoutData, allComponents } = action;\n\n        const defaultDataStructure = {\n          ...state.componentsDataStructure[componentLayoutData.uid],\n        };\n\n        const findAllRelationsAndReplaceWithEmptyArray = findAllAndReplace(\n          allComponents,\n          (value) => value.type === 'relation',\n          []\n        );\n\n        const componentDataStructure = findAllRelationsAndReplaceWithEmptyArray(\n          defaultDataStructure,\n          componentLayoutData.attributes\n        );\n\n        set(draftState, ['modifiedData', ...action.keys], componentDataStructure);\n\n        break;\n      }\n      case 'ADD_COMPONENT_TO_DYNAMIC_ZONE':\n      case 'ADD_REPEATABLE_COMPONENT_TO_FIELD': {\n        const {\n          keys,\n          allComponents,\n          componentLayoutData,\n          shouldCheckErrors,\n          position = undefined,\n        } = action;\n\n        if (shouldCheckErrors) {\n          draftState.shouldCheckErrors = !state.shouldCheckErrors;\n        }\n\n        if (action.type === 'ADD_COMPONENT_TO_DYNAMIC_ZONE') {\n          draftState.modifiedDZName = keys[0];\n        }\n\n        const currentValue = [...get(state, ['modifiedData', ...keys], [])];\n\n        let actualPosition = position;\n\n        if (actualPosition === undefined) {\n          actualPosition = currentValue.length;\n        } else if (actualPosition < 0) {\n          actualPosition = 0;\n        }\n\n        const defaultDataStructure =\n          action.type === 'ADD_COMPONENT_TO_DYNAMIC_ZONE'\n            ? {\n                ...state.componentsDataStructure[componentLayoutData.uid],\n                __component: componentLayoutData.uid,\n                __temp_key__: getMaxTempKey(currentValue) + 1,\n              }\n            : {\n                ...state.componentsDataStructure[componentLayoutData.uid],\n                __temp_key__: getMaxTempKey(currentValue) + 1,\n              };\n\n        const findAllRelationsAndReplaceWithEmptyArray = findAllAndReplace(\n          allComponents,\n          (value) => value.type === 'relation',\n          []\n        );\n\n        const componentDataStructure = findAllRelationsAndReplaceWithEmptyArray(\n          defaultDataStructure,\n          componentLayoutData.attributes\n        );\n\n        currentValue.splice(actualPosition, 0, componentDataStructure);\n\n        set(draftState, ['modifiedData', ...keys], currentValue);\n\n        break;\n      }\n      case 'LOAD_RELATION': {\n        const { initialDataPath, modifiedDataPath, value } = action;\n\n        const initialDataRelations = (get(state, initialDataPath) ?? []) as RelationData[];\n        const modifiedDataRelations = get(state, modifiedDataPath);\n\n        const valuesToLoad = value.filter((relation) => {\n          return !initialDataRelations.some((initialDataRelation) => {\n            return initialDataRelation.id === relation.id;\n          });\n        });\n\n        const keys = generateNKeysBetween(\n          null,\n          modifiedDataRelations[0]?.__temp_key__,\n          valuesToLoad.length\n        );\n\n        /**\n         * Check if the values we're loading are already in initial\n         * data if they are then we don't need to load them at all\n         */\n\n        const valuesWithKeys = valuesToLoad.map((relation, index) => ({\n          ...relation,\n          __temp_key__: keys[index],\n        }));\n\n        /**\n         * We need to set the value also on modifiedData, because initialData\n         * and modifiedData need to stay in sync, so that the CM can compare\n         * both states, to render the dirty UI state\n         */\n        set(\n          draftState,\n          initialDataPath,\n          uniqBy([...valuesWithKeys, ...initialDataRelations], 'id')\n        );\n        set(\n          draftState,\n          modifiedDataPath,\n          uniqBy([...valuesWithKeys, ...modifiedDataRelations], 'id')\n        );\n\n        break;\n      }\n      case 'CONNECT_RELATION': {\n        const path = ['modifiedData', ...action.keys];\n        const { value, toOneRelation } = action;\n\n        /**\n         * If the field is a single relation field we don't want to append\n         * we just want to replace the value.\n         */\n        if (toOneRelation) {\n          set(draftState, path, [value]);\n        } else {\n          const modifiedDataRelations = get(state, path);\n          const [key] = generateNKeysBetween(modifiedDataRelations.at(-1)?.__temp_key__, null, 1);\n\n          const newRelations = [...modifiedDataRelations, { ...value, __temp_key__: key }];\n          set(draftState, path, newRelations);\n        }\n\n        break;\n      }\n      case 'DISCONNECT_RELATION': {\n        const path = ['modifiedData', ...action.keys];\n        const { id } = action;\n        const modifiedDataRelation = get(state, [...path]) as RelationData[];\n\n        const newRelations = modifiedDataRelation.filter((rel) => rel.id !== id);\n\n        set(draftState, path, newRelations);\n\n        break;\n      }\n      case 'MOVE_COMPONENT_FIELD':\n      case 'REORDER_RELATION': {\n        const { oldIndex, newIndex, keys } = action;\n        const path = ['modifiedData', ...keys];\n        const modifiedDataRelations = get(state, [...path]);\n\n        const currentItem = modifiedDataRelations[oldIndex];\n\n        const newRelations = [...modifiedDataRelations];\n\n        if (action.type === 'REORDER_RELATION') {\n          const startKey =\n            oldIndex > newIndex\n              ? modifiedDataRelations[newIndex - 1]?.__temp_key__\n              : modifiedDataRelations[newIndex]?.__temp_key__;\n          const endKey =\n            oldIndex > newIndex\n              ? modifiedDataRelations[newIndex]?.__temp_key__\n              : modifiedDataRelations[newIndex + 1]?.__temp_key__;\n          const [newKey] = generateNKeysBetween(startKey, endKey, 1);\n\n          newRelations.splice(oldIndex, 1);\n          newRelations.splice(newIndex, 0, { ...currentItem, __temp_key__: newKey });\n        } else {\n          newRelations.splice(oldIndex, 1);\n          newRelations.splice(newIndex, 0, currentItem);\n        }\n\n        set(draftState, path, newRelations);\n\n        break;\n      }\n      /**\n       * This action will be called when you open your entry (first load)\n       * but also every time you press publish.\n       */\n      case 'INIT_FORM': {\n        const { initialValues, components = {}, attributes = {}, setModifiedDataOnly } = action;\n\n        /**\n         * You can't mutate an actions value.\n         * and spreading an object only clones\n         * the first level, the deeply nested values\n         * are a reference.\n         */\n        const data = cloneDeep(initialValues);\n\n        const findAllRelationsAndReplaceWithEmptyArray = findAllAndReplace(\n          components,\n          (value, { path }) => {\n            const fieldName = path[path.length - 1];\n            // We don't replace creator fields because we already return them without need to populate them separately\n            const isCreatorField = CREATOR_FIELDS.includes(fieldName);\n\n            return value.type === 'relation' && !isCreatorField;\n          },\n          (_, { path }) => {\n            if (state.modifiedData?.id === data.id && get(state.modifiedData, path)) {\n              return get(state.modifiedData, path);\n            }\n\n            return [];\n          }\n        );\n\n        const mergedDataWithPreparedRelations = findAllRelationsAndReplaceWithEmptyArray(\n          data,\n          attributes\n        );\n\n        const findComponentsAndReplaceWithTempKey = findAllAndReplace(\n          components,\n          (value) =>\n            value.type === 'dynamiczone' || (value.type === 'component' && !value.repeatable),\n          (data) => {\n            /**\n             * If the data is an array, we have the dynamic zone if it's not, its a regular component.\n             */\n            return Array.isArray(data)\n              ? data.map((datum, index) => ({\n                  ...datum,\n                  __temp_key__: index,\n                }))\n              : {\n                  ...data,\n                  __temp_key__: 0,\n                };\n          }\n        );\n\n        const mergedDataWithTmpKeys = findComponentsAndReplaceWithTempKey(\n          mergedDataWithPreparedRelations,\n          attributes,\n          { ignoreFalseyValues: true }\n        );\n\n        if (!setModifiedDataOnly) {\n          draftState.initialData = mergedDataWithTmpKeys;\n        }\n\n        draftState.modifiedData = mergedDataWithTmpKeys;\n\n        draftState.formErrors = {};\n\n        draftState.modifiedDZName = null;\n        draftState.shouldCheckErrors = false;\n        break;\n      }\n      case 'MOVE_COMPONENT_UP':\n      case 'MOVE_COMPONENT_DOWN': {\n        const { currentIndex, dynamicZoneName, shouldCheckErrors } = action;\n\n        if (shouldCheckErrors) {\n          draftState.shouldCheckErrors = !state.shouldCheckErrors;\n        }\n\n        const currentValue = state.modifiedData[dynamicZoneName];\n        const nextIndex = action.type === 'MOVE_COMPONENT_UP' ? currentIndex - 1 : currentIndex + 1;\n        const valueToInsert = state.modifiedData[dynamicZoneName][currentIndex];\n        const updatedValue = moveFields(currentValue, currentIndex, nextIndex, valueToInsert);\n\n        set(draftState, ['modifiedData', action.dynamicZoneName], updatedValue);\n\n        break;\n      }\n      case 'MOVE_FIELD': {\n        const currentValue = get(state, ['modifiedData', ...action.keys], []).slice();\n        const valueToInsert = get(state, ['modifiedData', ...action.keys, action.dragIndex]);\n        const updatedValue = moveFields(\n          currentValue,\n          action.dragIndex,\n          action.overIndex,\n          valueToInsert\n        );\n\n        set(draftState, ['modifiedData', ...action.keys], updatedValue);\n\n        break;\n      }\n      case 'ON_CHANGE': {\n        const [nonRepeatableComponentKey] = action.keys;\n\n        // This is used to set the initialData for inputs\n        // that needs an asynchronous initial value like the UID field\n        // This is just a temporary patch.\n        // TODO: Refactor the default form creation (workflow) to accept async default values.\n        if (action.shouldSetInitialValue) {\n          set(draftState, ['initialData', ...action.keys], action.value);\n        }\n\n        // FIXME: not sure this is needed...\n        if (\n          action.keys.length === 2 &&\n          get(state, ['modifiedData', nonRepeatableComponentKey]) === null\n        ) {\n          set(draftState, ['modifiedData', nonRepeatableComponentKey], {\n            [action.keys[1]]: action.value,\n          });\n\n          break;\n        }\n\n        set(draftState, ['modifiedData', ...action.keys], action.value);\n\n        break;\n      }\n      case 'REMOVE_COMPONENT_FROM_DYNAMIC_ZONE': {\n        if (action.shouldCheckErrors) {\n          draftState.shouldCheckErrors = !state.shouldCheckErrors;\n        }\n\n        draftState.modifiedData[action.dynamicZoneName].splice(action.index, 1);\n\n        break;\n      }\n      case 'REMOVE_COMPONENT_FROM_FIELD': {\n        const componentPathToRemove = ['modifiedData', ...action.keys];\n\n        set(draftState, componentPathToRemove, null);\n\n        break;\n      }\n      case 'REMOVE_PASSWORD_FIELD': {\n        unset(draftState, ['modifiedData', ...action.keys]);\n\n        break;\n      }\n      case 'REMOVE_REPEATABLE_FIELD': {\n        const keysLength = action.keys.length - 1;\n        const pathToComponentData = ['modifiedData', ...take(action.keys, keysLength)];\n        const hasErrors = Object.keys(state.formErrors).length > 0;\n\n        if (hasErrors) {\n          draftState.shouldCheckErrors = !state.shouldCheckErrors;\n        }\n\n        const currentValue = get(state, pathToComponentData).slice();\n        currentValue.splice(parseInt(action.keys[keysLength], 10), 1);\n\n        set(draftState, pathToComponentData, currentValue);\n\n        break;\n      }\n      case 'SET_DEFAULT_DATA_STRUCTURES': {\n        draftState.componentsDataStructure = action.componentsDataStructure;\n        draftState.contentTypeDataStructure = action.contentTypeDataStructure;\n\n        break;\n      }\n      case 'SET_FORM_ERRORS': {\n        draftState.modifiedDZName = null;\n        draftState.formErrors = action.errors;\n        break;\n      }\n      case 'TRIGGER_FORM_VALIDATION': {\n        const hasErrors = Object.keys(state.formErrors).length > 0;\n\n        if (hasErrors) {\n          draftState.shouldCheckErrors = !state.shouldCheckErrors;\n        }\n\n        break;\n      }\n      case 'SET_PUBLISH_CONFIRMATION': {\n        draftState.publishConfirmation = { ...action.publishConfirmation };\n        break;\n      }\n      case 'RESET_PUBLISH_CONFIRMATION': {\n        draftState.publishConfirmation = { ...state.publishConfirmation, show: false };\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport { reducer, initialState };\nexport type { EditViewDataManagerState };\n","import get from 'lodash/get';\nimport isArray from 'lodash/isArray';\n\nimport { isObject } from '../../../../utils/objects';\nimport { CREATOR_FIELDS } from '../../../constants/attributes';\nimport { getInitialDataPathUsingTempKeys } from '../../../utils/paths';\n\nimport type { FormattedComponentLayout, FormattedContentTypeLayout } from '../../../utils/layouts';\nimport type { RelationData } from '../reducer';\nimport type { Attribute, Common, Entity } from '@strapi/types';\n\nconst cleanData = (\n  {\n    browserState, // the modifiedData from REDUX\n    serverState, // the initialData from REDUX\n  }: { browserState: Record<string, any>; serverState: Record<string, any> },\n  currentSchema: FormattedContentTypeLayout,\n  componentsSchema: Record<string, FormattedComponentLayout>\n) => {\n  const rootServerState = serverState;\n  const rootBrowserState = browserState;\n\n  const recursiveCleanData = (\n    browserState: Record<string, any>,\n    serverState: Record<string, any>,\n    schema: FormattedContentTypeLayout | FormattedComponentLayout,\n    pathToParent: string // the path to the parent of the current entry\n  ) => {\n    return Object.keys(browserState).reduce<Record<string, any>>((acc, current) => {\n      // Creator attributes can be safely ignored because they are handle on the backend\n      if (CREATOR_FIELDS.includes(current)) {\n        return acc;\n      }\n\n      const path = pathToParent ? `${pathToParent}.${current}` : current;\n      const attribute = schema.attributes[current] ?? {};\n      const { type } = attribute;\n\n      // This is the field value\n      const value = get(browserState, current);\n      const oldValue = get(serverState, current);\n      let cleanedData;\n\n      switch (type) {\n        case 'json':\n          cleanedData = JSON.parse(value);\n          break;\n        case 'time': {\n          cleanedData = value;\n\n          // FIXME\n          if (value && value.split(':').length < 3) {\n            cleanedData = `${value}:00`;\n          }\n\n          break;\n        }\n        case 'media':\n          if (attribute.multiple === true) {\n            cleanedData = value ? value.filter((file: unknown) => !(file instanceof File)) : null;\n          } else {\n            cleanedData = get(value, 0) instanceof File ? null : get(value, 'id', null);\n          }\n          break;\n        case 'component':\n          if (attribute.repeatable) {\n            cleanedData = value\n              ? (value as Attribute.GetValue<Attribute.Component<Common.UID.Component, true>>).map(\n                  (data, index) => {\n                    const subCleanedData = recursiveCleanData(\n                      data,\n                      (oldValue ?? [])[index],\n                      componentsSchema[attribute.component],\n                      `${path}.${index}`\n                    );\n\n                    return subCleanedData;\n                  }\n                )\n              : value;\n          } else {\n            cleanedData = value\n              ? recursiveCleanData(value, oldValue, componentsSchema[attribute.component], path)\n              : value;\n          }\n\n          break;\n\n        case 'relation': {\n          const trueInitialDataPath = getInitialDataPathUsingTempKeys(\n            rootServerState,\n            rootBrowserState\n          )(path);\n\n          /**\n           * Because of how repeatable components work when you dig into them the server\n           * will have no object to compare too therefore no relation array will be setup\n           * because the component has not been initialized, therefore we can safely assume\n           * it needs to be added and provide a default empty array.\n           */\n          const actualOldValue = get(rootServerState, trueInitialDataPath, []) as RelationData[];\n\n          interface RelationApiData extends Pick<RelationData, 'id'> {\n            position:\n              | {\n                  before: Entity.ID;\n                  end?: never;\n                }\n              | {\n                  before?: never;\n                  end: boolean;\n                };\n          }\n\n          /**\n           * Instead of the full relation object, we only want to send its ID\n           *  connectedRelations are the items that are in the browserState\n           * array but not in the serverState\n           */\n          const connectedRelations = (value as RelationData[]).reduce<RelationApiData[]>(\n            (acc, relation, currentIndex, array) => {\n              const relationOnServer = actualOldValue.find(\n                (oldRelation) => oldRelation.id === relation.id\n              );\n\n              const relationInFront = array[currentIndex + 1];\n\n              if (!relationOnServer || relationOnServer.__temp_key__ !== relation.__temp_key__) {\n                const position = relationInFront ? { before: relationInFront.id } : { end: true };\n\n                return [...acc, { id: relation.id, position }];\n              }\n\n              return acc;\n            },\n            []\n          );\n\n          /**\n           * disconnectedRelations are the items that are in the serverState but\n           * are no longer in the browserState\n           */\n          const disconnectedRelations = actualOldValue.reduce<Omit<RelationApiData, 'position'>[]>(\n            (acc, relation) => {\n              if (\n                !(value as RelationData[]).find((newRelation) => newRelation.id === relation.id)\n              ) {\n                return [...acc, { id: relation.id }];\n              }\n\n              return acc;\n            },\n            []\n          );\n\n          cleanedData = {\n            disconnect: disconnectedRelations,\n            /**\n             * Reverse the array because the API sequentially goes through the list\n             * so in an instance where you add two to the end it would fail because index0\n             * would want to attach itself to index1 which doesn't exist yet.\n             */\n            connect: connectedRelations.reverse(),\n          };\n\n          break;\n        }\n\n        case 'dynamiczone':\n          cleanedData = (value as Attribute.GetValue<Attribute.DynamicZone>).map(\n            (componentData, index) => {\n              const subCleanedData = recursiveCleanData(\n                componentData,\n                (oldValue ?? [])[index],\n                componentsSchema[componentData.__component],\n                `${path}.${index}`\n              );\n\n              return subCleanedData;\n            }\n          );\n          break;\n        default:\n          cleanedData = helperCleanData(value, 'id');\n      }\n\n      acc[current] = cleanedData;\n\n      return acc;\n    }, {});\n  };\n\n  return recursiveCleanData(browserState, serverState, currentSchema, '');\n};\n\n// TODO: check which parts are still needed: I suspect the\n// isArray part can go away, but I'm not sure what could send\n// an object; in case both can go away we might be able to get\n// rid of the whole helper\nconst helperCleanData = (value: any, key: string) => {\n  if (isArray(value)) {\n    return value.map((obj) => (obj[key] ? obj[key] : obj));\n  }\n  if (isObject(value)) {\n    return value[key as keyof typeof value];\n  }\n\n  return value;\n};\n\nexport { cleanData };\n","import * as React from 'react';\n\nimport { Main } from '@strapi/design-system';\nimport {\n  AllowedActions,\n  ContentManagerEditViewDataManagerContext,\n  getAPIInnerErrors,\n  getYupInnerErrors,\n  LoadingIndicatorPage,\n  TranslationMessage,\n  useNotification,\n  useOverlayBlocker,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport isEqual from 'lodash/isEqual';\nimport set from 'lodash/set';\nimport { flushSync } from 'react-dom';\nimport { useIntl } from 'react-intl';\nimport { Prompt, Redirect } from 'react-router-dom';\nimport { ValidationError } from 'yup';\n\nimport { useTypedDispatch, useTypedSelector } from '../../../core/store/hooks';\nimport { usePrev } from '../../hooks/usePrev';\nimport { clearSetModifiedDataOnly } from '../../sharedReducers/crud/actions';\nimport { getTranslation } from '../../utils/translations';\nimport { createYupSchema } from '../../utils/validation';\nimport { RenderChildProps } from '../SingleTypeFormWrapper';\n\nimport { reducer, initialState, RelationData } from './reducer';\nimport { cleanData } from './utils/cleanData';\n\nimport type { EntityData } from '../../sharedReducers/crud/reducer';\nimport type { FormattedComponentLayout } from '../../utils/layouts';\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\nimport type { Attribute, Entity } from '@strapi/types';\n\ninterface EditViewDataManagerProviderProps\n  extends Pick<\n    RenderChildProps,\n    | 'componentsDataStructure'\n    | 'contentTypeDataStructure'\n    | 'isCreatingEntry'\n    | 'isLoadingForData'\n    | 'onDraftRelationCheck'\n    | 'onPost'\n    | 'onPublish'\n    | 'onPut'\n    | 'onUnpublish'\n    | 'status'\n  > {\n  allowedActions: AllowedActions;\n  createActionAllowedFields: string[];\n  children: React.ReactNode;\n  from: RenderChildProps['redirectionLink'];\n  initialValues: EntityData | null;\n  isSingleType: boolean;\n  readActionAllowedFields: string[];\n  redirectToPreviousPage: () => void;\n  slug: string;\n  updateActionAllowedFields: string[];\n}\n\nconst EditViewDataManagerProvider = ({\n  allowedActions: { canRead, canUpdate },\n  children,\n  componentsDataStructure,\n  contentTypeDataStructure,\n  createActionAllowedFields,\n  from,\n  initialValues,\n  isCreatingEntry,\n  isLoadingForData,\n  isSingleType,\n  onPost,\n  onPublish,\n  onDraftRelationCheck,\n  onPut,\n  onUnpublish,\n  readActionAllowedFields,\n  // Not sure this is needed anymore\n  redirectToPreviousPage,\n  slug,\n  status,\n  updateActionAllowedFields,\n}: EditViewDataManagerProviderProps) => {\n  const allLayoutData = useTypedSelector(\n    (state) => state['content-manager_editViewLayoutManager'].currentLayout\n  );\n  const [isSaving, setIsSaving] = React.useState(false);\n  /**\n   * TODO: this should be moved into the global reducer\n   * to match ever other reducer in the CM.\n   */\n  const [reducerState, dispatch] = React.useReducer(reducer, initialState);\n  const {\n    formErrors,\n    initialData,\n    modifiedData,\n    modifiedDZName,\n    shouldCheckErrors,\n    publishConfirmation,\n  } = reducerState;\n\n  const { setModifiedDataOnly } = useTypedSelector(\n    (state) => state['content-manager_editViewCrudReducer']\n  );\n  const reduxDispatch = useTypedDispatch();\n\n  const toggleNotification = useNotification();\n  const { lockApp, unlockApp } = useOverlayBlocker();\n\n  const currentContentTypeLayout = allLayoutData.contentType;\n\n  const hasDraftAndPublish = React.useMemo(() => {\n    return get(currentContentTypeLayout, ['options', 'draftAndPublish'], false);\n  }, [currentContentTypeLayout]);\n\n  const shouldNotRunValidations = React.useMemo(() => {\n    return hasDraftAndPublish && !initialData.publishedAt;\n  }, [hasDraftAndPublish, initialData.publishedAt]);\n\n  const { trackUsage } = useTracking();\n  const { formatMessage } = useIntl();\n\n  const shouldRedirectToHomepageWhenEditingEntry = React.useMemo(() => {\n    if (isLoadingForData) {\n      return false;\n    }\n\n    if (isCreatingEntry) {\n      return false;\n    }\n\n    if (canRead === false && canUpdate === false) {\n      return true;\n    }\n\n    return false;\n  }, [isLoadingForData, isCreatingEntry, canRead, canUpdate]);\n\n  React.useEffect(() => {\n    if (status === 'resolved') {\n      // @ts-expect-error – fixed by context assertion in V5\n      unlockApp();\n    } else {\n      // @ts-expect-error – fixed by context assertion in V5\n      lockApp();\n    }\n  }, [lockApp, unlockApp, status]);\n\n  // TODO: check this effect if it is really needed (not prio)\n  React.useEffect(() => {\n    if (!isLoadingForData) {\n      checkFormErrors();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [shouldCheckErrors]);\n\n  React.useEffect(() => {\n    const errorsInForm = Object.keys(formErrors);\n\n    // TODO: check if working with DZ, components...\n    // TODO: use querySelector querySelectorAll('[data-strapi-field-error]')\n    if (errorsInForm.length > 0) {\n      const firstError = errorsInForm[0];\n      const el = document.getElementById(firstError);\n\n      if (el) {\n        el.focus();\n      }\n    }\n  }, [formErrors]);\n\n  React.useEffect(() => {\n    if (shouldRedirectToHomepageWhenEditingEntry) {\n      toggleNotification({\n        type: 'info',\n        message: { id: getTranslation('permissions.not-allowed.update') },\n      });\n    }\n  }, [shouldRedirectToHomepageWhenEditingEntry, toggleNotification]);\n\n  React.useEffect(() => {\n    dispatch({\n      type: 'SET_DEFAULT_DATA_STRUCTURES',\n      componentsDataStructure,\n      contentTypeDataStructure,\n    });\n  }, [componentsDataStructure, contentTypeDataStructure]);\n\n  const { components } = allLayoutData;\n\n  const previousInitialValues = usePrev(initialValues);\n\n  React.useEffect(() => {\n    /**\n     * Only fire this effect if the initialValues are different\n     * otherwise it's a fruitless effort no matter what happens.\n     */\n    if (\n      initialValues &&\n      currentContentTypeLayout?.attributes &&\n      !isEqual(previousInitialValues, initialValues)\n    ) {\n      dispatch({\n        type: 'INIT_FORM',\n        initialValues,\n        components,\n        attributes: currentContentTypeLayout.attributes,\n        setModifiedDataOnly,\n      });\n\n      /**\n       * TODO: This should be moved to a side-effect e.g. thunks\n       * something to consider for V5\n       */\n      if (setModifiedDataOnly) {\n        reduxDispatch(clearSetModifiedDataOnly());\n      }\n    }\n  }, [\n    initialValues,\n    currentContentTypeLayout,\n    components,\n    setModifiedDataOnly,\n    reduxDispatch,\n    previousInitialValues,\n  ]);\n\n  const dispatchAddComponent = React.useCallback(\n    (type: 'ADD_COMPONENT_TO_DYNAMIC_ZONE' | 'ADD_REPEATABLE_COMPONENT_TO_FIELD') =>\n      (\n        keys: string,\n        componentLayoutData: FormattedComponentLayout,\n        allComponents: Record<string, FormattedComponentLayout>,\n        shouldCheckErrors = false,\n        position = undefined\n      ) => {\n        trackUsage('didAddComponentToDynamicZone');\n\n        dispatch({\n          type,\n          keys: keys.split('.'),\n          position,\n          componentLayoutData,\n          allComponents,\n          shouldCheckErrors,\n        });\n      },\n    [trackUsage]\n  );\n\n  const addComponentToDynamicZone = dispatchAddComponent('ADD_COMPONENT_TO_DYNAMIC_ZONE');\n\n  const addNonRepeatableComponentToField = React.useCallback(\n    (\n      keys: string,\n      componentLayoutData: FormattedComponentLayout,\n      allComponents: Record<string, FormattedComponentLayout>\n    ) => {\n      dispatch({\n        type: 'ADD_NON_REPEATABLE_COMPONENT_TO_FIELD',\n        keys: keys.split('.'),\n        componentLayoutData,\n        allComponents,\n      });\n    },\n    []\n  );\n\n  const relationConnect = React.useCallback(\n    ({\n      name,\n      value,\n      toOneRelation,\n    }: {\n      name: string;\n      value: Omit<RelationData, '__temp_key__'>;\n      toOneRelation?: boolean;\n    }) => {\n      dispatch({\n        type: 'CONNECT_RELATION',\n        keys: name.split('.'),\n        value,\n        toOneRelation,\n      });\n    },\n    []\n  );\n\n  const relationLoad = React.useCallback(\n    ({\n      target: { initialDataPath, modifiedDataPath, value },\n    }: {\n      target: {\n        initialDataPath: string[];\n        modifiedDataPath: string[];\n        value: Omit<RelationData, '__temp_key__'>[];\n      };\n    }) => {\n      dispatch({\n        type: 'LOAD_RELATION',\n        modifiedDataPath,\n        initialDataPath,\n        value,\n      });\n    },\n    []\n  );\n\n  const addRepeatableComponentToField = dispatchAddComponent('ADD_REPEATABLE_COMPONENT_TO_FIELD');\n\n  const yupSchema = React.useMemo(() => {\n    const options = { isCreatingEntry, isDraft: shouldNotRunValidations, isFromComponent: false };\n\n    return createYupSchema(\n      currentContentTypeLayout!,\n      {\n        components: allLayoutData.components,\n      },\n      options\n    );\n  }, [\n    allLayoutData.components,\n    currentContentTypeLayout,\n    isCreatingEntry,\n    shouldNotRunValidations,\n  ]);\n\n  const checkFormErrors = React.useCallback(\n    async (\n      dataToSet: {\n        path?: string;\n        value?: any;\n      } = {}\n    ) => {\n      let errors: Record<string, TranslationMessage> = {};\n      const updatedData = cloneDeep(modifiedData);\n\n      if (!isEmpty(updatedData) && dataToSet.path) {\n        set(updatedData, dataToSet.path, dataToSet.value);\n      }\n\n      try {\n        // Validate the form using yup\n        await yupSchema.validate(updatedData, { abortEarly: false });\n      } catch (err) {\n        if (err instanceof ValidationError) {\n          errors = getYupInnerErrors(err);\n        }\n\n        if (modifiedDZName) {\n          errors = Object.keys(errors).reduce<Record<string, TranslationMessage>>(\n            (acc, current) => {\n              const dzName = current.split('.')[0];\n\n              if (dzName !== modifiedDZName) {\n                acc[current] = errors[current];\n              }\n\n              return acc;\n            },\n            {}\n          );\n        }\n      }\n\n      dispatch({\n        type: 'SET_FORM_ERRORS',\n        errors,\n      });\n    },\n    [modifiedDZName, modifiedData, yupSchema]\n  );\n\n  const handleChange = React.useCallback(\n    (\n      {\n        target,\n      }: { target: { name: string; type: string; value: Attribute.GetValue<Attribute.Any> } },\n      shouldSetInitialValue = false\n    ) => {\n      const { name, value, type } = target;\n      let inputValue = value;\n\n      // Allow to reset text, textarea, email, uid, select/enum, and number\n      if (\n        ['text', 'textarea', 'string', 'email', 'uid', 'select', 'select-one', 'number'].includes(\n          type\n        ) &&\n        !value &&\n        value !== 0\n      ) {\n        inputValue = null;\n      }\n\n      if (type === 'password' && !value) {\n        dispatch({\n          type: 'REMOVE_PASSWORD_FIELD',\n          keys: name.split('.'),\n        });\n\n        return;\n      }\n\n      dispatch({\n        type: 'ON_CHANGE',\n        keys: name.split('.'),\n        value: inputValue,\n        shouldSetInitialValue,\n      });\n    },\n    []\n  );\n\n  const createFormData = React.useCallback(\n    (modifiedData: Record<string, any>, initialData: Record<string, any>) => {\n      // Then we need to apply our helper\n      const cleanedData = cleanData(\n        { browserState: modifiedData, serverState: initialData },\n        currentContentTypeLayout!,\n        allLayoutData.components\n      );\n\n      // TODO: can we remove the cast?\n      return cleanedData as Contracts.SingleTypes.CreateOrUpdate.Request['body'];\n    },\n    [allLayoutData.components, currentContentTypeLayout]\n  );\n\n  const trackerProperty = React.useMemo(() => {\n    if (!hasDraftAndPublish) {\n      return {};\n    }\n\n    return shouldNotRunValidations ? { status: 'draft' } : {};\n  }, [hasDraftAndPublish, shouldNotRunValidations]);\n\n  const handlePublishPromptDismissal = React.useCallback(async (e: React.SyntheticEvent) => {\n    e.preventDefault();\n\n    return dispatch({\n      type: 'RESET_PUBLISH_CONFIRMATION',\n    });\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    async (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      let errors: Record<string, TranslationMessage> = {};\n\n      try {\n        await yupSchema.validate(modifiedData, { abortEarly: false });\n      } catch (err) {\n        if (err instanceof ValidationError) {\n          errors = getYupInnerErrors(err);\n        } else {\n          console.error(err);\n        }\n      }\n\n      try {\n        if (isEmpty(errors)) {\n          const formData = createFormData(modifiedData, initialData);\n          flushSync(() => {\n            setIsSaving(true);\n          });\n\n          if (isCreatingEntry) {\n            await onPost(formData, trackerProperty);\n          } else {\n            await onPut(formData, trackerProperty);\n          }\n\n          setIsSaving(false);\n        }\n      } catch (err) {\n        setIsSaving(false);\n        errors = {\n          ...errors,\n          // @ts-expect-error – remove the function later.\n          ...getAPIInnerErrors(err, { getTranslation }),\n        };\n      }\n\n      dispatch({\n        type: 'SET_FORM_ERRORS',\n        errors,\n      });\n    },\n    [\n      createFormData,\n      isCreatingEntry,\n      modifiedData,\n      initialData,\n      onPost,\n      onPut,\n      trackerProperty,\n      yupSchema,\n    ]\n  );\n\n  const handlePublish = React.useCallback(async () => {\n    // Create yup schema here's we need to apply all the validations\n    const schema = createYupSchema(\n      currentContentTypeLayout!,\n      {\n        components: get(allLayoutData, 'components', {}),\n      },\n      { isCreatingEntry, isDraft: false, isFromComponent: false }\n    );\n\n    const draftCount = await onDraftRelationCheck();\n\n    if (!publishConfirmation.show && draftCount > 0) {\n      // If the warning hasn't already been shown and draft relations are found,\n      // abort the publish call and ask for confirmation from the user\n      dispatch({\n        type: 'SET_PUBLISH_CONFIRMATION',\n        publishConfirmation: {\n          show: true,\n          draftCount,\n        },\n      });\n\n      return;\n    }\n    dispatch({\n      type: 'RESET_PUBLISH_CONFIRMATION',\n    });\n\n    let errors = {};\n    try {\n      await schema.validate(modifiedData, { abortEarly: false });\n    } catch (err) {\n      if (err instanceof ValidationError) {\n        errors = getYupInnerErrors(err);\n      }\n    }\n\n    try {\n      if (isEmpty(errors)) {\n        flushSync(() => {\n          setIsSaving(true);\n        });\n        await onPublish();\n        setIsSaving(false);\n      }\n    } catch (err) {\n      setIsSaving(false);\n      errors = {\n        ...errors,\n        // @ts-expect-error – we'll remove this deprecated function later anyway.\n        ...getAPIInnerErrors(err, { getTranslation }),\n      };\n    }\n\n    dispatch({\n      type: 'SET_FORM_ERRORS',\n      errors,\n    });\n  }, [\n    allLayoutData,\n    currentContentTypeLayout,\n    isCreatingEntry,\n    modifiedData,\n    publishConfirmation.show,\n    onPublish,\n    onDraftRelationCheck,\n  ]);\n\n  const shouldCheckDZErrors = React.useCallback(\n    (dzName: string) => {\n      const doesDZHaveError = Object.keys(formErrors).some((key) => key.split('.')[0] === dzName);\n      const shouldCheckErrors = !isEmpty(formErrors) && doesDZHaveError;\n\n      return shouldCheckErrors;\n    },\n    [formErrors]\n  );\n\n  const moveComponentDown = React.useCallback(\n    (dynamicZoneName: string, currentIndex: number) => {\n      trackUsage('changeComponentsOrder');\n\n      dispatch({\n        type: 'MOVE_COMPONENT_DOWN',\n        dynamicZoneName,\n        currentIndex,\n        shouldCheckErrors: shouldCheckDZErrors(dynamicZoneName),\n      });\n    },\n    [shouldCheckDZErrors, trackUsage]\n  );\n\n  const moveComponentUp = React.useCallback(\n    (dynamicZoneName: string, currentIndex: number) => {\n      trackUsage('changeComponentsOrder');\n\n      dispatch({\n        type: 'MOVE_COMPONENT_UP',\n        dynamicZoneName,\n        currentIndex,\n        shouldCheckErrors: shouldCheckDZErrors(dynamicZoneName),\n      });\n    },\n    [shouldCheckDZErrors, trackUsage]\n  );\n\n  const moveComponentField = React.useCallback(\n    ({\n      name,\n      newIndex,\n      currentIndex,\n    }: {\n      name: string;\n      currentIndex: number;\n      newIndex: number;\n    }) => {\n      dispatch({\n        type: 'MOVE_COMPONENT_FIELD',\n        keys: name.split('.'),\n        newIndex,\n        oldIndex: currentIndex,\n      });\n    },\n    []\n  );\n\n  const relationDisconnect = React.useCallback(({ name, id }: { name: string; id: Entity.ID }) => {\n    dispatch({\n      type: 'DISCONNECT_RELATION',\n      keys: name.split('.'),\n      id,\n    });\n  }, []);\n\n  const relationReorder = React.useCallback(\n    ({ name, oldIndex, newIndex }: { name: string; oldIndex: number; newIndex: number }) => {\n      dispatch({\n        type: 'REORDER_RELATION',\n        keys: name.split('.'),\n        oldIndex,\n        newIndex,\n      });\n    },\n    []\n  );\n\n  const removeComponentFromDynamicZone = React.useCallback(\n    (dynamicZoneName: string, index: number) => {\n      trackUsage('removeComponentFromDynamicZone');\n\n      dispatch({\n        type: 'REMOVE_COMPONENT_FROM_DYNAMIC_ZONE',\n        dynamicZoneName,\n        index,\n        shouldCheckErrors: shouldCheckDZErrors(dynamicZoneName),\n      });\n    },\n    [shouldCheckDZErrors, trackUsage]\n  );\n\n  const removeComponentFromField = React.useCallback((keys: string) => {\n    dispatch({\n      type: 'REMOVE_COMPONENT_FROM_FIELD',\n      keys: keys.split('.'),\n    });\n  }, []);\n\n  const removeRepeatableField = React.useCallback((keys: string) => {\n    dispatch({\n      type: 'REMOVE_REPEATABLE_FIELD',\n      keys: keys.split('.'),\n    });\n  }, []);\n\n  const triggerFormValidation = React.useCallback(() => {\n    dispatch({\n      type: 'TRIGGER_FORM_VALIDATION',\n    });\n  }, []);\n\n  // Redirect the user to the previous page if he is not allowed to read/update a document\n  if (shouldRedirectToHomepageWhenEditingEntry) {\n    return <Redirect to={from} />;\n  }\n\n  if (!modifiedData) {\n    return null;\n  }\n\n  return (\n    <ContentManagerEditViewDataManagerContext.Provider\n      value={{\n        // @ts-expect-error – issue with the provider being in the helper-plugin and not having access to the \"unique\" layout type\n        addComponentToDynamicZone,\n        // @ts-expect-error – issue with the provider being in the helper-plugin and not having access to the \"unique\" layout type\n        addNonRepeatableComponentToField,\n        // @ts-expect-error – issue with the provider being in the helper-plugin and not having access to the \"unique\" layout type\n        addRepeatableComponentToField,\n        // @ts-expect-error – issue with the provider being in the helper-plugin and not having access to the \"unique\" layout type\n        allLayoutData,\n        checkFormErrors,\n        createActionAllowedFields,\n        formErrors,\n        hasDraftAndPublish,\n        initialData,\n        isCreatingEntry,\n        isSingleType,\n        shouldNotRunValidations,\n        status,\n        // @ts-expect-error – issue with the provider being in the helper-plugin and not having access to the \"unique\" layout type\n        layout: currentContentTypeLayout,\n        modifiedData,\n        moveComponentField,\n        /**\n         * @deprecated use `moveComponentField` instead. This will be removed in v5.\n         */\n        moveComponentDown,\n        /**\n         * @deprecated use `moveComponentField` instead. This will be removed in v5.\n         */\n        moveComponentUp,\n        onChange: handleChange,\n        onPublish: handlePublish,\n        onUnpublish,\n        readActionAllowedFields,\n        redirectToPreviousPage,\n        removeComponentFromDynamicZone,\n        removeComponentFromField,\n        removeRepeatableField,\n        relationConnect,\n        relationDisconnect,\n        relationLoad,\n        relationReorder,\n        slug,\n        triggerFormValidation,\n        updateActionAllowedFields,\n        onPublishPromptDismissal: handlePublishPromptDismissal,\n        publishConfirmation,\n      }}\n    >\n      {isLoadingForData || (!isCreatingEntry && !initialData.id) ? (\n        <Main aria-busy=\"true\">\n          <LoadingIndicatorPage />\n        </Main>\n      ) : (\n        <>\n          {!isSaving ? (\n            <Prompt\n              when={!isEqual(modifiedData, initialData)}\n              message={formatMessage({ id: 'global.prompt.unsaved' })}\n            />\n          ) : null}\n          <form noValidate onSubmit={handleSubmit}>\n            {children}\n          </form>\n        </>\n      )}\n    </ContentManagerEditViewDataManagerContext.Provider>\n  );\n};\n\nexport { EditViewDataManagerProvider };\n","interface Query {\n  plugins?: Record<string, unknown>;\n  _q?: string;\n  [key: string]: any;\n}\n\n/**\n * @description\n * Creates a valid query params object for get requests\n * ie. plugins[18n][locale]=en becomes locale=en\n */\nconst buildValidGetParams = (query: Query = {}) => {\n  // Extract pluginOptions from the query, they shouldn't be part of the URL\n  const {\n    plugins: _,\n    _q: searchQuery,\n    ...validQueryParams\n  } = {\n    ...query,\n    ...Object.values(query?.plugins ?? {}).reduce<Record<string, unknown>>(\n      (acc, current) => Object.assign(acc, current),\n      {}\n    ),\n  };\n\n  if (searchQuery) {\n    // Encode the search query here since the paramsSerializer will not\n    validQueryParams._q = encodeURIComponent(searchQuery);\n  }\n\n  return validQueryParams;\n};\n\nexport { buildValidGetParams };\n","import * as React from 'react';\n\nimport {\n  ApiError,\n  TrackingEvent,\n  formatContentTypeData,\n  useAPIErrorHandler,\n  useFetchClient,\n  useGuidedTour,\n  useNotification,\n  useQueryParams,\n  useTracking,\n} from '@strapi/helper-plugin';\nimport axios, { AxiosError, AxiosResponse, CancelTokenSource } from 'axios';\nimport get from 'lodash/get';\nimport { useQueryClient } from 'react-query';\nimport { useHistory } from 'react-router-dom';\n\nimport { useTypedDispatch, useTypedSelector } from '../../core/store/hooks';\nimport {\n  getData,\n  getDataSucceeded,\n  initForm,\n  resetProps,\n  setDataStructures,\n  setStatus,\n  submitSucceeded,\n} from '../sharedReducers/crud/actions';\nimport { EntityData } from '../sharedReducers/crud/reducer';\nimport { buildValidGetParams } from '../utils/api';\nimport { createDefaultDataStructure, removePasswordFieldsFromData } from '../utils/data';\nimport { getTranslation } from '../utils/translations';\n\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\n\ninterface RenderChildProps {\n  componentsDataStructure: Record<string, any>;\n  contentTypeDataStructure: Record<string, any>;\n  data: EntityData | null;\n  isCreatingEntry: boolean;\n  isLoadingForData: boolean;\n  onDelete: (\n    trackerProperty: Extract<\n      TrackingEvent,\n      { name: 'willDeleteEntry' | 'didDeleteEntry' | 'didNotDeleteEntry' }\n    >['properties']\n  ) => Promise<Contracts.SingleTypes.Delete.Response>;\n  onPost: (\n    body: Contracts.SingleTypes.CreateOrUpdate.Request['body'],\n    trackerProperty: Extract<\n      TrackingEvent,\n      { name: 'didCreateEntry' | 'didNotCreateEntry' }\n    >['properties']\n  ) => Promise<Contracts.SingleTypes.CreateOrUpdate.Response>;\n  onDraftRelationCheck: () => Promise<Contracts.SingleTypes.CountDraftRelations.Response['data']>;\n  onPublish: () => Promise<Contracts.SingleTypes.Publish.Response>;\n  onPut: (\n    body: Contracts.SingleTypes.CreateOrUpdate.Request['body'],\n    trackerProperty: Extract<\n      TrackingEvent,\n      { name: 'willEditEntry' | 'didEditEntry' | 'didNotEditEntry' }\n    >['properties']\n  ) => Promise<Contracts.SingleTypes.CreateOrUpdate.Response>;\n  onUnpublish: () => Promise<void>;\n  redirectionLink: string;\n  status: string;\n}\n\ninterface SingleTypeFormWrapperProps {\n  slug: string;\n  children: (props: RenderChildProps) => React.JSX.Element;\n}\n\n// This container is used to handle the CRUD\nconst SingleTypeFormWrapper = ({ children, slug }: SingleTypeFormWrapperProps) => {\n  const allLayoutData = useTypedSelector(\n    (state) => state['content-manager_editViewLayoutManager'].currentLayout\n  );\n  const queryClient = useQueryClient();\n  const { trackUsage } = useTracking();\n  const { push } = useHistory();\n  const { setCurrentStep } = useGuidedTour();\n  const [isCreatingEntry, setIsCreatingEntry] = React.useState(true);\n  const [{ query, rawQuery }] = useQueryParams();\n  /**\n   * If you don't memoize this, the entire form dies in recursion.\n   */\n  const params = React.useMemo(() => buildValidGetParams(query), [query]);\n  const toggleNotification = useNotification();\n  const dispatch = useTypedDispatch();\n  const { formatAPIError } = useAPIErrorHandler(getTranslation);\n  const fetchClient = useFetchClient();\n  const { post, put, del } = fetchClient;\n\n  const { componentsDataStructure, contentTypeDataStructure, data, isLoading, status } =\n    useTypedSelector((state) => state['content-manager_editViewCrudReducer']);\n\n  const cleanReceivedData = React.useCallback(\n    (data: EntityData) => {\n      const cleaned = removePasswordFieldsFromData(\n        data,\n        allLayoutData.contentType!,\n        allLayoutData.components\n      );\n\n      // This is needed in order to add a unique id for the repeatable components, in order to make the reorder easier\n      return formatContentTypeData(cleaned, allLayoutData.contentType!, allLayoutData.components);\n    },\n    [allLayoutData]\n  );\n\n  React.useEffect(() => {\n    return () => {\n      dispatch(resetProps());\n    };\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    if (!allLayoutData) {\n      return;\n    }\n\n    const componentsDataStructure = Object.keys(allLayoutData.components).reduce<\n      Record<string, any>\n    >((acc, current) => {\n      const defaultComponentForm = createDefaultDataStructure(\n        allLayoutData.components[current].attributes,\n        allLayoutData.components\n      );\n\n      acc[current] = formatContentTypeData(\n        defaultComponentForm,\n        // @ts-expect-error – the helper-plugin doesn't (and can't) know about the types we have in the admin. TODO: fix this.\n        allLayoutData.components[current],\n        allLayoutData.components\n      );\n\n      return acc;\n    }, {});\n\n    const contentTypeDataStructure = createDefaultDataStructure(\n      allLayoutData.contentType!.attributes,\n      allLayoutData.components\n    );\n    const contentTypeDataStructureFormatted = formatContentTypeData(\n      contentTypeDataStructure,\n      allLayoutData.contentType!,\n      allLayoutData.components\n    );\n\n    dispatch(setDataStructures(componentsDataStructure, contentTypeDataStructureFormatted));\n  }, [allLayoutData, dispatch]);\n\n  // Check if creation mode or editing mode\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n\n    const fetchData = async (source: CancelTokenSource) => {\n      dispatch(getData());\n\n      setIsCreatingEntry(true);\n\n      try {\n        const { data } = await fetchClient.get(`/content-manager/single-types/${slug}`, {\n          cancelToken: source.token,\n          params,\n        });\n\n        dispatch(getDataSucceeded(cleanReceivedData(data)));\n\n        setIsCreatingEntry(false);\n      } catch (err) {\n        if (axios.isCancel(err)) {\n          return;\n        }\n\n        const responseStatus = get(err, 'response.status', null);\n\n        // Creating a single type\n        if (responseStatus === 404) {\n          dispatch(initForm(rawQuery, true));\n        }\n\n        if (responseStatus === 403) {\n          toggleNotification({\n            type: 'info',\n            message: { id: getTranslation('permissions.not-allowed.update') },\n          });\n\n          push('/');\n        }\n      }\n    };\n\n    fetchData(source);\n\n    return () => source.cancel('Operation canceled by the user.');\n  }, [fetchClient, cleanReceivedData, push, slug, dispatch, params, rawQuery, toggleNotification]);\n\n  const displayErrors = React.useCallback(\n    (err: AxiosError<{ error: ApiError }>) => {\n      toggleNotification({ type: 'warning', message: formatAPIError(err) });\n    },\n    [toggleNotification, formatAPIError]\n  );\n\n  const onDelete: RenderChildProps['onDelete'] = React.useCallback(\n    async (trackerProperty) => {\n      try {\n        trackUsage('willDeleteEntry', trackerProperty);\n\n        const { data } = await del<Contracts.SingleTypes.Delete.Response>(\n          `/content-manager/single-types/${slug}`,\n          {\n            params,\n          }\n        );\n\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.delete') },\n        });\n\n        trackUsage('didDeleteEntry', trackerProperty);\n\n        setIsCreatingEntry(true);\n        dispatch(initForm(rawQuery, true));\n\n        return Promise.resolve(data);\n      } catch (err) {\n        trackUsage('didNotDeleteEntry', { error: err, ...trackerProperty });\n\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n\n        return Promise.reject(err);\n      }\n    },\n    [trackUsage, del, slug, params, toggleNotification, dispatch, rawQuery, displayErrors]\n  );\n\n  const onPost: RenderChildProps['onPost'] = React.useCallback(\n    async (body, trackerProperty) => {\n      try {\n        dispatch(setStatus('submit-pending'));\n\n        const { data } = await put<\n          Contracts.SingleTypes.CreateOrUpdate.Response,\n          AxiosResponse<Contracts.SingleTypes.CreateOrUpdate.Response>,\n          Contracts.SingleTypes.CreateOrUpdate.Request['body']\n        >(`/content-manager/single-types/${slug}`, body, {\n          params: query,\n        });\n\n        trackUsage('didCreateEntry', trackerProperty);\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.save') },\n        });\n\n        setCurrentStep('contentManager.success');\n\n        // TODO: need to find a better place, or a better abstraction\n        queryClient.invalidateQueries(['relation']);\n\n        dispatch(submitSucceeded(cleanReceivedData(data)));\n        setIsCreatingEntry(false);\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.resolve(data);\n      } catch (err) {\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    },\n    [\n      slug,\n      dispatch,\n      put,\n      query,\n      trackUsage,\n      toggleNotification,\n      setCurrentStep,\n      queryClient,\n      cleanReceivedData,\n      displayErrors,\n    ]\n  );\n\n  const onDraftRelationCheck: RenderChildProps['onDraftRelationCheck'] =\n    React.useCallback(async () => {\n      try {\n        trackUsage('willCheckDraftRelations');\n\n        dispatch(setStatus('draft-relation-check-pending'));\n\n        const {\n          data: { data },\n        } = await fetchClient.get<Contracts.SingleTypes.CountDraftRelations.Response>(\n          `/content-manager/single-types/${slug}/actions/countDraftRelations`\n        );\n        trackUsage('didCheckDraftRelations');\n\n        dispatch(setStatus('resolved'));\n\n        return data;\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    }, [trackUsage, slug, dispatch, fetchClient, displayErrors]);\n\n  const onPublish: RenderChildProps['onPublish'] = React.useCallback(async () => {\n    try {\n      trackUsage('willPublishEntry');\n\n      dispatch(setStatus('publish-pending'));\n\n      const { data } = await post<Contracts.SingleTypes.Publish.Response>(\n        `/content-manager/single-types/${slug}/actions/publish`,\n        {},\n        {\n          params,\n        }\n      );\n\n      trackUsage('didPublishEntry');\n      toggleNotification({\n        type: 'success',\n        message: { id: getTranslation('success.record.publish') },\n      });\n\n      dispatch(submitSucceeded(cleanReceivedData(data)));\n\n      dispatch(setStatus('resolved'));\n\n      return Promise.resolve(data);\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        displayErrors(err);\n      }\n\n      dispatch(setStatus('resolved'));\n\n      return Promise.reject(err);\n    }\n  }, [\n    trackUsage,\n    slug,\n    dispatch,\n    post,\n    params,\n    toggleNotification,\n    cleanReceivedData,\n    displayErrors,\n  ]);\n\n  const onPut: RenderChildProps['onPut'] = React.useCallback(\n    async (body, trackerProperty) => {\n      try {\n        trackUsage('willEditEntry', trackerProperty);\n\n        dispatch(setStatus('submit-pending'));\n\n        const { data } = await put<\n          Contracts.SingleTypes.CreateOrUpdate.Response,\n          AxiosResponse<Contracts.SingleTypes.CreateOrUpdate.Response>,\n          Contracts.SingleTypes.CreateOrUpdate.Request['body']\n        >(`/content-manager/single-types/${slug}`, body, {\n          params: query,\n        });\n\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.save') },\n        });\n\n        trackUsage('didEditEntry', trackerProperty);\n\n        // TODO: need to find a better place, or a better abstraction\n        queryClient.invalidateQueries(['relation']);\n\n        dispatch(submitSucceeded(cleanReceivedData(data)));\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.resolve(data);\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          displayErrors(err);\n        }\n\n        trackUsage('didNotEditEntry', { error: err, ...trackerProperty });\n\n        dispatch(setStatus('resolved'));\n\n        return Promise.reject(err);\n      }\n    },\n    [\n      slug,\n      trackUsage,\n      dispatch,\n      put,\n      query,\n      toggleNotification,\n      queryClient,\n      cleanReceivedData,\n      displayErrors,\n    ]\n  );\n\n  const onUnpublish = React.useCallback(async () => {\n    dispatch(setStatus('unpublish-pending'));\n\n    try {\n      trackUsage('willUnpublishEntry');\n\n      const { data } = await post<Contracts.SingleTypes.UnPublish.Response>(\n        `/content-manager/single-types/${slug}/actions/unpublish`,\n        {},\n        {\n          params,\n        }\n      );\n\n      trackUsage('didUnpublishEntry');\n      toggleNotification({\n        type: 'success',\n        message: { id: getTranslation('success.record.unpublish') },\n      });\n\n      dispatch(submitSucceeded(cleanReceivedData(data)));\n\n      dispatch(setStatus('resolved'));\n    } catch (err) {\n      dispatch(setStatus('resolved'));\n      if (err instanceof AxiosError) {\n        displayErrors(err);\n      }\n    }\n  }, [\n    slug,\n    dispatch,\n    trackUsage,\n    post,\n    params,\n    toggleNotification,\n    cleanReceivedData,\n    displayErrors,\n  ]);\n\n  return children({\n    componentsDataStructure,\n    contentTypeDataStructure,\n    data,\n    isCreatingEntry,\n    isLoadingForData: isLoading,\n    onDelete,\n    onPost,\n    onDraftRelationCheck,\n    onPublish,\n    onPut,\n    onUnpublish,\n    redirectionLink: '/',\n    status,\n  });\n};\n\nexport { SingleTypeFormWrapper };\nexport type { RenderChildProps };\n","import { Permission, findMatchingPermissions } from '@strapi/helper-plugin';\n\nconst generatePermissionsObject = (uid: string) => {\n  // TODO: Why are the content-manager permissions hardcoded here?\n  const permissions = {\n    create: [{ action: 'plugin::content-manager.explorer.create', subject: null }],\n    delete: [{ action: 'plugin::content-manager.explorer.delete', subject: null }],\n    publish: [{ action: 'plugin::content-manager.explorer.publish', subject: null }],\n    read: [{ action: 'plugin::content-manager.explorer.read', subject: null }],\n    update: [{ action: 'plugin::content-manager.explorer.update', subject: null }],\n  } satisfies Record<string, Permission[]>;\n\n  return Object.entries(permissions).reduce<Record<string, Permission[]>>((acc, [key, value]) => {\n    acc[key] = value.map((perm) => ({ ...perm, subject: uid }));\n\n    return acc;\n  }, {});\n};\n\nconst getFieldsActionMatchingPermissions = (userPermissions: Permission[], slug: string) => {\n  const getMatchingPermissions = (action: 'create' | 'read' | 'update') => {\n    const matched = findMatchingPermissions(userPermissions, [\n      {\n        action: `plugin::content-manager.explorer.${action}`,\n        subject: slug,\n      },\n    ]);\n\n    return (\n      matched\n        .flatMap((perm) => perm.properties?.fields)\n        // return only unique fields\n        .filter(\n          (field, index, arr): field is string =>\n            arr.indexOf(field) === index && typeof field === 'string'\n        )\n    );\n  };\n\n  return {\n    createActionAllowedFields: getMatchingPermissions('create'),\n    readActionAllowedFields: getMatchingPermissions('read'),\n    updateActionAllowedFields: getMatchingPermissions('update'),\n  };\n};\n\nexport { generatePermissionsObject, getFieldsActionMatchingPermissions };\n","import * as React from 'react';\n\nimport { Button } from '@strapi/design-system';\nimport {\n  ConfirmDialog,\n  useAPIErrorHandler,\n  useCMEditViewDataManager,\n  useNotification,\n} from '@strapi/helper-plugin';\nimport { Trash } from '@strapi/icons';\nimport { isAxiosError } from 'axios';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\n\nimport type { RenderChildProps } from '../../../components/SingleTypeFormWrapper';\n\ninterface DeleteLinkProps {\n  onDelete: RenderChildProps['onDelete'];\n}\n\nconst DeleteLink = ({ onDelete }: DeleteLinkProps) => {\n  const { hasDraftAndPublish, modifiedData } = useCMEditViewDataManager();\n\n  const trackerProperty = hasDraftAndPublish\n    ? typeof modifiedData.publishedAt === 'string'\n      ? { status: 'draft' }\n      : { status: 'published' }\n    : {};\n\n  const [displayDeleteConfirmation, setDisplayDeleteConfirmation] = React.useState(false);\n  const [isModalConfirmButtonLoading, setIsModalConfirmButtonLoading] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const { formatAPIError } = useAPIErrorHandler(getTranslation);\n  const toggleNotification = useNotification();\n\n  const toggleWarningDelete = () => setDisplayDeleteConfirmation((prevState) => !prevState);\n\n  const handleConfirmDelete = async () => {\n    try {\n      // Show the loading state\n      setIsModalConfirmButtonLoading(true);\n\n      await onDelete(trackerProperty);\n\n      setIsModalConfirmButtonLoading(false);\n\n      toggleWarningDelete();\n    } catch (err) {\n      setIsModalConfirmButtonLoading(false);\n      toggleWarningDelete();\n\n      if (isAxiosError(err)) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(err),\n        });\n      }\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={toggleWarningDelete} size=\"S\" startIcon={<Trash />} variant=\"danger-light\">\n        {formatMessage({\n          id: getTranslation('containers.Edit.delete-entry'),\n          defaultMessage: 'Delete this entry',\n        })}\n      </Button>\n\n      <ConfirmDialog\n        isConfirmButtonLoading={isModalConfirmButtonLoading}\n        isOpen={displayDeleteConfirmation}\n        onConfirm={handleConfirmDelete}\n        onToggleDialog={toggleWarningDelete}\n      />\n    </>\n  );\n};\n\nexport { DeleteLink };\n","import { Box, Flex, Typography } from '@strapi/design-system';\nimport { pxToRem, useCMEditViewDataManager } from '@strapi/helper-plugin';\nimport { Dot } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport styled, { DefaultTheme } from 'styled-components';\n\nimport { getTranslation } from '../../../utils/translations';\n\nconst DraftAndPublishBadge = () => {\n  const { initialData, hasDraftAndPublish } = useCMEditViewDataManager();\n  const { formatMessage } = useIntl();\n\n  if (!hasDraftAndPublish) {\n    return null;\n  }\n\n  const isPublished = typeof initialData.publishedAt === 'string';\n\n  const colors = {\n    draft: {\n      textColor: 'secondary700',\n      bulletColor: 'secondary600',\n      box: {\n        background: 'secondary100',\n        borderColor: 'secondary200',\n      },\n    },\n    published: {\n      textColor: 'success700',\n      bulletColor: 'success600',\n      box: {\n        background: 'success100',\n        borderColor: 'success200',\n      },\n    },\n  } as const;\n\n  const colorProps = isPublished ? colors.published : colors.draft;\n\n  return (\n    <Box\n      hasRadius\n      as=\"aside\"\n      paddingTop={4}\n      paddingBottom={4}\n      paddingLeft={5}\n      paddingRight={5}\n      {...colorProps.box}\n    >\n      <Box as={Flex}>\n        <CustomBullet $bulletColor={colorProps.bulletColor} />\n        <Box paddingLeft={3}>\n          <Typography textColor={colorProps.textColor}>\n            {formatMessage({\n              id: getTranslation('containers.Edit.information.editing'),\n              defaultMessage: 'Editing',\n            })}\n            &nbsp;\n          </Typography>\n          <Typography fontWeight=\"bold\" textColor={colorProps.textColor}>\n            {isPublished &&\n              formatMessage({\n                id: getTranslation('containers.Edit.information.publishedVersion'),\n                defaultMessage: 'published version',\n              })}\n            {!isPublished &&\n              formatMessage({\n                id: getTranslation('containers.Edit.information.draftVersion'),\n                defaultMessage: 'draft version',\n              })}\n          </Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nconst CustomBullet = styled(Dot)<{ $bulletColor: keyof DefaultTheme['colors'] }>`\n  width: ${pxToRem(6)};\n  height: ${pxToRem(6)};\n  * {\n    fill: ${({ theme, $bulletColor }) => theme.colors[$bulletColor]};\n  }\n`;\n\nexport { DraftAndPublishBadge };\n","import * as React from 'react';\n\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogBody,\n  DialogFooter,\n  Flex,\n  HeaderLayout,\n  Typography,\n} from '@strapi/design-system';\nimport { Link } from '@strapi/design-system/v2';\nimport { AllowedActions, useCMEditViewDataManager } from '@strapi/helper-plugin';\nimport { ArrowLeft, Check, ExclamationMarkCircle } from '@strapi/icons';\nimport get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { useIntl } from 'react-intl';\nimport { NavLink, useHistory } from 'react-router-dom';\n\nimport { getTranslation } from '../../../utils/translations';\n\ninterface HeaderProps {\n  allowedActions: AllowedActions;\n}\n\nconst Header = ({ allowedActions: { canUpdate, canCreate, canPublish } }: HeaderProps) => {\n  const {\n    initialData,\n    isCreatingEntry,\n    isSingleType,\n    status,\n    layout,\n    hasDraftAndPublish,\n    modifiedData,\n    onPublish,\n    onUnpublish,\n    publishConfirmation: { show: showPublishConfirmation, draftCount } = {},\n    onPublishPromptDismissal,\n  } = useCMEditViewDataManager();\n  const { goBack } = useHistory();\n  const [showWarningUnpublish, setWarningUnpublish] = React.useState(false);\n  const { formatMessage } = useIntl();\n\n  const currentContentTypeMainField = get(layout, ['settings', 'mainField'], 'id');\n  const currentContentTypeName = get(layout, ['info', 'displayName'], 'NOT FOUND');\n  const didChangeData =\n    !isEqual(initialData, modifiedData) ||\n    (isCreatingEntry && Object.keys(modifiedData).length > 0);\n\n  const createEntryIntlTitle = formatMessage({\n    id: getTranslation('containers.Edit.pluginHeader.title.new'),\n    defaultMessage: 'Create an entry',\n  });\n\n  let title = createEntryIntlTitle;\n\n  if (!isCreatingEntry && !isSingleType) {\n    title = initialData[currentContentTypeMainField] || currentContentTypeName;\n  }\n\n  if (isSingleType) {\n    title = currentContentTypeName;\n  }\n\n  let primaryAction = null;\n\n  if (isCreatingEntry && canCreate) {\n    primaryAction = (\n      <Flex gap={2}>\n        {hasDraftAndPublish && (\n          <Button disabled startIcon={<Check />} variant=\"secondary\">\n            {formatMessage({ id: 'app.utils.publish', defaultMessage: 'Publish' })}\n          </Button>\n        )}\n        <Button disabled={!didChangeData} loading={status === 'submit-pending'} type=\"submit\">\n          {formatMessage({\n            id: getTranslation('containers.Edit.submit'),\n            defaultMessage: 'Save',\n          })}\n        </Button>\n      </Flex>\n    );\n  }\n\n  if (!isCreatingEntry && canUpdate) {\n    const shouldShowPublishButton = hasDraftAndPublish && canPublish;\n    const isPublished = typeof initialData.publishedAt === 'string';\n    const isPublishButtonLoading = isPublished\n      ? status === 'unpublish-pending'\n      : status === 'publish-pending';\n    const pubishButtonLabel = isPublished\n      ? { id: 'app.utils.unpublish', defaultMessage: 'Unpublish' }\n      : { id: 'app.utils.publish', defaultMessage: 'Publish' };\n\n    const onClick = isPublished ? () => setWarningUnpublish(true) : () => onPublish?.();\n\n    primaryAction = (\n      <Flex>\n        {shouldShowPublishButton && (\n          <Button\n            disabled={didChangeData}\n            loading={isPublishButtonLoading}\n            onClick={onClick}\n            startIcon={<Check />}\n            variant=\"secondary\"\n          >\n            {formatMessage(pubishButtonLabel)}\n          </Button>\n        )}\n        <Box paddingLeft={shouldShowPublishButton ? 2 : 0}>\n          <Button disabled={!didChangeData} loading={status === 'submit-pending'} type=\"submit\">\n            {formatMessage({\n              id: getTranslation('containers.Edit.submit'),\n              defaultMessage: 'Save',\n            })}\n          </Button>\n        </Box>\n      </Flex>\n    );\n  }\n\n  const toggleWarningUnpublish = () => setWarningUnpublish((prevState) => !prevState);\n\n  const handleUnpublish = () => {\n    toggleWarningUnpublish();\n    onUnpublish?.();\n  };\n\n  const subtitle = `${formatMessage({\n    id: getTranslation('api.id'),\n    defaultMessage: 'API ID ',\n    // @ts-expect-error – issue comes from the context not having the correct layout from the admin.\n  })} : ${layout?.apiID}`;\n\n  return (\n    <>\n      <HeaderLayout\n        title={title.toString()}\n        primaryAction={primaryAction}\n        subtitle={subtitle}\n        navigationAction={\n          <Link\n            startIcon={<ArrowLeft />}\n            // Needed in order to redirect the user with the correct search params\n            // Since parts is using a link from react-router-dom the best way to do it is to disable the\n            // event\n            onClick={(e) => {\n              e.preventDefault();\n              goBack();\n            }}\n            as={NavLink}\n            // @ts-expect-error – DS issue with inferring props from the `as` prop.\n            to=\"/\"\n          >\n            {formatMessage({\n              id: 'global.back',\n              defaultMessage: 'Back',\n            })}\n          </Link>\n        }\n      />\n      <Dialog\n        onClose={toggleWarningUnpublish}\n        title=\"Confirmation\"\n        aria-labelledby=\"confirmation\"\n        aria-describedby=\"confirm-description\"\n        isOpen={showWarningUnpublish}\n      >\n        <DialogBody icon={<ExclamationMarkCircle />}>\n          <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n            <Flex justifyContent=\"center\" style={{ textAlign: 'center' }}>\n              <Typography id=\"confirm-description\">\n                {formatMessage({\n                  id: getTranslation('popUpWarning.warning.unpublish'),\n                  defaultMessage: 'Unpublish this content will automatically change it to a draft.',\n                })}\n              </Typography>\n            </Flex>\n            <Flex justifyContent=\"center\" style={{ textAlign: 'center' }}>\n              <Typography id=\"confirm-description\">\n                {formatMessage({\n                  id: getTranslation('popUpWarning.warning.unpublish-question'),\n                  defaultMessage: 'Are you sure you want to unpublish it?',\n                })}\n              </Typography>\n            </Flex>\n          </Flex>\n        </DialogBody>\n        <DialogFooter\n          startAction={\n            <Button onClick={toggleWarningUnpublish} variant=\"tertiary\">\n              {formatMessage({\n                id: 'components.popUpWarning.button.cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n          }\n          endAction={\n            <Button variant=\"danger-light\" onClick={handleUnpublish}>\n              {formatMessage({\n                id: 'components.popUpWarning.button.confirm',\n                defaultMessage: 'Confirm',\n              })}\n            </Button>\n          }\n        />\n      </Dialog>\n      <Dialog\n        // @ts-expect-error – Context issue with it living in the helper-plugin\n        onClose={onPublishPromptDismissal}\n        title={formatMessage({\n          id: getTranslation(`popUpWarning.warning.has-draft-relations.title`),\n          defaultMessage: 'Confirmation',\n        })}\n        labelledBy=\"confirmation\"\n        describedBy=\"confirm-description\"\n        // @ts-expect-error – Context issue with it living in the helper-plugin\n        isOpen={showPublishConfirmation}\n      >\n        <DialogBody icon={<ExclamationMarkCircle />}>\n          <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n            <Typography textAlign=\"center\" id=\"confirm-description\">\n              {draftCount}\n              {/* @ts-expect-error – this is an issue with rendering a component with the formatMessage helper, perhaps a mis-match in types? */}\n              {formatMessage(\n                {\n                  id: getTranslation(`popUpwarning.warning.has-draft-relations.message`),\n                  defaultMessage:\n                    '<b>{count, plural, one { relation is} other { relations are}}</b> not published yet and might lead to unexpected behavior.',\n                },\n                {\n                  b: (chunks) => <Typography fontWeight=\"bold\">{chunks}</Typography>,\n                  count: draftCount,\n                }\n              )}\n            </Typography>\n            <Typography textAlign=\"center\" id=\"confirm-description\">\n              {formatMessage({\n                id: getTranslation('popUpWarning.warning.publish-question'),\n                defaultMessage: 'Do you still want to publish?',\n              })}\n            </Typography>\n          </Flex>\n        </DialogBody>\n        <DialogFooter\n          startAction={\n            <Button onClick={onPublishPromptDismissal} variant=\"tertiary\">\n              {formatMessage({\n                id: 'components.popUpWarning.button.cancel',\n                defaultMessage: 'Cancel',\n              })}\n            </Button>\n          }\n          endAction={\n            <Button variant=\"success\" onClick={onPublish}>\n              {formatMessage({\n                id: getTranslation('popUpwarning.warning.has-draft-relations.button-confirm'),\n                defaultMessage: 'Publish',\n              })}\n            </Button>\n          }\n        />\n      </Dialog>\n    </>\n  );\n};\n\nexport { Header };\nexport type { HeaderProps };\n","import type { SanitizedAdminUser } from '../../../../shared/contracts/shared';\nimport type { IntlShape } from 'react-intl';\n\n/**\n * Retrieves the display name of an admin panel user\n */\nconst getDisplayName = (\n  {\n    firstname,\n    lastname,\n    username,\n    email,\n  }: Pick<SanitizedAdminUser, 'firstname' | 'lastname' | 'username' | 'email'>,\n  formatMessage: IntlShape['formatMessage']\n) => {\n  if (username) {\n    return username;\n  }\n\n  // firstname is not required if the user is created with a username\n  if (firstname) {\n    return formatMessage(\n      {\n        id: 'global.fullname',\n        defaultMessage: '{firstname} {lastname}',\n      },\n      {\n        firstname,\n        lastname,\n      }\n    ).trim();\n  }\n\n  return email;\n};\n\nexport { getDisplayName };\n","import * as React from 'react';\n\nimport { Box, Divider, Flex, Typography } from '@strapi/design-system';\nimport { useCMEditViewDataManager } from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\nimport { getDisplayName } from '../../../utils/users';\n\n/* -------------------------------------------------------------------------------------------------\n * Root\n * -----------------------------------------------------------------------------------------------*/\n\ninterface RootProps {\n  children: React.ReactNode;\n}\n\nconst Root = ({ children }: RootProps) => {\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n      {children}\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Title\n * -----------------------------------------------------------------------------------------------*/\n\nconst Title = () => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n      <Typography variant=\"sigma\" textColor=\"neutral600\" id=\"additional-information\">\n        {formatMessage({\n          id: getTranslation('containers.Edit.information'),\n          defaultMessage: 'Information',\n        })}\n      </Typography>\n\n      <Box>\n        <Divider />\n      </Box>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Body\n * -----------------------------------------------------------------------------------------------*/\n\nconst Body = () => {\n  const { formatMessage, formatRelativeTime } = useIntl();\n  const { initialData, isCreatingEntry } = useCMEditViewDataManager();\n  const currentTime = React.useRef(Date.now());\n\n  const getFieldInfo = (atField: 'updatedAt' | 'createdAt', byField: 'updatedBy' | 'createdBy') => {\n    const user = initialData[byField];\n    const at = initialData[atField];\n\n    const displayName = user ? getDisplayName(user, formatMessage) : '-';\n    const timestamp = at ? new Date(at).getTime() : Date.now();\n    const elapsed = timestamp - currentTime.current;\n    const { unit, value } = getUnits(-elapsed);\n\n    return {\n      at: formatRelativeTime(value, unit, { numeric: 'auto' }),\n      by: isCreatingEntry ? '-' : displayName,\n    };\n  };\n\n  const updated = getFieldInfo('updatedAt', 'updatedBy');\n  const created = getFieldInfo('createdAt', 'createdBy');\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n      <Flex direction=\"column\" alignItems=\"stretch\" gap={2} as=\"dl\">\n        <KeyValuePair\n          label={formatMessage({\n            id: getTranslation('containers.Edit.information.created'),\n            defaultMessage: 'Created',\n          })}\n          value={created.at}\n        />\n\n        <KeyValuePair\n          label={formatMessage({\n            id: getTranslation('containers.Edit.information.by'),\n            defaultMessage: 'By',\n          })}\n          value={created.by}\n        />\n      </Flex>\n\n      <Flex direction=\"column\" alignItems=\"stretch\" gap={2} as=\"dl\">\n        <KeyValuePair\n          label={formatMessage({\n            id: getTranslation('containers.Edit.information.lastUpdate'),\n            defaultMessage: 'Last update',\n          })}\n          value={updated.at}\n        />\n\n        <KeyValuePair\n          label={formatMessage({\n            id: getTranslation('containers.Edit.information.by'),\n            defaultMessage: 'By',\n          })}\n          value={updated.by}\n        />\n      </Flex>\n    </Flex>\n  );\n};\n\ninterface KeyValuePairProps {\n  label: string;\n  value?: string;\n}\n\nconst KeyValuePair = ({ label, value = '-' }: KeyValuePairProps) => {\n  return (\n    <Flex justifyContent=\"space-between\">\n      <Typography as=\"dt\" fontWeight=\"bold\" textColor=\"neutral800\" variant=\"pi\">\n        {label}\n      </Typography>\n      <Typography as=\"dd\" variant=\"pi\" textColor=\"neutral600\">\n        {value}\n      </Typography>\n    </Flex>\n  );\n};\n\nconst MINUTE = 60 * 1000;\nconst HOUR = MINUTE * 60;\nconst DAY = HOUR * 24;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365;\n\n/**\n * @internal\n *\n * @description This compares the milliseconds to the constants above to understand\n * which time unit it's closest too e.g. is it under a minute? then it's seconds\n * and we turn the value into seconds.\n */\nconst getUnits = (value: number): { unit: Intl.RelativeTimeFormatUnit; value: number } => {\n  if (value < MINUTE) {\n    return { unit: 'second', value: -Math.round(value / 1000) };\n  }\n  if (value < HOUR) {\n    return { unit: 'minute', value: -Math.round(value / MINUTE) };\n  }\n  if (value < DAY) {\n    return { unit: 'hour', value: -Math.round(value / HOUR) };\n  }\n  if (value < MONTH) {\n    return { unit: 'day', value: -Math.round(value / DAY) };\n  }\n  if (value < YEAR) {\n    return { unit: 'month', value: -Math.round(value / MONTH) };\n  }\n\n  return { unit: 'year', value: -Math.round(value / YEAR) };\n};\n\nexport const Information = {\n  Root,\n  Title,\n  Body,\n};\n","import { Information } from './Information';\n\nconst InformationBoxCE = () => {\n  return (\n    <Information.Root>\n      <Information.Title />\n      <Information.Body />\n    </Information.Root>\n  );\n};\n\nexport { InformationBoxCE };\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport * as React from 'react';\n\nexport const useOnce = (effect: React.EffectCallback) => React.useEffect(effect, emptyDeps);\n\nconst emptyDeps: React.DependencyList = [];\n","import * as React from 'react';\n\nimport { createSelector } from '@reduxjs/toolkit';\nimport { Main, ContentLayout, Grid, GridItem, Flex, Box } from '@strapi/design-system';\nimport {\n  CheckPermissions,\n  LinkButton,\n  LoadingIndicatorPage,\n  useNotification,\n  useTracking,\n  useRBAC,\n  Permission,\n  AllowedActions,\n} from '@strapi/helper-plugin';\nimport { Layer, Pencil } from '@strapi/icons';\nimport { Attribute, Entity } from '@strapi/types';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { RouteComponentProps, useLocation } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../../core/store/hooks';\nimport { useEnterprise } from '../../../hooks/useEnterprise';\nimport { selectAdminPermissions } from '../../../selectors';\nimport { InjectionZone } from '../../../shared/components/InjectionZone';\nimport { CollectionTypeFormWrapper } from '../../components/CollectionTypeFormWrapper';\nimport { DynamicZone } from '../../components/DynamicZone/Field';\nimport { EditViewDataManagerProvider } from '../../components/EditViewDataManagerProvider/Provider';\nimport { FieldComponent } from '../../components/FieldComponent';\nimport { Inputs } from '../../components/Inputs';\nimport { SingleTypeFormWrapper } from '../../components/SingleTypeFormWrapper';\nimport { useLazyComponents } from '../../hooks/useLazyComponents';\nimport {\n  generatePermissionsObject,\n  getFieldsActionMatchingPermissions,\n} from '../../utils/permissions';\nimport { getTranslation } from '../../utils/translations';\n\nimport { DeleteLink } from './components/DeleteLink';\nimport { DraftAndPublishBadge } from './components/DraftAndPublishBadge';\nimport { Header } from './components/Header';\nimport { InformationBoxCE } from './components/InformationBoxCE';\nimport { useOnce } from './hooks/useOnce';\n\nimport type { RootState } from '../../../core/store/configure';\nimport type { EditLayoutRow, FormattedLayouts } from '../../utils/layouts';\n\n// TODO: this seems suspicious\nconst CTB_PERMISSIONS = [{ action: 'plugin::content-type-builder.read', subject: null }];\n\n/* -------------------------------------------------------------------------------------------------\n * EditViewPage\n * -----------------------------------------------------------------------------------------------*/\n\ninterface EditViewPageProps {\n  allowedActions: AllowedActions;\n  goBack: RouteComponentProps['history']['goBack'];\n  id?: Entity.ID;\n  isSingleType?: boolean;\n  origin?: string;\n  slug: string;\n  userPermissions?: Permission[];\n}\n\nconst EditViewPage = ({\n  allowedActions,\n  isSingleType = false,\n  goBack,\n  slug,\n  id,\n  origin,\n  userPermissions = [],\n}: EditViewPageProps) => {\n  const { trackUsage } = useTracking();\n  const { formatMessage } = useIntl();\n  const permissions = useSelector(selectAdminPermissions);\n  const location = useLocation<{ error?: string }>();\n  const toggleNotification = useNotification();\n  const Information = useEnterprise(\n    InformationBoxCE,\n    async () =>\n      (\n        await import(\n          '../../../../../ee/admin/src/content-manager/pages/EditView/components/InformationBoxEE'\n        )\n      ).InformationBoxEE\n  );\n\n  useOnce(() => {\n    /**\n     * We only ever want to fire the notification once otherwise\n     * whenever the app re-renders it'll pop up regardless of\n     * what we do because the state comes from react-router-dom\n     */\n    if (location?.state && 'error' in location.state) {\n      toggleNotification({\n        type: 'warning',\n        message: location.state.error,\n        timeout: 5000,\n      });\n    }\n  });\n\n  const formattedContentTypeLayout = useTypedSelector(selectAttributesLayout);\n  const customFieldUids = useTypedSelector(selectCustomFieldUids);\n\n  const { isLazyLoading, lazyComponentStore } = useLazyComponents(customFieldUids);\n\n  const { createActionAllowedFields, readActionAllowedFields, updateActionAllowedFields } =\n    getFieldsActionMatchingPermissions(userPermissions, slug);\n\n  const configurationPermissions =\n    (isSingleType\n      ? permissions.contentManager?.singleTypesConfigurations\n      : permissions.contentManager?.collectionTypesConfigurations) ?? [];\n\n  // // FIXME when changing the routing\n  const configurationsURL = `/content-manager/${\n    isSingleType ? 'singleType' : 'collectionType'\n  }/${slug}/configurations/edit`;\n\n  const DataManagementWrapper = isSingleType ? SingleTypeFormWrapper : CollectionTypeFormWrapper;\n\n  // Check if a block is a dynamic zone\n  const isDynamicZone = (\n    block: EditLayoutRow[][]\n  ): block is Array<\n    Omit<EditLayoutRow, 'fieldSchema'> & {\n      fieldSchema: Attribute.DynamicZone;\n    }\n  >[] => {\n    return block.every((subBlock) => {\n      return subBlock.every((obj) => obj.fieldSchema.type === 'dynamiczone');\n    });\n  };\n\n  if (isLazyLoading) {\n    return <LoadingIndicatorPage />;\n  }\n\n  // wait until the EE component is fully loaded before rendering, to prevent flickering\n  if (!Information) {\n    return null;\n  }\n\n  return (\n    <DataManagementWrapper slug={slug} id={id} origin={origin}>\n      {({\n        componentsDataStructure,\n        contentTypeDataStructure,\n        data,\n        isCreatingEntry,\n        isLoadingForData,\n        onDelete,\n        onPost,\n        onPublish,\n        onDraftRelationCheck,\n        onPut,\n        onUnpublish,\n        redirectionLink,\n        status,\n      }) => {\n        return (\n          <EditViewDataManagerProvider\n            allowedActions={allowedActions}\n            createActionAllowedFields={createActionAllowedFields}\n            componentsDataStructure={componentsDataStructure}\n            contentTypeDataStructure={contentTypeDataStructure}\n            from={redirectionLink}\n            initialValues={data}\n            isCreatingEntry={isCreatingEntry}\n            isLoadingForData={isLoadingForData}\n            isSingleType={isSingleType}\n            onPost={onPost}\n            onPublish={onPublish}\n            onDraftRelationCheck={onDraftRelationCheck}\n            onPut={onPut}\n            onUnpublish={onUnpublish}\n            readActionAllowedFields={readActionAllowedFields}\n            redirectToPreviousPage={goBack}\n            slug={slug}\n            status={status}\n            updateActionAllowedFields={updateActionAllowedFields}\n          >\n            <Main aria-busy={status !== 'resolved'}>\n              <Header allowedActions={allowedActions} />\n              <ContentLayout>\n                <Grid gap={4}>\n                  <GridItem col={9} s={12}>\n                    <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n                      {formattedContentTypeLayout.map((row, index) => {\n                        if (isDynamicZone(row)) {\n                          const [[{ name, fieldSchema, metadatas, ...restProps }]] = row;\n\n                          return (\n                            <Box key={index}>\n                              <Grid gap={4}>\n                                <GridItem col={12} s={12} xs={12}>\n                                  <DynamicZone\n                                    name={name}\n                                    fieldSchema={fieldSchema}\n                                    metadatas={metadatas}\n                                    {...restProps}\n                                  />\n                                </GridItem>\n                              </Grid>\n                            </Box>\n                          );\n                        }\n\n                        return (\n                          <Box\n                            key={index}\n                            hasRadius\n                            background=\"neutral0\"\n                            shadow=\"tableShadow\"\n                            paddingLeft={6}\n                            paddingRight={6}\n                            paddingTop={6}\n                            paddingBottom={6}\n                            borderColor=\"neutral150\"\n                          >\n                            <Flex direction=\"column\" alignItems=\"stretch\" gap={6}>\n                              {row.map((columns, gridRowIndex) => (\n                                <Grid key={gridRowIndex} gap={4}>\n                                  {columns.map(\n                                    ({\n                                      fieldSchema,\n                                      metadatas,\n                                      name,\n                                      size,\n                                      queryInfos,\n                                      ...restProps\n                                    }) => {\n                                      const isComponent = fieldSchema.type === 'component';\n\n                                      if (isComponent) {\n                                        const {\n                                          component,\n                                          max,\n                                          min,\n                                          repeatable = false,\n                                          required = false,\n                                        } = fieldSchema;\n\n                                        return (\n                                          <GridItem col={size} s={12} xs={12} key={component}>\n                                            <FieldComponent\n                                              componentUid={component}\n                                              isRepeatable={repeatable}\n                                              intlLabel={{\n                                                id: metadatas.label,\n                                                defaultMessage: metadatas.label,\n                                              }}\n                                              max={max}\n                                              min={min}\n                                              name={name}\n                                              required={required}\n                                              {...restProps}\n                                            />\n                                          </GridItem>\n                                        );\n                                      }\n\n                                      return (\n                                        <GridItem col={size} key={name} s={12} xs={12}>\n                                          <Inputs\n                                            size={size}\n                                            fieldSchema={fieldSchema}\n                                            keys={name}\n                                            metadatas={metadatas}\n                                            queryInfos={queryInfos}\n                                            customFieldInputs={lazyComponentStore}\n                                            {...restProps}\n                                          />\n                                        </GridItem>\n                                      );\n                                    }\n                                  )}\n                                </Grid>\n                              ))}\n                            </Flex>\n                          </Box>\n                        );\n                      })}\n                    </Flex>\n                  </GridItem>\n                  <GridItem col={3} s={12}>\n                    <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n                      <DraftAndPublishBadge />\n                      <Box\n                        as=\"aside\"\n                        aria-labelledby=\"additional-information\"\n                        background=\"neutral0\"\n                        borderColor=\"neutral150\"\n                        hasRadius\n                        paddingBottom={4}\n                        paddingLeft={4}\n                        paddingRight={4}\n                        paddingTop={6}\n                        shadow=\"tableShadow\"\n                      >\n                        <Information />\n                        <InjectionZone area=\"contentManager.editView.informations\" />\n                      </Box>\n                      <Box as=\"aside\" aria-labelledby=\"links\">\n                        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n                          <InjectionZone area=\"contentManager.editView.right-links\" slug={slug} />\n                          {slug !== 'strapi::administrator' && (\n                            <CheckPermissions permissions={CTB_PERMISSIONS}>\n                              <LinkButton\n                                onClick={() => {\n                                  trackUsage('willEditEditLayout');\n                                }}\n                                size=\"S\"\n                                startIcon={<Pencil />}\n                                style={{ width: '100%' }}\n                                // @ts-expect-error – Remove deprecated component\n                                to={`/plugins/content-type-builder/content-types/${slug}`}\n                                variant=\"secondary\"\n                              >\n                                {formatMessage({\n                                  id: getTranslation('link-to-ctb'),\n                                  defaultMessage: 'Edit the model',\n                                })}\n                              </LinkButton>\n                            </CheckPermissions>\n                          )}\n\n                          <CheckPermissions permissions={configurationPermissions}>\n                            <LinkButton\n                              size=\"S\"\n                              startIcon={<Layer />}\n                              style={{ width: '100%' }}\n                              // @ts-expect-error – Remove deprecated component\n                              to={configurationsURL}\n                              variant=\"secondary\"\n                            >\n                              {formatMessage({\n                                id: 'app.links.configure-view',\n                                defaultMessage: 'Configure the view',\n                              })}\n                            </LinkButton>\n                          </CheckPermissions>\n\n                          {allowedActions.canDelete && !isCreatingEntry && (\n                            <DeleteLink onDelete={onDelete} />\n                          )}\n                        </Flex>\n                      </Box>\n                    </Flex>\n                  </GridItem>\n                </Grid>\n              </ContentLayout>\n            </Main>\n          </EditViewDataManagerProvider>\n        );\n      }}\n    </DataManagementWrapper>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Selectors\n * -----------------------------------------------------------------------------------------------*/\n\n/**\n * The layout has no concept of UI panes, it only knows what should be on separate rows, therefore\n * we manually split the layout into panes based on the presence of dynamic zones. where we then\n * use the original layout. Hence why, ITS ANOTHER ARRAY!\n */\nconst selectAttributesLayout = createSelector(\n  (state: RootState) => state['content-manager_editViewLayoutManager'].currentLayout,\n  (layout) => {\n    const currentContentTypeLayoutData = layout?.contentType;\n\n    if (!currentContentTypeLayoutData) {\n      return [];\n    }\n\n    const currentLayout = currentContentTypeLayoutData.layouts.edit;\n\n    let currentRowIndex = 0;\n    const newLayout: Array<FormattedLayouts['contentType']['layouts']['edit']> = [];\n\n    currentLayout.forEach((row) => {\n      const hasDynamicZone = row.some(\n        ({ name }) => currentContentTypeLayoutData.attributes[name]['type'] === 'dynamiczone'\n      );\n\n      if (!newLayout[currentRowIndex]) {\n        newLayout[currentRowIndex] = [];\n      }\n\n      if (hasDynamicZone) {\n        currentRowIndex =\n          currentRowIndex === 0 && newLayout[0].length === 0 ? 0 : currentRowIndex + 1;\n\n        if (!newLayout[currentRowIndex]) {\n          newLayout[currentRowIndex] = [];\n        }\n        newLayout[currentRowIndex].push(row);\n\n        currentRowIndex += 1;\n      } else {\n        newLayout[currentRowIndex].push(row);\n      }\n    });\n\n    return newLayout.filter((arr) => arr.length > 0);\n  }\n);\n\nconst selectCustomFieldUids = createSelector(\n  (state: RootState) => state['content-manager_editViewLayoutManager'].currentLayout,\n  (layout) => {\n    if (!layout.contentType) return [];\n    // Get all the fields on the content-type and its components\n    const allFields = [\n      ...layout.contentType.layouts.edit,\n      ...Object.values(layout.components).flatMap((component) => component.layouts.edit),\n    ].flat();\n\n    // Filter that down to custom fields and map the uids\n    const customFieldUids = allFields\n      .filter((field) => field.fieldSchema.customField)\n      .map((customField) => customField.fieldSchema.customField!);\n    // Make sure the list is unique\n    const uniqueCustomFieldUids = [...new Set(customFieldUids)];\n\n    return uniqueCustomFieldUids;\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * ProtectedEditViewPage\n * -----------------------------------------------------------------------------------------------*/\n\ninterface ProtectedEditViewPageProps extends Omit<EditViewPageProps, 'allowedActions'> {}\n\nconst ProtectedEditViewPage = ({\n  slug,\n  userPermissions = [],\n  ...restProps\n}: ProtectedEditViewPageProps) => {\n  const viewPermissions = React.useMemo(() => generatePermissionsObject(slug), [slug]);\n  const { isLoading, allowedActions } = useRBAC(\n    viewPermissions,\n    // TODO: just make usePermissions undefined by default in the reducer?\n    userPermissions\n  );\n\n  if (isLoading) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <EditViewPage\n      {...restProps}\n      allowedActions={allowedActions}\n      slug={slug}\n      userPermissions={userPermissions}\n    />\n  );\n};\n\nexport { EditViewPage, ProtectedEditViewPage };\nexport type { EditViewPageProps, ProtectedEditViewPageProps };\n","import * as React from 'react';\n\nimport { LoadingIndicatorPage, useQueryParams, useStrapiApp } from '@strapi/helper-plugin';\nimport produce from 'immer';\n\nimport { HOOKS } from '../../constants';\nimport { useTypedDispatch, useTypedSelector } from '../../core/store/hooks';\nimport { useSyncRbac } from '../hooks/useSyncRbac';\n\nimport { ProtectedEditViewPage, ProtectedEditViewPageProps } from './EditView/EditViewPage';\n\nimport type { FormattedLayouts } from '../utils/layouts';\n\nconst { MUTATE_EDIT_VIEW_LAYOUT } = HOOKS;\n\n/* -------------------------------------------------------------------------------------------------\n * EditViewLayoutManager\n * -----------------------------------------------------------------------------------------------*/\ninterface EditViewLayoutManagerProps extends ProtectedEditViewPageProps {\n  layout: FormattedLayouts;\n}\n\nconst EditViewLayoutManager = ({ layout, ...rest }: EditViewLayoutManagerProps) => {\n  const currentLayout = useTypedSelector(\n    (state) => state['content-manager_editViewLayoutManager'].currentLayout\n  );\n  const dispatch = useTypedDispatch();\n  const [{ query }] = useQueryParams();\n  const { runHookWaterfall } = useStrapiApp();\n  const { permissions, isValid: isValidPermissions } = useSyncRbac(query, rest.slug, 'editView');\n\n  React.useEffect(() => {\n    // Allow the plugins to extend the edit view layout\n    const mutatedLayout = runHookWaterfall(MUTATE_EDIT_VIEW_LAYOUT, { layout, query });\n\n    dispatch(setLayout(mutatedLayout.layout, query));\n\n    return () => {\n      dispatch(resetProps());\n    };\n  }, [layout, dispatch, query, runHookWaterfall]);\n\n  if (!currentLayout.contentType || !isValidPermissions) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return <ProtectedEditViewPage {...rest} userPermissions={permissions ?? []} />;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Reducer\n * -----------------------------------------------------------------------------------------------*/\n\nconst RESET_PROPS = 'ContentManager/EditViewLayoutManager/RESET_PROPS';\n\ninterface ResetPropsAction {\n  type: typeof RESET_PROPS;\n}\n\nconst resetProps = () => ({ type: RESET_PROPS } satisfies ResetPropsAction);\n\nconst SET_LAYOUT = 'ContentManager/EditViewLayoutManager/SET_LAYOUT';\n\ninterface SetLayoutAction {\n  type: typeof SET_LAYOUT;\n  layout: EditViewLayoutManagerProps['layout'];\n  query: object;\n}\n\nconst setLayout = (layout: SetLayoutAction['layout'], query: SetLayoutAction['query']) =>\n  ({\n    type: SET_LAYOUT,\n    layout,\n    query,\n  } satisfies SetLayoutAction);\n\ninterface EditViewState {\n  currentLayout: {\n    components: EditViewLayoutManagerProps['layout']['components'];\n    contentType: EditViewLayoutManagerProps['layout']['contentType'] | null;\n  };\n}\n\nconst initialState = {\n  currentLayout: {\n    components: {},\n    contentType: null,\n  },\n} satisfies EditViewState;\n\ntype Action = ResetPropsAction | SetLayoutAction;\n\nconst reducer = (state: EditViewState = initialState, action: Action) =>\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case RESET_PROPS: {\n        draftState.currentLayout = initialState.currentLayout;\n        break;\n      }\n      case SET_LAYOUT: {\n        // @ts-expect-error – recursive type.\n        draftState.currentLayout = action.layout;\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport { EditViewLayoutManager, reducer };\nexport type { EditViewLayoutManagerProps, EditViewState };\n","import { parse, stringify } from 'qs';\nimport { useLocation } from 'react-router-dom';\n\nconst usePluginsQueryParams = () => {\n  const { search } = useLocation();\n  const query = search ? parse(search.substring(1)) : {};\n\n  return query.plugins ? stringify({ plugins: query.plugins }, { encode: false }) : '';\n};\n\nexport default usePluginsQueryParams;\n","import React from 'react';\n\nimport {\n  Button,\n  Flex,\n  Grid,\n  GridItem,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  ModalLayout,\n  TextInput,\n  ToggleInput,\n  Typography,\n} from '@strapi/design-system';\nimport upperFirst from 'lodash/upperFirst';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport FieldTypeIcon from '../../../components/FieldTypeIcon';\nimport { getTranslation } from '../../../utils/translations';\n\nconst HeaderContainer = styled(Flex)`\n  svg {\n    width: ${32 / 16}rem;\n    height: ${24 / 16}rem;\n    margin-right: ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nexport const EditFieldForm = ({\n  attributes,\n  fieldForm,\n  fieldToEdit,\n  onCloseModal,\n  onChangeEditLabel,\n  onSubmit,\n  type,\n}) => {\n  const { formatMessage } = useIntl();\n\n  const relationType = attributes[fieldToEdit].relationType;\n\n  let shouldDisplaySortToggle = !['media', 'relation'].includes(type);\n\n  if (['oneWay', 'oneToOne', 'manyToOne'].includes(relationType)) {\n    shouldDisplaySortToggle = true;\n  }\n\n  return (\n    <ModalLayout onClose={onCloseModal} labelledBy=\"title\">\n      <form onSubmit={onSubmit}>\n        <ModalHeader>\n          <HeaderContainer>\n            <FieldTypeIcon type={type} />\n            <Typography fontWeight=\"bold\" textColor=\"neutral800\" as=\"h2\" id=\"title\">\n              {formatMessage(\n                {\n                  id: getTranslation('containers.ListSettingsView.modal-form.edit-label'),\n                  defaultMessage: 'Edit {fieldName}',\n                },\n                { fieldName: upperFirst(fieldToEdit) }\n              )}\n            </Typography>\n          </HeaderContainer>\n        </ModalHeader>\n        <ModalBody>\n          <Grid gap={4}>\n            <GridItem s={12} col={6}>\n              <TextInput\n                id=\"label-input\"\n                label={formatMessage({\n                  id: getTranslation('form.Input.label'),\n                  defaultMessage: 'Label',\n                })}\n                name=\"label\"\n                onChange={(e) => onChangeEditLabel(e)}\n                value={fieldForm.label}\n                hint={formatMessage({\n                  id: getTranslation('form.Input.label.inputDescription'),\n                  defaultMessage: \"This value overrides the label displayed in the table's head\",\n                })}\n              />\n            </GridItem>\n            {shouldDisplaySortToggle && (\n              <GridItem s={12} col={6}>\n                <ToggleInput\n                  data-testid=\"Enable sort on this field\"\n                  checked={fieldForm.sortable}\n                  label={formatMessage({\n                    id: getTranslation('form.Input.sort.field'),\n                    defaultMessage: 'Enable sort on this field',\n                  })}\n                  name=\"sortable\"\n                  onChange={(e) =>\n                    onChangeEditLabel({ target: { name: 'sortable', value: e.target.checked } })\n                  }\n                  onLabel={formatMessage({\n                    id: 'app.components.ToggleCheckbox.on-label',\n                    defaultMessage: 'on',\n                  })}\n                  offLabel={formatMessage({\n                    id: 'app.components.ToggleCheckbox.off-label',\n                    defaultMessage: 'off',\n                  })}\n                />\n              </GridItem>\n            )}\n          </Grid>\n        </ModalBody>\n        <ModalFooter\n          startActions={\n            <Button onClick={onCloseModal} variant=\"tertiary\">\n              {formatMessage({ id: 'app.components.Button.cancel', defaultMessage: 'Cancel' })}\n            </Button>\n          }\n          endActions={\n            <Button type=\"submit\">\n              {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n            </Button>\n          }\n        />\n      </form>\n    </ModalLayout>\n  );\n};\n\nEditFieldForm.propTypes = {\n  attributes: PropTypes.objectOf(\n    PropTypes.shape({\n      relationType: PropTypes.string,\n    })\n  ).isRequired,\n  fieldForm: PropTypes.shape({\n    label: PropTypes.string,\n    sortable: PropTypes.bool,\n  }).isRequired,\n  fieldToEdit: PropTypes.string.isRequired,\n  onChangeEditLabel: PropTypes.func.isRequired,\n  onCloseModal: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n","import React from 'react';\n\nimport {\n  Box,\n  Flex,\n  Grid,\n  GridItem,\n  Option,\n  Select,\n  ToggleInput,\n  Typography,\n} from '@strapi/design-system';\nimport { useCollator } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { useEnterprise } from '../../../../hooks/useEnterprise';\nimport { getTranslation } from '../../../utils/translations';\n\nexport const Settings = ({\n  contentTypeOptions,\n  modifiedData,\n  onChange,\n  sortOptions: sortOptionsCE,\n}) => {\n  const { formatMessage, locale } = useIntl();\n  const formatter = useCollator(locale, {\n    sensitivity: 'base',\n  });\n  const sortOptions = useEnterprise(\n    sortOptionsCE,\n    async () =>\n      (\n        await import(\n          '../../../../../../ee/admin/src/content-manager/pages/ListSettingsView/constants'\n        )\n      ).REVIEW_WORKFLOW_STAGE_SORT_OPTION_NAME,\n    {\n      combine(ceOptions, eeOption) {\n        return [...ceOptions, { ...eeOption, label: formatMessage(eeOption.label) }];\n      },\n\n      defaultValue: sortOptionsCE,\n\n      enabled: !!contentTypeOptions?.reviewWorkflows,\n    }\n  );\n\n  const sortOptionsSorted = sortOptions.sort((a, b) => formatter.compare(a.label, b.label));\n  const { settings } = modifiedData;\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n      <Typography variant=\"delta\" as=\"h2\">\n        {formatMessage({\n          id: getTranslation('containers.SettingPage.settings'),\n          defaultMessage: 'Settings',\n        })}\n      </Typography>\n\n      <Flex justifyContent=\"space-between\" gap={4}>\n        <Box width=\"100%\">\n          <ToggleInput\n            label={formatMessage({\n              id: getTranslation('form.Input.search'),\n              defaultMessage: 'Enable search',\n            })}\n            onChange={(e) => {\n              onChange({ target: { name: 'settings.searchable', value: e.target.checked } });\n            }}\n            onLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.on-label',\n              defaultMessage: 'on',\n            })}\n            offLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.off-label',\n              defaultMessage: 'off',\n            })}\n            name=\"settings.searchable\"\n            checked={settings.searchable}\n          />\n        </Box>\n\n        <Box width=\"100%\">\n          <ToggleInput\n            label={formatMessage({\n              id: getTranslation('form.Input.filters'),\n              defaultMessage: 'Enable filters',\n            })}\n            onChange={(e) => {\n              onChange({ target: { name: 'settings.filterable', value: e.target.checked } });\n            }}\n            onLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.on-label',\n              defaultMessage: 'on',\n            })}\n            offLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.off-label',\n              defaultMessage: 'off',\n            })}\n            name=\"settings.filterable\"\n            checked={settings.filterable}\n          />\n        </Box>\n\n        <Box width=\"100%\">\n          <ToggleInput\n            label={formatMessage({\n              id: getTranslation('form.Input.bulkActions'),\n              defaultMessage: 'Enable bulk actions',\n            })}\n            onChange={(e) => {\n              onChange({ target: { name: 'settings.bulkable', value: e.target.checked } });\n            }}\n            onLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.on-label',\n              defaultMessage: 'on',\n            })}\n            offLabel={formatMessage({\n              id: 'app.components.ToggleCheckbox.off-label',\n              defaultMessage: 'off',\n            })}\n            name=\"settings.bulkable\"\n            checked={settings.bulkable}\n          />\n        </Box>\n      </Flex>\n\n      <Grid gap={4}>\n        <GridItem s={12} col={6}>\n          <Select\n            label={formatMessage({\n              id: getTranslation('form.Input.pageEntries'),\n              defaultMessage: 'Entries per page',\n            })}\n            hint={formatMessage({\n              id: getTranslation('form.Input.pageEntries.inputDescription'),\n              defaultMessage:\n                'Note: You can override this value in the Collection Type settings page.',\n            })}\n            onChange={(value) => onChange({ target: { name: 'settings.pageSize', value } })}\n            name=\"settings.pageSize\"\n            value={modifiedData.settings.pageSize || ''}\n          >\n            {[10, 20, 50, 100].map((pageSize) => (\n              <Option key={pageSize} value={pageSize}>\n                {pageSize}\n              </Option>\n            ))}\n          </Select>\n        </GridItem>\n        <GridItem s={12} col={3}>\n          <Select\n            label={formatMessage({\n              id: getTranslation('form.Input.defaultSort'),\n              defaultMessage: 'Default sort attribute',\n            })}\n            onChange={(value) => onChange({ target: { name: 'settings.defaultSortBy', value } })}\n            name=\"settings.defaultSortBy\"\n            value={modifiedData.settings.defaultSortBy || ''}\n          >\n            {sortOptionsSorted.map(({ value, label }) => (\n              <Option key={value} value={value}>\n                {label}\n              </Option>\n            ))}\n          </Select>\n        </GridItem>\n        <GridItem s={12} col={3}>\n          <Select\n            label={formatMessage({\n              id: getTranslation('form.Input.sort.order'),\n              defaultMessage: 'Default sort order',\n            })}\n            onChange={(value) => onChange({ target: { name: 'settings.defaultSortOrder', value } })}\n            name=\"settings.defaultSortOrder\"\n            value={modifiedData.settings.defaultSortOrder || ''}\n          >\n            {['ASC', 'DESC'].map((order) => (\n              <Option key={order} value={order}>\n                {order}\n              </Option>\n            ))}\n          </Select>\n        </GridItem>\n      </Grid>\n    </Flex>\n  );\n};\n\nSettings.defaultProps = {\n  modifiedData: {},\n  sortOptions: [],\n};\n\nSettings.propTypes = {\n  contentTypeOptions: PropTypes.object.isRequired,\n  modifiedData: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  sortOptions: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.string,\n      label: PropTypes.string,\n    }).isRequired\n  ),\n};\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { Cross, Drag, Pencil } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport { CardDragPreview } from '../../../components/DragPreviews/CardDragPreview';\nimport { ItemTypes } from '../../../utils/dragAndDrop';\nimport { getTranslation } from '../../../utils/translations';\n\nconst ActionButton = styled.button`\n  display: flex;\n  align-items: center;\n  height: ${({ theme }) => theme.spaces[7]};\n\n  &:last-child {\n    padding: 0 ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nconst DragButton = styled(ActionButton)`\n  padding: 0 ${({ theme }) => theme.spaces[3]};\n  border-right: 1px solid ${({ theme }) => theme.colors.neutral150};\n  cursor: all-scroll;\n\n  svg {\n    width: ${12 / 16}rem;\n    height: ${12 / 16}rem;\n  }\n`;\n\nconst FieldContainer = styled(Flex)`\n  max-height: ${32 / 16}rem;\n  cursor: pointer;\n\n  svg {\n    width: ${10 / 16}rem;\n    height: ${10 / 16}rem;\n\n    path {\n      fill: ${({ theme }) => theme.colors.neutral600};\n    }\n  }\n\n  &:hover {\n    background-color: ${({ theme }) => theme.colors.primary100};\n    border-color: ${({ theme }) => theme.colors.primary200};\n\n    svg {\n      path {\n        fill: ${({ theme }) => theme.colors.primary600};\n      }\n    }\n\n    ${Typography} {\n      color: ${({ theme }) => theme.colors.primary600};\n    }\n\n    ${DragButton} {\n      border-right: 1px solid ${({ theme }) => theme.colors.primary200};\n    }\n  }\n`;\n\nconst FieldWrapper = styled(Box)`\n  &:last-child {\n    padding-right: ${({ theme }) => theme.spaces[3]};\n  }\n`;\n\nconst DraggableCard = ({\n  index,\n  isDraggingSibling,\n  labelField,\n  onClickEditField,\n  onMoveField,\n  onRemoveField,\n  name,\n  setIsDraggingSibling,\n}) => {\n  const { formatMessage } = useIntl();\n  const dragRef = useRef(null);\n  const dropRef = useRef(null);\n  const [, forceRerenderAfterDnd] = useState(false);\n  const editButtonRef = useRef();\n\n  const handleClickEditRow = () => {\n    if (editButtonRef.current) {\n      editButtonRef.current.click();\n    }\n  };\n\n  // TODO: this can be simplified a lot by using the useDragAndDrop() hook\n  const [, drop] = useDrop({\n    accept: ItemTypes.FIELD,\n    hover(item, monitor) {\n      if (!dropRef.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = dropRef.current.getBoundingClientRect();\n      // Get vertical middle\n      const hoverMiddleX = (hoverBoundingRect.right - hoverBoundingRect.left) / 2;\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n      // Get pixels to the top\n      const hoverClientX = clientOffset.x - hoverBoundingRect.left;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex > hoverIndex && hoverClientX > hoverMiddleX) {\n        return;\n      }\n      // Dragging upwards\n      if (dragIndex < hoverIndex && hoverClientX < hoverMiddleX) {\n        return;\n      }\n\n      onMoveField(dragIndex, hoverIndex);\n\n      item.index = hoverIndex;\n    },\n  });\n\n  const [{ isDragging }, drag, preview] = useDrag({\n    type: ItemTypes.FIELD,\n    item() {\n      return { index, labelField, name };\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n    end() {\n      setIsDraggingSibling(false);\n    },\n  });\n\n  useEffect(() => {\n    preview(getEmptyImage(), { captureDraggingState: false });\n  }, [preview]);\n\n  useEffect(() => {\n    if (isDragging) {\n      setIsDraggingSibling(true);\n    }\n  }, [isDragging, setIsDraggingSibling]);\n\n  // Effect in order to force a rerender after reordering the components\n  // Since we are removing the Accordion when doing the DnD  we are losing the dragRef, therefore the replaced element cannot be dragged\n  // anymore, this hack forces a rerender in order to apply the dragRef\n  useEffect(() => {\n    if (!isDraggingSibling) {\n      forceRerenderAfterDnd((prev) => !prev);\n    }\n  }, [isDraggingSibling]);\n\n  // Create the refs\n  // We need 1 for the drop target\n  // 1 for the drag target\n  const refs = {\n    dragRef: drag(dragRef),\n    dropRef: drop(dropRef),\n  };\n\n  return (\n    <FieldWrapper ref={refs ? refs.dropRef : null}>\n      {isDragging && <CardDragPreview labelField={labelField} />}\n      {!isDragging && isDraggingSibling && <CardDragPreview isSibling labelField={labelField} />}\n\n      {!isDragging && !isDraggingSibling && (\n        <FieldContainer\n          borderColor=\"neutral150\"\n          background=\"neutral100\"\n          hasRadius\n          justifyContent=\"space-between\"\n          onClick={handleClickEditRow}\n          isDragging={isDragging}\n        >\n          <Flex gap={3}>\n            <DragButton\n              as=\"span\"\n              aria-label={formatMessage(\n                {\n                  id: getTranslation('components.DraggableCard.move.field'),\n                  defaultMessage: 'Move {item}',\n                },\n                { item: labelField }\n              )}\n              onClick={(e) => e.stopPropagation()}\n              ref={refs.dragRef}\n              type=\"button\"\n            >\n              <Drag />\n            </DragButton>\n            <Typography fontWeight=\"bold\">{labelField}</Typography>\n          </Flex>\n          <Flex paddingLeft={3}>\n            <ActionButton\n              ref={editButtonRef}\n              onClick={(e) => {\n                e.stopPropagation();\n                onClickEditField(name);\n              }}\n              aria-label={formatMessage(\n                {\n                  id: getTranslation('components.DraggableCard.edit.field'),\n                  defaultMessage: 'Edit {item}',\n                },\n                { item: labelField }\n              )}\n              type=\"button\"\n            >\n              <Pencil />\n            </ActionButton>\n            <ActionButton\n              onClick={onRemoveField}\n              data-testid={`delete-${name}`}\n              aria-label={formatMessage(\n                {\n                  id: getTranslation('components.DraggableCard.delete.field'),\n                  defaultMessage: 'Delete {item}',\n                },\n                { item: labelField }\n              )}\n              type=\"button\"\n            >\n              <Cross />\n            </ActionButton>\n          </Flex>\n        </FieldContainer>\n      )}\n    </FieldWrapper>\n  );\n};\n\nDraggableCard.propTypes = {\n  index: PropTypes.number.isRequired,\n  isDraggingSibling: PropTypes.bool.isRequired,\n  labelField: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onClickEditField: PropTypes.func.isRequired,\n  onMoveField: PropTypes.func.isRequired,\n  onRemoveField: PropTypes.func.isRequired,\n  setIsDraggingSibling: PropTypes.func.isRequired,\n};\n\nexport default DraggableCard;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport { Box, Flex, VisuallyHidden, Typography } from '@strapi/design-system';\nimport { Menu } from '@strapi/design-system/v2';\nimport { Plus } from '@strapi/icons';\nimport { PropTypes } from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../../../utils/translations';\n\nimport DraggableCard from './DraggableCard';\n\nexport const SortDisplayedFields = ({\n  displayedFields,\n  listRemainingFields,\n  metadatas,\n  onAddField,\n  onClickEditField,\n  onMoveField,\n  onRemoveField,\n}) => {\n  const { formatMessage } = useIntl();\n  const [isDraggingSibling, setIsDraggingSibling] = useState(false);\n  const [lastAction, setLastAction] = useState(null);\n  const scrollableContainerRef = useRef();\n\n  function handleAddField(...args) {\n    setLastAction('add');\n    onAddField(...args);\n  }\n\n  function handleRemoveField(...args) {\n    setLastAction('remove');\n    onRemoveField(...args);\n  }\n\n  useEffect(() => {\n    if (lastAction === 'add' && scrollableContainerRef?.current) {\n      scrollableContainerRef.current.scrollLeft = scrollableContainerRef.current.scrollWidth;\n    }\n  }, [displayedFields, lastAction]);\n\n  return (\n    <Flex alignItems=\"stretch\" direction=\"column\" gap={4}>\n      <Typography variant=\"delta\" as=\"h2\">\n        {formatMessage({\n          id: getTranslation('containers.SettingPage.view'),\n          defaultMessage: 'View',\n        })}\n      </Typography>\n\n      <Flex padding={4} borderColor=\"neutral300\" borderStyle=\"dashed\" borderWidth=\"1px\" hasRadius>\n        <Box flex=\"1\" overflow=\"scroll hidden\" ref={scrollableContainerRef}>\n          <Flex gap={3}>\n            {displayedFields.map((field, index) => (\n              <DraggableCard\n                key={field}\n                index={index}\n                isDraggingSibling={isDraggingSibling}\n                onMoveField={onMoveField}\n                onClickEditField={onClickEditField}\n                onRemoveField={(e) => handleRemoveField(e, index)}\n                name={field}\n                labelField={metadatas[field].list.label || field}\n                setIsDraggingSibling={setIsDraggingSibling}\n              />\n            ))}\n          </Flex>\n        </Box>\n\n        <Menu.Root>\n          <Menu.Trigger\n            paddingLeft={2}\n            paddingRight={2}\n            justifyContent=\"center\"\n            endIcon={null}\n            disabled={listRemainingFields.length <= 0}\n            variant=\"tertiary\"\n          >\n            <VisuallyHidden as=\"span\">\n              {formatMessage({\n                id: getTranslation('components.FieldSelect.label'),\n                defaultMessage: 'Add a field',\n              })}\n            </VisuallyHidden>\n            <Plus aria-hidden focusable={false} style={{ position: 'relative', top: 2 }} />\n          </Menu.Trigger>\n          <Menu.Content>\n            {listRemainingFields.map((field) => (\n              <Menu.Item key={field} onSelect={() => handleAddField(field)}>\n                {metadatas[field].list.label || field}\n              </Menu.Item>\n            ))}\n          </Menu.Content>\n        </Menu.Root>\n      </Flex>\n    </Flex>\n  );\n};\n\nSortDisplayedFields.propTypes = {\n  displayedFields: PropTypes.array.isRequired,\n  listRemainingFields: PropTypes.array.isRequired,\n  metadatas: PropTypes.objectOf(\n    PropTypes.shape({\n      list: PropTypes.shape({\n        label: PropTypes.string,\n      }),\n    })\n  ).isRequired,\n  onAddField: PropTypes.func.isRequired,\n  onClickEditField: PropTypes.func.isRequired,\n  onMoveField: PropTypes.func.isRequired,\n  onRemoveField: PropTypes.func.isRequired,\n};\n","export const EXCLUDED_SORT_ATTRIBUTE_TYPES = [\n  'media',\n  'richtext',\n  'dynamiczone',\n  'relation',\n  'component',\n  'json',\n  'blocks',\n];\n","import produce from 'immer'; // current\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { arrayMoveItem } from '../../utils';\n\nconst initialState = {\n  fieldForm: {},\n  fieldToEdit: '',\n  initialData: {},\n  modifiedData: {},\n};\n\nconst reducer = (state = initialState, action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, (draftState) => {\n    const layoutFieldListPath = ['modifiedData', 'layouts', 'list'];\n    switch (action.type) {\n      case 'ADD_FIELD': {\n        const layoutFieldList = get(state, layoutFieldListPath, []);\n        set(draftState, layoutFieldListPath, [...layoutFieldList, action.item]);\n        break;\n      }\n      case 'MOVE_FIELD': {\n        const layoutFieldList = get(state, layoutFieldListPath, []);\n        const { originalIndex, atIndex } = action;\n        set(\n          draftState,\n          layoutFieldListPath,\n          arrayMoveItem(layoutFieldList, originalIndex, atIndex)\n        );\n        break;\n      }\n      case 'ON_CHANGE': {\n        set(draftState, ['modifiedData', ...action.keys.split('.')], action.value);\n        break;\n      }\n      case 'ON_CHANGE_FIELD_METAS': {\n        set(draftState, ['fieldForm', action.name], action.value);\n        break;\n      }\n      case 'REMOVE_FIELD': {\n        const layoutFieldList = get(state, layoutFieldListPath, []);\n        set(\n          draftState,\n          layoutFieldListPath,\n          layoutFieldList.filter((_, index) => action.index !== index)\n        );\n        break;\n      }\n      case 'SET_FIELD_TO_EDIT': {\n        const { fieldToEdit } = action;\n        draftState.fieldToEdit = fieldToEdit;\n        draftState.fieldForm.label = get(\n          draftState,\n          ['modifiedData', 'metadatas', fieldToEdit, 'list', 'label'],\n          ''\n        );\n        draftState.fieldForm.sortable = get(\n          draftState,\n          ['modifiedData', 'metadatas', fieldToEdit, 'list', 'sortable'],\n          ''\n        );\n        break;\n      }\n      case 'UNSET_FIELD_TO_EDIT': {\n        draftState.fieldForm = {};\n        draftState.fieldToEdit = '';\n        break;\n      }\n      case 'SUBMIT_FIELD_FORM': {\n        const fieldMetadataPath = ['modifiedData', 'metadatas', state.fieldToEdit, 'list'];\n        set(draftState, [...fieldMetadataPath, 'label'], state.fieldForm.label);\n        set(draftState, [...fieldMetadataPath, 'sortable'], state.fieldForm.sortable);\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport default reducer;\nexport { initialState };\n","import * as React from 'react';\n\nimport {\n  Button,\n  ContentLayout,\n  Divider,\n  Flex,\n  HeaderLayout,\n  Layout,\n  Main,\n} from '@strapi/design-system';\nimport { Link, useFetchClient, useNotification, useTracking } from '@strapi/helper-plugin';\nimport { ArrowLeft, Check } from '@strapi/icons';\nimport isEqual from 'lodash/isEqual';\nimport upperFirst from 'lodash/upperFirst';\nimport PropTypes from 'prop-types';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\n\nimport { ModelsContext } from '../../contexts/models';\nimport { usePluginsQueryParams } from '../../hooks';\nimport { checkIfAttributeIsDisplayable } from '../../utils';\nimport { getTranslation } from '../../utils/translations';\n\nimport { EditFieldForm } from './components/EditFieldForm';\nimport { Settings } from './components/Settings';\nimport { SortDisplayedFields } from './components/SortDisplayedFields';\nimport { EXCLUDED_SORT_ATTRIBUTE_TYPES } from './constants';\nimport reducer, { initialState } from './reducer';\n\nexport const ListSettingsView = ({ layout, slug }) => {\n  const { put } = useFetchClient();\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const pluginsQueryParams = usePluginsQueryParams();\n  const toggleNotification = useNotification();\n  const { refetchData } = React.useContext(ModelsContext);\n  const [{ fieldToEdit, fieldForm, initialData, modifiedData }, dispatch] = React.useReducer(\n    reducer,\n    initialState,\n    () => ({\n      ...initialState,\n      initialData: layout,\n      modifiedData: layout,\n    })\n  );\n\n  const isModalFormOpen = Object.keys(fieldForm).length !== 0;\n\n  const { attributes, options } = layout;\n  const displayedFields = modifiedData.layouts.list;\n\n  const goBackUrl = () => {\n    const {\n      settings: { pageSize, defaultSortBy, defaultSortOrder },\n      kind,\n      uid,\n    } = initialData;\n    const sort = `${defaultSortBy}:${defaultSortOrder}`;\n    const goBackSearch = `${stringify(\n      {\n        page: 1,\n        pageSize,\n        sort,\n      },\n      { encode: false }\n    )}${pluginsQueryParams ? `&${pluginsQueryParams}` : ''}`;\n\n    return `/content-manager/${kind}/${uid}?${goBackSearch}`;\n  };\n\n  const handleChange = ({ target: { name, value } }) => {\n    dispatch({\n      type: 'ON_CHANGE',\n      keys: name,\n      value: name === 'settings.pageSize' ? parseInt(value, 10) : value,\n    });\n  };\n\n  const { isLoading: isSubmittingForm, mutate } = useMutation(\n    (body) => put(`/content-manager/content-types/${slug}/configuration`, body),\n    {\n      onSuccess() {\n        trackUsage('didEditListSettings');\n        refetchData();\n      },\n      onError() {\n        toggleNotification({\n          type: 'warning',\n          message: { id: 'notification.error' },\n        });\n      },\n    }\n  );\n\n  const handleAddField = (item) => {\n    dispatch({\n      type: 'ADD_FIELD',\n      item,\n    });\n  };\n\n  const handleRemoveField = (e, index) => {\n    e.stopPropagation();\n\n    if (displayedFields.length === 1) {\n      toggleNotification({\n        type: 'info',\n        message: { id: getTranslation('notification.info.minimumFields') },\n      });\n    } else {\n      dispatch({\n        type: 'REMOVE_FIELD',\n        index,\n      });\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const { layouts, settings, metadatas } = modifiedData;\n\n    mutate({\n      layouts,\n      settings,\n      metadatas,\n    });\n\n    trackUsage('willSaveContentTypeLayout');\n  };\n\n  const handleClickEditField = (fieldToEdit) => {\n    dispatch({\n      type: 'SET_FIELD_TO_EDIT',\n      fieldToEdit,\n    });\n  };\n\n  const handleCloseModal = () => {\n    dispatch({\n      type: 'UNSET_FIELD_TO_EDIT',\n    });\n  };\n\n  const handleSubmitFieldEdit = (e) => {\n    e.preventDefault();\n    dispatch({\n      type: 'SUBMIT_FIELD_FORM',\n    });\n    handleCloseModal();\n  };\n\n  const handleChangeEditLabel = ({ target: { name, value } }) => {\n    dispatch({\n      type: 'ON_CHANGE_FIELD_METAS',\n      name,\n      value,\n    });\n  };\n\n  const listRemainingFields = Object.entries(attributes)\n    .filter(\n      ([name, attribute]) =>\n        checkIfAttributeIsDisplayable(attribute) && !displayedFields.includes(name)\n    )\n    .map(([name]) => name)\n    .sort();\n\n  const sortOptions = Object.entries(attributes)\n    .filter(([, attribute]) => !EXCLUDED_SORT_ATTRIBUTE_TYPES.includes(attribute.type))\n    .map(([name]) => ({\n      value: name,\n      label: layout.metadatas[name].list.label,\n    }));\n\n  const move = (originalIndex, atIndex) => {\n    dispatch({\n      type: 'MOVE_FIELD',\n      originalIndex,\n      atIndex,\n    });\n  };\n\n  return (\n    <Layout>\n      <Main aria-busy={isSubmittingForm}>\n        <form onSubmit={handleSubmit}>\n          <HeaderLayout\n            navigationAction={\n              <Link startIcon={<ArrowLeft />} to={goBackUrl} id=\"go-back\">\n                {formatMessage({ id: 'global.back', defaultMessage: 'Back' })}\n              </Link>\n            }\n            primaryAction={\n              <Button\n                size=\"S\"\n                startIcon={<Check />}\n                disabled={isEqual(modifiedData, initialData)}\n                type=\"submit\"\n              >\n                {formatMessage({ id: 'global.save', defaultMessage: 'Save' })}\n              </Button>\n            }\n            subtitle={formatMessage({\n              id: getTranslation(\n                'components.SettingsViewWrapper.pluginHeader.description.list-settings'\n              ),\n              defaultMessage: 'Define the settings of the list view.',\n            })}\n            title={formatMessage(\n              {\n                id: getTranslation('components.SettingsViewWrapper.pluginHeader.title'),\n                defaultMessage: 'Configure the view - {name}',\n              },\n              { name: upperFirst(modifiedData.info.displayName) }\n            )}\n          />\n          <ContentLayout>\n            <Flex\n              alignItems=\"stretch\"\n              background=\"neutral0\"\n              direction=\"column\"\n              gap={6}\n              hasRadius\n              shadow=\"tableShadow\"\n              paddingTop={6}\n              paddingBottom={6}\n              paddingLeft={7}\n              paddingRight={7}\n            >\n              <Settings\n                contentTypeOptions={options}\n                modifiedData={modifiedData}\n                onChange={handleChange}\n                sortOptions={sortOptions}\n              />\n\n              <Divider />\n\n              <SortDisplayedFields\n                listRemainingFields={listRemainingFields}\n                displayedFields={displayedFields}\n                onAddField={handleAddField}\n                onClickEditField={handleClickEditField}\n                onMoveField={move}\n                onRemoveField={handleRemoveField}\n                metadatas={modifiedData.metadatas}\n              />\n            </Flex>\n          </ContentLayout>\n        </form>\n\n        {isModalFormOpen && (\n          <EditFieldForm\n            attributes={attributes}\n            fieldForm={fieldForm}\n            fieldToEdit={fieldToEdit}\n            onChangeEditLabel={handleChangeEditLabel}\n            onCloseModal={handleCloseModal}\n            onSubmit={handleSubmitFieldEdit}\n            type={attributes?.[fieldToEdit]?.type ?? 'text'}\n          />\n        )}\n      </Main>\n    </Layout>\n  );\n};\n\nListSettingsView.propTypes = {\n  layout: PropTypes.shape({\n    uid: PropTypes.string.isRequired,\n    settings: PropTypes.shape({\n      bulkable: PropTypes.bool,\n      defaultSortBy: PropTypes.string,\n      defaultSortOrder: PropTypes.string,\n      filterable: PropTypes.bool,\n      pageSize: PropTypes.number,\n      searchable: PropTypes.bool,\n    }).isRequired,\n    metadatas: PropTypes.object.isRequired,\n    options: PropTypes.object.isRequired,\n    attributes: PropTypes.objectOf(\n      PropTypes.shape({\n        type: PropTypes.string,\n      })\n    ).isRequired,\n  }).isRequired,\n  slug: PropTypes.string.isRequired,\n};\n","export const GET_DATA = 'ContentManager/ListView/GET_DATA';\nexport const GET_DATA_SUCCEEDED = 'ContentManager/ListView/GET_DATA_SUCCEEDED';\nexport const RESET_PROPS = 'ContentManager/ListView/RESET_PROPS';\nexport const ON_CHANGE_LIST_HEADERS = 'ContentManager/ListView/ON_CHANGE_LIST_HEADERS ';\nexport const ON_RESET_LIST_HEADERS = 'ContentManager/ListView/ON_RESET_LIST_HEADERS ';\nexport const SET_LIST_LAYOUT = 'ContentManager/ListView/SET_LIST_LAYOUT ';\n","import {\n  GET_DATA,\n  GET_DATA_SUCCEEDED,\n  ON_CHANGE_LIST_HEADERS,\n  ON_RESET_LIST_HEADERS,\n  RESET_PROPS,\n  SET_LIST_LAYOUT,\n} from './constants';\n\nexport const getData = () => ({ type: GET_DATA });\n\nexport const getDataSucceeded = (pagination, data) => ({\n  type: GET_DATA_SUCCEEDED,\n  pagination,\n  data,\n});\n\nexport const onResetListHeaders = () => ({ type: ON_RESET_LIST_HEADERS });\n\nexport function resetProps() {\n  return { type: RESET_PROPS };\n}\n\nexport const setLayout = ({ components, contentType }) => {\n  const { layouts } = contentType;\n\n  return {\n    contentType,\n    components,\n    displayedHeaders: layouts.list,\n    type: SET_LIST_LAYOUT,\n  };\n};\n\nexport const onChangeListHeaders = (target) => ({ type: ON_CHANGE_LIST_HEADERS, target });\n","import * as React from 'react';\n\nimport { useFetchClient } from '@strapi/helper-plugin';\nimport { AxiosError } from 'axios';\nimport { UseQueryOptions, useQuery } from 'react-query';\n\nimport * as Users from '../../../shared/contracts/user';\n\nexport type APIUsersQueryParams =\n  | Users.FindOne.Params\n  | (Users.FindAll.Request['query'] & { id?: never });\n\nexport function useAdminUsers(\n  params: APIUsersQueryParams = {},\n  queryOptions: Omit<\n    UseQueryOptions<\n      Users.FindAll.Response['data'] | Users.FindOne.Response['data'],\n      AxiosError<Required<Pick<Users.FindAll.Response | Users.FindOne.Response, 'error'>>>\n    >,\n    'queryKey' | 'queryFn'\n  > = {}\n) {\n  const { id = '', ...queryParams } = params;\n\n  const { get } = useFetchClient();\n\n  const { data, isError, isLoading, refetch } = useQuery(\n    ['users', id, queryParams],\n    async () => {\n      const {\n        data: { data },\n      } = await get<Users.FindAll.Response | Users.FindOne.Response>(`/admin/users/${id}`, {\n        params: queryParams,\n      });\n\n      return data;\n    },\n    queryOptions\n  );\n\n  // the return value needs to be memoized, because intantiating\n  // an empty array as default value would lead to an unstable return\n  // value, which later on triggers infinite loops if used in the\n  // dependency arrays of other hooks\n  const users = React.useMemo(() => {\n    let users: Users.FindAll.Response['data']['results'] = [];\n\n    if (data) {\n      if ('results' in data) {\n        if (Array.isArray(data.results)) {\n          users = data.results;\n        }\n      } else {\n        users = [data];\n      }\n    }\n\n    return users;\n  }, [data]);\n\n  return {\n    users,\n    pagination: React.useMemo(\n      () => (data && 'pagination' in data ? data.pagination ?? null : null),\n      [data]\n    ),\n    isLoading,\n    isError,\n    refetch,\n  };\n}\n","import React from 'react';\n\nimport { Button } from '@strapi/design-system';\nimport { FilterListURLQuery, FilterPopoverURLQuery, useTracking } from '@strapi/helper-plugin';\nimport { Filter as FilterIcon } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nexport const Filter = ({ displayedFilters }) => {\n  const [isVisible, setIsVisible] = React.useState(false);\n  const { formatMessage } = useIntl();\n  const buttonRef = React.useRef();\n  const { trackUsage } = useTracking();\n\n  const handleToggle = () => {\n    if (!isVisible) {\n      trackUsage('willFilterEntries');\n    }\n    setIsVisible((prev) => !prev);\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"tertiary\"\n        ref={buttonRef}\n        startIcon={<FilterIcon />}\n        onClick={handleToggle}\n        size=\"S\"\n      >\n        {formatMessage({ id: 'app.utils.filters', defaultMessage: 'Filters' })}\n      </Button>\n      {isVisible && (\n        <FilterPopoverURLQuery\n          displayedFilters={displayedFilters}\n          isVisible={isVisible}\n          onToggle={handleToggle}\n          source={buttonRef}\n        />\n      )}\n      <FilterListURLQuery filtersSchema={displayedFilters} />\n    </>\n  );\n};\n\nFilter.propTypes = {\n  displayedFilters: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      metadatas: PropTypes.shape({ label: PropTypes.string }),\n      fieldSchema: PropTypes.shape({ type: PropTypes.string }),\n    })\n  ).isRequired,\n};\n","import React from 'react';\n\nimport { Combobox, ComboboxOption } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { useAdminUsers } from '../../../../hooks/useAdminUsers';\nimport { getDisplayName } from '../../../utils/users';\n\nexport const AdminUsersFilter = ({ value, onChange }) => {\n  const { formatMessage } = useIntl();\n  const { users, isLoading } = useAdminUsers();\n\n  return (\n    <Combobox\n      value={value}\n      aria-label={formatMessage({\n        id: 'content-manager.components.Filters.usersSelect.label',\n        defaultMessage: 'Search and select an user to filter',\n      })}\n      onChange={onChange}\n      loading={isLoading}\n    >\n      {users.map((user) => {\n        return (\n          <ComboboxOption key={user.id} value={user.id.toString()}>\n            {getDisplayName(user, formatMessage)}\n          </ComboboxOption>\n        );\n      })}\n    </Combobox>\n  );\n};\n\nAdminUsersFilter.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string,\n};\n\nAdminUsersFilter.defaultProps = {\n  value: '',\n};\n","import { useRBACProvider, findMatchingPermissions } from '@strapi/helper-plugin';\n\nimport { CREATOR_FIELDS } from '../constants/attributes';\n\nconst NOT_ALLOWED_FILTERS = [\n  'json',\n  'component',\n  'media',\n  'richtext',\n  'dynamiczone',\n  'password',\n  'blocks',\n];\nconst TIMESTAMPS = ['createdAt', 'updatedAt'];\n\nexport const useAllowedAttributes = (contentType, slug) => {\n  const { allPermissions } = useRBACProvider();\n\n  const readPermissionsForSlug = findMatchingPermissions(allPermissions, [\n    {\n      action: 'plugin::content-manager.explorer.read',\n      subject: slug,\n    },\n  ]);\n\n  const canReadAdminUsers =\n    findMatchingPermissions(allPermissions, [\n      {\n        action: 'admin::users.read',\n        subject: null,\n      },\n    ]).length > 0;\n\n  const attributesWithReadPermissions = readPermissionsForSlug?.[0]?.properties?.fields ?? [];\n\n  const allowedAttributes = attributesWithReadPermissions.filter((attr) => {\n    const current = contentType?.attributes?.[attr] ?? {};\n\n    if (!current.type) {\n      return false;\n    }\n\n    if (NOT_ALLOWED_FILTERS.includes(current.type)) {\n      return false;\n    }\n\n    return true;\n  });\n\n  return ['id', ...allowedAttributes, ...TIMESTAMPS, ...(canReadAdminUsers ? CREATOR_FIELDS : [])];\n};\n","import React from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\n\nimport { useInjectionZone } from '../../../shared/hooks/useInjectionZone';\n\nconst InjectionZoneList = ({ area, ...props }) => {\n  const compos = useInjectionZone(area);\n\n  if (!compos) {\n    return null;\n  }\n\n  // TODO\n  return (\n    <ul>\n      {compos.map((compo) => {\n        const component = compo.Component(props);\n\n        if (component) {\n          return (\n            <Box key={compo.name} padding={3} style={{ textAlign: 'center' }}>\n              <compo.Component {...props} />\n            </Box>\n          );\n        }\n\n        return null;\n      })}\n    </ul>\n  );\n};\n\nInjectionZoneList.propTypes = {\n  area: PropTypes.string.isRequired,\n};\n\nexport default InjectionZoneList;\n","import React from 'react';\n\nimport { Button, Dialog, DialogBody, DialogFooter, Flex, Typography } from '@strapi/design-system';\nimport { ExclamationMarkCircle, Trash } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport InjectionZoneList from '../../../../components/InjectionZoneList';\n\nexport const ConfirmDialogDelete = ({\n  isConfirmButtonLoading,\n  isOpen,\n  onToggleDialog,\n  onConfirm,\n}) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Dialog\n      onClose={onToggleDialog}\n      title={formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      })}\n      labelledBy=\"confirmation\"\n      describedBy=\"confirm-description\"\n      isOpen={isOpen}\n    >\n      <DialogBody icon={<ExclamationMarkCircle />}>\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n          <Flex justifyContent=\"center\">\n            <Typography id=\"confirm-description\">\n              {formatMessage({\n                id: 'components.popUpWarning.message',\n                defaultMessage: 'Are you sure you want to delete this?',\n              })}\n            </Typography>\n          </Flex>\n          <Flex>\n            <InjectionZoneList area=\"contentManager.listView.deleteModalAdditionalInfos\" />\n          </Flex>\n        </Flex>\n      </DialogBody>\n      <DialogFooter\n        startAction={\n          <Button onClick={onToggleDialog} variant=\"tertiary\">\n            {formatMessage({\n              id: 'app.components.Button.cancel',\n              defaultMessage: 'Cancel',\n            })}\n          </Button>\n        }\n        endAction={\n          <Button\n            onClick={onConfirm}\n            variant=\"danger-light\"\n            startIcon={<Trash />}\n            id=\"confirm-delete\"\n            loading={isConfirmButtonLoading}\n          >\n            {formatMessage({\n              id: 'app.components.Button.confirm',\n              defaultMessage: 'Confirm',\n            })}\n          </Button>\n        }\n      />\n    </Dialog>\n  );\n};\n\nConfirmDialogDelete.propTypes = {\n  isConfirmButtonLoading: PropTypes.bool.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onToggleDialog: PropTypes.func.isRequired,\n};\n","import React from 'react';\n\nimport { BaseCheckbox, IconButton, Flex } from '@strapi/design-system';\nimport { useTracking, useTableContext, Table } from '@strapi/helper-plugin';\nimport { Trash, Duplicate, Pencil } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { usePluginsQueryParams } from '../../../../hooks';\nimport { ConfirmDialogDelete } from '../ConfirmDialogDelete';\n\nconst stopPropagation = (e) => e.stopPropagation();\n\n/* -------------------------------------------------------------------------------------------------\n * CheckboxDataCell\n * -----------------------------------------------------------------------------------------------*/\n\nconst CheckboxDataCell = ({ rowId, index }) => {\n  const { selectedEntries, onSelectRow } = useTableContext();\n  const { formatMessage } = useIntl();\n  const isChecked = selectedEntries.findIndex((id) => id === rowId) !== -1;\n  const ariaLabel = formatMessage(\n    {\n      id: 'app.component.table.select.one-entry',\n      defaultMessage: `Select {target}`,\n    },\n    { target: index + 1 }\n  );\n\n  return (\n    <BaseCheckbox\n      aria-label={ariaLabel}\n      checked={isChecked}\n      onClick={stopPropagation}\n      onChange={() => {\n        onSelectRow({ name: rowId, value: !isChecked });\n      }}\n    />\n  );\n};\n\nCheckboxDataCell.propTypes = {\n  rowId: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n};\n\n/* -------------------------------------------------------------------------------------------------\n * EntityActionsDataCell\n * -----------------------------------------------------------------------------------------------*/\n\nconst EntityActionsDataCell = ({\n  rowId,\n  index,\n  canCreate,\n  canDelete,\n  setIsConfirmDeleteRowOpen,\n  handleCloneClick,\n}) => {\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const { setSelectedEntries } = useTableContext();\n  const pluginsQueryParams = usePluginsQueryParams();\n  const {\n    location: { pathname },\n  } = useHistory();\n\n  const itemLineText = formatMessage(\n    {\n      id: 'content-manager.components.ListViewTable.row-line',\n      defaultMessage: 'item line {number}',\n    },\n    { number: index + 1 }\n  );\n\n  return (\n    <Flex gap={1} justifyContent=\"end\" onClick={stopPropagation}>\n      <IconButton\n        forwardedAs={Link}\n        onClick={() => {\n          trackUsage('willEditEntryFromButton');\n        }}\n        to={{\n          pathname: `${pathname}/${rowId}`,\n          state: { from: pathname },\n          search: pluginsQueryParams,\n        }}\n        label={formatMessage(\n          { id: 'app.component.table.edit', defaultMessage: 'Edit {target}' },\n          { target: itemLineText }\n        )}\n        noBorder\n      >\n        <Pencil />\n      </IconButton>\n\n      {canCreate && (\n        <IconButton\n          onClick={handleCloneClick(rowId)}\n          label={formatMessage(\n            {\n              id: 'app.component.table.duplicate',\n              defaultMessage: 'Duplicate {target}',\n            },\n            { target: itemLineText }\n          )}\n          noBorder\n        >\n          <Duplicate />\n        </IconButton>\n      )}\n\n      {canDelete && (\n        <IconButton\n          onClick={() => {\n            trackUsage('willDeleteEntryFromList');\n            setSelectedEntries([rowId]);\n            setIsConfirmDeleteRowOpen(true);\n          }}\n          label={formatMessage(\n            { id: 'global.delete-target', defaultMessage: 'Delete {target}' },\n            { target: itemLineText }\n          )}\n          noBorder\n        >\n          <Trash />\n        </IconButton>\n      )}\n    </Flex>\n  );\n};\n\nEntityActionsDataCell.defaultProps = {\n  canCreate: false,\n  canDelete: false,\n};\n\nEntityActionsDataCell.propTypes = {\n  rowId: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  setIsConfirmDeleteRowOpen: PropTypes.func.isRequired,\n  handleCloneClick: PropTypes.func.isRequired,\n  canCreate: PropTypes.bool,\n  canDelete: PropTypes.bool,\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Root\n * -----------------------------------------------------------------------------------------------*/\n\nconst Root = ({ children, onConfirmDelete, isConfirmDeleteRowOpen, setIsConfirmDeleteRowOpen }) => {\n  const [isLoading, setIsLoading] = React.useState(false);\n  const { selectedEntries, setSelectedEntries } = useTableContext();\n\n  const handleConfirmDelete = async () => {\n    try {\n      setIsLoading(true);\n      await onConfirmDelete(selectedEntries[0]);\n      setIsConfirmDeleteRowOpen(false);\n      setIsLoading(false);\n      setSelectedEntries([]);\n    } catch (error) {\n      setIsLoading(false);\n      setIsConfirmDeleteRowOpen(false);\n    }\n  };\n\n  return (\n    <Table.Body>\n      {children}\n      <ConfirmDialogDelete\n        isConfirmButtonLoading={isLoading}\n        onConfirm={handleConfirmDelete}\n        onToggleDialog={() => setIsConfirmDeleteRowOpen(!isConfirmDeleteRowOpen)}\n        isOpen={isConfirmDeleteRowOpen}\n      />\n    </Table.Body>\n  );\n};\n\nRoot.propTypes = {\n  children: PropTypes.node.isRequired,\n  onConfirmDelete: PropTypes.func.isRequired,\n  isConfirmDeleteRowOpen: PropTypes.bool.isRequired,\n  setIsConfirmDeleteRowOpen: PropTypes.func.isRequired,\n};\n\nexport const Body = { CheckboxDataCell, EntityActionsDataCell, Root };\n","/**\n *\n * listView reducer\n */\n\nimport produce from 'immer';\nimport get from 'lodash/get';\n\nimport {\n  GET_DATA,\n  GET_DATA_SUCCEEDED,\n  ON_CHANGE_LIST_HEADERS,\n  ON_RESET_LIST_HEADERS,\n  RESET_PROPS,\n  SET_LIST_LAYOUT,\n} from './constants';\n\nexport const initialState = {\n  data: [],\n  isLoading: true,\n  contentType: {},\n  components: [],\n  initialDisplayedHeaders: [],\n  displayedHeaders: [],\n  pagination: {\n    total: 0,\n  },\n};\n\nconst listViewReducer = (state = initialState, action) =>\n  // eslint-disable-next-line consistent-return\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case GET_DATA: {\n        return {\n          ...initialState,\n          contentType: state.contentType,\n          components: state.components,\n          initialDisplayedHeaders: state.initialDisplayedHeaders,\n          displayedHeaders: state.displayedHeaders,\n        };\n      }\n\n      case GET_DATA_SUCCEEDED: {\n        draftState.pagination = action.pagination;\n        draftState.data = action.data;\n        draftState.isLoading = false;\n        break;\n      }\n\n      case ON_CHANGE_LIST_HEADERS: {\n        const {\n          target: { name, value },\n        } = action;\n\n        if (!value) {\n          const { metadatas, attributes, uid } = state.contentType;\n          const metas = metadatas[name].list;\n          const header = {\n            name,\n            fieldSchema: attributes[name],\n            metadatas: metas,\n            key: `__${name}_key__`,\n          };\n\n          switch (attributes[name].type) {\n            case 'component': {\n              const componentName = attributes[name].component;\n              const mainFieldName = get(\n                state,\n                ['components', componentName, 'settings', 'mainField'],\n                null\n              );\n              const mainFieldAttribute = get(state, [\n                'components',\n                componentName,\n                'attributes',\n                mainFieldName,\n              ]);\n\n              draftState.displayedHeaders.push({\n                ...header,\n                metadatas: {\n                  ...metas,\n                  mainField: {\n                    ...mainFieldAttribute,\n                    name: mainFieldName,\n                  },\n                },\n              });\n              break;\n            }\n\n            case 'relation':\n              draftState.displayedHeaders.push({\n                ...header,\n                queryInfos: {\n                  defaultParams: {},\n                  endPoint: `collection-types/${uid}`,\n                },\n              });\n              break;\n\n            default:\n              draftState.displayedHeaders.push(header);\n          }\n        } else {\n          draftState.displayedHeaders = state.displayedHeaders.filter(\n            (header) => header.name !== name\n          );\n        }\n\n        break;\n      }\n      case ON_RESET_LIST_HEADERS: {\n        draftState.displayedHeaders = state.initialDisplayedHeaders;\n        break;\n      }\n      case RESET_PROPS: {\n        return initialState;\n      }\n      case SET_LIST_LAYOUT: {\n        const { contentType, components, displayedHeaders } = action;\n\n        draftState.contentType = contentType;\n        draftState.components = components;\n        draftState.displayedHeaders = displayedHeaders;\n        draftState.initialDisplayedHeaders = displayedHeaders;\n\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport default listViewReducer;\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport { initialState } from './reducer';\n\n/**\n * Direct selector to the listView state domain\n */\nconst listViewDomain = () => (state) => state['content-manager_listView'] || initialState;\n\n/**\n * Other specific selectors\n */\n\n/**\n * Default selector used by listView\n */\n\nconst makeSelectListView = () =>\n  createSelector(listViewDomain(), (substate) => {\n    return substate;\n  });\n\nconst selectDisplayedHeaders = (state) => {\n  const { displayedHeaders } = state['content-manager_listView'];\n\n  return displayedHeaders;\n};\n\nexport default makeSelectListView;\nexport { listViewDomain, selectDisplayedHeaders };\n","import * as React from 'react';\n\nimport { Button, Flex, Dialog, DialogBody, DialogFooter, Typography } from '@strapi/design-system';\nimport {\n  useTableContext,\n  useFetchClient,\n  useNotification,\n  useAPIErrorHandler,\n  useQueryParams,\n} from '@strapi/helper-plugin';\nimport { Check, ExclamationMarkCircle } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useQuery } from 'react-query';\nimport { useSelector } from 'react-redux';\n\nimport InjectionZoneList from '../../../../../components/InjectionZoneList';\nimport { getTranslation } from '../../../../../utils/translations';\nimport { listViewDomain } from '../../../selectors';\n\nconst ConfirmBulkActionDialog = ({ onToggleDialog, isOpen, dialogBody, endAction }) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Dialog\n      onClose={onToggleDialog}\n      title={formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      })}\n      isOpen={isOpen}\n    >\n      <DialogBody icon={<ExclamationMarkCircle />}>\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n          {dialogBody}\n        </Flex>\n      </DialogBody>\n      <DialogFooter\n        startAction={\n          <Button onClick={onToggleDialog} variant=\"tertiary\">\n            {formatMessage({\n              id: 'app.components.Button.cancel',\n              defaultMessage: 'Cancel',\n            })}\n          </Button>\n        }\n        endAction={endAction}\n      />\n    </Dialog>\n  );\n};\n\nConfirmBulkActionDialog.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onToggleDialog: PropTypes.func.isRequired,\n  dialogBody: PropTypes.node.isRequired,\n  endAction: PropTypes.node.isRequired,\n};\n\nexport const confirmDialogsPropTypes = {\n  isConfirmButtonLoading: PropTypes.bool.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onToggleDialog: PropTypes.func.isRequired,\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BoldChunk\n * -----------------------------------------------------------------------------------------------*/\n\nconst BoldChunk = (chunks) => <Typography fontWeight=\"bold\">{chunks}</Typography>;\n\n/* -------------------------------------------------------------------------------------------------\n * ConfirmDialogPublishAll\n * -----------------------------------------------------------------------------------------------*/\n\nconst ConfirmDialogPublishAll = ({ isOpen, onToggleDialog, isConfirmButtonLoading, onConfirm }) => {\n  const { formatMessage } = useIntl();\n  const { get } = useFetchClient();\n  const { selectedEntries } = useTableContext();\n  const toggleNotification = useNotification();\n  const { formatAPIError } = useAPIErrorHandler(getTranslation);\n  const {\n    contentType: { uid: slug },\n  } = useSelector(listViewDomain());\n  const [{ query }] = useQueryParams();\n\n  const {\n    data: countDraftRelations,\n    isLoading,\n    isError,\n  } = useQuery(\n    ['content-manager', 'draft-relations', slug, selectedEntries],\n    async () => {\n      const {\n        data: { data },\n      } = await get(\n        `/content-manager/collection-types/${slug}/actions/countManyEntriesDraftRelations`,\n        {\n          params: {\n            ids: selectedEntries,\n            locale: query?.plugins?.i18n?.locale,\n          },\n        }\n      );\n\n      return data;\n    },\n    {\n      // The API is called everytime you select/deselect an entry, this check avoids us sending a query with bad data\n      enabled: selectedEntries.length > 0,\n      onError(error) {\n        toggleNotification({ type: 'warning', message: formatAPIError(error) });\n      },\n    }\n  );\n\n  if (isError) {\n    return null;\n  }\n\n  return (\n    <ConfirmBulkActionDialog\n      isOpen={isOpen && !isLoading}\n      onToggleDialog={onToggleDialog}\n      dialogBody={\n        <>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {countDraftRelations > 0 &&\n              formatMessage(\n                {\n                  id: getTranslation(`popUpwarning.warning.bulk-has-draft-relations.message`),\n                  defaultMessage:\n                    '<b>{count} {count, plural, one { relation } other { relations } } out of {entities} { entities, plural, one { entry } other { entries } } {count, plural, one { is } other { are } }</b> not published yet and might lead to unexpected behavior. ',\n                },\n                {\n                  b: BoldChunk,\n                  count: countDraftRelations,\n                  entities: selectedEntries.length,\n                }\n              )}\n            {formatMessage({\n              id: getTranslation('popUpWarning.bodyMessage.contentType.publish.all'),\n              defaultMessage: 'Are you sure you want to publish these entries?',\n            })}\n          </Typography>\n          <InjectionZoneList area=\"contentManager.listView.publishModalAdditionalInfos\" />\n        </>\n      }\n      endAction={\n        <Button\n          onClick={onConfirm}\n          variant=\"secondary\"\n          startIcon={<Check />}\n          loading={isConfirmButtonLoading}\n        >\n          {formatMessage({\n            id: 'app.utils.publish',\n            defaultMessage: 'Publish',\n          })}\n        </Button>\n      }\n    />\n  );\n};\n\nConfirmDialogPublishAll.propTypes = confirmDialogsPropTypes;\n\nexport { ConfirmDialogPublishAll, ConfirmBulkActionDialog };\n","export const formatAPIErrors = ({ data }: { data: Record<string, string[]> }) => {\n  try {\n    return Object.keys(data).reduce(\n      (acc: Record<string, { id: string; defaultMessage: string }>, current) => {\n        const errorMessage = data[current][0];\n        acc[current] = {\n          id: errorMessage,\n          defaultMessage: errorMessage,\n        };\n\n        return acc;\n      },\n      {}\n    );\n  } catch (err) {\n    return {};\n  }\n};\n","import React from 'react';\n\nimport {\n  Box,\n  Button,\n  Typography,\n  ModalLayout,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Tr,\n  Td,\n  IconButton,\n  Flex,\n  Icon,\n  Tooltip,\n  Loader,\n} from '@strapi/design-system';\nimport {\n  useTableContext,\n  Table,\n  getYupInnerErrors,\n  useFetchClient,\n  useQueryParams,\n  useNotification,\n} from '@strapi/helper-plugin';\nimport { Pencil, CrossCircle, CheckCircle } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQuery } from 'react-query';\nimport { useSelector } from 'react-redux';\nimport { Link, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { formatAPIErrors } from '../../../../../../utils/formatAPIErrors';\nimport { getTranslation } from '../../../../../utils/translations';\nimport { createYupSchema } from '../../../../../utils/validation';\nimport { listViewDomain } from '../../../selectors';\nimport { Body } from '../../Body';\nimport { ConfirmDialogPublishAll } from '../ConfirmBulkActionDialog';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 300px;\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * EntryValidationText\n * -----------------------------------------------------------------------------------------------*/\n\nconst EntryValidationText = ({ validationErrors, isPublished }) => {\n  const { formatMessage } = useIntl();\n\n  if (validationErrors) {\n    const validationErrorsMessages = Object.entries(validationErrors)\n      .map(([key, value]) =>\n        formatMessage(\n          { id: `${value.id}.withField`, defaultMessage: value.defaultMessage },\n          { field: key }\n        )\n      )\n      .join(' ');\n\n    return (\n      <Flex gap={2}>\n        <Icon color=\"danger600\" as={CrossCircle} />\n        <Tooltip description={validationErrorsMessages}>\n          <TypographyMaxWidth textColor=\"danger600\" variant=\"omega\" fontWeight=\"semiBold\" ellipsis>\n            {validationErrorsMessages}\n          </TypographyMaxWidth>\n        </Tooltip>\n      </Flex>\n    );\n  }\n\n  if (isPublished) {\n    return (\n      <Flex gap={2}>\n        <Icon color=\"success600\" as={CheckCircle} />\n        <Typography textColor=\"success600\" fontWeight=\"bold\">\n          {formatMessage({\n            id: 'content-manager.bulk-publish.already-published',\n            defaultMessage: 'Already Published',\n          })}\n        </Typography>\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex gap={2}>\n      <Icon color=\"success600\" as={CheckCircle} />\n      <Typography>\n        {formatMessage({\n          id: 'app.utils.ready-to-publish',\n          defaultMessage: 'Ready to publish',\n        })}\n      </Typography>\n    </Flex>\n  );\n};\n\nEntryValidationText.defaultProps = {\n  validationErrors: undefined,\n  isPublished: false,\n};\n\nEntryValidationText.propTypes = {\n  validationErrors: PropTypes.shape({\n    [PropTypes.string]: PropTypes.shape({\n      id: PropTypes.string,\n      defaultMessage: PropTypes.string,\n    }),\n  }),\n  isPublished: PropTypes.bool,\n};\n\n/* -------------------------------------------------------------------------------------------------\n * SelectedEntriesTableContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst SelectedEntriesTableContent = ({\n  isPublishing,\n  rowsToDisplay,\n  entriesToPublish,\n  validationErrors,\n}) => {\n  const {\n    location: { pathname },\n  } = useHistory();\n  const { formatMessage } = useIntl();\n\n  // Get main field from list view layout\n  const listViewStore = useSelector(listViewDomain());\n  const { mainField } = listViewStore.contentType.settings;\n  const shouldDisplayMainField = mainField != null && mainField !== 'id';\n\n  const getItemLineText = (count) =>\n    formatMessage(\n      {\n        id: 'content-manager.components.ListViewTable.row-line',\n        defaultMessage: 'item line {number}',\n      },\n      { number: count + 1 }\n    );\n\n  return (\n    <Table.Content>\n      <Table.Head>\n        <Table.HeaderCheckboxCell />\n        <Table.HeaderCell fieldSchemaType=\"number\" label=\"id\" name=\"id\" />\n        {shouldDisplayMainField && (\n          <Table.HeaderCell fieldSchemaType=\"string\" label=\"name\" name=\"name\" />\n        )}\n        <Table.HeaderCell fieldSchemaType=\"string\" label=\"status\" name=\"status\" />\n      </Table.Head>\n      <Table.LoadingBody />\n      <Table.Body>\n        {rowsToDisplay.map((row, index) => (\n          <Tr key={row.id}>\n            <Td>\n              <Body.CheckboxDataCell rowId={row.id} index={index} />\n            </Td>\n            <Td>\n              <Typography>{row.id}</Typography>\n            </Td>\n            {shouldDisplayMainField && (\n              <Td>\n                <Typography>{row[mainField]}</Typography>\n              </Td>\n            )}\n            <Td>\n              {isPublishing && entriesToPublish.includes(row.id) ? (\n                <Flex gap={2}>\n                  <Typography>\n                    {formatMessage({\n                      id: 'content-manager.success.record.publishing',\n                      defaultMessage: 'Publishing...',\n                    })}\n                  </Typography>\n                  <Loader small />\n                </Flex>\n              ) : (\n                <EntryValidationText\n                  validationErrors={validationErrors[row.id]}\n                  isPublished={row.publishedAt !== null}\n                />\n              )}\n            </Td>\n            <Td>\n              <IconButton\n                forwardedAs={Link}\n                to={{\n                  pathname: `${pathname}/${row.id}`,\n                  state: { from: pathname },\n                }}\n                label={formatMessage(\n                  { id: 'app.component.table.edit', defaultMessage: 'Edit {target}' },\n                  { target: getItemLineText(index) }\n                )}\n                noBorder\n                target=\"_blank\"\n                marginLeft=\"auto\"\n              >\n                <Pencil />\n              </IconButton>\n            </Td>\n          </Tr>\n        ))}\n      </Table.Body>\n    </Table.Content>\n  );\n};\n\nSelectedEntriesTableContent.defaultProps = {\n  isPublishing: false,\n  rowsToDisplay: [],\n  entriesToPublish: [],\n  validationErrors: {},\n};\n\nSelectedEntriesTableContent.propTypes = {\n  isPublishing: PropTypes.bool,\n  rowsToDisplay: PropTypes.arrayOf(PropTypes.object),\n  entriesToPublish: PropTypes.arrayOf(PropTypes.number),\n  validationErrors: PropTypes.shape({\n    [PropTypes.string]: PropTypes.shape({\n      id: PropTypes.string,\n      defaultMessage: PropTypes.string,\n    }),\n  }),\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BoldChunk\n * -----------------------------------------------------------------------------------------------*/\n\nconst BoldChunk = (chunks) => <Typography fontWeight=\"bold\">{chunks}</Typography>;\n\n/* -------------------------------------------------------------------------------------------------\n * SelectedEntriesModalContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst SelectedEntriesModalContent = ({\n  toggleModal,\n  refetchModalData,\n  setEntriesToFetch,\n  setSelectedListViewEntries,\n  validationErrors,\n}) => {\n  const { formatMessage } = useIntl();\n  const { selectedEntries, rows, onSelectRow, isLoading, isFetching } = useTableContext();\n  const [isDialogOpen, setIsDialogOpen] = React.useState(false);\n  const [rowsToDisplay, setRowsToDisplay] = React.useState([]);\n  const [publishedCount, setPublishedCount] = React.useState(0);\n\n  const entriesToPublish = rows\n    .filter(({ id }) => selectedEntries.includes(id) && !validationErrors[id])\n    .map(({ id }) => id);\n\n  const { post } = useFetchClient();\n  const toggleNotification = useNotification();\n  const { contentType } = useSelector(listViewDomain());\n\n  const selectedEntriesWithErrorsCount = rowsToDisplay.filter(\n    ({ id }) => selectedEntries.includes(id) && validationErrors[id]\n  ).length;\n  const selectedEntriesPublished = rowsToDisplay.filter(\n    ({ id, publishedAt }) => selectedEntries.includes(id) && publishedAt\n  ).length;\n  const selectedEntriesWithNoErrorsCount =\n    selectedEntries.length - selectedEntriesWithErrorsCount - selectedEntriesPublished;\n\n  const bulkPublishMutation = useMutation(\n    (data) =>\n      post(`/content-manager/collection-types/${contentType.uid}/actions/bulkPublish`, data),\n    {\n      onSuccess() {\n        const update = rowsToDisplay.filter((row) => {\n          if (entriesToPublish.includes(row.id)) {\n            // Deselect the entries that have been published from the modal table\n            onSelectRow({ name: row.id, value: false });\n          }\n\n          // Remove the entries that have been published from the table\n          return !entriesToPublish.includes(row.id);\n        });\n\n        setRowsToDisplay(update);\n        const publishedIds = update.map(({ id }) => id);\n        // Set the parent's entries to fetch when clicking refresh\n        setEntriesToFetch(publishedIds);\n        // Deselect the entries that were published in the list view\n        setSelectedListViewEntries(publishedIds);\n\n        if (update.length === 0) {\n          toggleModal();\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: { id: 'content-manager.success.record.publish', defaultMessage: 'Published' },\n        });\n      },\n      onError(error) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIErrors(error),\n        });\n      },\n    }\n  );\n\n  const toggleDialog = () => setIsDialogOpen((prev) => !prev);\n\n  const handleConfirmBulkPublish = async () => {\n    toggleDialog();\n    const { data } = await bulkPublishMutation.mutateAsync({ ids: entriesToPublish });\n    setPublishedCount(data.count);\n  };\n\n  const getFormattedCountMessage = () => {\n    if (publishedCount) {\n      return formatMessage(\n        {\n          id: getTranslation('containers.ListPage.selectedEntriesModal.publishedCount'),\n          defaultMessage:\n            '<b>{publishedCount}</b> {publishedCount, plural, =0 {entries} one {entry} other {entries}} published. <b>{withErrorsCount}</b> {withErrorsCount, plural, =0 {entries} one {entry} other {entries}} waiting for action.',\n        },\n        {\n          publishedCount,\n          withErrorsCount: selectedEntriesWithErrorsCount,\n          b: BoldChunk,\n        }\n      );\n    }\n\n    return formatMessage(\n      {\n        id: getTranslation('containers.ListPage.selectedEntriesModal.selectedCount'),\n        defaultMessage:\n          '<b>{alreadyPublishedCount}</b> {alreadyPublishedCount, plural, =0 {entries} one {entry} other {entries}} already published. <b>{readyToPublishCount}</b> {readyToPublishCount, plural, =0 {entries} one {entry} other {entries}} ready to publish. <b>{withErrorsCount}</b> {withErrorsCount, plural, =0 {entries} one {entry} other {entries}} waiting for action.',\n      },\n      {\n        readyToPublishCount: selectedEntriesWithNoErrorsCount,\n        withErrorsCount: selectedEntriesWithErrorsCount,\n        alreadyPublishedCount: selectedEntriesPublished,\n        b: BoldChunk,\n      }\n    );\n  };\n\n  React.useEffect(() => {\n    // When the api responds with data\n    if (rows.length > 0) {\n      // Update the rows to display\n      setRowsToDisplay(rows);\n    }\n  }, [rows]);\n\n  return (\n    <ModalLayout onClose={toggleModal} labelledBy=\"title\">\n      <ModalHeader>\n        <Typography fontWeight=\"bold\" textColor=\"neutral800\" as=\"h2\" id=\"title\">\n          {formatMessage({\n            id: getTranslation('containers.ListPage.selectedEntriesModal.title'),\n            defaultMessage: 'Publish entries',\n          })}\n        </Typography>\n      </ModalHeader>\n      <ModalBody>\n        <Typography>{getFormattedCountMessage()}</Typography>\n        <Box marginTop={5}>\n          <SelectedEntriesTableContent\n            isPublishing={bulkPublishMutation.isLoading}\n            rowsToDisplay={rowsToDisplay}\n            entriesToPublish={entriesToPublish}\n            validationErrors={validationErrors}\n          />\n        </Box>\n      </ModalBody>\n      <ModalFooter\n        startActions={\n          <Button onClick={toggleModal} variant=\"tertiary\">\n            {formatMessage({\n              id: 'app.components.Button.cancel',\n              defaultMessage: 'Cancel',\n            })}\n          </Button>\n        }\n        endActions={\n          <Flex gap={2}>\n            <Button onClick={refetchModalData} variant=\"tertiary\" loading={isFetching}>\n              {formatMessage({ id: 'app.utils.refresh', defaultMessage: 'Refresh' })}\n            </Button>\n            <Button\n              onClick={toggleDialog}\n              disabled={\n                selectedEntries.length === 0 ||\n                selectedEntries.length === selectedEntriesWithErrorsCount ||\n                isLoading\n              }\n              loading={bulkPublishMutation.isLoading}\n            >\n              {formatMessage({ id: 'app.utils.publish', defaultMessage: 'Publish' })}\n            </Button>\n          </Flex>\n        }\n      />\n      <ConfirmDialogPublishAll\n        isOpen={isDialogOpen}\n        onToggleDialog={toggleDialog}\n        isConfirmButtonLoading={bulkPublishMutation.isLoading}\n        onConfirm={handleConfirmBulkPublish}\n      />\n    </ModalLayout>\n  );\n};\n\nSelectedEntriesModalContent.defaultProps = {\n  validationErrors: {},\n};\n\nSelectedEntriesModalContent.propTypes = {\n  toggleModal: PropTypes.func.isRequired,\n  refetchModalData: PropTypes.func.isRequired,\n  setEntriesToFetch: PropTypes.func.isRequired,\n  setSelectedListViewEntries: PropTypes.func.isRequired,\n  validationErrors: PropTypes.shape({\n    [PropTypes.string]: PropTypes.shape({\n      id: PropTypes.string,\n      defaultMessage: PropTypes.string,\n    }),\n  }),\n};\n\n/* -------------------------------------------------------------------------------------------------\n * SelectedEntriesModal\n * -----------------------------------------------------------------------------------------------*/\n\nconst SelectedEntriesModal = ({ onToggle }) => {\n  const {\n    selectedEntries: selectedListViewEntries,\n    setSelectedEntries: setSelectedListViewEntries,\n  } = useTableContext();\n  const { contentType, components } = useSelector(listViewDomain());\n  // The child table will update this value based on the entries that were published\n  const [entriesToFetch, setEntriesToFetch] = React.useState(selectedListViewEntries);\n  // We want to keep the selected entries order same as the list view\n  const [\n    {\n      query: { sort, plugins },\n    },\n  ] = useQueryParams();\n\n  const queryParams = {\n    page: 1,\n    pageSize: entriesToFetch.length,\n    sort,\n    filters: {\n      id: {\n        $in: entriesToFetch,\n      },\n    },\n    locale: plugins?.i18n?.locale,\n  };\n\n  const { get } = useFetchClient();\n\n  const { data, isLoading, isFetching, refetch } = useQuery(\n    ['entries', contentType.uid, queryParams],\n    async () => {\n      const { data } = await get(`content-manager/collection-types/${contentType.uid}`, {\n        params: queryParams,\n      });\n\n      if (data.results) {\n        const schema = createYupSchema(\n          contentType,\n          { components },\n          { isDraft: false, isJSONTestDisabled: true }\n        );\n        const validationErrors = {};\n        const rows = data.results.map((entry) => {\n          try {\n            schema.validateSync(entry, { abortEarly: false });\n\n            return entry;\n          } catch (e) {\n            validationErrors[entry.id] = getYupInnerErrors(e);\n\n            return entry;\n          }\n        });\n\n        return { rows, validationErrors };\n      }\n\n      return {\n        rows: [],\n        validationErrors: {},\n      };\n    }\n  );\n\n  return (\n    <Table.Root\n      rows={data?.rows}\n      defaultSelectedEntries={selectedListViewEntries}\n      colCount={4}\n      isLoading={isLoading}\n      isFetching={isFetching}\n    >\n      <SelectedEntriesModalContent\n        setSelectedListViewEntries={setSelectedListViewEntries}\n        setEntriesToFetch={setEntriesToFetch}\n        toggleModal={onToggle}\n        refetchModalData={refetch}\n        validationErrors={data?.validationErrors}\n      />\n    </Table.Root>\n  );\n};\n\nSelectedEntriesModal.propTypes = {\n  onToggle: PropTypes.func.isRequired,\n};\n\nexport default SelectedEntriesModal;\n","import * as React from 'react';\n\nimport { Button, Typography } from '@strapi/design-system';\nimport { useTracking, useTableContext } from '@strapi/helper-plugin';\nimport { Check, Trash } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport InjectionZoneList from '../../../../components/InjectionZoneList';\nimport { getTranslation } from '../../../../utils/translations';\nimport { listViewDomain } from '../../selectors';\n\nimport { ConfirmBulkActionDialog, confirmDialogsPropTypes } from './ConfirmBulkActionDialog';\nimport SelectedEntriesModal from './SelectedEntriesModal';\n\n/* -------------------------------------------------------------------------------------------------\n * ConfirmDialogUnpublishAll\n * -----------------------------------------------------------------------------------------------*/\n\nconst ConfirmDialogUnpublishAll = ({\n  isOpen,\n  onToggleDialog,\n  isConfirmButtonLoading,\n  onConfirm,\n}) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <ConfirmBulkActionDialog\n      isOpen={isOpen}\n      onToggleDialog={onToggleDialog}\n      dialogBody={\n        <>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {formatMessage({\n              id: getTranslation('popUpWarning.bodyMessage.contentType.unpublish.all'),\n              defaultMessage: 'Are you sure you want to unpublish these entries?',\n            })}\n          </Typography>\n          <InjectionZoneList area=\"contentManager.listView.unpublishModalAdditionalInfos\" />\n        </>\n      }\n      endAction={\n        <Button\n          onClick={onConfirm}\n          variant=\"secondary\"\n          startIcon={<Check />}\n          loading={isConfirmButtonLoading}\n        >\n          {formatMessage({\n            id: 'app.utils.unpublish',\n            defaultMessage: 'Unpublish',\n          })}\n        </Button>\n      }\n    />\n  );\n};\n\nConfirmDialogUnpublishAll.propTypes = confirmDialogsPropTypes;\n\n/* -------------------------------------------------------------------------------------------------\n * ConfirmDialogDeleteAll\n * -----------------------------------------------------------------------------------------------*/\n\nconst ConfirmDialogDeleteAll = ({ isOpen, onToggleDialog, isConfirmButtonLoading, onConfirm }) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <ConfirmBulkActionDialog\n      isOpen={isOpen}\n      onToggleDialog={onToggleDialog}\n      dialogBody={\n        <>\n          <Typography id=\"confirm-description\" textAlign=\"center\">\n            {formatMessage({\n              id: getTranslation('popUpWarning.bodyMessage.contentType.delete.all'),\n              defaultMessage: 'Are you sure you want to delete these entries?',\n            })}\n          </Typography>\n          <InjectionZoneList area=\"contentManager.listView.deleteModalAdditionalInfos\" />\n        </>\n      }\n      endAction={\n        <Button\n          onClick={onConfirm}\n          variant=\"danger-light\"\n          startIcon={<Trash />}\n          id=\"confirm-delete\"\n          loading={isConfirmButtonLoading}\n        >\n          {formatMessage({\n            id: 'app.components.Button.confirm',\n            defaultMessage: 'Confirm',\n          })}\n        </Button>\n      }\n    />\n  );\n};\n\nConfirmDialogDeleteAll.propTypes = confirmDialogsPropTypes;\n\n/* -------------------------------------------------------------------------------------------------\n * BulkActionButtons\n * -----------------------------------------------------------------------------------------------*/\n\nconst BulkActionButtons = ({\n  showPublish,\n  showDelete,\n  onConfirmDeleteAll,\n  onConfirmUnpublishAll,\n  refetchData,\n}) => {\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const { data } = useSelector(listViewDomain());\n  const { selectedEntries, setSelectedEntries } = useTableContext();\n\n  const [isConfirmButtonLoading, setIsConfirmButtonLoading] = React.useState(false);\n  const [isSelectedEntriesModalOpen, setIsSelectedEntriesModalOpen] = React.useState(false);\n  const [dialogToOpen, setDialogToOpen] = React.useState(null);\n\n  // Filters for Bulk actions\n  const selectedEntriesObjects = data.filter((entry) => selectedEntries.includes(entry.id));\n  const publishButtonIsShown =\n    showPublish && selectedEntriesObjects.some((entry) => !entry.publishedAt);\n  const unpublishButtonIsShown =\n    showPublish && selectedEntriesObjects.some((entry) => entry.publishedAt);\n\n  const toggleDeleteDialog = () => {\n    if (dialogToOpen === 'delete') {\n      setDialogToOpen(null);\n    } else {\n      setDialogToOpen('delete');\n      trackUsage('willBulkDeleteEntries');\n    }\n  };\n\n  const toggleUnpublishDialog = () => {\n    if (dialogToOpen === 'unpublish') {\n      setDialogToOpen(null);\n    } else {\n      setDialogToOpen('unpublish');\n      trackUsage('willBulkUnpublishEntries');\n    }\n  };\n\n  const handleBulkAction = async (confirmAction, toggleDialog) => {\n    try {\n      setIsConfirmButtonLoading(true);\n      await confirmAction(selectedEntries);\n      setIsConfirmButtonLoading(false);\n      toggleDialog();\n      setSelectedEntries([]);\n    } catch (error) {\n      setIsConfirmButtonLoading(false);\n      toggleDialog();\n    }\n  };\n\n  const handleBulkDelete = () => handleBulkAction(onConfirmDeleteAll, toggleDeleteDialog);\n  const handleBulkUnpublish = () => handleBulkAction(onConfirmUnpublishAll, toggleUnpublishDialog);\n  const handleToggleSelectedEntriesModal = () => {\n    setIsSelectedEntriesModalOpen((prev) => {\n      if (prev) {\n        refetchData();\n      }\n\n      return !prev;\n    });\n  };\n\n  return (\n    <>\n      {publishButtonIsShown && (\n        <>\n          <Button variant=\"tertiary\" onClick={handleToggleSelectedEntriesModal}>\n            {formatMessage({ id: 'app.utils.publish', defaultMessage: 'Publish' })}\n          </Button>\n          {isSelectedEntriesModalOpen && (\n            <SelectedEntriesModal onToggle={handleToggleSelectedEntriesModal} />\n          )}\n        </>\n      )}\n      {unpublishButtonIsShown && (\n        <>\n          <Button variant=\"tertiary\" onClick={toggleUnpublishDialog}>\n            {formatMessage({ id: 'app.utils.unpublish', defaultMessage: 'Unpublish' })}\n          </Button>\n          <ConfirmDialogUnpublishAll\n            isOpen={dialogToOpen === 'unpublish'}\n            onToggleDialog={toggleUnpublishDialog}\n            isConfirmButtonLoading={isConfirmButtonLoading}\n            onConfirm={handleBulkUnpublish}\n          />\n        </>\n      )}\n      {showDelete && (\n        <>\n          <Button variant=\"danger-light\" onClick={toggleDeleteDialog}>\n            {formatMessage({ id: 'global.delete', defaultMessage: 'Delete' })}\n          </Button>\n          <ConfirmDialogDeleteAll\n            isOpen={dialogToOpen === 'delete'}\n            onToggleDialog={toggleDeleteDialog}\n            isConfirmButtonLoading={isConfirmButtonLoading}\n            onConfirm={handleBulkDelete}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nBulkActionButtons.defaultProps = {\n  showPublish: false,\n  showDelete: false,\n  onConfirmDeleteAll() {},\n  onConfirmUnpublishAll() {},\n  refetchData() {},\n};\n\nBulkActionButtons.propTypes = {\n  showPublish: PropTypes.bool,\n  showDelete: PropTypes.bool,\n  onConfirmDeleteAll: PropTypes.func,\n  onConfirmUnpublishAll: PropTypes.func,\n  refetchData: PropTypes.func,\n};\n\nexport default BulkActionButtons;\n","import parseISO from 'date-fns/parseISO';\nimport toString from 'lodash/toString';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nconst CellValue = ({ type, value }) => {\n  const { formatDate, formatTime, formatNumber } = useIntl();\n  let formattedValue = value;\n\n  if (type === 'date') {\n    formattedValue = formatDate(parseISO(value), { dateStyle: 'full' });\n  }\n\n  if (type === 'datetime') {\n    formattedValue = formatDate(value, { dateStyle: 'full', timeStyle: 'short' });\n  }\n\n  if (type === 'time') {\n    const [hour, minute, second] = value.split(':');\n    const date = new Date();\n    date.setHours(hour);\n    date.setMinutes(minute);\n    date.setSeconds(second);\n\n    formattedValue = formatTime(date, {\n      numeric: 'auto',\n      style: 'short',\n    });\n  }\n\n  if (['float', 'decimal'].includes(type)) {\n    formattedValue = formatNumber(value, {\n      // Should be kept in sync with the corresponding value\n      // in the design-system/NumberInput: https://github.com/strapi/design-system/blob/main/packages/strapi-design-system/src/NumberInput/NumberInput.js#L53\n      maximumFractionDigits: 20,\n    });\n  }\n\n  if (['integer', 'biginteger'].includes(type)) {\n    formattedValue = formatNumber(value, { maximumFractionDigits: 0 });\n  }\n\n  return toString(formattedValue);\n};\n\nCellValue.propTypes = {\n  type: PropTypes.string.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nexport default CellValue;\n","import React from 'react';\n\nimport { Flex, Typography } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Wrapper = styled(Flex)`\n  position: relative;\n  border-radius: 50%;\n  width: 26px;\n  height: 26px;\n  border: 1px solid ${({ theme }) => theme.colors.neutral200};\n  background: ${({ theme }) => theme.colors.neutral150};\n  padding-left: 1px;\n\n  span {\n    line-height: 0.6rem;\n    font-size: 0.6rem;\n  }\n`;\n\nconst FileWrapper = ({ children, ...props }) => {\n  return (\n    <Wrapper justifyContent=\"center\" alignItems=\"center\" as=\"span\" {...props}>\n      <Typography variant=\"sigma\" textColor=\"neutral600\">\n        {children}\n      </Typography>\n    </Wrapper>\n  );\n};\n\nFileWrapper.propTypes = {\n  children: PropTypes.string.isRequired,\n};\n\nexport default FileWrapper;\n","import React from 'react';\n\nimport { Avatar, Tooltip } from '@strapi/design-system';\nimport { getFileExtension, prefixFileUrlWithBackendUrl } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\n\nimport FileWrapper from './FileWrapper';\n\nconst Media = ({ url, mime, alternativeText, name, ext, formats }) => {\n  const fileURL = prefixFileUrlWithBackendUrl(url);\n\n  if (mime.includes('image')) {\n    const thumbnail = formats?.thumbnail?.url || null;\n    const mediaURL = prefixFileUrlWithBackendUrl(thumbnail) || fileURL;\n\n    return <Avatar src={mediaURL} alt={alternativeText || name} preview />;\n  }\n\n  const fileExtension = getFileExtension(ext);\n  const fileName = name.length > 100 ? `${name.substring(0, 100)}...` : name;\n\n  return (\n    <Tooltip description={fileName}>\n      <FileWrapper>{fileExtension}</FileWrapper>\n    </Tooltip>\n  );\n};\n\nMedia.defaultProps = {\n  alternativeText: null,\n  formats: null,\n};\n\nMedia.propTypes = {\n  alternativeText: PropTypes.string,\n  ext: PropTypes.string.isRequired,\n  formats: PropTypes.object,\n  mime: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nexport default Media;\n","import React from 'react';\n\nimport { AvatarGroup } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\n\nimport Media from './Media';\nimport FileWrapper from './Media/FileWrapper';\n\nconst MultipleMedia = ({ value }) => {\n  return (\n    <AvatarGroup>\n      {value.map((file, index) => {\n        const key = `${file.id}${index}`;\n\n        if (index === 3) {\n          const remainingFiles = `+${value.length - 3}`;\n\n          return (\n            <FileWrapper key={key} preview={false}>\n              {remainingFiles}\n            </FileWrapper>\n          );\n        }\n\n        if (index > 3) {\n          return null;\n        }\n\n        return <Media key={key} {...file} />;\n      })}\n    </AvatarGroup>\n  );\n};\n\nMultipleMedia.propTypes = {\n  value: PropTypes.arrayOf(\n    PropTypes.shape({\n      alternativeText: PropTypes.string,\n      ext: PropTypes.string.isRequired,\n      formats: PropTypes.object,\n      mime: PropTypes.string.isRequired,\n      name: PropTypes.string.isRequired,\n      url: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n};\n\nexport default MultipleMedia;\n","import React, { useEffect, useState } from 'react';\n\nimport { Badge, Flex, Loader, Typography, useNotifyAT } from '@strapi/design-system';\nimport { Menu } from '@strapi/design-system/v2';\nimport { useFetchClient } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useQuery } from 'react-query';\nimport styled from 'styled-components';\n\nimport { getTranslation } from '../../../../../utils/translations';\nimport CellValue from '../CellValue';\n\nconst RelationMultiple = ({ fieldSchema, metadatas, name, entityId, value, contentType }) => {\n  const { formatMessage } = useIntl();\n  const { notifyStatus } = useNotifyAT();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { get } = useFetchClient();\n\n  const { data, status } = useQuery(\n    [fieldSchema.targetModel, entityId],\n    async () => {\n      const {\n        data: { results, pagination },\n      } = await get(\n        `/content-manager/relations/${contentType.uid}/${entityId}/${name.split('.')[0]}`\n      );\n\n      return { results, pagination };\n    },\n    {\n      enabled: isOpen,\n      staleTime: 0,\n      select: (data) => ({\n        ...data,\n        results: [...data.results].reverse(),\n      }),\n    }\n  );\n\n  useEffect(() => {\n    if (data) {\n      notifyStatus(\n        formatMessage({\n          id: getTranslation('DynamicTable.relation-loaded'),\n          defaultMessage: 'Relations have been loaded',\n        })\n      );\n    }\n  }, [data, formatMessage, notifyStatus]);\n\n  return (\n    <Menu.Root onOpenChange={(isOpen) => setIsOpen(isOpen)}>\n      <MenuTrigger onClick={(e) => e.stopPropagation()}>\n        <Flex gap={1} wrap=\"nowrap\">\n          <Badge>{value.count}</Badge>\n          {formatMessage(\n            {\n              id: 'content-manager.containers.ListPage.items',\n              defaultMessage: '{number, plural, =0 {items} one {item} other {items}}',\n            },\n            { number: value.count }\n          )}\n        </Flex>\n      </MenuTrigger>\n      <Menu.Content>\n        {status !== 'success' && (\n          <Menu.Item disabled>\n            <Loader small>\n              {formatMessage({\n                id: getTranslation('ListViewTable.relation-loading'),\n                defaultMessage: 'Relations are loading',\n              })}\n            </Loader>\n          </Menu.Item>\n        )}\n\n        {status === 'success' && (\n          <>\n            {data?.results.map((entry) => (\n              <Menu.Item key={entry.id} disabled>\n                <TypographyMaxWidth ellipsis>\n                  <CellValue\n                    type={metadatas.mainField.schema.type}\n                    value={entry[metadatas.mainField.name] || entry.id}\n                  />\n                </TypographyMaxWidth>\n              </Menu.Item>\n            ))}\n\n            {data?.pagination.total > 10 && (\n              <Menu.Item\n                aria-disabled\n                aria-label={formatMessage({\n                  id: getTranslation('ListViewTable.relation-more'),\n                  defaultMessage: 'This relation contains more entities than displayed',\n                })}\n              >\n                <Typography>…</Typography>\n              </Menu.Item>\n            )}\n          </>\n        )}\n      </Menu.Content>\n    </Menu.Root>\n  );\n};\n\nRelationMultiple.propTypes = {\n  contentType: PropTypes.shape({\n    uid: PropTypes.string.isRequired,\n  }).isRequired,\n  fieldSchema: PropTypes.shape({\n    relation: PropTypes.string,\n    targetModel: PropTypes.string,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  metadatas: PropTypes.shape({\n    mainField: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      schema: PropTypes.shape({ type: PropTypes.string.isRequired }).isRequired,\n    }),\n  }).isRequired,\n  name: PropTypes.string.isRequired,\n  entityId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  value: PropTypes.object.isRequired,\n};\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 500px;\n`;\n\n/**\n * TODO: this needs to be solved in the Design-System\n */\nconst MenuTrigger = styled(Menu.Trigger)`\n  svg {\n    width: ${6 / 16}rem;\n    height: ${4 / 16}rem;\n  }\n`;\n\nexport default RelationMultiple;\n","import React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport CellValue from '../CellValue';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 500px;\n`;\n\nconst RelationSingle = ({ metadatas, value }) => {\n  return (\n    <TypographyMaxWidth textColor=\"neutral800\" ellipsis>\n      <CellValue\n        type={metadatas.mainField.schema.type}\n        value={value[metadatas.mainField.name] ?? value.id}\n      />\n    </TypographyMaxWidth>\n  );\n};\n\nRelationSingle.propTypes = {\n  metadatas: PropTypes.shape({\n    mainField: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      schema: PropTypes.shape({ type: PropTypes.string.isRequired }).isRequired,\n    }),\n  }).isRequired,\n  value: PropTypes.object.isRequired,\n};\n\nexport default RelationSingle;\n","import React from 'react';\n\nimport { Badge, Typography } from '@strapi/design-system';\nimport { Menu } from '@strapi/design-system/v2';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport styled from 'styled-components';\n\nimport CellValue from '../CellValue';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 500px;\n`;\n\nconst RepeatableComponentCell = ({ value, metadatas }) => {\n  const { formatMessage } = useIntl();\n  const {\n    mainField: { type: mainFieldType, name: mainFieldName },\n  } = metadatas;\n\n  return (\n    <Menu.Root>\n      <MenuTrigger onClick={(e) => e.stopPropagation()}>\n        <Badge>{value.length}</Badge>{' '}\n        {formatMessage(\n          {\n            id: 'content-manager.containers.ListPage.items',\n            defaultMessage: '{number, plural, =0 {items} one {item} other {items}}',\n          },\n          { number: value.length }\n        )}\n      </MenuTrigger>\n      <Menu.Content>\n        {value.map((item) => (\n          <Menu.Item key={item.id} disabled>\n            <TypographyMaxWidth ellipsis>\n              <CellValue type={mainFieldType} value={item[mainFieldName] || item.id} />\n            </TypographyMaxWidth>\n          </Menu.Item>\n        ))}\n      </Menu.Content>\n    </Menu.Root>\n  );\n};\n\nRepeatableComponentCell.propTypes = {\n  metadatas: PropTypes.shape({\n    mainField: PropTypes.shape({\n      name: PropTypes.string,\n      type: PropTypes.string,\n      value: PropTypes.string,\n    }),\n  }).isRequired,\n  value: PropTypes.array.isRequired,\n};\n\n/**\n * TODO: this needs to be solved in the Design-System\n */\nconst MenuTrigger = styled(Menu.Trigger)`\n  svg {\n    width: ${6 / 16}rem;\n    height: ${4 / 16}rem;\n  }\n`;\n\nexport default RepeatableComponentCell;\n","import React from 'react';\n\nimport { Tooltip, Typography } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport CellValue from '../CellValue';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 250px;\n`;\n\nconst SingleComponentCell = ({ value, metadatas }) => {\n  const { mainField } = metadatas;\n  const content = value[mainField.name];\n\n  return (\n    <Tooltip label={content}>\n      <TypographyMaxWidth textColor=\"neutral800\" ellipsis>\n        <CellValue type={mainField.type} value={content} />\n      </TypographyMaxWidth>\n    </Tooltip>\n  );\n};\n\nSingleComponentCell.propTypes = {\n  metadatas: PropTypes.shape({\n    mainField: PropTypes.shape({\n      name: PropTypes.string,\n      type: PropTypes.string,\n      value: PropTypes.string,\n    }),\n  }).isRequired,\n  value: PropTypes.object.isRequired,\n};\n\nexport default SingleComponentCell;\n","export default function isSingleRelation(type) {\n  return ['oneToOne', 'manyToOne', 'oneToOneMorph'].includes(type);\n}\n","import isEmpty from 'lodash/isEmpty';\nimport isNumber from 'lodash/isNumber';\n\nimport { isFieldTypeNumber } from '../../../../../utils/fields';\n\nimport isSingleRelation from './isSingleRelation';\n\nexport default function hasContent(type, content, metadatas, fieldSchema) {\n  if (type === 'component') {\n    const {\n      mainField: { name: mainFieldName, type: mainFieldType },\n    } = metadatas;\n\n    // Repeatable fields show the ID as fallback, in case the mainField\n    // doesn't have any content\n    if (fieldSchema?.repeatable) {\n      return content.length > 0;\n    }\n\n    const value = content?.[mainFieldName];\n\n    // relations, media ... show the id as fallback\n    if (mainFieldName === 'id' && ![undefined, null].includes(value)) {\n      return true;\n    }\n\n    /* The ID field reports itself as type `integer`, which makes it\n       impossible to distinguish it from other number fields.\n\n       Biginteger fields need to be treated as strings, as `isNumber`\n       doesn't deal with them.\n    */\n    if (\n      isFieldTypeNumber(mainFieldType) &&\n      mainFieldType !== 'biginteger' &&\n      mainFieldName !== 'id'\n    ) {\n      return isNumber(value);\n    }\n\n    return !isEmpty(value);\n  }\n\n  if (type === 'relation') {\n    if (isSingleRelation(fieldSchema.relation)) {\n      return !isEmpty(content);\n    }\n\n    return content?.count > 0;\n  }\n\n  /* \n      Biginteger fields need to be treated as strings, as `isNumber`\n      doesn't deal with them.\n  */\n  if (isFieldTypeNumber(type) && type !== 'biginteger') {\n    return isNumber(content);\n  }\n\n  if (type === 'boolean') {\n    return content !== null;\n  }\n\n  return !isEmpty(content);\n}\n","import React from 'react';\n\nimport { Tooltip, Typography } from '@strapi/design-system';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport CellValue from './CellValue';\nimport Media from './Media';\nimport MultipleMedias from './MultipleMedias';\nimport RelationMultiple from './RelationMultiple';\nimport RelationSingle from './RelationSingle';\nimport RepeatableComponent from './RepeatableComponent';\nimport SingleComponent from './SingleComponent';\nimport hasContent from './utils/hasContent';\nimport isSingleRelation from './utils/isSingleRelation';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 300px;\n`;\n\nconst CellContent = ({ content, fieldSchema, metadatas, name, rowId, contentType }) => {\n  const { type } = fieldSchema;\n\n  if (!hasContent(type, content, metadatas, fieldSchema)) {\n    return <Typography textColor=\"neutral800\">-</Typography>;\n  }\n\n  switch (type) {\n    case 'media':\n      if (!fieldSchema.multiple) {\n        return <Media {...content} />;\n      }\n\n      return <MultipleMedias value={content} />;\n\n    case 'relation': {\n      if (isSingleRelation(fieldSchema.relation)) {\n        return <RelationSingle metadatas={metadatas} value={content} />;\n      }\n\n      return (\n        <RelationMultiple\n          fieldSchema={fieldSchema}\n          metadatas={metadatas}\n          value={content}\n          name={name}\n          entityId={rowId}\n          contentType={contentType}\n        />\n      );\n    }\n\n    case 'component':\n      if (fieldSchema.repeatable === true) {\n        return <RepeatableComponent value={content} metadatas={metadatas} />;\n      }\n\n      return <SingleComponent value={content} metadatas={metadatas} />;\n\n    case 'string':\n      return (\n        <Tooltip description={content}>\n          <TypographyMaxWidth ellipsis textColor=\"neutral800\">\n            <CellValue type={type} value={content} />\n          </TypographyMaxWidth>\n        </Tooltip>\n      );\n\n    default:\n      return (\n        <TypographyMaxWidth ellipsis textColor=\"neutral800\">\n          <CellValue type={type} value={content} />\n        </TypographyMaxWidth>\n      );\n  }\n};\n\nCellContent.defaultProps = {\n  content: undefined,\n};\n\nCellContent.propTypes = {\n  content: PropTypes.any,\n  contentType: PropTypes.shape({\n    uid: PropTypes.string.isRequired,\n  }).isRequired,\n  fieldSchema: PropTypes.shape({\n    component: PropTypes.string,\n    multiple: PropTypes.bool,\n    type: PropTypes.string.isRequired,\n    repeatable: PropTypes.bool,\n    relation: PropTypes.string,\n  }).isRequired,\n  metadatas: PropTypes.object.isRequired,\n  name: PropTypes.string.isRequired,\n  rowId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n};\n\nexport default CellContent;\n","import React from 'react';\n\nimport { Flex, BaseCheckbox, TextButton, Typography } from '@strapi/design-system';\nimport { useCollator, useTracking } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components';\n\nimport { checkIfAttributeIsDisplayable } from '../../../../utils';\nimport { onChangeListHeaders, onResetListHeaders } from '../../actions';\nimport { selectDisplayedHeaders } from '../../selectors';\n\nconst ChackboxWrapper = styled(Flex)`\n  :hover {\n    background-color: ${(props) => props.theme.colors.primary100};\n  }\n`;\n\nexport const FieldPicker = ({ layout }) => {\n  const dispatch = useDispatch();\n  const displayedHeaders = useSelector(selectDisplayedHeaders);\n  const { trackUsage } = useTracking();\n  const { formatMessage, locale } = useIntl();\n  const formatter = useCollator(locale, {\n    sensitivity: 'base',\n  });\n\n  const columns = Object.keys(layout.contentType.attributes)\n    .filter((name) => checkIfAttributeIsDisplayable(layout.contentType.attributes[name]))\n    .map((name) => ({\n      name,\n      label: layout.contentType.metadatas[name].list.label,\n    }))\n    .sort((a, b) => formatter.compare(a.label, b.label));\n\n  const displayedHeaderKeys = displayedHeaders.map(({ name }) => name);\n\n  const handleChange = (name) => {\n    trackUsage('didChangeDisplayedFields');\n    dispatch(onChangeListHeaders({ name, value: displayedHeaderKeys.includes(name) }));\n  };\n\n  const handleReset = () => {\n    dispatch(onResetListHeaders());\n  };\n\n  return (\n    <Flex as=\"fieldset\" direction=\"column\" alignItems=\"stretch\" gap={3}>\n      <Flex justifyContent=\"space-between\">\n        <Typography as=\"legend\" variant=\"pi\" fontWeight=\"bold\">\n          {formatMessage({\n            id: 'containers.ListPage.displayedFields',\n            defaultMessage: 'Displayed fields',\n          })}\n        </Typography>\n\n        <TextButton onClick={handleReset}>\n          {formatMessage({\n            id: 'app.components.Button.reset',\n            defaultMessage: 'Reset',\n          })}\n        </TextButton>\n      </Flex>\n\n      <Flex direction=\"column\" alignItems=\"stretch\">\n        {columns.map((header) => {\n          const isActive = displayedHeaderKeys.includes(header.name);\n\n          return (\n            <ChackboxWrapper\n              wrap=\"wrap\"\n              gap={2}\n              as=\"label\"\n              background={isActive ? 'primary100' : 'transparent'}\n              hasRadius\n              padding={2}\n              key={header.name}\n            >\n              <BaseCheckbox\n                onChange={() => handleChange(header.name)}\n                value={isActive}\n                name={header.name}\n              />\n              <Typography fontSize={1}>{header.label}</Typography>\n            </ChackboxWrapper>\n          );\n        })}\n      </Flex>\n    </Flex>\n  );\n};\n\nFieldPicker.propTypes = {\n  layout: PropTypes.shape({\n    contentType: PropTypes.shape({\n      attributes: PropTypes.object.isRequired,\n      metadatas: PropTypes.object.isRequired,\n      layouts: PropTypes.shape({\n        list: PropTypes.array.isRequired,\n      }).isRequired,\n      options: PropTypes.object.isRequired,\n      settings: PropTypes.object.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n","import React from 'react';\n\nimport { Flex, IconButton, Popover } from '@strapi/design-system';\nimport { CheckPermissions, LinkButton } from '@strapi/helper-plugin';\nimport { Cog, Layer } from '@strapi/icons';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\n\nimport { selectAdminPermissions } from '../../../../../selectors';\nimport { FieldPicker } from '../FieldPicker';\n\nexport const ViewSettingsMenu = ({ slug, layout }) => {\n  const [isVisible, setIsVisible] = React.useState(false);\n  const cogButtonRef = React.useRef();\n  const permissions = useSelector(selectAdminPermissions);\n  const { formatMessage } = useIntl();\n\n  const handleToggle = () => {\n    setIsVisible((prev) => !prev);\n  };\n\n  return (\n    <>\n      <IconButton\n        icon={<Cog />}\n        label={formatMessage({\n          id: 'components.ViewSettings.tooltip',\n          defaultMessage: 'View Settings',\n        })}\n        ref={cogButtonRef}\n        onClick={handleToggle}\n      />\n      {isVisible && (\n        <Popover\n          placement=\"bottom-end\"\n          source={cogButtonRef}\n          onDismiss={handleToggle}\n          spacing={4}\n          padding={3}\n        >\n          <Flex alignItems=\"stretch\" direction=\"column\" gap={3}>\n            <CheckPermissions\n              permissions={permissions.contentManager.collectionTypesConfigurations}\n            >\n              <LinkButton\n                size=\"S\"\n                startIcon={<Layer />}\n                to={`${slug}/configurations/list`}\n                variant=\"secondary\"\n              >\n                {formatMessage({\n                  id: 'app.links.configure-view',\n                  defaultMessage: 'Configure the view',\n                })}\n              </LinkButton>\n            </CheckPermissions>\n\n            <FieldPicker layout={layout} />\n          </Flex>\n        </Popover>\n      )}\n    </>\n  );\n};\n\nViewSettingsMenu.propTypes = {\n  slug: PropTypes.string.isRequired,\n  layout: PropTypes.shape({\n    contentType: PropTypes.shape({\n      attributes: PropTypes.object.isRequired,\n      metadatas: PropTypes.object.isRequired,\n      layouts: PropTypes.shape({\n        list: PropTypes.array.isRequired,\n      }).isRequired,\n      options: PropTypes.object.isRequired,\n      settings: PropTypes.object.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n","import * as React from 'react';\n\nimport { bindActionCreators } from '@reduxjs/toolkit';\nimport {\n  Main,\n  ActionLayout,\n  Button,\n  ContentLayout,\n  HeaderLayout,\n  useNotifyAT,\n  Flex,\n  Td,\n  Tr,\n  Typography,\n  Status,\n  lightTheme,\n} from '@strapi/design-system';\nimport {\n  findMatchingPermissions,\n  NoPermissions,\n  SearchURLQuery,\n  useFetchClient,\n  useFocusWhenNavigate,\n  useQueryParams,\n  useNotification,\n  useRBACProvider,\n  useTracking,\n  Link,\n  useAPIErrorHandler,\n  useCollator,\n  useStrapiApp,\n  Table,\n  PaginationURLQuery,\n  PageSizeURLQuery,\n} from '@strapi/helper-plugin';\nimport { ArrowLeft, Plus } from '@strapi/icons';\nimport axios, { AxiosError } from 'axios';\nimport isEqual from 'lodash/isEqual';\nimport PropTypes from 'prop-types';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation, Link as ReactRouterLink } from 'react-router-dom';\n\nimport { HOOKS } from '../../../constants';\nimport { useTypedSelector } from '../../../core/store/hooks';\nimport { useAdminUsers } from '../../../hooks/useAdminUsers';\nimport { useEnterprise } from '../../../hooks/useEnterprise';\nimport { InjectionZone } from '../../../shared/components/InjectionZone';\nimport { Filter } from '../../components/Filter';\nimport { AdminUsersFilter } from '../../components/Filter/CustomInputs/AdminUsersFilter';\nimport { CREATOR_FIELDS } from '../../constants/attributes';\nimport { useAllowedAttributes } from '../../hooks/useAllowedAttributes';\nimport { buildValidGetParams } from '../../utils/api';\nimport { getTranslation } from '../../utils/translations';\nimport { getDisplayName } from '../../utils/users';\n\nimport * as Actions from './actions';\nimport { Body } from './components/Body';\nimport BulkActionButtons from './components/BulkActionButtons';\nimport CellContent from './components/CellContent';\nimport { ViewSettingsMenu } from './components/ViewSettingsMenu';\nimport makeSelectListView, { selectDisplayedHeaders } from './selectors';\n\nconst { INJECT_COLUMN_IN_TABLE } = HOOKS;\nconst REVIEW_WORKFLOW_COLUMNS_CE = null;\nconst REVIEW_WORKFLOW_COLUMNS_CELL_CE = () => null;\nconst REVIEW_WORKFLOW_FILTER_CE = [];\nconst USER_FILTER_ATTRIBUTES = [...CREATOR_FIELDS, 'strapi_assignee'];\n\nfunction ListView({ canCreate, canDelete, canRead, canPublish, layout, slug }) {\n  const dispatch = useDispatch();\n  const { getData, getDataSucceeded } = React.useMemo(\n    () =>\n      bindActionCreators(\n        { getData: Actions.getData, getDataSucceeded: Actions.getDataSucceeded },\n        dispatch\n      ),\n    [dispatch]\n  );\n  const { pagination, isLoading, data } = useTypedSelector(makeSelectListView());\n  const { total } = pagination;\n  const { contentType } = layout;\n  const {\n    info,\n    options,\n    metadatas,\n    settings: { bulkable: isBulkable, filterable: isFilterable, searchable: isSearchable },\n  } = contentType;\n  const [isConfirmDeleteRowOpen, setIsConfirmDeleteRowOpen] = React.useState(false);\n  const toggleNotification = useNotification();\n  const { trackUsage } = useTracking();\n  const { allPermissions, refetchPermissions } = useRBACProvider();\n  const trackUsageRef = React.useRef(trackUsage);\n  const fetchPermissionsRef = React.useRef(refetchPermissions);\n  const { notifyStatus } = useNotifyAT();\n  const { formatAPIError } = useAPIErrorHandler(getTranslation);\n  const allowedAttributes = useAllowedAttributes(contentType, slug);\n  const [{ query }] = useQueryParams();\n  const { pathname } = useLocation();\n  const { push } = useHistory();\n  const { formatMessage, locale } = useIntl();\n  const fetchClient = useFetchClient();\n  const formatter = useCollator(locale, {\n    sensitivity: 'base',\n  });\n\n  const selectedUserIds =\n    query?.filters?.$and?.reduce((acc, filter) => {\n      const [key, value] = Object.entries(filter)[0];\n      const id = value.id?.$eq || value.id?.$ne;\n\n      // TODO: strapi_assignee should not be in here and rather defined\n      // in the ee directory.\n      if (USER_FILTER_ATTRIBUTES.includes(key) && !acc.includes(id)) {\n        acc.push(id);\n      }\n\n      return acc;\n    }, []) ?? [];\n\n  const { users, isLoading: isLoadingAdminUsers } = useAdminUsers(\n    { filter: { id: { in: selectedUserIds } } },\n    {\n      // fetch the list of admin users only if the filter contains users and the\n      // current user has permissions to display users\n      enabled:\n        selectedUserIds.length > 0 &&\n        findMatchingPermissions(allPermissions, [\n          {\n            action: 'admin::users.read',\n            subject: null,\n          },\n        ]).length > 0,\n    }\n  );\n\n  useFocusWhenNavigate();\n\n  const params = React.useMemo(() => buildValidGetParams(query), [query]);\n  const pluginsQueryParams = stringify({ plugins: query.plugins }, { encode: false });\n\n  const displayedAttributeFilters = allowedAttributes.map((name) => {\n    const attribute = contentType.attributes[name];\n    const { type, enum: options } = attribute;\n\n    const trackedEvent = {\n      name: 'didFilterEntries',\n      properties: { useRelation: type === 'relation' },\n    };\n\n    const { mainField, label } = metadatas[name].list;\n\n    const filter = {\n      name,\n      metadatas: { label: formatMessage({ id: label, defaultMessage: label }) },\n      fieldSchema: { type, options, mainField },\n      trackedEvent,\n    };\n\n    if (attribute.type === 'relation' && attribute.target === 'admin::user') {\n      filter.metadatas = {\n        ...filter.metadatas,\n        customOperators: [\n          {\n            intlLabel: {\n              id: 'components.FilterOptions.FILTER_TYPES.$eq',\n              defaultMessage: 'is',\n            },\n            value: '$eq',\n          },\n          {\n            intlLabel: {\n              id: 'components.FilterOptions.FILTER_TYPES.$ne',\n              defaultMessage: 'is not',\n            },\n            value: '$ne',\n          },\n        ],\n        customInput: AdminUsersFilter,\n        options: users.map((user) => ({\n          label: getDisplayName(user, formatMessage),\n          customValue: user.id.toString(),\n        })),\n      };\n\n      filter.fieldSchema.mainField = {\n        ...mainField,\n        name: 'id',\n      };\n    }\n\n    return filter;\n  });\n\n  const hasDraftAndPublish = options?.draftAndPublish ?? false;\n  const hasReviewWorkflows = options?.reviewWorkflows ?? false;\n\n  const reviewWorkflowColumns = useEnterprise(\n    REVIEW_WORKFLOW_COLUMNS_CE,\n    async () =>\n      (\n        await import(\n          '../../../../../ee/admin/src/content-manager/pages/ListView/ReviewWorkflowsColumn/constants'\n        )\n      ).REVIEW_WORKFLOW_COLUMNS_EE,\n    {\n      enabled: !!options?.reviewWorkflows,\n    }\n  );\n  const ReviewWorkflowsColumns = useEnterprise(\n    REVIEW_WORKFLOW_COLUMNS_CELL_CE,\n    async () => {\n      const { ReviewWorkflowsStageEE, ReviewWorkflowsAssigneeEE } = await import(\n        '../../../../../ee/admin/src/content-manager/pages/ListView/ReviewWorkflowsColumn'\n      );\n\n      return { ReviewWorkflowsStageEE, ReviewWorkflowsAssigneeEE };\n    },\n    {\n      enabled: hasReviewWorkflows,\n    }\n  );\n\n  const reviewWorkflowFilter = useEnterprise(\n    REVIEW_WORKFLOW_FILTER_CE,\n    async () =>\n      (\n        await import(\n          '../../../../../ee/admin/src/content-manager/components/Filter/CustomInputs/ReviewWorkflows/constants'\n        )\n      ).REVIEW_WORKFLOW_FILTERS,\n    {\n      combine(ceFilters, eeFilters) {\n        return [\n          ...ceFilters,\n          ...eeFilters\n            .filter((eeFilter) => {\n              // do not display the filter at all, if the current user does\n              // not have permissions to read admin users\n              if (eeFilter.name === 'strapi_assignee') {\n                return (\n                  findMatchingPermissions(allPermissions, [\n                    {\n                      action: 'admin::users.read',\n                      subject: null,\n                    },\n                  ]).length > 0\n                );\n              }\n\n              return true;\n            })\n            .map((eeFilter) => ({\n              ...eeFilter,\n              metadatas: {\n                ...eeFilter.metadatas,\n                // the stage filter needs the current content-type uid to fetch\n                // the list of stages that can be assigned to this content-type\n                ...(eeFilter.name === 'strapi_stage' ? { uid: contentType.uid } : {}),\n\n                // translate the filter label\n                label: formatMessage(eeFilter.metadatas.label),\n\n                // `options` allows the filter-tag to render the displayname\n                // of a user over a plain id\n                options:\n                  eeFilter.name === 'strapi_assignee' &&\n                  users.map((user) => ({\n                    label: getDisplayName(user, formatMessage),\n                    customValue: user.id.toString(),\n                  })),\n              },\n            })),\n        ];\n      },\n\n      defaultValue: [],\n\n      // we have to wait for admin users to be fully loaded, because otherwise\n      // combine is called to early and does not contain the latest state of\n      // the users array\n      enabled: hasReviewWorkflows && !isLoadingAdminUsers,\n    }\n  );\n\n  const { post, del } = fetchClient;\n\n  const bulkUnpublishMutation = useMutation(\n    (data) =>\n      post(`/content-manager/collection-types/${contentType.uid}/actions/bulkUnpublish`, data),\n    {\n      onSuccess() {\n        toggleNotification({\n          type: 'success',\n          message: {\n            id: 'content-manager.success.record.unpublish',\n            defaultMessage: 'Unpublished',\n          },\n        });\n\n        fetchData(`/content-manager/collection-types/${slug}`, { params });\n      },\n      onError(error) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(error),\n        });\n      },\n    }\n  );\n\n  // FIXME\n  // Using a ref to avoid requests being fired multiple times on slug on change\n  // We need it because the hook as mulitple dependencies so it may run before the permissions have checked\n  const requestUrlRef = React.useRef('');\n  /**\n   * TODO: re-write all of this, it's a mess.\n   */\n  const fetchData = React.useCallback(\n    async (endPoint, options) => {\n      getData();\n\n      try {\n        const {\n          data: { results, pagination: paginationResult },\n        } = await fetchClient.get(endPoint, options);\n\n        // If user enters a page number that doesn't exist, redirect him to the last page\n        if (paginationResult.page > paginationResult.pageCount && paginationResult.pageCount > 0) {\n          const query = {\n            ...params,\n            page: paginationResult.pageCount,\n          };\n\n          push({\n            pathname,\n            state: { from: pathname },\n            search: stringify(query),\n          });\n\n          return;\n        }\n\n        notifyStatus(\n          formatMessage(\n            {\n              id: getTranslation('utils.data-loaded'),\n              defaultMessage:\n                '{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded',\n            },\n            // Using the plural form\n            { number: paginationResult.count }\n          )\n        );\n\n        getDataSucceeded(paginationResult, results);\n      } catch (err) {\n        if (axios.isCancel(err)) {\n          return;\n        }\n\n        const resStatus = err?.response?.status ?? null;\n\n        if (resStatus === 403) {\n          await fetchPermissionsRef.current();\n\n          toggleNotification({\n            type: 'info',\n            message: { id: getTranslation('permissions.not-allowed.update') },\n          });\n\n          push('/');\n\n          return;\n        }\n\n        toggleNotification({\n          type: 'warning',\n          message: { id: getTranslation('error.model.fetch') },\n        });\n      }\n    },\n    [\n      formatMessage,\n      getData,\n      getDataSucceeded,\n      notifyStatus,\n      push,\n      toggleNotification,\n      fetchClient,\n      params,\n      pathname,\n    ]\n  );\n\n  const handleConfirmDeleteAllData = React.useCallback(\n    async (ids) => {\n      try {\n        await post(`/content-manager/collection-types/${slug}/actions/bulkDelete`, {\n          ids,\n        });\n\n        fetchData(`/content-manager/collection-types/${slug}`, { params });\n\n        trackUsageRef.current('didBulkDeleteEntries');\n      } catch (err) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(err),\n        });\n      }\n    },\n    [slug, toggleNotification, formatAPIError, post, fetchData, params]\n  );\n\n  const handleConfirmDeleteData = React.useCallback(\n    async (idToDelete) => {\n      try {\n        await del(`/content-manager/collection-types/${slug}/${idToDelete}`);\n\n        const requestUrl = `/content-manager/collection-types/${slug}`;\n        fetchData(requestUrl, { params });\n\n        toggleNotification({\n          type: 'success',\n          message: { id: getTranslation('success.record.delete') },\n        });\n      } catch (err) {\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(err),\n        });\n      }\n    },\n    [slug, toggleNotification, formatAPIError, del, fetchData, params]\n  );\n\n  const handleConfirmUnpublishAllData = (selectedEntries) => {\n    return bulkUnpublishMutation.mutateAsync({ ids: selectedEntries });\n  };\n\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n\n    const shouldSendRequest = canRead;\n    const requestUrl = `/content-manager/collection-types/${slug}`;\n\n    if (shouldSendRequest && requestUrl.includes(requestUrlRef.current)) {\n      fetchData(requestUrl, { cancelToken: source.token, params });\n    }\n\n    return () => {\n      requestUrlRef.current = slug;\n\n      source.cancel('Operation canceled by the user.');\n    };\n  }, [canRead, getData, slug, params, getDataSucceeded, fetchData]);\n\n  const defaultHeaderLayoutTitle = formatMessage({\n    id: getTranslation('header.name'),\n    defaultMessage: 'Content',\n  });\n  const headerLayoutTitle = formatMessage({\n    id: info.displayName,\n    defaultMessage: info.displayName || defaultHeaderLayoutTitle,\n  });\n\n  const { runHookWaterfall } = useStrapiApp();\n  const displayedHeaders = useTypedSelector(selectDisplayedHeaders);\n\n  const tableHeaders = React.useMemo(() => {\n    const headers = runHookWaterfall(INJECT_COLUMN_IN_TABLE, {\n      displayedHeaders,\n      layout,\n    });\n\n    const formattedHeaders = headers.displayedHeaders.map((header) => {\n      const { metadatas } = header;\n\n      if (header.fieldSchema.type === 'relation') {\n        const sortFieldValue = `${header.name}.${header.metadatas.mainField.name}`;\n\n        return {\n          ...header,\n          metadatas: {\n            ...metadatas,\n            label: formatMessage({\n              id: getTranslation(`containers.ListPage.table-headers.${header.name}`),\n              defaultMessage: metadatas.label,\n            }),\n          },\n          name: sortFieldValue,\n        };\n      }\n\n      return {\n        ...header,\n        metadatas: {\n          ...metadatas,\n          label: formatMessage({\n            id: getTranslation(`containers.ListPage.table-headers.${header.name}`),\n            defaultMessage: metadatas.label,\n          }),\n        },\n      };\n    });\n\n    if (hasDraftAndPublish) {\n      formattedHeaders.push({\n        key: '__published_at_temp_key__',\n        name: 'publishedAt',\n        fieldSchema: {\n          type: 'custom',\n        },\n        metadatas: {\n          label: formatMessage({\n            id: getTranslation(`containers.ListPage.table-headers.publishedAt`),\n            defaultMessage: 'publishedAt',\n          }),\n          searchable: false,\n          sortable: true,\n        },\n      });\n    }\n\n    if (reviewWorkflowColumns) {\n      // Make sure the column header label is translated\n      reviewWorkflowColumns.map((column) => {\n        if (typeof column.metadatas.label !== 'string') {\n          column.metadatas.label = formatMessage(column.metadatas.label);\n        }\n\n        return column;\n      });\n\n      formattedHeaders.push(...reviewWorkflowColumns);\n    }\n\n    return formattedHeaders;\n  }, [\n    runHookWaterfall,\n    displayedHeaders,\n    layout,\n    reviewWorkflowColumns,\n    hasDraftAndPublish,\n    formatMessage,\n  ]);\n\n  const subtitle = canRead\n    ? formatMessage(\n        {\n          id: getTranslation('pages.ListView.header-subtitle'),\n          defaultMessage: '{number, plural, =0 {# entries} one {# entry} other {# entries}} found',\n        },\n        { number: total }\n      )\n    : null;\n\n  const getCreateAction = (props) =>\n    canCreate ? (\n      <Button\n        {...props}\n        forwardedAs={ReactRouterLink}\n        onClick={() => {\n          const trackerProperty = hasDraftAndPublish ? { status: 'draft' } : {};\n\n          trackUsageRef.current('willCreateEntry', trackerProperty);\n        }}\n        to={{\n          pathname: `${pathname}/create`,\n          search: query.plugins ? pluginsQueryParams : '',\n        }}\n        startIcon={<Plus />}\n        style={{ textDecoration: 'none' }}\n      >\n        {formatMessage({\n          id: getTranslation('HeaderLayout.button.label-add-entry'),\n          defaultMessage: 'Create new entry',\n        })}\n      </Button>\n    ) : null;\n\n  /**\n   *\n   * @param {string} id\n   * @returns void\n   */\n  const handleRowClick = (id) => () => {\n    trackUsage('willEditEntryFromList');\n    push({\n      pathname: `${pathname}/${id}`,\n      state: { from: pathname },\n      search: pluginsQueryParams,\n    });\n  };\n\n  const handleCloneClick = (id) => async () => {\n    try {\n      const { data } = await post(\n        `/content-manager/collection-types/${contentType.uid}/auto-clone/${id}?${pluginsQueryParams}`\n      );\n\n      if ('id' in data) {\n        push({\n          pathname: `${pathname}/${data.id}`,\n          state: { from: pathname },\n          search: pluginsQueryParams,\n        });\n      }\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        push({\n          pathname: `${pathname}/create/clone/${id}`,\n          state: { from: pathname, error: formatAPIError(err) },\n          search: pluginsQueryParams,\n        });\n      }\n    }\n  };\n\n  // Add 1 column for the checkbox and 1 for the actions\n  const colCount = tableHeaders.length + 2;\n\n  // We have this function to refetch data when selected entries modal is closed\n  const refetchData = () => {\n    fetchData(`/content-manager/collection-types/${slug}`, { params });\n  };\n\n  // Block rendering until the review stage component is fully loaded in EE\n  if (!ReviewWorkflowsColumns) {\n    return null;\n  }\n\n  return (\n    <Main aria-busy={isLoading}>\n      <HeaderLayout\n        primaryAction={getCreateAction()}\n        subtitle={subtitle}\n        title={headerLayoutTitle}\n        navigationAction={\n          <Link startIcon={<ArrowLeft />} to=\"/content-manager/\">\n            {formatMessage({\n              id: 'global.back',\n              defaultMessage: 'Back',\n            })}\n          </Link>\n        }\n      />\n      {!canRead && (\n        <ActionLayout endActions={<InjectionZone area=\"contentManager.listView.actions\" />} />\n      )}\n      {canRead && (\n        <ActionLayout\n          endActions={\n            <>\n              <InjectionZone area=\"contentManager.listView.actions\" />\n              <ViewSettingsMenu slug={slug} layout={layout} />\n            </>\n          }\n          startActions={\n            <>\n              {isSearchable && (\n                <SearchURLQuery\n                  label={formatMessage(\n                    { id: 'app.component.search.label', defaultMessage: 'Search for {target}' },\n                    { target: headerLayoutTitle }\n                  )}\n                  placeholder={formatMessage({\n                    id: 'global.search',\n                    defaultMessage: 'Search',\n                  })}\n                  trackedEvent=\"didSearch\"\n                />\n              )}\n              {isFilterable && !isLoadingAdminUsers && (\n                <Filter\n                  displayedFilters={[...displayedAttributeFilters, ...reviewWorkflowFilter].sort(\n                    (a, b) => formatter.compare(a.metadatas.label, b.metadatas.label)\n                  )}\n                />\n              )}\n            </>\n          }\n        />\n      )}\n      <ContentLayout>\n        {canRead ? (\n          <Flex gap={4} direction=\"column\" alignItems=\"stretch\">\n            <Table.Root rows={data} isLoading={isLoading} colCount={colCount}>\n              <Table.ActionBar>\n                <BulkActionButtons\n                  showPublish={canPublish && hasDraftAndPublish}\n                  showDelete={canDelete}\n                  onConfirmDeleteAll={handleConfirmDeleteAllData}\n                  onConfirmUnpublishAll={handleConfirmUnpublishAllData}\n                  refetchData={refetchData}\n                />\n              </Table.ActionBar>\n              <Table.Content>\n                <Table.Head>\n                  {/* Bulk action select all checkbox */}\n                  <Table.HeaderCheckboxCell />\n                  {/* Dynamic headers based on fields */}\n                  {tableHeaders.map(({ fieldSchema, key, name, metadatas }) => (\n                    <Table.HeaderCell\n                      key={key}\n                      name={name}\n                      fieldSchemaType={fieldSchema.type}\n                      relationFieldName={metadatas.mainField?.name}\n                      isSortable={metadatas.sortable}\n                      label={metadatas.label}\n                    />\n                  ))}\n                  {/* Visually hidden header for actions */}\n                  <Table.HeaderHiddenActionsCell />\n                </Table.Head>\n                {/* Loading content */}\n                <Table.LoadingBody />\n                {/* Empty content */}\n                <Table.EmptyBody\n                  contentType={headerLayoutTitle}\n                  action={getCreateAction({ variant: 'secondary' })}\n                />\n                {/* Content */}\n                <Body.Root\n                  onConfirmDelete={handleConfirmDeleteData}\n                  isConfirmDeleteRowOpen={isConfirmDeleteRowOpen}\n                  setIsConfirmDeleteRowOpen={setIsConfirmDeleteRowOpen}\n                >\n                  {data.map((rowData, index) => {\n                    return (\n                      <Tr cursor=\"pointer\" key={rowData.id} onClick={handleRowClick(rowData.id)}>\n                        {/* Bulk action row checkbox */}\n                        <Td>\n                          <Body.CheckboxDataCell rowId={rowData.id} index={index} />\n                        </Td>\n                        {/* Field data */}\n                        {tableHeaders.map(({ key, name, cellFormatter, ...rest }) => {\n                          if (hasDraftAndPublish && name === 'publishedAt') {\n                            return (\n                              <Td key={key}>\n                                <Status\n                                  width=\"min-content\"\n                                  showBullet={false}\n                                  variant={rowData.publishedAt ? 'success' : 'secondary'}\n                                  size=\"S\"\n                                >\n                                  <Typography\n                                    fontWeight=\"bold\"\n                                    textColor={`${\n                                      rowData.publishedAt ? 'success' : 'secondary'\n                                    }700`}\n                                  >\n                                    {formatMessage({\n                                      id: getTranslation(\n                                        `containers.List.${\n                                          rowData.publishedAt ? 'published' : 'draft'\n                                        }`\n                                      ),\n                                      defaultMessage: rowData.publishedAt ? 'Published' : 'Draft',\n                                    })}\n                                  </Typography>\n                                </Status>\n                              </Td>\n                            );\n                          }\n\n                          if (hasReviewWorkflows) {\n                            if (name === 'strapi_stage') {\n                              return (\n                                <Td key={key}>\n                                  {rowData.strapi_stage ? (\n                                    <ReviewWorkflowsColumns.ReviewWorkflowsStageEE\n                                      color={\n                                        rowData.strapi_stage.color ?? lightTheme.colors.primary600\n                                      }\n                                      name={rowData.strapi_stage.name}\n                                    />\n                                  ) : (\n                                    <Typography textColor=\"neutral800\">-</Typography>\n                                  )}\n                                </Td>\n                              );\n                            }\n                            if (name === 'strapi_assignee') {\n                              return (\n                                <Td key={key}>\n                                  {rowData.strapi_assignee ? (\n                                    <ReviewWorkflowsColumns.ReviewWorkflowsAssigneeEE\n                                      user={rowData.strapi_assignee}\n                                    />\n                                  ) : (\n                                    <Typography textColor=\"neutral800\">-</Typography>\n                                  )}\n                                </Td>\n                              );\n                            }\n                          }\n\n                          if (['createdBy', 'updatedBy'].includes(name.split('.')[0])) {\n                            // Display the users full name\n                            // Some entries doesn't have a user assigned as creator/updater (ex: entries created through content API)\n                            // In this case, we display a dash\n                            return (\n                              <Td key={key}>\n                                <Typography textColor=\"neutral800\">\n                                  {rowData[name.split('.')[0]]\n                                    ? getDisplayName(rowData[name.split('.')[0]], formatMessage)\n                                    : '-'}\n                                </Typography>\n                              </Td>\n                            );\n                          }\n\n                          if (typeof cellFormatter === 'function') {\n                            return (\n                              <Td key={key}>{cellFormatter(rowData, { key, name, ...rest })}</Td>\n                            );\n                          }\n\n                          return (\n                            <Td key={key}>\n                              <CellContent\n                                content={rowData[name.split('.')[0]]}\n                                name={name}\n                                contentType={layout.contentType}\n                                {...rest}\n                                rowId={rowData.id}\n                              />\n                            </Td>\n                          );\n                        })}\n                        {/* Actions: edit, duplicate, delete */}\n                        {(canDelete || canPublish) && isBulkable && (\n                          <Td>\n                            <Body.EntityActionsDataCell\n                              rowId={rowData.id}\n                              index={index}\n                              setIsConfirmDeleteRowOpen={setIsConfirmDeleteRowOpen}\n                              canCreate={canCreate}\n                              canDelete={canDelete}\n                              handleCloneClick={handleCloneClick}\n                            />\n                          </Td>\n                        )}\n                      </Tr>\n                    );\n                  })}\n                </Body.Root>\n              </Table.Content>\n            </Table.Root>\n            <Flex alignItems=\"flex-end\" justifyContent=\"space-between\">\n              <PageSizeURLQuery trackedEvent=\"willChangeNumberOfEntriesPerPage\" />\n              <PaginationURLQuery pagination={{ pageCount: pagination?.pageCount || 1 }} />\n            </Flex>\n          </Flex>\n        ) : (\n          <NoPermissions />\n        )}\n      </ContentLayout>\n    </Main>\n  );\n}\n\nListView.propTypes = {\n  canCreate: PropTypes.bool.isRequired,\n  canDelete: PropTypes.bool.isRequired,\n  canRead: PropTypes.bool.isRequired,\n  canPublish: PropTypes.bool.isRequired,\n  layout: PropTypes.exact({\n    components: PropTypes.object.isRequired,\n    contentType: PropTypes.shape({\n      uid: PropTypes.string.isRequired,\n      attributes: PropTypes.object.isRequired,\n      metadatas: PropTypes.object.isRequired,\n      info: PropTypes.shape({ displayName: PropTypes.string.isRequired }).isRequired,\n      layouts: PropTypes.shape({\n        list: PropTypes.array.isRequired,\n      }).isRequired,\n      options: PropTypes.object.isRequired,\n      settings: PropTypes.object.isRequired,\n    }).isRequired,\n  }).isRequired,\n  slug: PropTypes.string.isRequired,\n};\n\nexport default React.memo(ListView, isEqual);\n","import React, { memo, useMemo } from 'react';\n\nimport { difference, LoadingIndicatorPage, useRBAC } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\n\nimport { generatePermissionsObject } from '../../utils/permissions';\nimport ListView from '../ListView';\n\nconst Permissions = (props) => {\n  const viewPermissions = useMemo(() => generatePermissionsObject(props.slug), [props.slug]);\n\n  const { isLoading, allowedActions } = useRBAC(viewPermissions, props.permissions);\n\n  if (isLoading) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return <ListView {...props} {...allowedActions} />;\n};\n\nPermissions.defaultProps = {\n  permissions: [],\n};\n\nPermissions.propTypes = {\n  permissions: PropTypes.array,\n  slug: PropTypes.string.isRequired,\n};\n\n// This avoids the components to rerender on params change causing multiple requests to be fired\nexport default memo(Permissions, (prev, next) => {\n  const differenceBetweenRerenders = difference(prev, next);\n  // Here the submenu is using a navlink which doesn't support the state\n  // When we navigate from the EV to the LV using the menu the state is lost at some point\n  // and this causes the component to rerender twice and firing requests twice\n  // this hack prevents this\n  // TODO: at some point we will need to refactor the LV and migrate to react-query\n  const propNamesThatHaveChanged = Object.keys(differenceBetweenRerenders).filter(\n    (propName) => propName !== 'state'\n  );\n\n  return propNamesThatHaveChanged.length > 0;\n});\n","import React, { useEffect } from 'react';\n\nimport { useQueryParams } from '@strapi/helper-plugin';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport { useFindRedirectionLink } from '../../hooks/useFindRedirectionLink';\nimport { useSyncRbac } from '../../hooks/useSyncRbac';\nimport { resetProps, setLayout } from '../ListView/actions';\n\nimport Permissions from './Permissions';\n\nconst ListViewLayout = ({ layout, ...props }) => {\n  const dispatch = useDispatch();\n  const { replace } = useHistory();\n  const [{ query, rawQuery }] = useQueryParams();\n  const { permissions, isValid: isValidPermissions } = useSyncRbac(query, props.slug, 'listView');\n  const redirectionLink = useFindRedirectionLink(props.slug);\n\n  useEffect(() => {\n    if (!rawQuery) {\n      replace(redirectionLink);\n    }\n  }, [rawQuery, replace, redirectionLink]);\n\n  useEffect(() => {\n    dispatch(setLayout(layout));\n  }, [dispatch, layout]);\n\n  useEffect(() => {\n    return () => {\n      dispatch(resetProps());\n    };\n  }, [dispatch]);\n\n  if (!isValidPermissions) {\n    return null;\n  }\n\n  return <Permissions {...props} layout={layout} permissions={permissions} />;\n};\n\nListViewLayout.propTypes = {\n  layout: PropTypes.exact({\n    components: PropTypes.object.isRequired,\n    contentType: PropTypes.shape({\n      attributes: PropTypes.object.isRequired,\n      metadatas: PropTypes.object.isRequired,\n      layouts: PropTypes.shape({\n        list: PropTypes.array.isRequired,\n      }).isRequired,\n      options: PropTypes.object.isRequired,\n      settings: PropTypes.object.isRequired,\n      pluginOptions: PropTypes.object,\n    }).isRequired,\n  }).isRequired,\n  slug: PropTypes.string.isRequired,\n};\n\nexport default ListViewLayout;\n","import * as React from 'react';\n\nimport { Box } from '@strapi/design-system';\nimport { CheckPagePermissions, LoadingIndicatorPage, AnErrorOccurred } from '@strapi/helper-plugin';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { Route, RouteComponentProps, Switch } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { useContentTypeLayout } from '../hooks/useLayouts';\nimport {\n  SettingsViewComponentLayout,\n  SettingsViewContentTypeLayout,\n  formatLayoutForSettingsView,\n} from '../utils/layouts';\n\n// @ts-expect-error – This will be done in CONTENT-1952\nimport EditSettingsView from './EditSettingsView';\nimport { EditViewLayoutManager } from './EditViewLayoutManager';\n// @ts-expect-error – This will be done in CONTENT-1953\nimport { ListSettingsView } from './ListSettingsView';\n// @ts-expect-error – This will be done in CONTENT-1945\nimport ListViewLayout from './ListViewLayoutManager';\n\ninterface CollectionTypeRecursivePathProps extends RouteComponentProps<{ slug: string }> {}\n\nconst CollectionTypeRecursivePath = ({\n  match: {\n    params: { slug },\n    url,\n  },\n}: CollectionTypeRecursivePathProps) => {\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\n  const { isLoading, layout, updateLayout } = useContentTypeLayout(slug);\n\n  const { rawContentTypeLayout, rawComponentsLayouts } = React.useMemo(() => {\n    let rawContentTypeLayout: SettingsViewContentTypeLayout | null = null;\n    let rawComponentsLayouts: Record<string, SettingsViewComponentLayout> | null = null;\n\n    if (layout?.contentType) {\n      rawContentTypeLayout = formatLayoutForSettingsView(layout.contentType);\n    }\n\n    if (layout?.components) {\n      rawComponentsLayouts = Object.keys(layout.components).reduce<\n        Record<string, SettingsViewComponentLayout>\n      >((acc, current) => {\n        acc[current] = formatLayoutForSettingsView(layout.components[current]);\n\n        return acc;\n      }, {});\n    }\n\n    return { rawContentTypeLayout, rawComponentsLayouts };\n  }, [layout]);\n\n  const uid = layout?.contentType?.uid ?? null;\n\n  // This statement is needed in order to prevent the CollectionTypeFormWrapper effects clean up phase to be run twice.\n  // What can happen is that when navigating from one entry to another the cleanup phase of the fetch data effect is run twice : once when\n  // unmounting, once when the url changes.\n  // Since it can happen that the layout there's a delay when the layout is being fetched and the url changes adding the uid ! == slug\n  // statement prevent the component from being mounted and unmounted twice.\n  if (uid !== slug || isLoading || !layout) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <ErrorBoundary\n      FallbackComponent={() => (\n        <Box padding={8}>\n          <AnErrorOccurred />\n        </Box>\n      )}\n    >\n      <Switch>\n        <Route path={`${url}/configurations/list`}>\n          <CheckPagePermissions\n            permissions={permissions.contentManager?.collectionTypesConfigurations}\n          >\n            <ListSettingsView\n              layout={rawContentTypeLayout}\n              slug={slug}\n              updateLayout={updateLayout}\n            />\n          </CheckPagePermissions>\n        </Route>\n        <Route path={`${url}/configurations/edit`}>\n          <CheckPagePermissions\n            permissions={permissions.contentManager?.collectionTypesConfigurations}\n          >\n            <EditSettingsView\n              components={rawComponentsLayouts}\n              isContentTypeView\n              mainLayout={rawContentTypeLayout}\n              slug={slug}\n              updateLayout={updateLayout}\n            />\n          </CheckPagePermissions>\n        </Route>\n        <Route\n          path={`${url}/create/clone/:origin`}\n          render={({\n            history: { goBack },\n            match: {\n              params: { origin },\n            },\n          }) => (\n            <EditViewLayoutManager slug={slug} layout={layout} goBack={goBack} origin={origin} />\n          )}\n        />\n        <Route\n          path={`${url}/create`}\n          render={({ history: { goBack } }) => (\n            <EditViewLayoutManager slug={slug} layout={layout} goBack={goBack} />\n          )}\n        />\n        <Route\n          path={`${url}/:id`}\n          render={({\n            history: { goBack },\n            match: {\n              params: { id },\n            },\n          }) => <EditViewLayoutManager slug={slug} layout={layout} goBack={goBack} id={id} />}\n        />\n        <Route\n          path={`${url}`}\n          render={({ location: { state }, history: { goBack } }) => (\n            <ListViewLayout slug={slug} layout={layout} state={state} goBack={goBack} />\n          )}\n        />\n      </Switch>\n    </ErrorBoundary>\n  );\n};\n\nexport { CollectionTypeRecursivePath };\n","import { Attribute } from '@strapi/types';\nimport produce from 'immer';\n\nimport {\n  CLEAR_SET_MODIFIED_DATA_ONLY,\n  GET_DATA,\n  GET_DATA_SUCCEEDED,\n  INIT_FORM,\n  RESET_PROPS,\n  SET_DATA_STRUCTURES,\n  SET_STATUS,\n  SUBMIT_SUCCEEDED,\n} from './constants';\n\nimport type { CrudAction } from './actions';\n\ninterface EntityData {\n  [key: string]: Attribute.GetValue<Attribute.Any>;\n}\n\ninterface CrudState {\n  componentsDataStructure: EntityData;\n  contentTypeDataStructure: EntityData;\n  isLoading: boolean;\n  data: EntityData | null;\n  status: string;\n  setModifiedDataOnly: boolean;\n}\n\nconst initialState = {\n  componentsDataStructure: {},\n  contentTypeDataStructure: {},\n  isLoading: true,\n  data: null,\n  status: 'resolved',\n  setModifiedDataOnly: false,\n} satisfies CrudState;\n\nconst reducer = (state: CrudState = initialState, action: CrudAction) =>\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case GET_DATA: {\n        draftState.isLoading = true;\n        draftState.data = null;\n        break;\n      }\n      case GET_DATA_SUCCEEDED: {\n        draftState.isLoading = false;\n        draftState.data = action.data;\n        draftState.setModifiedDataOnly = action.setModifiedDataOnly ?? false;\n        break;\n      }\n      case INIT_FORM: {\n        if (action.data) {\n          draftState.isLoading = false;\n          draftState.data = action.data;\n\n          break;\n        }\n\n        draftState.isLoading = false;\n        draftState.data = state.contentTypeDataStructure;\n        break;\n      }\n      case RESET_PROPS: {\n        return initialState;\n      }\n      case SET_DATA_STRUCTURES: {\n        draftState.componentsDataStructure = action.componentsDataStructure;\n        draftState.contentTypeDataStructure = action.contentTypeDataStructure;\n        break;\n      }\n      case SET_STATUS: {\n        draftState.status = action.status;\n        break;\n      }\n      case SUBMIT_SUCCEEDED: {\n        draftState.data = action.data;\n        break;\n      }\n      case CLEAR_SET_MODIFIED_DATA_ONLY: {\n        draftState.setModifiedDataOnly = false;\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport { reducer, initialState };\nexport type { CrudState, EntityData, CrudAction };\n","import * as React from 'react';\n\nimport { CheckPagePermissions, LoadingIndicatorPage, useFetchClient } from '@strapi/helper-plugin';\nimport axios, { CancelTokenSource } from 'axios';\nimport { useParams } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { getData, getDataSucceeded } from '../sharedReducers/crud/actions';\nimport { reducer, initialState } from '../sharedReducers/crud/reducer';\nimport { mergeMetasWithSchema } from '../utils/schemas';\n\nimport { selectSchemas } from './App';\n// @ts-expect-error – This will be done in CONTENT-1952\nimport EditSettingsView from './EditSettingsView';\n\nconst ComponentSettingsView = () => {\n  const [{ isLoading, data: layout }, dispatch] = React.useReducer(reducer, initialState);\n  const schemas = useTypedSelector(selectSchemas);\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\n  const { uid } = useParams<{ uid: string }>();\n  const { get } = useFetchClient();\n\n  React.useEffect(() => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    const fetchData = async (source: CancelTokenSource) => {\n      try {\n        dispatch(getData());\n\n        const {\n          data: { data },\n        } = await get(`/content-manager/components/${uid}/configuration`, {\n          cancelToken: source.token,\n        });\n        dispatch(getDataSucceeded(mergeMetasWithSchema(data, schemas, 'component')));\n      } catch (err) {\n        if (axios.isCancel(err)) {\n          return;\n        }\n        console.error(err);\n      }\n    };\n\n    fetchData(source);\n\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  }, [uid, schemas, get]);\n\n  if (isLoading || !layout) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <CheckPagePermissions permissions={permissions.contentManager?.componentsConfigurations}>\n      <EditSettingsView components={layout.components} mainLayout={layout.component} slug={uid} />\n    </CheckPagePermissions>\n  );\n};\n\nexport { ComponentSettingsView };\n","import { ContentLayout, EmptyStateLayout, HeaderLayout, Main } from '@strapi/design-system';\nimport { LinkButton } from '@strapi/design-system/v2';\nimport { useFocusWhenNavigate } from '@strapi/helper-plugin';\nimport { EmptyDocuments, Plus } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\n\nimport { getTranslation } from '../utils/translations';\n\nconst NoContentType = () => {\n  const { formatMessage } = useIntl();\n  useFocusWhenNavigate();\n\n  return (\n    <Main>\n      <HeaderLayout\n        title={formatMessage({\n          id: getTranslation('header.name'),\n          defaultMessage: 'Content',\n        })}\n      />\n      <ContentLayout>\n        <EmptyStateLayout\n          action={\n            <LinkButton\n              as={NavLink}\n              variant=\"secondary\"\n              startIcon={<Plus />}\n              // @ts-expect-error – DS inference does not work with the `as` prop.\n              to=\"/plugins/content-type-builder/content-types/create-content-type\"\n            >\n              {formatMessage({\n                id: 'app.components.HomePage.create',\n                defaultMessage: 'Create your first Content-type',\n              })}\n            </LinkButton>\n          }\n          content={formatMessage({\n            id: 'content-manager.pages.NoContentType.text',\n            defaultMessage:\n              \"You don't have any content yet, we recommend you to create your first Content-Type.\",\n          })}\n          hasRadius\n          icon={<EmptyDocuments width=\"10rem\" />}\n          shadow=\"tableShadow\"\n        />\n      </ContentLayout>\n    </Main>\n  );\n};\n\nexport { NoContentType };\n","import { ContentLayout, HeaderLayout, Main } from '@strapi/design-system';\nimport {\n  NoPermissions as NoPermissionsComponent,\n  useFocusWhenNavigate,\n} from '@strapi/helper-plugin';\nimport { useIntl } from 'react-intl';\n\nimport { getTranslation } from '../utils/translations';\n\nconst NoPermissions = () => {\n  const { formatMessage } = useIntl();\n  useFocusWhenNavigate();\n\n  return (\n    <Main>\n      <HeaderLayout\n        title={formatMessage({\n          id: getTranslation('header.name'),\n          defaultMessage: 'Content',\n        })}\n      />\n      <ContentLayout>\n        <NoPermissionsComponent />\n      </ContentLayout>\n    </Main>\n  );\n};\n\nexport { NoPermissions };\n","import * as React from 'react';\n\nimport { CheckPagePermissions, LoadingIndicatorPage } from '@strapi/helper-plugin';\nimport { Route, RouteComponentProps, Switch } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { useContentTypeLayout } from '../hooks/useLayouts';\nimport {\n  SettingsViewComponentLayout,\n  SettingsViewContentTypeLayout,\n  formatLayoutForSettingsView,\n} from '../utils/layouts';\n\n// @ts-expect-error – This will be done in CONTENT-1952\nimport EditSettingsView from './EditSettingsView';\nimport { EditViewLayoutManager } from './EditViewLayoutManager';\n\ninterface SingleTypeRecursivePathProps extends RouteComponentProps<{ slug: string }> {}\n\nconst SingleTypeRecursivePath = ({\n  match: {\n    params: { slug },\n    url,\n  },\n}: SingleTypeRecursivePathProps) => {\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\n  const { isLoading, layout, updateLayout } = useContentTypeLayout(slug);\n\n  const { rawContentTypeLayout, rawComponentsLayouts } = React.useMemo(() => {\n    let rawContentTypeLayout: SettingsViewContentTypeLayout | null = null;\n    let rawComponentsLayouts: Record<string, SettingsViewComponentLayout> | null = null;\n\n    if (layout?.contentType) {\n      rawContentTypeLayout = formatLayoutForSettingsView(layout.contentType);\n    }\n\n    if (layout?.components) {\n      rawComponentsLayouts = Object.keys(layout.components).reduce<\n        Record<string, SettingsViewComponentLayout>\n      >((acc, current) => {\n        acc[current] = formatLayoutForSettingsView(layout.components[current]);\n\n        return acc;\n      }, {});\n    }\n\n    return { rawContentTypeLayout, rawComponentsLayouts };\n  }, [layout]);\n\n  if (isLoading || !layout) {\n    return <LoadingIndicatorPage />;\n  }\n\n  return (\n    <Switch>\n      <Route path={`${url}/configurations/edit`}>\n        <CheckPagePermissions permissions={permissions.contentManager?.singleTypesConfigurations}>\n          <EditSettingsView\n            components={rawComponentsLayouts}\n            isContentTypeView\n            mainLayout={rawContentTypeLayout}\n            slug={slug}\n            updateLayout={updateLayout}\n          />\n        </CheckPagePermissions>\n      </Route>\n      <Route\n        path={url}\n        render={({ history }) => (\n          <EditViewLayoutManager layout={layout} slug={slug} isSingleType goBack={history.goBack} />\n        )}\n      />\n    </Switch>\n  );\n};\n\nexport { SingleTypeRecursivePath };\n","import * as React from 'react';\n\nimport { createSelector } from '@reduxjs/toolkit';\nimport { HeaderLayout, Layout, Main } from '@strapi/design-system';\nimport {\n  AnErrorOccurred,\n  CheckPagePermissions,\n  LoadingIndicatorPage,\n  useGuidedTour,\n} from '@strapi/helper-plugin';\nimport produce from 'immer';\nimport { Helmet } from 'react-helmet';\nimport { useIntl } from 'react-intl';\nimport { Redirect, Route, Switch, useLocation, useRouteMatch } from 'react-router-dom';\n\nimport { DragLayer, DragLayerProps } from '../../components/DragLayer';\nimport { RootState } from '../../core/store/configure';\nimport { useTypedSelector } from '../../core/store/hooks';\nimport { CardDragPreview } from '../components/DragPreviews/CardDragPreview';\nimport { ComponentDragPreview } from '../components/DragPreviews/ComponentDragPreview';\nimport { RelationDragPreview } from '../components/DragPreviews/RelationDragPreview';\nimport { LeftMenu } from '../components/LeftMenu';\nimport { ModelsContext } from '../contexts/models';\nimport { useContentManagerInitData } from '../hooks/useContentManagerInitData';\nimport { ItemTypes } from '../utils/dragAndDrop';\nimport { getTranslation } from '../utils/translations';\n\nimport { CollectionTypeRecursivePath } from './CollectionTypeRecursivePath';\nimport { ComponentSettingsView } from './ComponentSettingsView';\nimport { NoContentType } from './NoContentType';\nimport { NoPermissions } from './NoPermissions';\nimport { SingleTypeRecursivePath } from './SingleTypeRecursivePath';\n\nimport type { ContentManagerLink } from '../hooks/useContentManagerInitData';\nimport type { Contracts } from '@strapi/plugin-content-manager/_internal/shared';\n\n/* -------------------------------------------------------------------------------------------------\n * App\n * -----------------------------------------------------------------------------------------------*/\n\nconst App = () => {\n  const contentTypeMatch = useRouteMatch(`/content-manager/:kind/:uid`);\n  const { status, collectionTypeLinks, singleTypeLinks, models, refetchData } =\n    useContentManagerInitData();\n  const authorisedModels = [...collectionTypeLinks, ...singleTypeLinks].sort((a, b) =>\n    a.title.localeCompare(b.title)\n  );\n  const { pathname } = useLocation();\n  const { formatMessage } = useIntl();\n  const { startSection } = useGuidedTour();\n  const startSectionRef = React.useRef(startSection);\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\n\n  React.useEffect(() => {\n    if (startSectionRef.current) {\n      startSectionRef.current('contentManager');\n    }\n  }, []);\n\n  if (status === 'loading') {\n    return (\n      <Main aria-busy=\"true\">\n        <Helmet\n          title={formatMessage({\n            id: getTranslation('plugin.name'),\n            defaultMessage: 'Content Manager',\n          })}\n        />\n        <HeaderLayout\n          title={formatMessage({\n            id: getTranslation('header.name'),\n            defaultMessage: 'Content',\n          })}\n        />\n        <LoadingIndicatorPage />\n      </Main>\n    );\n  }\n\n  // Array of models that are displayed in the content manager\n  const supportedModelsToDisplay = models.filter(({ isDisplayed }) => isDisplayed);\n\n  // Redirect the user to the 403 page\n  if (\n    authorisedModels.length === 0 &&\n    supportedModelsToDisplay.length > 0 &&\n    pathname !== '/content-manager/403'\n  ) {\n    return <Redirect to=\"/content-manager/403\" />;\n  }\n\n  // Redirect the user to the create content type page\n  if (supportedModelsToDisplay.length === 0 && pathname !== '/content-manager/no-content-types') {\n    return <Redirect to=\"/content-manager/no-content-types\" />;\n  }\n\n  if (!contentTypeMatch && authorisedModels.length > 0) {\n    return (\n      <Redirect\n        to={{\n          pathname: authorisedModels[0].to,\n          search: authorisedModels[0].search ?? '',\n        }}\n      />\n    );\n  }\n\n  return (\n    <>\n      <Helmet\n        title={formatMessage({\n          id: getTranslation('plugin.name'),\n          defaultMessage: 'Content Manager',\n        })}\n      />\n      <Layout sideNav={<LeftMenu />}>\n        <DragLayer renderItem={renderDraglayerItem} />\n        <ModelsContext.Provider value={{ refetchData }}>\n          <Switch>\n            <Route path=\"/content-manager/components/:uid/configurations/edit\">\n              <CheckPagePermissions\n                permissions={permissions.contentManager?.componentsConfigurations}\n              >\n                <ComponentSettingsView />\n              </CheckPagePermissions>\n            </Route>\n            <Route\n              path=\"/content-manager/collectionType/:slug\"\n              component={CollectionTypeRecursivePath}\n            />\n            <Route path=\"/content-manager/singleType/:slug\" component={SingleTypeRecursivePath} />\n\n            <Route path=\"/content-manager/403\">\n              <NoPermissions />\n            </Route>\n            <Route path=\"/content-manager/no-content-types\">\n              <NoContentType />\n            </Route>\n            <Route path=\"\" component={AnErrorOccurred} />\n          </Switch>\n        </ModelsContext.Provider>\n      </Layout>\n    </>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * renderDraglayerItem\n * -----------------------------------------------------------------------------------------------*/\n\nfunction renderDraglayerItem({ type, item }: Parameters<DragLayerProps['renderItem']>[0]) {\n  if (!type || (type && typeof type !== 'string')) {\n    return null;\n  }\n\n  /**\n   * Because a user may have multiple relations / dynamic zones / repeable fields in the same content type,\n   * we append the fieldName for the item type to make them unique, however, we then want to extract that\n   * first type to apply the correct preview.\n   */\n  const [actualType] = type.split('_');\n\n  switch (actualType) {\n    case ItemTypes.EDIT_FIELD:\n    case ItemTypes.FIELD:\n      return <CardDragPreview labelField={item.labelField} />;\n    case ItemTypes.COMPONENT:\n    case ItemTypes.DYNAMIC_ZONE:\n      return <ComponentDragPreview displayedValue={item.displayedValue} />;\n\n    case ItemTypes.RELATION:\n      return (\n        <RelationDragPreview\n          displayedValue={item.displayedValue}\n          status={item.status}\n          width={item.width}\n        />\n      );\n\n    default:\n      return null;\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * reducer\n * -----------------------------------------------------------------------------------------------*/\n\nconst GET_INIT_DATA = 'ContentManager/App/GET_INIT_DATA';\nconst RESET_INIT_DATA = 'ContentManager/App/RESET_INIT_DATA';\nconst SET_INIT_DATA = 'ContentManager/App/SET_INIT_DATA';\n\ninterface GetInitDataAction {\n  type: typeof GET_INIT_DATA;\n}\n\ninterface ResetInitDataAction {\n  type: typeof RESET_INIT_DATA;\n}\n\ninterface SetInitDataAction {\n  type: typeof SET_INIT_DATA;\n  data: {\n    authorizedCollectionTypeLinks: ContentManagerAppState['collectionTypeLinks'];\n    authorizedSingleTypeLinks: ContentManagerAppState['singleTypeLinks'];\n    components: ContentManagerAppState['components'];\n    contentTypeSchemas: ContentManagerAppState['models'];\n    fieldSizes: ContentManagerAppState['fieldSizes'];\n  };\n}\n\ntype Action = GetInitDataAction | ResetInitDataAction | SetInitDataAction;\n\ninterface ContentManagerAppState {\n  collectionTypeLinks: ContentManagerLink[];\n  components: Contracts.Init.GetInitData.Response['data']['components'];\n  fieldSizes: Contracts.Init.GetInitData.Response['data']['fieldSizes'];\n  models: Contracts.Init.GetInitData.Response['data']['contentTypes'];\n  singleTypeLinks: ContentManagerLink[];\n  status: 'loading' | 'resolved' | 'error';\n}\n\nconst initialState = {\n  collectionTypeLinks: [],\n  components: [],\n  fieldSizes: {},\n  models: [],\n  singleTypeLinks: [],\n  status: 'loading',\n} satisfies ContentManagerAppState;\n\nconst selectSchemas = createSelector(\n  (state: RootState) => state['content-manager_app'],\n  ({ components, models }) => {\n    return [...components, ...models];\n  }\n);\n\nconst reducer = (state: ContentManagerAppState = initialState, action: Action) =>\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case GET_INIT_DATA: {\n        draftState.status = 'loading';\n        break;\n      }\n      case RESET_INIT_DATA: {\n        return initialState;\n      }\n      case SET_INIT_DATA: {\n        draftState.collectionTypeLinks = action.data.authorizedCollectionTypeLinks.filter(\n          ({ isDisplayed }) => isDisplayed\n        );\n        draftState.singleTypeLinks = action.data.authorizedSingleTypeLinks.filter(\n          ({ isDisplayed }) => isDisplayed\n        );\n        draftState.components = action.data.components;\n        draftState.models = action.data.contentTypeSchemas;\n        draftState.fieldSizes = action.data.fieldSizes;\n        draftState.status = 'resolved';\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport { App, reducer, selectSchemas };\nexport type { ContentManagerAppState };\n","import produce from 'immer';\n\nimport { ACTION_SET_APP_RUNTIME_STATUS, ACTION_SET_ADMIN_PERMISSIONS } from './constants';\nimport { PermissionMap } from './types/permissions';\n\ninterface AppState {\n  status: 'init' | 'runtime';\n  permissions: Partial<PermissionMap>;\n}\n\nconst initialState = {\n  permissions: {},\n  status: 'init',\n} satisfies AppState;\n\ninterface SetAppRuntimeStatusAction {\n  type: typeof ACTION_SET_APP_RUNTIME_STATUS;\n}\n\ninterface SetAdminPermissionsAction {\n  type: typeof ACTION_SET_ADMIN_PERMISSIONS;\n  payload: Record<string, unknown>;\n}\n\ntype Action = SetAppRuntimeStatusAction | SetAdminPermissionsAction;\n\nconst reducer = (state: AppState = initialState, action: Action) =>\n  /* eslint-disable-next-line consistent-return */\n  produce(state, (draftState) => {\n    switch (action.type) {\n      case ACTION_SET_APP_RUNTIME_STATUS: {\n        draftState.status = 'runtime';\n        break;\n      }\n\n      case ACTION_SET_ADMIN_PERMISSIONS: {\n        draftState.permissions = action.payload;\n        break;\n      }\n\n      default:\n        return draftState;\n    }\n  });\n\nexport { reducer, initialState };\nexport type { AppState, Action, SetAppRuntimeStatusAction, SetAdminPermissionsAction };\n","import {\n  configureStore,\n  StoreEnhancer,\n  Middleware,\n  Reducer,\n  combineReducers,\n} from '@reduxjs/toolkit';\n\nimport { RBACReducer, RBACState } from '../../components/RBACProvider';\nimport { reducer as rbacManagerReducer } from '../../content-manager/hooks/useSyncRbac';\nimport { reducer as cmAppReducer } from '../../content-manager/pages/App';\nimport { reducer as editViewReducer } from '../../content-manager/pages/EditViewLayoutManager';\n// @ts-expect-error no types, yet.\nimport listViewReducer from '../../content-manager/pages/ListView/reducer';\nimport { reducer as crudReducer } from '../../content-manager/sharedReducers/crud/reducer';\nimport { reducer as appReducer, AppState } from '../../reducer';\n\n/**\n * @description Static reducers are ones we know, they live in the admin package.\n */\nconst staticReducers = {\n  admin_app: appReducer,\n  rbacProvider: RBACReducer,\n  'content-manager_app': cmAppReducer,\n  'content-manager_listView': listViewReducer,\n  'content-manager_rbacManager': rbacManagerReducer,\n  'content-manager_editViewLayoutManager': editViewReducer,\n  'content-manager_editViewCrudReducer': crudReducer,\n} as const;\n\nconst injectReducerStoreEnhancer: (appReducers: Record<string, Reducer>) => StoreEnhancer =\n  (appReducers) =>\n  (next) =>\n  (...args) => {\n    const store = next(...args);\n\n    const asyncReducers: Record<string, Reducer> = {};\n\n    return {\n      ...store,\n      asyncReducers,\n      injectReducer: (key: string, asyncReducer: Reducer) => {\n        asyncReducers[key] = asyncReducer;\n        store.replaceReducer(\n          // @ts-expect-error we dynamically add reducers which makes the types uncomfortable.\n          combineReducers({\n            ...appReducers,\n            ...asyncReducers,\n          })\n        );\n      },\n    };\n  };\n\n/**\n * @description This is the main store configuration function, injected Reducers use our legacy app.addReducer API,\n * which we're trying to phase out. App Middlewares could potentially be improved...?\n */\nconst configureStoreImpl = (\n  appMiddlewares: Array<() => Middleware> = [],\n  injectedReducers: Record<string, Reducer> = {}\n) => {\n  const coreReducers = { ...staticReducers, ...injectedReducers } as const;\n\n  const store = configureStore({\n    reducer: coreReducers,\n    devTools: process.env.NODE_ENV !== 'production',\n    middleware: (getDefaultMiddleware) => [\n      ...getDefaultMiddleware(),\n      ...appMiddlewares.map((m) => m()),\n    ],\n    enhancers: [injectReducerStoreEnhancer(coreReducers)],\n  });\n\n  return store;\n};\n\ntype Store = ReturnType<typeof configureStoreImpl> & {\n  asyncReducers: Record<string, Reducer>;\n  injectReducer: (key: string, asyncReducer: Reducer) => void;\n};\n\ntype RootState = ReturnType<Store['getState']>;\n\nexport { configureStoreImpl as configureStore };\nexport type { RootState, AppState, RBACState, Store };\n","export const getBasename = () => (process.env.ADMIN_PATH ?? '').replace(window.location.origin, '');\n","/* eslint-disable no-await-in-loop */\n/* eslint-disable no-restricted-syntax */\n\nimport type { Store } from '../store/configure';\n\nexport type Handler = (...args: any[]) => any;\n\nexport const createHook = () => {\n  const _handlers: Handler[] = [];\n\n  return {\n    register(fn: Handler) {\n      _handlers.push(fn);\n    },\n    delete(handler: Handler) {\n      _handlers.splice(_handlers.indexOf(handler), 1);\n    },\n    runWaterfall<T>(args: T, store?: Store) {\n      return _handlers.reduce((acc, fn) => fn(acc, store), args);\n    },\n    async runWaterfallAsync<T>(args: T, store?: Store) {\n      let result = args;\n\n      for (const fn of _handlers) {\n        result = await fn(result, store);\n      }\n\n      return result;\n    },\n    runSeries<T extends any[]>(...args: T) {\n      return _handlers.map((fn) => fn(...args));\n    },\n    async runSeriesAsync<T extends any[]>(...args: T) {\n      const result = [];\n\n      for (const fn of _handlers) {\n        result.push(await fn(...args));\n      }\n\n      return result;\n    },\n    runParallel<T extends any[]>(...args: T) {\n      return Promise.all(\n        _handlers.map((fn) => {\n          return fn(...args);\n        })\n      );\n    },\n  };\n};\n","export const languageNativeNames = {\n  ar: 'العربية',\n  ca: 'Català',\n  cs: 'Čeština',\n  de: 'Deutsch',\n  dk: 'Dansk',\n  en: 'English',\n  es: 'Español',\n  eu: 'Euskara',\n  fr: 'Français',\n  gu: 'Gujarati',\n  he: 'עברית',\n  hu: 'Magyar',\n  id: 'Indonesian',\n  it: 'Italiano',\n  ja: '日本語',\n  ko: '한국어',\n  ml: 'Malayalam',\n  ms: 'Melayu',\n  nl: 'Nederlands',\n  no: 'Norwegian',\n  pl: 'Polski',\n  'pt-BR': 'Português (Brasil)',\n  pt: 'Português (Portugal)',\n  ru: 'Русский',\n  sk: 'Slovenčina',\n  sv: 'Swedish',\n  th: 'ไทย',\n  tr: 'Türkçe',\n  uk: 'Українська',\n  vi: 'Tiếng Việt',\n  'zh-Hans': '中文 (简体)',\n  zh: '中文 (繁體)',\n  sa: 'संस्कृत',\n  hi: 'हिन्दी',\n} as const;\n","import { ReducersMapObject } from '@reduxjs/toolkit';\nimport { darkTheme, lightTheme } from '@strapi/design-system';\nimport { MenuItem, StrapiAppSetting, StrapiAppSettingLink } from '@strapi/helper-plugin';\nimport invariant from 'invariant';\nimport isFunction from 'lodash/isFunction';\nimport merge from 'lodash/merge';\nimport pick from 'lodash/pick';\nimport { Helmet } from 'react-helmet';\nimport { BrowserRouter } from 'react-router-dom';\nimport { DefaultTheme } from 'styled-components';\n\nimport { App } from './App';\nimport Logo from './assets/images/logo-strapi-2022.svg';\nimport { LANGUAGE_LOCAL_STORAGE_KEY } from './components/LanguageProvider';\nimport { Providers } from './components/Providers';\nimport { HOOKS } from './constants';\nimport { Components, Component } from './core/apis/Components';\nimport { CustomFields } from './core/apis/CustomFields';\nimport { Field, Fields } from './core/apis/Fields';\nimport { Middleware, Middlewares } from './core/apis/Middlewares';\nimport { Plugin, PluginConfig } from './core/apis/Plugin';\nimport { Reducers } from './core/apis/Reducers';\nimport { Store, configureStore } from './core/store/configure';\nimport { getBasename } from './core/utils/basename';\nimport { Handler, createHook } from './core/utils/createHook';\nimport {\n  INJECTION_ZONES,\n  InjectionZoneBlock,\n  InjectionZoneComponent,\n  InjectionZoneContainer,\n  InjectionZoneModule,\n  InjectionZones,\n} from './shared/components/InjectionZone';\nimport { languageNativeNames } from './translations/languageNativeNames';\n\nconst {\n  INJECT_COLUMN_IN_TABLE,\n  MUTATE_COLLECTION_TYPES_LINKS,\n  MUTATE_EDIT_VIEW_LAYOUT,\n  MUTATE_SINGLE_TYPES_LINKS,\n} = HOOKS;\n\ninterface StrapiAppConstructorArgs extends Partial<Pick<StrapiApp, 'appPlugins'>> {\n  adminConfig?: {\n    config?: StrapiApp['customConfigurations'];\n    bootstrap?: StrapiApp['customBootstrapConfiguration'];\n  };\n}\n\ninterface StrapiAppPlugin {\n  bootstrap: (\n    args: Pick<\n      StrapiApp,\n      | 'addSettingsLink'\n      | 'addSettingsLinks'\n      | 'getPlugin'\n      | 'injectContentManagerComponent'\n      | 'injectAdminComponent'\n      | 'registerHook'\n    >\n  ) => void;\n  register: (app: StrapiApp) => void;\n  registerTrads: (args: {\n    locales: string[];\n  }) => Promise<{ data: Record<string, string>; locale: string }[]>;\n}\n\nclass StrapiApp {\n  admin: {\n    injectionZones: InjectionZones;\n  };\n  appPlugins: Record<string, StrapiAppPlugin>;\n  configurations: {\n    authLogo: string;\n    head: { favicon: string };\n    locales: string[];\n    menuLogo: string;\n    notifications: { releases: boolean };\n    themes: { light: DefaultTheme; dark: DefaultTheme };\n    translations: Record<string, Record<string, string>>;\n    tutorials: boolean;\n  };\n  customBootstrapConfiguration: unknown;\n  customConfigurations: {\n    auth?: { logo: string };\n    head?: { favicon: string };\n    locales?: string[];\n    menu?: { logo: string };\n    notifications?: { releases: boolean };\n    theme?: { light: DefaultTheme; dark: DefaultTheme };\n    translations?: Record<string, unknown>;\n    tutorials?: boolean;\n  };\n  customFields: CustomFields;\n  hooksDict: Record<string, ReturnType<typeof createHook>>;\n  library: {\n    components: Components;\n    fields: Fields;\n  };\n  menu: MenuItem[];\n  middlewares: Middlewares;\n  plugins: Record<string, Plugin>;\n  reducers: Reducers;\n  settings: Record<string, StrapiAppSetting>;\n  translations: StrapiApp['configurations']['translations'];\n\n  constructor({ adminConfig, appPlugins }: StrapiAppConstructorArgs = {}) {\n    this.customConfigurations = adminConfig?.config ?? {};\n    this.customBootstrapConfiguration = adminConfig?.bootstrap;\n    this.configurations = {\n      authLogo: Logo,\n      head: { favicon: '' },\n      locales: ['en'],\n      menuLogo: Logo,\n      notifications: { releases: true },\n      themes: { light: lightTheme, dark: darkTheme },\n      translations: {},\n      tutorials: true,\n    };\n    this.appPlugins = appPlugins || {};\n    this.library = {\n      components: new Components(),\n      fields: new Fields(),\n    };\n    this.middlewares = new Middlewares();\n    this.plugins = {};\n    this.reducers = new Reducers();\n    this.translations = {};\n    this.hooksDict = {};\n    this.admin = {\n      injectionZones: INJECTION_ZONES,\n    };\n    this.customFields = new CustomFields();\n    this.menu = [];\n    this.settings = {\n      global: {\n        id: 'global',\n        intlLabel: {\n          id: 'Settings.global',\n          defaultMessage: 'Global Settings',\n        },\n        links: [],\n      },\n    };\n  }\n\n  addComponents = (components: Component | Component[]) => {\n    if (Array.isArray(components)) {\n      components.map((compo) => this.library.components.add(compo));\n    } else {\n      this.library.components.add(components);\n    }\n  };\n\n  addCorePluginMenuLink = (link: MenuItem) => {\n    const stringifiedLink = JSON.stringify(link);\n\n    invariant(link.to, `link.to should be defined for ${stringifiedLink}`);\n    invariant(\n      typeof link.to === 'string',\n      `Expected link.to to be a string instead received ${typeof link.to}`\n    );\n    invariant(\n      ['/plugins/content-type-builder', '/plugins/upload'].includes(link.to),\n      'This method is not available for your plugin'\n    );\n    invariant(\n      link.intlLabel?.id && link.intlLabel?.defaultMessage,\n      `link.intlLabel.id & link.intlLabel.defaultMessage for ${stringifiedLink}`\n    );\n\n    this.menu.push(link);\n  };\n\n  addFields = (fields: Field | Field[]) => {\n    if (Array.isArray(fields)) {\n      fields.map((field) => this.library.fields.add(field));\n    } else {\n      this.library.fields.add(fields);\n    }\n  };\n\n  addMenuLink = (link: MenuItem) => {\n    const stringifiedLink = JSON.stringify(link);\n\n    invariant(link.to, `link.to should be defined for ${stringifiedLink}`);\n    invariant(\n      typeof link.to === 'string',\n      `Expected link.to to be a string instead received ${typeof link.to}`\n    );\n    invariant(\n      link.intlLabel?.id && link.intlLabel?.defaultMessage,\n      `link.intlLabel.id & link.intlLabel.defaultMessage for ${stringifiedLink}`\n    );\n    invariant(\n      link.Component && typeof link.Component === 'function',\n      `link.Component should be a valid React Component`\n    );\n    invariant(\n      link.icon && typeof link.icon === 'function',\n      `link.Icon should be a valid React Component`\n    );\n\n    this.menu.push(link);\n  };\n\n  addMiddlewares = (middlewares: Middleware[]) => {\n    middlewares.forEach((middleware) => {\n      this.middlewares.add(middleware);\n    });\n  };\n\n  addReducers = (reducers: ReducersMapObject) => {\n    Object.keys(reducers).forEach((reducerName) => {\n      this.reducers.add(reducerName, reducers[reducerName]);\n    });\n  };\n\n  addSettingsLink = (sectionId: keyof StrapiApp['settings'], link: StrapiAppSettingLink) => {\n    invariant(this.settings[sectionId], 'The section does not exist');\n\n    const stringifiedLink = JSON.stringify(link);\n\n    invariant(link.id, `link.id should be defined for ${stringifiedLink}`);\n    invariant(\n      link.intlLabel?.id && link.intlLabel?.defaultMessage,\n      `link.intlLabel.id & link.intlLabel.defaultMessage for ${stringifiedLink}`\n    );\n    invariant(link.to, `link.to should be defined for ${stringifiedLink}`);\n    invariant(\n      link.Component && typeof link.Component === 'function',\n      `link.Component should be a valid React Component`\n    );\n\n    this.settings[sectionId].links.push(link);\n  };\n\n  addSettingsLinks = (sectionId: keyof StrapiApp['settings'], links: StrapiAppSettingLink[]) => {\n    invariant(this.settings[sectionId], 'The section does not exist');\n    invariant(Array.isArray(links), 'TypeError expected links to be an array');\n\n    links.forEach((link) => {\n      this.addSettingsLink(sectionId, link);\n    });\n  };\n\n  async bootstrap() {\n    Object.keys(this.appPlugins).forEach((plugin) => {\n      const bootstrap = this.appPlugins[plugin].bootstrap;\n\n      if (bootstrap) {\n        bootstrap({\n          addSettingsLink: this.addSettingsLink,\n          addSettingsLinks: this.addSettingsLinks,\n          getPlugin: this.getPlugin,\n          injectContentManagerComponent: this.injectContentManagerComponent,\n          injectAdminComponent: this.injectAdminComponent,\n          registerHook: this.registerHook,\n        });\n      }\n    });\n\n    if (isFunction(this.customBootstrapConfiguration)) {\n      this.customBootstrapConfiguration({\n        addComponents: this.addComponents,\n        addFields: this.addFields,\n        addMenuLink: this.addMenuLink,\n        addReducers: this.addReducers,\n        addSettingsLink: this.addSettingsLink,\n        addSettingsLinks: this.addSettingsLinks,\n        getPlugin: this.getPlugin,\n        injectContentManagerComponent: this.injectContentManagerComponent,\n        injectAdminComponent: this.injectAdminComponent,\n        registerHook: this.registerHook,\n      });\n    }\n  }\n\n  bootstrapAdmin = async () => {\n    await this.createCustomConfigurations();\n\n    this.createHook(INJECT_COLUMN_IN_TABLE);\n    this.createHook(MUTATE_COLLECTION_TYPES_LINKS);\n    this.createHook(MUTATE_SINGLE_TYPES_LINKS);\n    this.createHook(MUTATE_EDIT_VIEW_LAYOUT);\n\n    return Promise.resolve();\n  };\n\n  createCustomConfigurations = async () => {\n    if (this.customConfigurations?.locales) {\n      this.configurations.locales = [\n        'en',\n        ...(this.customConfigurations.locales?.filter((loc) => loc !== 'en') || []),\n      ];\n    }\n\n    if (this.customConfigurations?.auth?.logo) {\n      this.configurations.authLogo = this.customConfigurations.auth.logo;\n    }\n\n    if (this.customConfigurations?.menu?.logo) {\n      this.configurations.menuLogo = this.customConfigurations.menu.logo;\n    }\n\n    if (this.customConfigurations?.head?.favicon) {\n      this.configurations.head.favicon = this.customConfigurations.head.favicon;\n    }\n\n    if (this.customConfigurations?.theme) {\n      const darkTheme = this.customConfigurations.theme.dark;\n      const lightTheme = this.customConfigurations.theme.light;\n\n      if (!darkTheme && !lightTheme) {\n        console.warn(\n          `[deprecated] In future versions, Strapi will stop supporting this theme customization syntax. The theme configuration accepts a light and a dark key to customize each theme separately. See https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#theme-extension.`\n        );\n        merge(this.configurations.themes.light, this.customConfigurations.theme);\n      }\n\n      if (lightTheme) merge(this.configurations.themes.light, lightTheme);\n\n      if (darkTheme) merge(this.configurations.themes.dark, darkTheme);\n    }\n\n    if (this.customConfigurations?.notifications?.releases !== undefined) {\n      this.configurations.notifications.releases = this.customConfigurations.notifications.releases;\n    }\n\n    if (this.customConfigurations?.tutorials !== undefined) {\n      this.configurations.tutorials = this.customConfigurations.tutorials;\n    }\n  };\n\n  createHook = (name: string) => {\n    this.hooksDict[name] = createHook();\n  };\n\n  createSettingSection = (section: StrapiAppSetting, links: StrapiAppSettingLink[]) => {\n    invariant(section.id, 'section.id should be defined');\n    invariant(\n      section.intlLabel?.id && section.intlLabel?.defaultMessage,\n      'section.intlLabel should be defined'\n    );\n\n    invariant(Array.isArray(links), 'TypeError expected links to be an array');\n    invariant(this.settings[section.id] === undefined, 'A similar section already exists');\n\n    this.settings[section.id] = { ...section, links: [] };\n\n    links.forEach((link) => {\n      this.addSettingsLink(section.id, link);\n    });\n  };\n\n  createStore = () => {\n    const store = configureStore(this.middlewares.middlewares, this.reducers.reducers);\n\n    return store as Store;\n  };\n\n  getAdminInjectedComponents = (\n    moduleName: InjectionZoneModule,\n    containerName: InjectionZoneContainer,\n    blockName: InjectionZoneBlock\n  ): InjectionZoneComponent[] => {\n    try {\n      // @ts-expect-error – we have a catch block so if you don't pass it correctly we still return an array.\n      return this.admin.injectionZones[moduleName][containerName][blockName] || [];\n    } catch (err) {\n      console.error('Cannot get injected component', err);\n\n      return [];\n    }\n  };\n\n  getPlugin = (pluginId: PluginConfig['id']) => {\n    return this.plugins[pluginId];\n  };\n\n  async initialize() {\n    Object.keys(this.appPlugins).forEach((plugin) => {\n      this.appPlugins[plugin].register(this);\n    });\n  }\n\n  injectContentManagerComponent = <TContainerName extends keyof InjectionZones['contentManager']>(\n    containerName: TContainerName,\n    blockName: keyof InjectionZones['contentManager'][TContainerName],\n    component: InjectionZoneComponent\n  ) => {\n    invariant(\n      this.admin.injectionZones.contentManager[containerName]?.[blockName],\n      `The ${containerName} ${String(blockName)} zone is not defined in the content manager`\n    );\n    invariant(component, 'A Component must be provided');\n\n    // @ts-expect-error – we've alredy checked above that the block exists.\n    this.admin.injectionZones.contentManager[containerName][blockName].push(component);\n  };\n\n  injectAdminComponent = <TContainerName extends keyof InjectionZones['admin']>(\n    containerName: TContainerName,\n    blockName: keyof InjectionZones['admin'][TContainerName],\n    component: InjectionZoneComponent\n  ) => {\n    invariant(\n      this.admin.injectionZones.admin[containerName]?.[blockName],\n      `The ${containerName} ${String(blockName)} zone is not defined in the admin`\n    );\n    invariant(component, 'A Component must be provided');\n\n    // @ts-expect-error – we've alredy checked above that the block exists.\n    this.admin.injectionZones.admin[containerName][blockName].push(component);\n  };\n\n  /**\n   * Load the admin translations\n   * @returns {Object} The imported admin translations\n   */\n  async loadAdminTrads() {\n    const arrayOfPromises = this.configurations.locales.map((locale) => {\n      return import(`./translations/${locale}.json`)\n        .then(({ default: data }) => {\n          return { data, locale };\n        })\n        .catch(() => {\n          return { data: null, locale };\n        });\n    });\n    const adminLocales = await Promise.all(arrayOfPromises);\n\n    const translations = adminLocales.reduce<{ [locale: string]: Record<string, string> }>(\n      (acc, current) => {\n        if (current.data) {\n          acc[current.locale] = current.data;\n        }\n\n        return acc;\n      },\n      {}\n    );\n\n    return translations;\n  }\n\n  /**\n   * Load the application's translations and merged the custom translations\n   * with the default ones.\n   *\n   */\n  async loadTrads() {\n    const adminTranslations = await this.loadAdminTrads();\n\n    const arrayOfPromises = Object.keys(this.appPlugins)\n      .map((plugin) => {\n        const registerTrads = this.appPlugins[plugin].registerTrads;\n\n        if (registerTrads) {\n          return registerTrads({ locales: this.configurations.locales });\n        }\n\n        return null;\n      })\n      .filter((a) => a);\n\n    type Translation = Awaited<ReturnType<StrapiAppPlugin['registerTrads']>>[number];\n\n    const pluginsTrads = (await Promise.all(arrayOfPromises)) as Array<Translation[]>;\n    const mergedTrads = pluginsTrads.reduce<{ [locale: string]: Translation['data'] }>(\n      (acc, currentPluginTrads) => {\n        const pluginTrads = currentPluginTrads.reduce<{ [locale: string]: Translation['data'] }>(\n          (acc1, current) => {\n            acc1[current.locale] = current.data;\n\n            return acc1;\n          },\n          {}\n        );\n\n        Object.keys(pluginTrads).forEach((locale) => {\n          acc[locale] = { ...acc[locale], ...pluginTrads[locale] };\n        });\n\n        return acc;\n      },\n      {}\n    );\n\n    const translations = this.configurations.locales.reduce<{\n      [locale: string]: Translation['data'];\n    }>((acc, current) => {\n      acc[current] = {\n        ...adminTranslations[current],\n        ...(mergedTrads[current] || {}),\n        ...(this.customConfigurations?.translations?.[current] ?? {}),\n      };\n\n      return acc;\n    }, {});\n\n    this.configurations.translations = translations;\n\n    return Promise.resolve();\n  }\n\n  registerHook = (name: string, fn: Handler) => {\n    invariant(\n      this.hooksDict[name],\n      `The hook ${name} is not defined. You are trying to register a hook that does not exist in the application.`\n    );\n    this.hooksDict[name].register(fn);\n  };\n\n  registerPlugin = (pluginConf: PluginConfig) => {\n    const plugin = new Plugin(pluginConf);\n\n    this.plugins[plugin.pluginId] = plugin;\n  };\n\n  runHookSeries = (name: string, asynchronous = false) =>\n    asynchronous ? this.hooksDict[name].runSeriesAsync() : this.hooksDict[name].runSeries();\n\n  runHookWaterfall = <T,>(name: string, initialValue: T, asynchronous = false, store?: Store) => {\n    return asynchronous\n      ? this.hooksDict[name].runWaterfallAsync(initialValue, store)\n      : this.hooksDict[name].runWaterfall(initialValue, store);\n  };\n\n  runHookParallel = (name: string) => this.hooksDict[name].runParallel();\n\n  render() {\n    const store = this.createStore();\n    const localeNames = pick(languageNativeNames, this.configurations.locales || []);\n\n    const {\n      components: { components },\n      fields: { fields },\n    } = this.library;\n\n    return (\n      <Providers\n        components={components}\n        fields={fields}\n        customFields={this.customFields}\n        localeNames={localeNames}\n        getAdminInjectedComponents={this.getAdminInjectedComponents}\n        getPlugin={this.getPlugin}\n        messages={this.configurations.translations}\n        menu={this.menu}\n        plugins={this.plugins}\n        runHookParallel={this.runHookParallel}\n        runHookWaterfall={(name, initialValue, async = false) => {\n          return this.runHookWaterfall(name, initialValue, async, store);\n        }}\n        // @ts-expect-error – context issue. TODO: fix this.\n        runHookSeries={this.runHookSeries}\n        themes={this.configurations.themes}\n        settings={this.settings}\n        store={store}\n      >\n        <Helmet\n          htmlAttributes={{ lang: localStorage.getItem(LANGUAGE_LOCAL_STORAGE_KEY) || 'en' }}\n        />\n        <BrowserRouter basename={getBasename()}>\n          <App\n            authLogo={this.configurations.authLogo}\n            menuLogo={this.configurations.menuLogo}\n            showTutorials={this.configurations.tutorials}\n            showReleaseNotification={this.configurations.notifications.releases}\n          />\n        </BrowserRouter>\n      </Providers>\n    );\n  }\n}\n\nexport { StrapiApp, StrapiAppConstructorArgs };\n","/* eslint-disable no-undef */\nimport { getFetchClient } from '@strapi/helper-plugin';\nimport { createRoot } from 'react-dom/client';\n\nimport { StrapiApp, StrapiAppConstructorArgs } from './StrapiApp';\n\ninterface RenderAdminArgs {\n  customisations: StrapiAppConstructorArgs['adminConfig'];\n  plugins: StrapiAppConstructorArgs['appPlugins'];\n}\n\nconst renderAdmin = async (\n  mountNode: HTMLElement | null,\n  { plugins, customisations }: RenderAdminArgs\n) => {\n  if (!mountNode) {\n    throw new Error('[@strapi/admin]: Could not find the root element to mount the admin app');\n  }\n\n  // @ts-expect-error – there's pollution from the global scope of Node.\n  window.strapi = {\n    /**\n     * This ENV variable is passed from the strapi instance, by default no url is set\n     * in the config and therefore the instance returns you an empty string so URLs are relative.\n     *\n     * To ensure that the backendURL is always set, we use the window.location.origin as a fallback.\n     */\n    backendURL: process.env.STRAPI_ADMIN_BACKEND_URL || window.location.origin,\n    isEE: false,\n    telemetryDisabled: process.env.STRAPI_TELEMETRY_DISABLED === 'true' ? true : false,\n    features: {\n      SSO: 'sso',\n      AUDIT_LOGS: 'audit-logs',\n      REVIEW_WORKFLOWS: 'review-workflows',\n      /**\n       * If we don't get the license then we know it's not EE\n       * so no feature is enabled.\n       */\n      isEnabled: () => false,\n    },\n    projectType: 'Community',\n    flags: {\n      nps: false,\n      promoteEE: true,\n    },\n  };\n\n  const { get } = getFetchClient();\n\n  interface ProjectType extends Pick<Window['strapi'], 'flags'> {\n    isEE: boolean;\n    features: {\n      name: string;\n    }[];\n  }\n\n  try {\n    const {\n      data: {\n        data: { isEE, features, flags },\n      },\n    } = await get<{ data: ProjectType }>('/admin/project-type');\n\n    window.strapi.isEE = isEE;\n    window.strapi.flags = flags;\n    window.strapi.features = {\n      ...window.strapi.features,\n      isEnabled: (featureName) => features.some((feature) => feature.name === featureName),\n    };\n    window.strapi.projectType = isEE ? 'Enterprise' : 'Community';\n  } catch (err) {\n    /**\n     * If this fails, we simply don't activate any EE features.\n     * Should we warn clearer in the UI?\n     */\n    console.error(err);\n  }\n\n  const app = new StrapiApp({\n    adminConfig: customisations,\n    appPlugins: plugins,\n  });\n\n  await app.bootstrapAdmin();\n  await app.initialize();\n  await app.bootstrap();\n  await app.loadTrads();\n\n  createRoot(mountNode).render(app.render());\n\n  if (\n    typeof module !== 'undefined' &&\n    module &&\n    'hot' in module &&\n    typeof module.hot === 'object' &&\n    module.hot !== null &&\n    'accept' in module.hot &&\n    typeof module.hot.accept === 'function'\n  ) {\n    module.hot.accept();\n  }\n};\n\nexport { renderAdmin };\nexport type { RenderAdminArgs };\n"],"names":["jsx","jsxs","createContext","useTracking","useIntl","get","useFetchClient","useNotification","useAPIErrorHandler","useQuery","data","status","prefixFileUrlWithBackendUrl","useMutation","React","Component","useLocation","Route","auth","Redirect","useCallbackRef","reducer","initialState","locale","defaultsDeep","IntlProvider","styled","Wrapper","Box","Flex","SingleSelect","SingleSelectOption","FieldActionWrapper","FieldAction","yup","translatedErrors","useHistory","camelCase","Main","Typography","Formik","Form","TextInput","PasswordInput","Eye","EyeStriked","Checkbox","Button","Link","NavLink","Field","usePersistentState","useGuidedTour","useRouteMatch","useReactQuery","formik","omit","ValidationError","getYupInnerErrors","Grid","GridItem","Login","LoginCE","useFocusWhenNavigate","HeaderLayout","ContentLayout","EmptyStateLayout","LinkButton","ArrowRight","EmptyPictures","parse","pxToRem","Select","Option","TextButton","LoadingIndicatorPage","App","merge","useDispatch","useAppInfo","getData","hasAdmin","uuid","authLogo","menuLogo","SkipToContent","TrackingProvider","Switch","currentStep","GuidedTourProviderComponent","produce","set","DesignSystemProvider","createGlobalStyle","QueryClient","QueryClientProvider","Provider","StrapiAppProvider","LibraryProvider","CustomFieldsProvider","AutoReloadOverlayBlockerProvider","OverlayBlockerProvider","NotificationsProvider","invariant","options","useStore","useSelector","createSelector","permissions","RBACContext","SET_PERMISSIONS","action","useEffect","useDragLayer","FieldContainer","DragButton","Drag","TypographyMaxWidth","Pencil","Cross","CarretDown","IconButton","Trash","useDrop","item","useDrag","useRef","size","useFocusInputField","Combobox","Refresh","VisuallyHidden","List","ComboboxOption","Icon","Tooltip","Status","getEmptyImage","useState","useInfiniteQuery","shouldDisplayRelationLink","useCMEditViewDataManager","NotAllowedInput","pick","useFilter","useCollator","SubNav","SubNavHeader","SubNavSections","SubNavSection","search","SubNavLink","MUTATE_COLLECTION_TYPES_LINKS","MUTATE_SINGLE_TYPES_LINKS","state","useRBACProvider","useStrapiApp","useNotifyAT","hasPermissions","stringify","uid","cloneDeep","useContentTypeLayout","PropTypes","CheckPermissions","Cog","Icons","CustomIconButton","clientOffset","Menu","Plus","Number","Boolean","Date","Email","Enumeration","Media","Relation","Text","Json","Uid","DynamicZone","useCustomFields","ToggleInput","value","useMemo","useCallback","Fragment","HeaderContainer","ModalLayout","ModalHeader","upperFirst","ModalBody","ModalFooter","useReducer","ArrowLeft","isEqual","Check","Divider","ConfirmDialog","ModalForm","useQueryParams","to","GET_DATA","GET_DATA_SUCCEEDED","RESET_PROPS","getDataSucceeded","resetProps","queryClient","useQueryClient","formatContentTypeData","componentsDataStructure","contentTypeDataStructure","axios","source","init","AxiosError","PlusCircle","BaseButton","Accordion","AccordionToggle","AccordionContent","KeyboardNavigable","isNaN","Transforms","Editor","isText","Node","node","Code","HeadingOne","HeadingTwo","HeadingThree","HeadingFour","HeadingFive","HeadingSix","css","useFocused","useSelected","useLibrary","Picture","SlateElement","Range","BaseLink","ReactEditor","Path","Popover","FieldLabel","FieldInput","isListNode","NumberList","BulletList","Paragraph","Quote","Toolbar","modifiers","Editable","block","Bold","Italic","Underline","StrikeThrough","insertText","Point","Element","useSlate","withHistory","withReact","createEditor","Slate","InputWrapper","LabelAction","CheckCircle","ExclamationMarkCircle","Loader","keyframes","Markdown","getLanguage","highlight","highlightAuto","abbr","container","deflist","emoji","footnote","ins","mark","sub","sup","sanitizeHtml","CodeMirror","useLockScroll","Portal","FocusTrap","ExpandButton","Collapse","IconButtonGroup","Expand","More","Image","take","GenericInput","ActionsFlex","toString","Preview","DSAccordionContent","componentUid","name","allowedFields","icon","mainValue","MenuItem","componentSchema","errorsTrads","isEmpty","isBoolean","toNumber","findAllAndReplace","generateNKeysBetween","uniqBy","unset","browserState","serverState","acc","isArray","useOverlayBlocker","shouldCheckErrors","modifiedData","initialData","flushSync","getAPIInnerErrors","ContentManagerEditViewDataManagerContext","Prompt","findMatchingPermissions","isAxiosError","Dot","Dialog","DialogBody","DialogFooter","Root","Body","Information","Layer","useRBAC","MUTATE_EDIT_VIEW_LAYOUT","setLayout","fieldToEdit","Layout","users","FilterIcon","FilterPopoverURLQuery","FilterListURLQuery","useTableContext","BaseCheckbox","Duplicate","Table","BoldChunk","CrossCircle","Tr","Td","parseISO","Avatar","getFileExtension","AvatarGroup","isOpen","MenuTrigger","Badge","isNumber","MultipleMedias","RepeatableComponent","SingleComponent","INJECT_COLUMN_IN_TABLE","bindActionCreators","query","metadatas","ReactRouterLink","ActionLayout","SearchURLQuery","lightTheme","PageSizeURLQuery","PaginationURLQuery","NoPermissions","ListView","memo","difference","Permissions","rawContentTypeLayout","rawComponentsLayouts","ErrorBoundary","AnErrorOccurred","CheckPagePermissions","useParams","EmptyDocuments","NoPermissionsComponent","Helmet","appReducer","cmAppReducer","rbacManagerReducer","editViewReducer","crudReducer","combineReducers","configureStore","Logo","darkTheme","isFunction","BrowserRouter","getFetchClient","createRoot"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBf,MAAM,eAAe,MAAM;AAEvB,SAAAA,2BAAAA,IAAC,cACC,UAACA,2BAAA,IAAA,OAAA,EAAI,WAAU,gBACb,UAAAC,2BAAAA,KAAC,OAAI,EAAA,WAAU,iBACb,UAAA;AAAA,IAACD,2BAAA,IAAA,SAAA,EAAM,MAAK,YAAY,UAAO,QAAA;AAAA,IAC/BA,2BAAAA,IAAC,QAAG,UAAmB,sBAAA,CAAA;AAAA,oCACtB,KAAE,EAAA,UAAA;AAAA,MAAA;AAAA,MACOA,2BAAA,IAAA,KAAA,EAAE,MAAK,sCAAqC,UAAiB,qBAAA;AAAA,MAAI;AAAA,IAAA,GAE3E;AAAA,EAAA,GACF,GACF,EACF,CAAA;AAEJ;AClCA,MAAM,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAerB,MAAM,kBAAkB,MAAM;AAE1B,SAAAC,2BAAA,KAAC,QAAK,EAAA,MAAK,MACT,UAAA;AAAA,IAAAA,gCAAC,QACC,EAAA,UAAA;AAAA,MAACD,2BAAAA,IAAA,QAAA,EAAK,SAAQ,QAAQ,CAAA;AAAA,MACrBA,2BAAA,IAAA,QAAA,EAAK,MAAK,YAAW,SAAQ,2DAA0D;AAAA,MACvFA,2BAAA,IAAA,QAAA,EAAK,MAAK,UAAS,SAAQ,WAAU;AAAA,MACrCA,2BAAA,IAAA,QAAA,EAAK,MAAK,YAAW,SAAQ,eAAc;AAAA,MAE5CA,2BAAAA,IAAC,WAAM,UAAoB,uBAAA,CAAA;AAAA,MAC3BA,2BAAAA,IAAC,WAAO,UAAa,aAAA,CAAA;AAAA,IAAA,GACvB;AAAA,oCACC,QACC,EAAA,UAAA;AAAA,MAACA,2BAAAA,IAAA,OAAA,EAAI,IAAG,SAAS,CAAA;AAAA,qCAChB,cAAa,EAAA;AAAA,IAAA,GAChB;AAAA,EACF,EAAA,CAAA;AAEJ;;;;;;;;;;ACEA,MAAM,CAAC,8BAA8B,uBAAuB,IAC1DE,2BAAyC,sBAAsB;AAE3D,MAAA,mBAAmB,MAAM,wBAAwB,kBAAkB;ACZzE,MAAM,wBAAwB,CAAC;AAAA,EAC7B;AAAA,EACA,UAAU;AAAA,EACV,UAAU;AAAA,EACV,0BAA0B;AAAA,EAC1B,gBAAgB;AAClB,MAAkC;AAC1B,QAAA,EAAE,eAAeC,aAAAA;AACjB,QAAA,EAAE,kBAAkBC,UAAAA;AAC1B,QAAM,EAAE,KAAAC,MAAK,KAAK,IAAIC,aAAe,eAAA;AACrC,QAAM,qBAAqBC,aAAAA;AACrB,QAAA,EAAE,mBAAmBC,aAAAA;AAE3B,QAAM,EAAE,MAAM,SAAS,UAAc,IAAAC,WAAA;AAAA,IAOnC,CAAC,kBAAkB;AAAA,IACnB,YAAY;AACV,YAAM,EAAE,MAAAC,OAAM,WAAW,MAAML,KAAiC,2BAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMzF,gBAAgB,CAACM,YAAWA,UAAS;AAAA,MAAA,CACtC;AAMD,UAAI,WAAW,KAAK;AACZ,cAAA,IAAI,MAAM,iBAAiB;AAAA,MACnC;AAEOD,aAAAA;AAAAA,IACT;AAAA,IACA;AAAA,MACE,OAAO;AAAA,MACP,OAAOA,OAAM;AACJ,eAAA;AAAA,UACL,UAAUA,MAAK,WACX;AAAA,YACE,MAAMA,MAAK,SAAS;AAAA,YACpB,KAAKE,aAAA,4BAA4BF,MAAK,SAAS,GAAG;AAAA,UAEpD,IAAA;AAAA,UACJ,UAAUA,MAAK,WACX;AAAA,YACE,MAAMA,MAAK,SAAS;AAAA,YACpB,KAAKE,aAAA,4BAA4BF,MAAK,SAAS,GAAG;AAAA,UAEpD,IAAA;AAAA,QAAA;AAAA,MAER;AAAA,IACF;AAAA,EAAA;AAGI,QAAA,EAAE,WAAWG,WAAA;AAAA,IACjB,OAAO,SAAoC;AACnC,YAAA,WAAW,IAAI;AAOd,aAAA,QAAQ,IAAI,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AAC7C,YAAI,OAAO,SAAS;AACT,mBAAA,OAAO,KAAK,MAAM,OAAO;AAAA,QAAA,WACzB,UAAU,MAAM;AACzB,mBAAS,OAAO,KAAK,KAAK,UAAU,KAAK,CAAC;AAAA,QAC5C;AAAA,MAAA,CACD;AAED,YAAM,EAAE,MAAAH,MAAK,IAAI,MAAM;AAAA,QACrB;AAAA,QACA;AAAA,QACA;AAAA,UACE,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,QACF;AAAA,MAAA;AAOK,aAAA;AAAA,QACL,UAAU,CAAC,CAACA,MAAK,YAAY,CAAC,CAAC,KAAK,UAAU;AAAA,QAC9C,UAAU,CAAC,CAACA,MAAK,YAAY,CAAC,CAAC,KAAK,UAAU;AAAA,MAAA;AAAA,IAElD;AAAA,IACA;AAAA,MACE,QAAQ,OAA6D;AAChD,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,eAAe,KAAK;AAAA,QAAA,CAC9B;AAAA,MACH;AAAA,MACA,MAAM,UAAUA,OAAM;AACd,cAAA,EAAE,UAAU,SAAaA,IAAAA;AAE/B,YAAI,UAAU;AACZ,qBAAW,iBAAiB;AAAA,YAC1B,MAAM;AAAA,UAAA,CACP;AAAA,QACH;AAEA,YAAI,UAAU;AACZ,qBAAW,iBAAiB;AAAA,YAC1B,MAAM;AAAA,UAAA,CACP;AAAA,QACH;AAEmB,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,cAAc,EAAE,IAAI,OAAO,gBAAgB,SAAS;AAAA,QAAA,CAC9D;AAEO;MACV;AAAA,IACF;AAAA,EAAA;AAGF,QAAM,wBAAwBI,iBAAM,YAAY,QAAQ,CAAC,MAAM,CAAC;AAG9D,SAAAd,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,OAAO;AAAA,QACL,MAAM;AAAA,UACJ,QAAQ,YAAY,MAAM,WAAW,gBAAgB;AAAA,UACrD,SAAS,gBAAgB;AAAA,QAC3B;AAAA,QACA,MAAM;AAAA,UACJ,QAAQ,YAAY,MAAM,WAAW,gBAAgB;AAAA,UACrD,SAAS,gBAAgB;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,MAEC;AAAA,IAAA;AAAA,EAAA;AAGP;AC3KA,MAAM,eAAe,CAAuC;AAAA,EAC1D,WAAWe;AAAA,EACX;AAAA,EACA,GAAG;AACL,MAAqC;AACnC,QAAM,EAAE,UAAU,OAAO,IAAIC,eAAY,YAAA;AAGvC,SAAAhB,2BAAA;AAAA,IAACiB,eAAA;AAAA,IAAA;AAAA,MACC;AAAA,MACA,QAAQ,CAAC,UACPC,kBAAK,SAAS,MAAM,OAClBlB,+BAACe,YAAW,EAAA,GAAG,MAAO,GAAG,OAAO,IAEhCf,2BAAA;AAAA,QAACmB,eAAA;AAAA,QAAA;AAAA,UACC,IAAI;AAAA,YACF,UAAU;AAAA,YACV,QACE,aAAa,MACT,eAAe,mBAAmB,GAAG,QAAQ,GAAG,MAAM,EAAE,CAAC,KACzD;AAAA,UACR;AAAA,QAAA;AAAA,MACF;AAAA,IAAA;AAAA,EAAA;AAKV;ACrCO,MAAM,uBAAuB;AAAA,EAClC,gBAAgB;AAAA,IACd,MAAM,CAAC;AAAA,IACP,+BAA+B;AAAA,MAC7B;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,MACX;AAAA,IACF;AAAA,IACA,0BAA0B;AAAA,MACxB;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,MACX;AAAA,IACF;AAAA,IACA,2BAA2B;AAAA,MACzB;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AAAA,EACA,aAAa;AAAA,IACX,MAAM,CAAC,EAAE,QAAQ,2BAA2B,SAAS,MAAM;AAAA,IAC3D,MAAM,CAAC,EAAE,QAAQ,2BAA2B,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,UAAU;AAAA,IACR,MAAM,CAAC,EAAE,QAAQ,wBAAwB,SAAS,MAAM;AAAA,IACxD,OAAO;AAAA,MACL,MAAM;AAAA,QACJ,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,QAC/C,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,QAC/C,EAAE,QAAQ,qBAAqB,SAAS,KAAK;AAAA,QAC7C,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,MACjD;AAAA,MACA,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,MACzD,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,MACzD,MAAM,CAAC,EAAE,QAAQ,qBAAqB,SAAS,MAAM;AAAA,MACrD,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,IAC3D;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,QACJ,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,QAC/C,EAAE,QAAQ,qBAAqB,SAAS,KAAK;AAAA,QAC7C,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,QAC/C,EAAE,QAAQ,uBAAuB,SAAS,KAAK;AAAA,MACjD;AAAA,MACA,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,MACzD,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,MACzD,MAAM,CAAC,EAAE,QAAQ,qBAAqB,SAAS,MAAM;AAAA,MACrD,QAAQ,CAAC,EAAE,QAAQ,uBAAuB,SAAS,MAAM;AAAA,IAC3D;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,QACJ,EAAE,QAAQ,0BAA0B,SAAS,KAAK;AAAA,QAClD,EAAE,QAAQ,wBAAwB,SAAS,KAAK;AAAA,QAChD,EAAE,QAAQ,0BAA0B,SAAS,KAAK;AAAA,QAClD,EAAE,QAAQ,0BAA0B,SAAS,KAAK;AAAA,MACpD;AAAA,MACA,QAAQ,CAAC,EAAE,QAAQ,0BAA0B,SAAS,MAAM;AAAA,MAC5D,QAAQ,CAAC,EAAE,QAAQ,0BAA0B,SAAS,MAAM;AAAA,MAC5D,MAAM;AAAA,QACJ,EAAE,QAAQ,wBAAwB,SAAS,KAAK;AAAA;AAAA,QAEhD,EAAE,QAAQ,0BAA0B,SAAS,KAAK;AAAA,QAClD,EAAE,QAAQ,0BAA0B,SAAS,KAAK;AAAA,MACpD;AAAA,MACA,QAAQ,CAAC,EAAE,QAAQ,0BAA0B,SAAS,MAAM;AAAA,IAC9D;AAAA,IACA,cAAc;AAAA,MACZ,MAAM,CAAC,EAAE,QAAQ,4BAA4B,SAAS,MAAM;AAAA,MAC5D,QAAQ,CAAC,EAAE,QAAQ,4BAA4B,SAAS,MAAM;AAAA,MAC9D,QAAQ,CAAC,EAAE,QAAQ,4BAA4B,SAAS,MAAM;AAAA,MAC9D,MAAM,CAAC,EAAE,QAAQ,0BAA0B,SAAS,MAAM;AAAA,MAC1D,QAAQ,CAAC,EAAE,QAAQ,4BAA4B,SAAS,MAAM;AAAA,MAC9D,YAAY,CAAC,EAAE,QAAQ,gCAAgC,SAAS,MAAM;AAAA,IACxE;AAAA,IACA,mBAAmB;AAAA,MACjB,MAAM,CAAC,EAAE,QAAQ,iCAAiC,SAAS,MAAM;AAAA,MACjE,QAAQ,CAAC,EAAE,QAAQ,iCAAiC,SAAS,MAAM;AAAA,MACnE,QAAQ,CAAC,EAAE,QAAQ,iCAAiC,SAAS,MAAM;AAAA,MACnE,MAAM,CAAC,EAAE,QAAQ,+BAA+B,SAAS,MAAM;AAAA,MAC/D,QAAQ,CAAC,EAAE,QAAQ,iCAAiC,SAAS,MAAM;AAAA,MACnE,YAAY,CAAC,EAAE,QAAQ,qCAAqC,SAAS,MAAM;AAAA,IAC7E;AAAA,IACA,oBAAoB;AAAA,MAClB,MAAM,CAAC,EAAE,QAAQ,gCAAgC,SAAS,MAAM;AAAA,MAChE,QAAQ,CAAC,EAAE,QAAQ,kCAAkC,SAAS,MAAM;AAAA,IACtE;AAAA,EACF;AACF;AAEO,MAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMnB,wBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOxB,+BAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO/B,yBAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOzB,2BAA2B;AAC7B;AAEO,MAAM,gCAAgC;AACtC,MAAM,+BAA+B;AAYrC,MAAM,oBAAoB,OAAqB;AAAA,EACpD,QAAQ;AAAA,IACN;AAAA,MACE,WAAW,EAAE,IAAI,8BAA8B,gBAAgB,WAAW;AAAA,MAC1E,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA,IACA;AAAA,MACE,WAAW,EAAE,IAAI,2BAA2B,gBAAgB,WAAW;AAAA,MACvE,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA,IACA;AAAA,MACE,WAAW,EAAE,IAAI,4BAA4B,gBAAgB,aAAa;AAAA,MAC1E,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA,IACA;AAAA,MACE,WAAW,EAAE,IAAI,iCAAiC,gBAAgB,kBAAkB;AAAA,MACpF,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA;AAAA;AAAA,IAGA,GAAI,CAAC,OAAO,OAAO,SAAS,UAAU,OAAO,OAAO,SAAS,GAAG,KAChE,OAAO,QAAQ,OAAO,YAClB;AAAA,MACE;AAAA,QACE,WAAW,EAAE,IAAI,sBAAsB,gBAAgB,iBAAiB;AAAA,QACxE,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,UAAU;AAAA,MACZ;AAAA,IAAA,IAEF,CAAC;AAAA,IAEL,GAAI,CAAC,OAAO,OAAO,SAAS,UAAU,OAAO,OAAO,SAAS,gBAAgB,KAC7E,OAAO,QAAQ,OAAO,YAClB;AAAA,MACE;AAAA,QACE,WAAW;AAAA,UACT,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB;AAAA,QACA,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,UAAU;AAAA,MACZ;AAAA,IAAA,IAEF,CAAC;AAAA,EACP;AAAA,EAEA,OAAO;AAAA,IACL;AAAA,MACE,WAAW,EAAE,IAAI,gBAAgB,gBAAgB,QAAQ;AAAA,MACzD,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA,IACA;AAAA,MACE,WAAW,EAAE,IAAI,gBAAgB,gBAAgB,QAAQ;AAAA;AAAA,MAEzD,IAAI;AAAA,MACJ,IAAI;AAAA,IACN;AAAA,IACA,GAAI,CAAC,OAAO,OAAO,SAAS,UAAU,OAAO,OAAO,SAAS,UAAU,KACvE,OAAO,QAAQ,OAAO,YAClB;AAAA,MACE;AAAA,QACE,WAAW,EAAE,IAAI,oBAAoB,gBAAgB,aAAa;AAAA,QAClE,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,UAAU;AAAA,MACZ;AAAA,IAAA,IAEF,CAAC;AAAA,EACP;AACF;ACjNA,SAAS,eAAe;AACtB,SAAO,OAAO,OAAO;AACvB;AAaO,MAAM,gBAAgB,CAM3B,QACA,YACA,OAA8E,CAAA,MACL;AACnE,QAAA,EAAE,eAAe,MAAM,UAAU,CAAC,SAAS,WAAW,QAAQ,UAAU,KAAA,IAAS;AACjF,QAAA,gBAAgBC,4BAAe,UAAU;AACzC,QAAA,qBAAqBA,4BAAe,OAAO;AAIjD,QAAM,CAAC,EAAE,QAAQ,OAAO,IAAIN,iBAAM,SAE/B;AAAA,IACD,MAAM,aAAA,KAAkB,UAAU,eAAe;AAAA,EAAA,CAClD;AAEDA,mBAAM,UAAU,MAAM;AACpB,mBAAe,WAAW;AAClB,YAAA,SAAS,MAAM;AACf,YAAA,gBAAgB,mBAAmB,QAAQ,MAAM;AAEvD,cAAQ,EAAE,MAAM,gBAAgB,gBAAgB,OAAQ,CAAA;AAAA,IAC1D;AAEI,QAAA,kBAAkB,SAAS;AACpB;IACX;AAAA,KACC,CAAC,QAAQ,eAAe,oBAAoB,OAAO,CAAC;AAGhD,SAAA;AACT;ACjCA,MAAM,CAAC,wBAAwB,iBAAiB,IAC9CZ,2BAAmC,gBAAgB;AAE/C,MAAA,aAAa,MAAM,kBAAkB,YAAY;AAMvD,MAAM,6BAA6B;AAQnC,MAAM,mBAAmB,CAAC,EAAE,UAAU,aAAa,eAAsC;AACvF,QAAM,CAAC,EAAE,OAAA,GAAU,QAAQ,IAAIY,iBAAM;AAAA,IACnCO;AAAAA,IACAC;AAAAA,IACA,MAAM;AACJ,YAAM,4BAA4B,OAAO,aAAa,QAAQ,0BAA0B;AACpF,UAAA,6BAA6B,YAAY,yBAAyB,GAAG;AAChE,eAAA;AAAA,UACL,QAAQ;AAAA,UACR;AAAA,QAAA;AAAA,MACF,OACK;AACE,eAAA;AAAA,UACL,QAAQ;AAAA,UACR;AAAA,QAAA;AAAA,MAEJ;AAAA,IACF;AAAA,EAAA;AAGFR,mBAAM,UAAU,MAAM;AAEb,WAAA,aAAa,QAAQ,4BAA4B,MAAM;AACrD,aAAA,gBAAgB,aAAa,QAAQ,MAAM;AAAA,EAAA,GACnD,CAAC,MAAM,CAAC;AAEX,QAAM,eAAeA,iBAAM,YAAY,CAACS,YAAuC;AACpE,aAAA;AAAA,MACP,MAAM;AAAA,MACN,QAAAA;AAAAA,IAAA,CACD;AAAA,EACH,GAAG,CAAE,CAAA;AAEL,QAAM,cAAcC,sBAAAA,QAAa,SAAS,MAAM,GAAG,SAAS,EAAE;AAE9D,SACGxB,2BAAA,IAAAyB,UAAA,cAAA,EAAa,QAAgB,eAAc,MAAK,UAAU,aAAa,eAAc,QACpF,UAACzB,2BAAAA,IAAA,wBAAA,EAAuB,cAA4B,aACjD,UACH,EACF,CAAA;AAEJ;AAWA,MAAMsB,iBAAsB;AAAA,EAC1B,aAAa,EAAE,IAAI,UAAU;AAAA,EAC7B,QAAQ;AACV;AASA,MAAMD,YAAU,CAAC,QAAQC,gBAAc,WAAmB;AACxD,UAAQ,OAAO,MAAM;AAAA,IACnB,KAAK,iBAAiB;AACd,YAAA,EAAE,OAAW,IAAA;AAEnB,UAAI,CAAC,MAAM,YAAY,MAAM,GAAG;AACvB,eAAA;AAAA,MACT;AAEO,aAAA,EAAE,GAAG,OAAO;IACrB;AAAA,IACA,SAAS;AACA,aAAA;AAAA,IACT;AAAA,EACF;AACF;ACpHA,MAAM,MAAMI,gBAAO,QAAA;AAAA,YACP,KAAK,EAAE;AAAA;AAGnB,MAAM,OAAO,MAAM;AACX,QAAA;AAAA,IACJ,OAAO,EAAE,KAAK;AAAA,MACZ,iBAAiB;AAEd,SAAA1B,2BAAA,IAAC,KAAI,EAAA,KAAK,MAAM,QAAQ,OAAO,KAAK,SAAS,eAAW,MAAC,KAAI,GAAG,CAAA;AACzE;ACNA,MAAM2B,YAAUD,gBAAAA,QAAOE,aAAAA,GAAG;AAAA;AAAA;AAAA;AAKb,MAAA,SAASF,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAIjC,MAAM,eAAe,MAAM;AACzB,QAAM,EAAE,cAAc,YAAY,IAAI,WAAW;AACjD,QAAM,EAAE,eAAe,OAAO,IAAIzB,UAAQ,QAAA;AAGxC,SAAAJ,2BAAA;AAAA,IAAC8B,aAAA;AAAA,IAAA;AAAA,MACC,cAAY,cAAc;AAAA,QACxB,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD,OAAO;AAAA,MACP,UAAU,CAAC,aAAa;AACtB,qBAAa,QAAkB;AAAA,MACjC;AAAA,MAEC,iBAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,UAAU,IAAI,qCAC9CC,aAAAA,oBAAkC,EAAA,OAAO,UACvC,UAAA,KAAA,GADsB,QAEzB,CACD;AAAA,IAAA;AAAA,EAAA;AAGP;AAMO,MAAM,gBAAgB,CAAC,EAAE,SAAA,MAC9B/B,2BAAA;AAAA,EAAC2B;AAAAA,EAAA;AAAA,IACC,QAAO;AAAA,IACP,WAAS;AAAA,IACT,YAAY;AAAA,IACZ,eAAe;AAAA,IACf,aAAa;AAAA,IACb,cAAc;AAAA,IACd,YAAW;AAAA,IAEV;AAAA,EAAA;AACH;AAOK,MAAM,wBAAwB,CAAC,EAAE,eAA2C;AACjF,yCACG,OACC,EAAA,UAAA;AAAA,IAAA3B,+BAAC6B,aAAAA,MAAK,EAAA,IAAG,UAAS,gBAAe,YAC/B,UAAC7B,2BAAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GAAG,cAAc,GAChC,UAAC5B,2BAAA,IAAA,cAAA,CAAA,CAAa,EAChB,CAAA,GACF;AAAA,mCACC4B,aAAI,KAAA,EAAA,YAAY,GAAG,eAAe,IAChC,UACH;AAAA,EACF,EAAA,CAAA;AAEJ;ACzEA,MAAMI,uBAAqBN,gBAAAA,QAAOO,aAAAA,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,cAK/B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;ACuBpD,MAAM,eAAeC,eAAI,OAAO,EAAE,MAAM;AAAA,EACtC,OAAOA,eAAI,OAAA,EAAS,MAAMC,8BAAiB,KAAK,EAAE,SAASA,aAAA,iBAAiB,QAAQ;AAAA,EACpF,UAAUD,eAAI,OAAA,EAAS,SAASC,aAAAA,iBAAiB,QAAQ;AAAA,EACzD,YAAYD,eAAI,KAAK,EAAE,SAAS;AAClC,CAAC;AAED,MAAM,QAAQ,CAAC,EAAE,eAA2B;AAC1C,QAAM,CAAC,UAAU,WAAW,IAAIpB,iBAAM,SAAiB;AACvD,QAAM,CAAC,eAAe,gBAAgB,IAAIA,iBAAM,SAAS,KAAK;AACxD,QAAA,EAAE,kBAAkBV,UAAAA;AACpB,QAAA,EAAE,SAASE,aAAAA;AACX,QAAA,EAAE,iBAAiB;AACzB,QAAM,QAAQG,aAAAA;AACR,QAAA,EAAE,SAAS2B,eAAAA;AAEjB,QAAM,WAAWvB,WAAA;AAAA,IACf,OAAO,SAA0D;AACzD,YAAA;AAAA,QACJ,MAAM,EAAE,KAAK;AAAA,MACX,IAAA,MAAM,KAAqB,gBAAgB,IAAI;AAEnD,aAAO,EAAE,GAAG,MAAM,YAAY,KAAK,WAAW;AAAA,IAChD;AAAA,IACA;AAAA,MACE,UAAU,MAAM;AACd,YAAI,MAAM;AACF,gBAAA,EAAE,OAAO,KAAS,IAAA;AAExB,cAAI,KAAK,kBAAkB;AACzB,yBAAa,KAAK,gBAAgB;AAAA,UACpC;AAEKK,uBAAAA,KAAA,SAAS,OAAO,KAAK,UAAU;AAC/BA,uBAAAA,KAAA,YAAY,MAAM,KAAK,UAAU;AAEhC,gBAAA,aAAa,MAAM,IAAI,YAAY;AACzC,gBAAM,cAAc,aAAa,mBAAmB,UAAU,IAAI;AAElE,eAAK,WAAW;AAAA,QAClB;AAAA,MACF;AAAA,MACA,QAAQ,KAAsD;AAC5D,cAAM,UAAU,IAAI,UAAU,MAAM,OAAO,WAAW;AAEtD,YAAImB,mBAAU,QAAA,OAAO,EAAE,YAAA,MAAkB,iBAAiB;AACxD,eAAK,YAAY;AACjB;AAAA,QACF;AAEA,oBAAY,OAAO;AAAA,MACrB;AAAA,IACF;AAAA,EAAA;AAIA,SAAArC,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAACqC,aAAAA,MACC,EAAA,UAAA;AAAA,IAAArC,gCAAC,eACC,EAAA,UAAA;AAAA,MAAAA,gCAAC,QACC,EAAA,UAAA;AAAA,QAAAD,2BAAA,IAAC,MAAK,EAAA;AAAA,QACLA,2BAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GAAG,eAAe,GACjC,UAAC5B,2BAAA,IAAAuC,aAAA,YAAA,EAAW,SAAQ,SAAQ,IAAG,MAC5B,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,QACAvC,2BAAAA,IAAC4B,aAAAA,KAAI,EAAA,eAAe,GAClB,UAAA5B,2BAAA,IAACuC,2BAAW,SAAQ,WAAU,WAAU,cACrC,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,QACC,SAAS,WAAW,WACnBvC,2BAAAA,IAACuC,aAAAA,cAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,mBACH,CAAA,IACE;AAAA,MAAA,GACN;AAAA,MACAvC,2BAAA;AAAA,QAACwC,OAAA;AAAA,QAAA;AAAA,UACC,oBAAkB;AAAA,UAClB,eAAe;AAAA,YACb,OAAO;AAAA,YACP,UAAU;AAAA,YACV,YAAY;AAAA,UACd;AAAA,UACA,UAAU,CAAC,WAAW;AACpB,qBAAS,OAAO,MAAM;AAAA,UACxB;AAAA,UACA,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAEjB,UAAC,CAAA,EAAE,QAAQ,QAAQ,mBAClBxC,2BAAA,IAACyC,aACC,MAAA,EAAA,UAAAxC,2BAAA,KAAC4B,qBAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,YAAA7B,2BAAA;AAAA,cAAC0C,aAAA;AAAA,cAAA;AAAA,gBACC,OACE,OAAO,QACH,cAAc;AAAA,kBACZ,IAAI,OAAO;AAAA,kBACX,gBAAgB;AAAA,gBACjB,CAAA,IACD;AAAA,gBAEN,OAAO,OAAO;AAAA,gBACd,UAAU;AAAA,gBACV,OAAO,cAAc,EAAE,IAAI,yBAAyB,gBAAgB,SAAS;AAAA,gBAC7E,aAAa,cAAc;AAAA,kBACzB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAK;AAAA,gBACL,UAAQ;AAAA,cAAA;AAAA,YACV;AAAA,YACA1C,2BAAA;AAAA,cAAC2C;AAAAA,cAAA;AAAA,gBACC,OACE,OAAO,WACH,cAAc;AAAA,kBACZ,IAAI,OAAO;AAAA,kBACX,gBAAgB;AAAA,gBACjB,CAAA,IACD;AAAA,gBAEN,UAAU;AAAA,gBACV,OAAO,OAAO;AAAA,gBACd,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAK;AAAA,gBACL,MAAM,gBAAgB,SAAS;AAAA,gBAC/B,WACE3C,2BAAA;AAAA,kBAACgC;AAAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,gBAAgB;AACD,uCAAA,CAAC,SAAS,CAAC,IAAI;AAAA,oBAClC;AAAA,oBACA,OAAO;AAAA,sBACL,gBACI;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,oBAEC,UAAgB,gBAAAhC,2BAAAA,IAAC4C,MAAI,KAAA,CAAA,CAAA,mCAAMC,MAAW,YAAA,EAAA;AAAA,kBAAA;AAAA,gBACzC;AAAA,gBAEF,UAAQ;AAAA,cAAA;AAAA,YACV;AAAA,YACA7C,2BAAA;AAAA,cAAC8C,aAAA;AAAA,cAAA;AAAA,gBACC,eAAe,CAAC,YAAY;AACb,+BAAA,EAAE,QAAQ,EAAE,OAAO,SAAS,MAAM,gBAAgB;AAAA,gBACjE;AAAA,gBACA,OAAO,OAAO;AAAA,gBACd,cAAW;AAAA,gBACX,MAAK;AAAA,gBAEJ,UAAc,cAAA;AAAA,kBACb,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,cAAA;AAAA,YACH;AAAA,YACC9C,2BAAA,IAAA+C,aAAA,QAAA,EAAO,WAAS,MAAC,MAAK,UACpB,UAAc,cAAA,EAAE,IAAI,0BAA0B,gBAAgB,QAAA,CAAS,EAC1E,CAAA;AAAA,UAAA,EAAA,CACF,EACF,CAAA;AAAA,QAAA;AAAA,MAEJ;AAAA,MACC;AAAA,IAAA,GACH;AAAA,IACC/C,+BAAA6B,aAAAA,MAAA,EAAK,gBAAe,UACnB,yCAACD,kBAAI,EAAA,YAAY,GAEf,UAAA5B,2BAAA,IAACgD,GAAK,MAAA,EAAA,IAAIC,eAAS,SAAA,IAAG,yBACnB,UAAc,cAAA;AAAA,MACb,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAAA,CACjB,EACH,CAAA,EACF,CAAA,GACF;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AAEA,MAAMN,kBAAgBjB,gBAAAA,QAAOgB,aAAAA,SAAS;AAAA;AAAA;AAAA;AAAA;ACjNtC,MAAM,iBAAiB,MAAM;AACrB,QAAA,EAAE,SAASN,eAAAA;AACX,QAAA,EAAE,SAAS9B,aAAAA;AACX,QAAA,EAAE,kBAAkBF,UAAAA;AAEpB,QAAA,EAAE,QAAQ,QAAA,IAAYS,WAAA;AAAA,IAC1B,OAAO,SAAyC;AACxC,YAAA,KAAK,0BAA0B,IAAI;AAAA,IAC3C;AAAA,IACA;AAAA,MACE,YAAY;AACV,aAAK,+BAA+B;AAAA,MACtC;AAAA,IACF;AAAA,EAAA;AAIA,SAAAb,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAACqC,aAAAA,MACC,EAAA,UAAA;AAAA,IAAArC,gCAAC,eACC,EAAA,UAAA;AAAA,MAAAA,gCAAC,QACC,EAAA,UAAA;AAAA,QAAAD,2BAAA,IAAC,MAAK,EAAA;AAAA,QACLA,2BAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GAAG,eAAe,GACjC,UAAC5B,2BAAA,IAAAuC,aAAA,YAAA,EAAW,IAAG,MAAK,SAAQ,SACzB,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,QACC,UACEvC,2BAAAA,IAAAuC,aAAAA,YAAA,EAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,IACE;AAAA,MAAA,GACN;AAAA,MACAvC,2BAAA;AAAA,QAACwC,OAAA;AAAA,QAAA;AAAA,UACC,oBAAkB;AAAA,UAClB,eAAe;AAAA,YACb,OAAO;AAAA,UACT;AAAA,UACA,UAAU,CAAC,WAAW;AACpB,mBAAO,MAAM;AAAA,UACf;AAAA,UACA,kBAAkBN,eAAI,OAAO,EAAE,MAAM;AAAA,YACnC,OAAOA,eAAI,OAAA,EAAS,MAAMC,8BAAiB,KAAK,EAAE,SAASA,aAAA,iBAAiB,QAAQ;AAAA,UAAA,CACrF;AAAA,UACD,kBAAkB;AAAA,UAEjB,UAAC,CAAA,EAAE,QAAQ,QAAQ,mBAClBnC,2BAAA,IAACyC,aACC,MAAA,EAAA,UAAAxC,2BAAA,KAAC4B,qBAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,YAAA7B,2BAAA;AAAA,cAAC0C,aAAA;AAAA,cAAA;AAAA,gBACC,OACE,OAAO,QACH,cAAc;AAAA,kBACZ,IAAI,OAAO;AAAA,kBACX,gBAAgB;AAAA,gBACjB,CAAA,IACD;AAAA,gBAEN,OAAO,OAAO;AAAA,gBACd,UAAU;AAAA,gBACV,OAAO,cAAc,EAAE,IAAI,yBAAyB,gBAAgB,SAAS;AAAA,gBAC7E,aAAa,cAAc;AAAA,kBACzB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAK;AAAA,gBACL,UAAQ;AAAA,cAAA;AAAA,YACV;AAAA,2CACCK,aAAAA,QAAO,EAAA,MAAK,UAAS,WAAS,MAC5B,UAAc,cAAA;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YACjB,CAAA,GACH;AAAA,UAAA,EAAA,CACF,EACF,CAAA;AAAA,QAAA;AAAA,MAEJ;AAAA,IAAA,GACF;AAAA,IACA/C,2BAAAA,IAAC6B,aAAAA,QAAK,gBAAe,UACnB,yCAACD,aAAI,KAAA,EAAA,YAAY,GAEf,UAAA5B,2BAAAA,IAACgD,GAAAA,MAAK,EAAA,IAAIC,eAAAA,SAAS,IAAG,eACnB,UAAc,cAAA,EAAE,IAAI,mBAAmB,gBAAgB,oBAAoB,CAAC,EAC/E,CAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;ACrGA,MAAM,wBAAwB,MAAM;AAC5B,QAAA,EAAE,kBAAkB7C,UAAAA;AAGxB,SAAAJ,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAACqC,aAAAA,MACC,EAAA,UAAA;AAAA,IAACtC,2BAAA,IAAA,eAAA,EACC,0CAAC,QACC,EAAA,UAAA;AAAA,MAAAA,2BAAA,IAAC,MAAK,EAAA;AAAA,MACLA,2BAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GAAG,eAAe,GACjC,UAAC5B,2BAAA,IAAAuC,aAAA,YAAA,EAAW,IAAG,MAAK,SAAQ,SACzB,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAAA,CACjB,GACH,EACF,CAAA;AAAA,MACAvC,2BAAAA,IAACuC,2BACE,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MACjB,CAAA,GACH;AAAA,qCACCX,aAAAA,KAAI,EAAA,YAAY,GACf,UAAA5B,2BAAAA,IAACuC,2BACE,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBACE;AAAA,MAAA,CACH,GACH,EACF,CAAA;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,IACAvC,2BAAAA,IAAC6B,aAAAA,QAAK,gBAAe,UACnB,yCAACD,aAAI,KAAA,EAAA,YAAY,GAEf,UAAA5B,2BAAAA,IAACgD,GAAAA,MAAK,EAAA,IAAIC,eAAAA,SAAS,IAAG,eACnB,UAAc,cAAA,EAAE,IAAI,oBAAoB,gBAAgB,UAAU,CAAC,EACtE,CAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AC5CA,MAAM,OAAO,MAAM;AACX,QAAA,EAAE,kBAAkB7C,UAAAA;AAC1B,QAAM,QAAQK,aAAAA;AAEd,QAAM,UACJ,MAAM,IAAI,MAAM,KAChB,cAAc;AAAA,IACZ,IAAI;AAAA,IACJ,gBAAgB;AAAA,EAAA,CACjB;AAGD,SAAAT,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAACqC,aAAAA,MACC,EAAA,UAAA;AAAA,IAACtC,2BAAA,IAAA,eAAA,EACC,0CAAC,QACC,EAAA,UAAA;AAAA,MAAAA,2BAAA,IAAC,MAAK,EAAA;AAAA,MACNA,2BAAAA,IAAC4B,oBAAI,YAAY,GAAG,eAAe,GACjC,UAAA5B,2BAAAA,IAACuC,2BAAW,IAAG,MAAK,SAAQ,SACzB,UAAA,cAAc,EAAE,IAAI,8BAA8B,gBAAgB,WAAW,GAChF,EACF,CAAA;AAAA,MACAvC,2BAAAA,IAACuC,2BAAY,UAAQ,QAAA,CAAA;AAAA,qCACpBX,aAAAA,KAAI,EAAA,YAAY,GACf,UAAA5B,2BAAAA,IAACuC,2BACE,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAAA,CACjB,GACH,EACF,CAAA;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,IACAvC,2BAAAA,IAAC6B,aAAAA,QAAK,gBAAe,UACnB,yCAACD,aAAI,KAAA,EAAA,YAAY,GAEf,UAAA5B,2BAAAA,IAACgD,GAAAA,MAAK,EAAA,IAAIC,eAAAA,SAAS,IAAG,eACnB,UAAc,cAAA,EAAE,IAAI,oBAAoB,gBAAgB,UAAU,CAAC,EACtE,CAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AClCqBvB,wBAAOwB,aAAK,KAAA;AAAA,YACrB,KAAK,EAAE;AAAA,WACR,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAeH,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAOrB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,aAK/C,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,wBAC3B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,QAAQ;AAAA,oBACxC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAWtC,CAAC,GAAG,MAAM,EAAE,EAAE,MAAM;AA4UxC,SAAS,uBAAuB;AACxB,QAAA,CAAC,mBAAmB,oBAAoB,IAAIC,aAAA;AAAA,IAChD;AAAA,IACA;AAAA,MACE,SAAS;AAAA,MACT,kBAAkB;AAAA,MAClB,oBAAoB;AAAA,MACpB,mBAAmB;AAAA,IACrB;AAAA,EAAA;AAMK,SAAA,EAAE,mBAAmB;AAC9B;AC1WA,MAAM,uBAAuBjB,eAAI,OAAO,EAAE,MAAM;AAAA,EAC9C,WAAWA,eAAI,OAAO,EAAE,OAAO,SAASC,8BAAiB,QAAQ;AAAA,EACjE,UAAUD,eAAI,OAAO,EAAE,SAAS;AAAA,EAChC,UAAUA,eACP,OAAO,EACP,IAAI,GAAGC,aAAAA,iBAAiB,SAAS,EACjC,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,MAAM,uCAAuC,EACrD,SAASA,aAAA,iBAAiB,QAAQ;AAAA,EACrC,iBAAiBD,eACd,OAAA,EACA,MAAM,CAACA,eAAI,IAAI,UAAU,GAAG,IAAI,GAAG,yCAAyC,EAC5E,SAASC,aAAAA,iBAAiB,QAAQ;AAAA,EACrC,mBAAmBD,eAAI,OAAA,EAAS,SAASC,aAAAA,iBAAiB,QAAQ;AACpE,CAAC;AAED,MAAM,wBAAwBD,eAAI,OAAO,EAAE,MAAM;AAAA,EAC/C,WAAWA,eAAI,OAAO,EAAE,OAAO,SAASC,8BAAiB,QAAQ;AAAA,EACjE,UAAUD,eAAI,OAAO,EAAE,SAAS;AAAA,EAChC,UAAUA,eACP,OAAO,EACP,IAAI,GAAGC,aAAAA,iBAAiB,SAAS,EACjC,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,MAAM,uCAAuC,EACrD,SAASA,aAAA,iBAAiB,QAAQ;AAAA,EACrC,OAAOD,eACJ,OAAA,EACA,MAAMC,aAAAA,iBAAiB,KAAK,EAC5B,OAAO,EACP,UAAUA,aAAAA,iBAAiB,SAAS,EACpC,SAASA,8BAAiB,QAAQ;AAAA,EACrC,iBAAiBD,eACd,OAAA,EACA,MAAM,CAACA,eAAI,IAAI,UAAU,GAAG,IAAI,GAAG,yCAAyC,EAC5E,SAASC,aAAAA,iBAAiB,QAAQ;AACvC,CAAC;AAMD,MAAM,WAAW,CAAC,EAAE,eAA8B;AAChD,QAAM,qBAAqB5B,aAAAA;AACrB,QAAA,EAAE,SAAS6B,eAAAA;AACjB,QAAM,CAAC,eAAe,gBAAgB,IAAItB,iBAAM,SAAS,KAAK;AAC9D,QAAM,CAAC,sBAAsB,uBAAuB,IAAIA,iBAAM,SAAS,KAAK;AAC5E,QAAM,CAAC,aAAa,cAAc,IAAIA,iBAAM,SAAS,CAAC;AACtD,QAAM,CAAC,UAAU,WAAW,IAAIA,iBAAM,SAAiB;AACjD,QAAA,EAAE,eAAeX,aAAAA;AACjB,QAAA,EAAE,kBAAkBC,UAAAA;AACpB,QAAA,EAAE,eAAegD,aAAAA;AACvB,QAAM,QAAQ3C,aAAAA;AACd,QAAM,QAAQ4C,eAAA;AAAA,IACZ;AAAA,EAAA;AAEI,QAAA,EAAE,mBAAmB7C,aAAAA;AAC3B,QAAM,EAAE,KAAAH,MAAK,KAAK,IAAIC,aAAe,eAAA;AAC/B,QAAA,EAAE,yBAAyB;AAE3B,QAAA,oBAAoB,MAAM,IAAI,mBAAmB;AAEvD,QAAM,EAAE,MAAM,SAAS,IAAIgD,oBAAc;AAAA,IACvC,UAAU,CAAC,SAAS,qBAAqB,iBAAiB;AAAA,IAC1D,MAAM,UAAU;AACR,YAAA;AAAA,QACJ,MAAM,EAAE,KAAK;AAAA,MAAA,IACX,MAAMjD,KAA+B,4BAA4B;AAAA,QACnE,QAAQ;AAAA,UACN;AAAA,QACF;AAAA,MAAA,CACD;AAEM,aAAA;AAAA,IACT;AAAA,IACA,SAAS,CAAC,CAAC;AAAA,IACX,aAAa,CAAC;AAAA,IACd,QAAQ,KAAqF;AACrF,YAAA,UAAU,eAAe,GAAG;AAEf,yBAAA;AAAA,QACjB,MAAM;AAAA,QACN;AAAA,MAAA,CACD;AAED,WAAK,mBAAmB,mBAAmB,OAAO,CAAC,EAAE;AAAA,IACvD;AAAA,EAAA,CACD;AAED,QAAM,wBAAwBQ,WAAA;AAAA,IAC5B,OAAO,SAA4D;AACjE,YAAM,EAAE,MAAM,GAAG,SAAA,IAAa;AAC9B,YAAM,EAAE,KAAK,IAAI,MAAM,KAA6B,yBAAyB,QAAQ;AAErF,aAAO,EAAE,GAAG,KAAK,MAAM,KAAK;AAAA,IAC9B;AAAA,IACA;AAAA,MACE,UAAU,MAAM;AACd,cAAM,EAAE,OAAO,MAAM,KAAA,IAAS;AAEzBK,qBAAAA,KAAA,SAAS,OAAO,KAAK;AACrBA,qBAAAA,KAAA,YAAY,MAAM,KAAK;AAEtB,cAAA,EAAE,MAAU,IAAA;AAElB,YAAI,OAAO;AACH,gBAAA,mBAAmB,MAAM,KAAK,CAAC,EAAE,WAAW,SAAS,oBAAoB;AAE/E,cAAI,kBAAkB;AACfA,yBAAAA,KAAA,IAAI,OAAO,uBAAuB,IAAI;AAC3C,uBAAW,KAAK;AAChB,uBAAW,qBAAqB;AAAA,UAClC;AAAA,QACF;AAEA,YAAI,MAAM;AAER,+BAAqB,CAAC,OAAO,EAAE,GAAG,GAAG,SAAS,KAAO,EAAA;AAEhD,eAAA;AAAA,YACH,UAAU;AAAA,YACV,QAAQ,aAAa,IAAI;AAAA,UAAA,CAC1B;AAAA,QAAA,OACI;AACL,eAAK,GAAG;AAAA,QACV;AAAA,MACF;AAAA,MACA,QAAQ,KAAkF;AACxF,mBAAW,wBAAwB;AAE7B,cAAA,QAAQ,eAAe,GAAG;AAChC,oBAAY,KAAK;AAAA,MACnB;AAAA,IACF;AAAA,EAAA;AAGF,QAAM,uBAAuBL,WAAA;AAAA,IAC3B,OAAO,SAAuD;AAC5D,YAAM,EAAE,MAAM,GAAG,SAAA,IAAa;AAC9B,YAAM,EAAE,KAAK,IAAI,MAAM,KAAwB,mBAAmB,QAAQ;AAE1E,aAAO,EAAE,GAAG,KAAK,MAAM,KAAK;AAAA,IAC9B;AAAA,IACA;AAAA,MACE,UAAU,MAAM;AACd,cAAM,EAAE,OAAO,MAAM,KAAA,IAAS;AAEzBK,qBAAAA,KAAA,SAAS,OAAO,KAAK;AACrBA,qBAAAA,KAAA,YAAY,MAAM,KAAK;AAE5B,YAAI,MAAM;AAER,+BAAqB,CAAC,OAAO,EAAE,GAAG,GAAG,SAAS,KAAO,EAAA;AAEhD,eAAA;AAAA,YACH,UAAU;AAAA,YACV,QAAQ,aAAa,QAAQ;AAAA,UAAA,CAC9B;AAAA,QAAA,OACI;AACL,eAAK,GAAG;AAAA,QACV;AAAA,MACF;AAAA,MACA,QAAQ,KAAkF;AACxF,mBAAW,wBAAwB;AAE7B,cAAA,QAAQ,eAAe,GAAG;AAChC,oBAAY,KAAK;AAAA,MACnB;AAAA,IACF;AAAA,EAAA;AAIA,MAAA,CAAC,SACA,MAAM,OAAO,aAAa,cAAc,MAAM,OAAO,aAAa,kBACnE;AACO,WAAAlB,2BAAA,IAACmB,eAAS,UAAA,EAAA,IAAG,IAAI,CAAA;AAAA,EAC1B;AAEM,QAAA,sBAAsB,MAAM,OAAO,aAAa;AAEhD,QAAA,SAAS,sBAAsB,wBAAwB;AAG3D,SAAAnB,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAAC,eACC,EAAA,UAAA;AAAA,IAAAA,gCAAC4B,aAAAA,QAAK,WAAU,UAAS,YAAW,UAAS,KAAK,GAChD,UAAA;AAAA,MAAA7B,2BAAA,IAAC,MAAK,EAAA;AAAA,MAENA,2BAAAA,IAACuC,2BAAW,IAAG,MAAK,SAAQ,SAAQ,WAAU,UAC3C,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBAAgB;AAAA,MACjB,CAAA,GACH;AAAA,MACAvC,2BAAAA,IAACuC,2BAAW,SAAQ,WAAU,WAAU,cAAa,WAAU,UAC5D,UAAc,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,gBACE;AAAA,MACH,CAAA,GACH;AAAA,MACC,WACCvC,2BAAA,IAACuC,aAAW,YAAA,EAAA,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,UAAA,SACH,CAAA,IACE;AAAA,IAAA,GACN;AAAA,IACAvC,2BAAA;AAAA,MAACwC,OAAA;AAAA,MAAA;AAAA,QACC,oBAAkB;AAAA,QAClB,eAAe;AAAA,UACb,WAAW,UAAU,aAAa;AAAA,UAClC,UAAU,UAAU,YAAY;AAAA,UAChC,OAAO,UAAU,SAAS;AAAA,UAC1B,UAAU;AAAA,UACV,iBAAiB;AAAA,UACjB,mBAAmB,qBAAqB;AAAA,UACxC,MAAM;AAAA,QACR;AAAA,QACA,UAAU,OAAO,MAAMe,YAAW;AAC1B,gBAAA,iBAAiB,cAAc,IAAI;AAErC,cAAA;AACF,kBAAM,OAAO,SAAS,gBAAgB,EAAE,YAAY,OAAO;AAEvD,gBAAA,cAAc,KAAK,qBAAqB;AAC1C,yBAAW,iCAAiC,EAAE,OAAO,YAAY,YAAY;AAAA,YAC/E;AAEA,gBAAI,eAAe,mBAAmB;AACpC,mCAAqB,OAAO;AAAA,gBAC1B,UAAUC,sBAAK,gBAAgB;AAAA,kBAC7B;AAAA,kBACA;AAAA,kBACA;AAAA,kBACA;AAAA,gBAAA,CACD;AAAA,gBACD,mBAAmB,eAAe;AAAA,gBAClC,MAAM,eAAe;AAAA,cAAA,CACtB;AAAA,YAAA,OACI;AACiB,oCAAA;AAAA,gBACpBA,cAAAA,QAAK,gBAAgB,CAAC,qBAAqB,iBAAiB,CAAC;AAAA,cAAA;AAAA,YAEjE;AAAA,mBACO,KAAK;AACZ,gBAAI,eAAeC,IAAAA,iBAAiB;AAC5B,oBAAA,SAASC,+BAAkB,GAAG;AAEpC,cAAAH,QAAO,UAAU,MAAM;AAAA,YACzB;AACA,2BAAe,cAAc,CAAC;AAAA,UAChC;AAAA,QACF;AAAA,QACA,kBAAkB;AAAA,QAEjB,UAAC,CAAA,EAAE,QAAQ,QAAQ,mBAAmB;AACrC,iBACGvD,2BAAA,IAAAyC,aAAA,MAAA,EACC,UAACzC,2BAAA,IAAAsC,mBAAA,EACC,UAACrC,gCAAA4B,aAAAA,MAAA,EAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GAAG,WAAW,GAC/D,UAAA;AAAA,YAAC5B,2BAAAA,KAAA0D,aAAAA,MAAA,EAAK,KAAK,GACT,UAAA;AAAA,cAAC3D,2BAAAA,IAAA4D,aAAAA,UAAA,EAAS,KAAK,GACb,UAAA5D,2BAAA;AAAA,gBAAC0C,aAAA;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,UAAQ;AAAA,kBACR,OAAO,OAAO;AAAA,kBACd,OACE,OAAO,YACH,cAAc,OAAO,SAA8B,IACnD;AAAA,kBAEN,UAAU;AAAA,kBACV,OAAO,cAAc;AAAA,oBACnB,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAAA,CACjB;AAAA,gBAAA;AAAA,cAAA,GAEL;AAAA,cACA1C,2BAAAA,IAAC4D,aAAAA,UAAS,EAAA,KAAK,GACb,UAAA5D,2BAAA;AAAA,gBAAC0C,aAAA;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,OAAO,OAAO;AAAA,kBACd,UAAU;AAAA,kBACV,OAAO,cAAc;AAAA,oBACnB,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAAA,CACjB;AAAA,gBAAA;AAAA,cAAA,GAEL;AAAA,YAAA,GACF;AAAA,YACA1C,2BAAA;AAAA,cAAC0C,aAAA;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,UAAU,CAAC;AAAA,gBACX,OAAO,OAAO;AAAA,gBACd,UAAU;AAAA,gBACV,OACE,OAAO,QAAQ,cAAc,OAAO,KAA0B,IAAI;AAAA,gBAEpE,UAAQ;AAAA,gBACR,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAK;AAAA,cAAA;AAAA,YACP;AAAA,YACA1C,2BAAA;AAAA,cAAC2C;AAAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,UAAU;AAAA,gBACV,OAAO,OAAO;AAAA,gBACd,OACE,OAAO,WACH,cAAc,OAAO,QAA6B,IAClD;AAAA,gBAEN,WACE3C,2BAAA;AAAA,kBAACgC;AAAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,eAAe;AACA,uCAAA,CAAC,SAAS,CAAC,IAAI;AAAA,oBAClC;AAAA,oBACA,OAAO;AAAA,sBACL,gBACI;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,oBAEC,UAAgB,gBAAAhC,2BAAAA,IAAC4C,MAAI,KAAA,CAAA,CAAA,mCAAMC,MAAW,YAAA,EAAA;AAAA,kBAAA;AAAA,gBACzC;AAAA,gBAEF,MAAM,cAAc;AAAA,kBAClB,IAAI;AAAA,kBACJ,gBACE;AAAA,gBAAA,CACH;AAAA,gBACD,UAAQ;AAAA,gBACR,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAM,gBAAgB,SAAS;AAAA,cAAA;AAAA,YACjC;AAAA,YACA7C,2BAAA;AAAA,cAAC2C;AAAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,UAAU;AAAA,gBACV,OAAO,OAAO;AAAA,gBACd,OACE,OAAO,kBACH,cAAc,OAAO,eAAoC,IACzD;AAAA,gBAEN,WACE3C,2BAAA;AAAA,kBAACgC;AAAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,eAAe;AACO,8CAAA,CAAC,SAAS,CAAC,IAAI;AAAA,oBACzC;AAAA,oBACA,OAAO;AAAA,sBACL,uBACI;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,oBAEC,UAAuB,uBAAAhC,2BAAAA,IAAC4C,MAAI,KAAA,CAAA,CAAA,mCAAMC,MAAW,YAAA,EAAA;AAAA,kBAAA;AAAA,gBAChD;AAAA,gBAEF,UAAQ;AAAA,gBACR,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAM,uBAAuB,SAAS;AAAA,cAAA;AAAA,YACxC;AAAA,YACA7C,2BAAA;AAAA,cAAC8C,aAAA;AAAA,cAAA;AAAA,gBACC,eAAe,CAAC,YAAY;AACb,+BAAA,EAAE,QAAQ,EAAE,OAAO,SAAS,MAAM,UAAU;AAAA,gBAC3D;AAAA,gBACA,OAAO,OAAO;AAAA,gBACd,MAAK;AAAA,gBACL,cAAW;AAAA,gBAEV,UAAA;AAAA,kBACC;AAAA,oBACE,IAAI;AAAA,oBACJ,gBACE;AAAA,kBACJ;AAAA,kBACA;AAAA,oBACE,sCACG,GAAE,EAAA,QAAO,UAAS,MAAK,2BAA0B,KAAI,cACnD,UAAc,cAAA;AAAA,sBACb,IAAI;AAAA,sBACJ,gBAAgB;AAAA,oBACjB,CAAA,GACH;AAAA,oBAEF,uCACG,GAAE,EAAA,QAAO,UAAS,MAAK,6BAA4B,KAAI,cACrD,UAAc,cAAA;AAAA,sBACb,IAAI;AAAA,sBACJ,gBAAgB;AAAA,oBACjB,CAAA,GACH;AAAA,kBAEJ;AAAA,gBACF;AAAA,cAAA;AAAA,YACF;AAAA,YACA9C,2BAAAA,IAAC+C,uBAAO,WAAS,MAAC,MAAK,KAAI,MAAK,UAC7B,UAAc,cAAA;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YACjB,CAAA,GACH;AAAA,UAAA,GACF,GACF,EACF,CAAA;AAAA,QAEJ;AAAA,MAAA;AAAA,IACF;AAAA,IACC,OAAO,OAAO,aAAa,cACzB/C,2BAAA,IAAA4B,kBAAA,EAAI,YAAY,GACf,UAAA5B,2BAAA,IAAC6B,aAAK,MAAA,EAAA,gBAAe,UAEnB,UAAC7B,2BAAA,IAAAgD,SAAA,EAAK,IAAIC,eAAAA,SAAS,IAAG,eACnB,UAAc,cAAA;AAAA,MACb,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAAA,CACjB,EACH,CAAA,EACF,CAAA,GACF;AAAA,EAAA,EAEJ,CAAA,EACF,CAAA;AAEJ;AAmBA,SAAS,cAAc,MAA0B;AACxC,SAAA,OAAO,QAAQ,IAAI,EAAE;AAAA,IAC1B,CAAC,KAAK,CAAC,KAAK,KAAK,MAAM;AAOjB,UAAA,CAAC,CAAC,YAAY,iBAAiB,EAAE,SAAS,GAAG,KAAK,OAAO,UAAU,UAAU;AAC3E,YAAA,GAA+B,IAAI,MAAM,KAAK;AAElD,YAAI,QAAQ,YAAY;AAClB,cAAA,GAAG,IAAI,SAAS;AAAA,QACtB;AAAA,MAAA,OACK;AACL,YAAI,GAAmB,IAAI;AAAA,MAC7B;AAEO,aAAA;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EAAA;AAUL;AAEA,MAAM,IAAIvB,gBAAO,QAAA;AAAA,WACN,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAGjD,MAAMiB,kBAAgBjB,gBAAAA,QAAOgB,aAAAA,SAAS;AAAA;AAAA;AAAA;AAAA;AClhBtC,MAAM,wBAAwBR,eAAI,OAAO,EAAE,MAAM;AAAA,EAC/C,UAAUA,eACP,OAAO,EACP,IAAI,GAAGC,aAAAA,iBAAiB,SAAS,EACjC,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,SAAS,0CAA0C,EAC3D,QAAQ,MAAM,uCAAuC,EACrD,SAASA,aAAA,iBAAiB,QAAQ;AAAA,EACrC,iBAAiBD,eACd,OAAA,EACA,MAAM,CAACA,eAAI,IAAI,UAAU,GAAG,IAAI,GAAG,yCAAyC,EAC5E,SAASC,aAAAA,iBAAiB,QAAQ;AACvC,CAAC;AAED,MAAM,gBAAgB,MAAM;AAC1B,QAAM,CAAC,eAAe,gBAAgB,IAAIrB,iBAAM,SAAS,KAAK;AAC9D,QAAM,CAAC,sBAAsB,uBAAuB,IAAIA,iBAAM,SAAS,KAAK;AACtE,QAAA,EAAE,kBAAkBV,UAAAA;AACpB,QAAA,EAAE,SAASE,aAAAA;AACX,QAAA,EAAE,SAAS8B,eAAAA;AACjB,QAAM,QAAQ3B,aAAAA;AAER,QAAA,EAAE,QAAQ,QAAA,IAAYI,WAAA;AAAA,IAC1B,OAAO,SAA0D;AACzD,YAAA;AAAA,QACJ,MAAM,EAAE,KAAK;AAAA,MAAA,IACX,MAAM,KAA6B,yBAAyB;AAAA,QAC9D,GAAG;AAAA,QACH,oBAAoB,MAAM,IAAI,MAAM;AAAA,MAAA,CACrC;AAEM,aAAA;AAAA,IACT;AAAA,IACA;AAAA,MACE,UAAU,MAAM;AACd,YAAI,MAAM;AACF,gBAAA,EAAE,OAAO,KAAS,IAAA;AACnBK,uBAAAA,KAAA,SAAS,OAAO,KAAK;AACrBA,uBAAAA,KAAA,YAAY,MAAM,KAAK;AAG5B,eAAK,GAAG;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAIA,SAAAlB,2BAAAA,IAAC,uBACC,EAAA,UAAAC,2BAAAA,KAACqC,aAAAA,MACC,EAAA,UAAA;AAAA,IAAArC,gCAAC,eACC,EAAA,UAAA;AAAA,MAAAA,gCAAC,QACC,EAAA,UAAA;AAAA,QAAAD,2BAAA,IAAC,MAAK,EAAA;AAAA,QACLA,2BAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GAAG,eAAe,GACjC,UAAC5B,2BAAA,IAAAuC,aAAA,YAAA,EAAW,IAAG,MAAK,SAAQ,SACzB,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,QACC,UACEvC,2BAAAA,IAAAuC,aAAAA,YAAA,EAAW,IAAG,qBAAoB,MAAK,SAAQ,UAAU,IAAI,WAAU,aACrE,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,IACE;AAAA,MAAA,GACN;AAAA,MACAvC,2BAAA;AAAA,QAACwC,OAAA;AAAA,QAAA;AAAA,UACC,oBAAkB;AAAA,UAClB,eAAe;AAAA,YACb,UAAU;AAAA,YACV,iBAAiB;AAAA,UACnB;AAAA,UACA,UAAU,CAAC,WAAW;AACpB,mBAAO,EAAE,UAAU,OAAO,SAAU,CAAA;AAAA,UACtC;AAAA,UACA,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAEjB,UAAC,CAAA,EAAE,QAAQ,QAAQ,mBAClBxC,2BAAA,IAACyC,aACC,MAAA,EAAA,UAAAxC,2BAAA,KAAC4B,qBAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,YAAA7B,2BAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,UAAU;AAAA,gBACV,OAAO,OAAO;AAAA,gBACd,OACE,OAAO,WACH;AAAA,kBACE;AAAA,oBACE,IAAI,OAAO;AAAA,oBACX,gBAAgB;AAAA,kBAClB;AAAA,kBACA;AAAA,oBACE,KAAK;AAAA,kBACP;AAAA,gBAEF,IAAA;AAAA,gBAEN,WACEA,2BAAA;AAAA,kBAACgC;AAAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,eAAe;AACA,uCAAA,CAAC,SAAS,CAAC,IAAI;AAAA,oBAClC;AAAA,oBACA,OAAO;AAAA,sBACL,gBACI;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,oBAEC,UAAgB,gBAAAhC,2BAAAA,IAAC4C,MAAI,KAAA,CAAA,CAAA,mCAAMC,MAAW,YAAA,EAAA;AAAA,kBAAA;AAAA,gBACzC;AAAA,gBAEF,MAAM,cAAc;AAAA,kBAClB,IAAI;AAAA,kBACJ,gBACE;AAAA,gBAAA,CACH;AAAA,gBACD,UAAQ;AAAA,gBACR,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAM,gBAAgB,SAAS;AAAA,cAAA;AAAA,YACjC;AAAA,YACA7C,2BAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,UAAU;AAAA,gBACV,OAAO,OAAO;AAAA,gBACd,OACE,OAAO,kBACH,cAAc;AAAA,kBACZ,IAAI,OAAO;AAAA,kBACX,gBAAgB;AAAA,gBACjB,CAAA,IACD;AAAA,gBAEN,WACEA,2BAAA;AAAA,kBAACgC;AAAAA,kBAAA;AAAA,oBACC,SAAS,CAAC,MAAM;AACd,wBAAE,eAAe;AACO,8CAAA,CAAC,SAAS,CAAC,IAAI;AAAA,oBACzC;AAAA,oBACA,OAAO;AAAA,sBACL,gBACI;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,oBAEC,UAAuB,uBAAAhC,2BAAAA,IAAC4C,MAAI,KAAA,CAAA,CAAA,mCAAMC,MAAW,YAAA,EAAA;AAAA,kBAAA;AAAA,gBAChD;AAAA,gBAEF,UAAQ;AAAA,gBACR,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,MAAM,uBAAuB,SAAS;AAAA,cAAA;AAAA,YACxC;AAAA,2CACCE,aAAAA,QAAO,EAAA,WAAS,MAAC,MAAK,UACpB,UAAc,cAAA;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YACjB,CAAA,GACH;AAAA,UAAA,EAAA,CACF,EACF,CAAA;AAAA,QAAA;AAAA,MAEJ;AAAA,IAAA,GACF;AAAA,IACA/C,2BAAAA,IAAC6B,aAAAA,QAAK,gBAAe,UACnB,yCAACD,aAAI,KAAA,EAAA,YAAY,GAEf,UAAA5B,2BAAAA,IAACgD,GAAAA,MAAK,EAAA,IAAIC,eAAAA,SAAS,IAAG,eACnB,UAAc,cAAA,EAAE,IAAI,mBAAmB,gBAAgB,oBAAoB,CAAC,EAC/E,CAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AAEA,MAAM,gBAAgBvB,gBAAAA,QAAOgB,aAAAA,SAAS;AAAA;AAAA;AAAA;AAAA;AC1M/B,MAAM,QAAQ;AAAA,EACnB,mBAAmB;AAAA,EACnB,2BAA2B;AAAA;AAAA;AAAA,EAG3B,OAAO,MAAM;AAAA,EACb,MAAM;AAAA,EACN,UAAU;AAAA,EACV,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,WAAW,MAAM;AACnB;ACfA,MAAM,WAAW,CAAC,EAAE,eAA8B;AAC1C,QAAA;AAAA,IACJ,UAAU,EAAE,OAAO;AAAA,MACjBN,eAAW,WAAA;AACT,QAAA,QAAQiB,6BAAsC,iBAAiB;AAC/D,QAAA,WAAW,OAAO,OAAO;AAC/B,QAAMQ,UAAQ;AAAA,IACZC;AAAAA,IACA,aAAa,MAAM,qCAAO,qBAA0D,CAAA,GAAG;AAAA,EAAA;AAEzF,QAAM,QAAQ;AAAA,IACZ;AAAA,IACA,aAAa,MAAM,qCAAO,yBAAmD,CAAA,GAAG;AAAA,IAChF;AAAA,MACE,QAAQ,SAAS,SAAS;AACjB,eAAA;AAAA,UACL,GAAG;AAAA,UACH,GAAG;AAAA,QAAA;AAAA,MAEP;AAAA,MACA,cAAc;AAAA,IAChB;AAAA,EAAA;AAGE,MAAA,CAAC,YAAY,CAAC,OAAO;AAChB,WAAA9D,2BAAA,IAACmB,eAAS,UAAA,EAAA,IAAG,IAAI,CAAA;AAAA,EAC1B;AAEM,QAAAJ,aAAY,MAAM,QAAQ;AAMhC,MAAI,CAACA,cAAc,YAAY,aAAa,oBAAqBG,aAAAA,KAAK,YAAY;AACzE,WAAAlB,2BAAA,IAACmB,eAAS,UAAA,EAAA,IAAG,IAAI,CAAA;AAAA,EAC1B;AAGI,MAAA,CAAC,YAAY,aAAa,kBAAkB;AAE5C,WAAAnB,2BAAA;AAAA,MAACmB,eAAA;AAAA,MAAA;AAAA,QACC,IAAI;AAAA,UACF,UAAU;AAAA;AAAA;AAAA,UAGV;AAAA,QACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAGN;AAEI,MAAA0C,WAAS,aAAa,SAAS;AAEjC,0CAAQA,SAAM,CAAA,CAAA;AAAA,EACL,WAAA,aAAa,WAAW,CAACA,SAAO;AAElC,WAAA;AAAA,EACT;AAEO,SAAA7D,+BAACe,cAAU,SAAoB,CAAA;AACxC;AC5DO,MAAM,eAAe,MAAM;AAC1B,QAAA,EAAE,kBAAkBX,UAAAA;AACL2D,eAAAA;AAGnB,SAAA9D,2BAAA,KAACqC,aAAK,MAAA,EAAA,YAAW,SACf,UAAA;AAAA,IAAAtC,2BAAA;AAAA,MAACgE,aAAA;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAO,cAAc;AAAA,UACnB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB;AAAA,MAAA;AAAA,IACH;AAAA,mCACCC,aAAAA,eACC,EAAA,UAAAjE,2BAAA;AAAA,MAACkE,aAAA;AAAA,MAAA;AAAA,QACC,QACGlE,2BAAAA,IAAAmE,aAAAA,YAAA,EAAW,SAAQ,aAAY,SAASnE,2BAAA,IAACoE,MAAW,YAAA,CAAA,CAAA,GAAI,IAAG,KACzD,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QACjB,CAAA,GACH;AAAA,QAEF,SAAS,cAAc;AAAA,UACrB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB;AAAA,QACD,WAAS;AAAA,QACT,MAAMpE,2BAAAA,IAACqE,MAAAA,eAAc,EAAA,OAAM,QAAQ,CAAA;AAAA,QACnC,QAAO;AAAA,MAAA;AAAA,IAAA,GAEX;AAAA,EACF,EAAA,CAAA;AAEJ;;;;;AC7BO,MAAM,UAAU;AAAA,EACrB;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA;AAAA,IACE,WAAW;AAAA,MACT,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,OAAO;AAAA,EACT;AACF;AAEA,MAAM,mBAAmB3C,gBAAAA,QAAOa,aAAAA,UAAU;AAAA;AAAA;AAInC,MAAM,cAAc,MAAM;AAC/B,QAAM,qBAAqBhC,aAAAA;AAC3B,QAAM,EAAE,MAAM,SAAS,IAAI6B,eAAW,WAAA;AAChC,QAAA,EAAE,kBAAkBhC,UAAAA;AAC1B,QAAM,CAAC,MAAM,OAAO,IAAIU,iBAAM,SAAiC,IAAI;AACnE,QAAM,CAAC,WAAW,YAAY,IAAIA,iBAAM,SAAS,EAAE;AAC7C,QAAA,EAAE,SAASR,aAAAA;AAEX,QAAA,EAAE,WAAW,MAAM,IAAIY,kBAAK,IAAI,UAAU,KAAK;AAC/C,QAAA,EAAE,SAAa,IAAAoD,SAAM,UAAU,QAAQ,EAAE,mBAAmB,KAAA,CAAM;AACxE,QAAM,UAAU,SAAS;AAEnB,QAAA,eAAe,OAAO,OAAwB,gBAAyB;AAC3E,UAAM,eAAe;AACjB,QAAA;AACF,YAAM,KAAK,wCAAwC;AAAA,QACjD;AAAA,QACA,UAAU;AAAA,QACV,YAAY,QAAQ,CAAC,QAAQ;AAAA,QAC7B,SAAS;AAAA,UACP,MAAM,cAAc,SAAY;AAAA,UAChC,WAAW,cAAc,SAAY;AAAA,QACvC;AAAA,MAAA,CACD;AAEkB,yBAAA;AAAA,QACjB,MAAM;AAAA,QACN,SAAS;AAAA,UACP,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAClB;AAAA,MAAA,CACD;AACD,WAAK,GAAG;AAAA,aACD,KAAK;AAAA,IAEd;AAAA,EAAA;AAGF,SACGtE,2BAAA,IAAA,uBAAA,EACC,UAACC,2BAAAA,KAAAqC,aAAAA,MAAA,EAAK,YAAW,iBACf,UAAA;AAAA,IAACtC,2BAAAA,IAAA,eAAA,EACC,0CAAC,QAAK,EAAA,UAAU,CAAC,MAAM,aAAa,GAAG,KAAK,GAC1C,UAAA;AAAA,MAAAC,2BAAA,KAAC4B,aAAK,MAAA,EAAA,WAAU,UAAS,eAAe,GACtC,UAAA;AAAA,QAAA7B,2BAAA,IAAC,MAAK,EAAA;AAAA,uCACL4B,aAAAA,KAAI,EAAA,YAAY,GAAG,eAAe,GAAG,OAAO2C,qBAAQ,GAAG,GACtD,UAAAvE,2BAAAA,IAAC,oBAAiB,SAAQ,SAAQ,IAAG,MAAK,IAAG,iBAC1C,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,MAAA,GACF;AAAA,sCACC6B,aAAAA,MAAK,EAAA,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,QAAA7B,2BAAA;AAAA,UAACwE,aAAA;AAAA,UAAA;AAAA,YACC,IAAG;AAAA,YACH,eAAY;AAAA,YACZ,OAAO,cAAc;AAAA,cACnB,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAAA,CACjB;AAAA,YAGD,UAAU,CAAC,UAAU,QAAQ,KAAK;AAAA,YAClC,OAAO;AAAA,YAEN,UAAQ,QAAA,IAAI,CAAC,EAAE,WAAW,MAAM,MAC9BxE,2BAAA,IAAAyE,aAAA,QAAA,EAAmB,OACjB,UAAA,cAAc,SAAS,EAAA,GADb,KAEb,CACD;AAAA,UAAA;AAAA,QACH;AAAA,QACC,WACCzE,2BAAA;AAAA,UAAC0C,aAAA;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,OAAO,cAAc,EAAE,IAAI,iBAAiB,gBAAgB,SAAS;AAAA,YACrE,OAAO;AAAA,YACP,UAAU,CAAC,MAAM,aAAa,EAAE,OAAO,KAAK;AAAA,YAC5C,eAAY;AAAA,UAAA;AAAA,QACd;AAAA,uCAEDK,aAAAA,QAAO,EAAA,MAAK,UAAS,MAAK,KAAI,WAAS,MAAC,UAAU,CAAC,MACjD,wBAAc,EAAE,IAAI,iBAAiB,gBAAgB,SAAU,CAAA,GAClE;AAAA,MAAA,GACF;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,mCACClB,aAAAA,MAAK,EAAA,gBAAe,UACnB,UAAA7B,2BAAAA,IAAC4B,oBAAI,YAAY,GACf,UAAC5B,2BAAAA,IAAA0E,aAAA,YAAA,EAAW,SAAS,CAAC,UAAU,aAAa,OAAO,IAAI,GACrD,UAAc,cAAA;AAAA,MACb,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAAA,CACjB,EACH,CAAA,EACF,CAAA,GACF;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;ACjKA,MAAM,YAAY,CAAC,EAAE,oBAAoC;AACvD,QAAM,CAAC,OAAO,QAAQ,IAAI5D,iBAAM,SAAqC,IAAI;AAEzEA,mBAAM,UAAU,MAAM;AACpB,UAAM,YAAY,YAAY;AACxB,UAAA;AACI,cAAA,cAAc,MAAM;AAKtB,YAAA,OAAO,gBAAgB,YAAY;AACrC,mBAAS,MAAM,WAAW;AAAA,QAAA,WACjB,YAAY,SAAS;AACrB,mBAAA,MAAM,YAAY,OAAQ;AAAA,QACrC;AAAA,eACO,KAAK;AAAA,MAAC;AAAA,IAAA;AAGP;EAAA,GACT,CAAC,aAAa,CAAC;AAElB,MAAI,OAAO;AACT,0CAAQ,OAAM,CAAA,CAAA;AAAA,EAChB;AAEA,wCAAQ6D,mCAAqB,CAAA,CAAA;AAC/B;AAEO,MAAM,cAAc,CACzB,eACA,IACA,QAA2B,UACxB;AAED,SAAA3E,2BAAA;AAAA,IAACiB,eAAA;AAAA,IAAA;AAAA,MACC,QAAQ,MAAOjB,2BAAA,IAAA,WAAA,EAAU,cAA8B,CAAA;AAAA,MAEvD,MAAM;AAAA,MACN,OAAO,SAAS;AAAA,IAAA;AAAA,IAFX;AAAA,EAAA;AAKX;AChBA,MAAM,YAAkC;AAExC,MAAM,mBAAmBc,iBAAM;AAAA,EAAK,MAClC,QAAO,QAAA,EAAA,KAAA,MAAA,QAAA,gCAA+B,mCAAE,KAAK,CAAC,SAAS,EAAE,SAAS,IAAI,iBAAA,EAAmB;AAC3F;AAOO,MAAM8D,QAAM,CAAC,EAAE,UAAU,UAAU,yBAAyB,oBAA8B;AAC/F,QAAM,mBAAmB;AAAA,IACvB;AAAA,IACA,aAAa,MAAM,qCAAO,yBAA8B,CAAA,GAAG;AAAA,IAC3D;AAAA,MACE,QAAQ,eAAe,eAAe;AAEpC,eAAOC,uBAAM,CAAA,GAAI,eAAe,aAAa;AAAA,MAC/C;AAAA,MAEA,cAAc;AAAA,IAChB;AAAA,EAAA;AAEF,QAAM,SAAS;AAAA,IACb;AAAA,IACA,aAAa,MAAM,qCAAO,yBAA8B,CAAA,GAAG;AAAA,IAC3D;AAAA,MACE,cAAc,CAAC;AAAA,IACjB;AAAA,EAAA;AAEF,QAAM,qBAAqBtE,aAAAA;AACrB,QAAA,EAAE,kBAAkBH,UAAAA;AACpB,QAAA;AAAA,IACJ,EAAE,WAAW,UAAU,MAAM,UAAU,UAAU,gBAAgB,UAAU,eAAe;AAAA,IAC1F;AAAA,EAAA,IACEU,iBAAM,SAOP;AAAA,IACD,WAAW;AAAA,IACX,UAAU;AAAA,IACV,UAAU;AAAA,IACV,MAAM;AAAA,EAAA,CACP;AACD,QAAM,WAAWgE,WAAAA;AACjB,QAAM,UAAUC,aAAAA;AAChB,QAAM,EAAE,KAAA1E,MAAK,KAAK,IAAIC,aAAe,eAAA;AAE/B,QAAA,aAAaQ,iBAAM,QAAQ,MAAM;AACrC,QAAI,CAAC,QAAQ;AACJ,aAAA;AAAA,IACT;AAEA,WAAO,OAAO,IAAI,CAAC,EAAE,IAAI,WAAAC,YAAW,MAAM,MAAM,YAAYA,YAAW,IAAI,KAAK,CAAC;AAAA,EAAA,GAChF,CAAC,MAAM,CAAC;AAEX,QAAM,CAAC,qBAAqB,sBAAsB,IAAID,iBAAM,SAAS,MAAS;AAE9EA,mBAAM,UAAU,MAAM;AACpB,aAAS,EAAE,MAAM,8BAA8B,SAAS,iBAAkB,CAAA;AAAA,EAAA,GACzE,CAAC,kBAAkB,QAAQ,CAAC;AAE/BA,mBAAM,UAAU,MAAM;AACd,UAAA,eAAeI,kBAAK;AAE1B,UAAM,aAAa,YAAY;AACzB,UAAA;AACI,cAAA;AAAA,UACJ,MAAM;AAAA,YACJ,MAAM,EAAE,MAAM;AAAA,UAChB;AAAA,QAAA,IACE,MAAM,KAAK,sBAAsB,EAAE,OAAO,aAAc,CAAA;AAC5DA,0BAAK,YAAY,KAAK;AAAA,eACf,KAAK;AAEZA,qBAAA,KAAK,gBAAgB;AACrB,eAAO,SAAS;MAClB;AAAA,IAAA;AAGF,QAAI,cAAc;AACL;IACb;AAAA,EAAA,GACC,CAAC,IAAI,CAAC;AAETJ,mBAAM,UAAU,MAAM;AACpB,UAAMkE,WAAU,YAAY;AACtB,UAAA;AACI,cAAA;AAAA,UACJ,MAAM;AAAA,YACJ,MAAM,EAAE,UAAAC,WAAU,MAAAC,OAAM,UAAAC,WAAU,UAAAC,UAAS;AAAA,UAC7C;AAAA,QACF,IAAI,MAAM/E,KAAI,aAAa;AAE3B,YAAI6E,OAAM;AACF,gBAAA;AAAA,YACJ,MAAM,EAAE,MAAM,WAAW;AAAA,UAAA,IACvB,MAAM7E,KAAI,+BAA+B;AAAA;AAAA,YAE3C,gBAAgB,CAAC,WAAW,SAAS;AAAA,UAAA,CACtC;AAED,iCAAuB,UAAU;AAE7B,cAAA;AACF,kBAAM,QAAQ;AACd;AAAA,cACE;AAAA,cACA;AAAA;AAAA,gBAEE;AAAA,gBACA,QAAQ;AAAA,gBACR;AAAA,gBACA,gBAAgB,CAAC;AAAA,gBACjB,gBAAgB,EAAE,aAAa,QAAQ,mBAAmB;AAAA,gBAC1D,iBAAiB,EAAE,GAAG,YAAY,WAAW6E,MAAK;AAAA,cACpD;AAAA,cACA;AAAA,gBACE,SAAS;AAAA,kBACP,kBAAkB;AAAA,gBACpB;AAAA,cACF;AAAA,YAAA;AAAA,mBAEK,GAAG;AAAA,UAEZ;AAAA,QACF;AAEA,iBAAS,EAAE,WAAW,OAAO,UAAAD,WAAU,MAAAC,OAAM,UAAU,UAAAC,WAAU,UAAAC,UAAU,CAAA;AAAA,eACpE,KAAK;AACO,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,EAAE,IAAI,6CAA6C;AAAA,QAAA,CAC7D;AAAA,MACH;AAAA,IAAA;AAGM,IAAAJ;EAAA,GAEP,CAAC,kBAAkB,CAAC;AAEvB,QAAM,eAAelE,iBAAM;AAAA,IACzB,OAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,IAEF,CAAC,MAAM,qBAAqB,QAAQ;AAAA,EAAA;AAGtC,MAAI,WAAW;AACb,0CAAQ6D,mCAAqB,CAAA,CAAA;AAAA,EAC/B;AAEA,yCACG7D,iBAAM,UAAN,EAAe,UAAUd,2BAAAA,IAAC2E,qCAAqB,GAC9C,UAAA;AAAA,IAAC3E,2BAAAA,IAAAqF,aAAA,eAAA,EACE,wBAAc,EAAE,IAAI,iBAAiB,gBAAgB,kBAAmB,CAAA,GAC3E;AAAA,IACArF,2BAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,UAAU;AAAA,UACR,SAAS;AAAA,UACT,QAAQ;AAAA,YACN,KAAK;AAAA,UACP;AAAA,QACF;AAAA,QACA,UAAU;AAAA,UACR,SAAS;AAAA,UACT,QAAQ;AAAA,YACN,KAAK;AAAA,UACP;AAAA,QACF;AAAA,QACA;AAAA,QACA;AAAA,QAEA,UAACA,2BAAAA,IAAAsF,aAAA,kBAAA,EAAiB,OAAO,cACvB,0CAACC,uBACE,EAAA,UAAA;AAAA,UAAA;AAAA,UACDvF,2BAAA;AAAA,YAACiB,eAAA;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,QAAQ,CAAC,+CAAiB,UAAU,EAAA,GAAG,aAAa,UAAoB;AAAA,cACxE,OAAK;AAAA,YAAA;AAAA,UACP;AAAA,UACCjB,2BAAA,IAAA,cAAA,EAAa,MAAK,YAAW,WAAW,aAAa;AAAA,UACrDA,2BAAA,IAAA,cAAA,EAAa,MAAK,KAAI,WAAW,kBAAkB;AAAA,UACnDA,2BAAA,IAAAiB,eAAA,OAAA,EAAM,MAAK,IAAG,WAAW,cAAc;AAAA,QAAA,EAAA,CAC1C,EACF,CAAA;AAAA,MAAA;AAAA,IACF;AAAA,EACF,EAAA,CAAA;AAEJ;ACzOA,MAAe,aAAA;ACOf,MAAM,CAAC,sBAAsB,eAAe,IAAIf,2BAAiC,cAAc;AAE/F,MAAM,WAAW,MAAM,gBAAgB,UAAU;ACajD,MAAM,qBAAqB,CAAC,EAAE,eAAwC;AACpE,QAAM,CAAC,EAAE,aAAa,iBAAiB,qBAAqB,UAAa,GAAA,QAAQ,IAC/EY,iBAAM,WAAWO,WAASC,gBAAc,eAAe;AAEnD,QAAA,iBAAiB,CAAC,SAAuC;AAE7D,QAAI,SAAS,MAAM;AACX,YAAA,oBAAoBjB,aAAAA,QAAI,iBAAiB,IAAI;AACnD,YAAM,CAAC,aAAa,QAAQ,IAAI,KAAK,MAAM,GAAG;AAC9C,YAAM,eAAe,OAAO,QAAQ,gBAAgB,WAAW,CAAC;AAE1D,YAAA,mBAAmB,aAAa,UAAU,CAAC,CAAC,GAAG,MAAM,QAAQ,QAAQ;AAC3E,YAAM,gBAAgB,aAAa,MAAM,GAAG,gBAAgB;AAEtD,YAAA,eAAe,cAAc,MAAM,CAAC,CAAA,EAAG,YAAY,MAAM,YAAY;AAEvE,UAAA,qBAAqB,aAAa,CAAC,cAAc;AAC5C,eAAA;AAAA,MACT;AAAA,IACF;AAEKa,iBAAAA,KAAA,IAAI,MAAM,4BAA4B,IAAI;AAE/C,WAAO,SAAS;AAAA,MACd,MAAM;AAAA,MACN;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,0BAA0B,CAAC,UAAkD;AACxE,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,eAAe,CAACsE,cAA6B,UAAuC;AACxF,qBAAiBA,YAAW;AAEnB,aAAA;AAAA,MACP,MAAM;AAAA,MACN,aAAAA;AAAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,eAAe,CAAC,gBAAsC;AACpD,UAAA,eAAe,gBAAgB,WAAW;AAEhD,QAAI,cAAc;AACV,YAAA,kBAAkB,OAAO,QAAQ,eAAe;AAIhD,YAAA,sBAAsB,gBAAgB,UAAU,CAAC,CAAC,GAAG,MAAM,QAAQ,WAAW;AACpF,YAAM,mBAAmB,gBAAgB,MAAM,GAAG,mBAAmB;AAGrE,YAAM,kBAAkB,iBAAiB;AAAA,QAAM,CAAC,CAAA,EAAG,YAAY,MAC7D,OAAO,OAAO,YAAY,EAAE,MAAM,OAAO;AAAA,MAAA;AAG3C,YAAM,CAAC,SAAS,IAAI,OAAO,KAAK,YAAY;AACtC,YAAA,kBAAkB,aAAa,SAAS;AAE9C,UAAI,mBAAmB,CAAC,eAAe,CAAC,iBAAiB;AACvD,uBAAe,GAAG,WAAW,IAAI,SAAS,EAAE;AAAA,MAC9C;AAAA,IACF;AAAA,EAAA;AAGI,QAAA,aAAa,CAAC,UAAqC;AAClDtE,iBAAAA,KAAA,IAAI,OAAO,uBAAuB,IAAI;AAElC,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,IAAA,CACD;AAAA,EAAA;AAID,SAAAlB,2BAAA;AAAA,IAACyF,aAAA;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAEC;AAAA,IAAA;AAAA,EAAA;AAGP;AAOA,MAAMnE,iBAAe;AAAA,EACnB,aAAa;AAAA,EACb,iBAAiB;AAAA,IACf,oBAAoB;AAAA,MAClB,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACd,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AAAA,IACA,WAAW;AAAA,MACT,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,MACd,QAAQ;AAAA,MACR,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EACA,qBAAqB;AAAA,EACrB,WAAW;AACb;AA6BA,MAAMD,YAAwC,CAAC,QAAeC,gBAAc,WAC1EoE,yBAAQ,OAAO,CAAC,eAAe;AAC7B,UAAQ,OAAO,MAAM;AAAA,IACnB,KAAK,oBAAoB;AACvB,iBAAW,cAAc,OAAO;AAChC;AAAA,IACF;AAAA,IACA,KAAK,kBAAkB;AACrB,YAAM,CAAC,SAAS,IAAI,IAAI,OAAO,YAAY,MAAM,GAAG;AAIpD,iBAAW,gBAAgB,OAAO,EAAE,IAAI,IAAI,OAAO;AACnD;AAAA,IACF;AAAA,IACA,KAAK,eAAe;AAClB,iBAAW,YAAY,OAAO;AAC9B;AAAA,IACF;AAAA,IACA,KAAK,8BAA8B;AACjC,iBAAW,sBAAsB,OAAO;AACxC;AAAA,IACF;AAAA,IACA,SAAS;AACA,aAAA;AAAA,IACT;AAAA,EACF;AACF,CAAC;AAEH,MAAM,kBAAkB,CAACpE,kBAAwB;AACzC,QAAA,mBAAmB,EAAE,GAAGA;AACxB,QAAA,0BAA0BJ,aAAAA,KAAK,IAAI,6BAA6B;AAChE,QAAA,2BAA2BA,aAAAA,KAAK,IAAI,0BAA0B;AAC9D,QAAA,uBAAuBA,aAAAA,KAAK,IAAI,qBAAqB;AAEvD,MAAA,MAAM,QAAQ,uBAAuB,GAAG;AAClB,4BAAA,QAAQ,CAAC,SAAS;AACxC,YAAM,CAAC,aAAa,QAAQ,IAAI,KAAK,MAAM,GAAG;AAC9CyE,mBAAA,QAAI,kBAAkB,CAAC,mBAAmB,aAAa,QAAQ,GAAG,IAAI;AAAA,IAAA,CACvE;AAAA,EACH;AAGA,MAAI,0BAA0B;AAC5B,UAAM,CAAC,aAAa,QAAQ,IAAI,yBAAyB,MAAM,GAAG;AAIlEA,iBAAA,QAAI,kBAAkB,CAAC,mBAAmB,aAAa,QAAQ,GAAG,IAAI;AAEtE,qBAAiB,wBAA0C;AAEtDzE,iBAAAA,KAAA,IAAI,MAAM,4BAA4B,IAAI;AAAA,EACjD;AAEA,MAAI,yBAAyB,MAAM;AAC7ByE,iBAAAA,QAAA,kBAAkB,aAAa,oBAAoB;AAAA,EACzD;AAEO,SAAA;AACT;AAKA,MAAM,mBAAmB,CAAC,kBAAkC;AAC1D,QAAM,eAAezE,aAAA,KAAK,IAAI,6BAA6B,KAAK,CAAA;AAEhE,MAAI,CAAC,MAAM,QAAQ,YAAY,GAAG;AAChC;AAAA,EACF;AAEM,QAAA,kBAAkB,aAAa,SAAS,aAAa;AAE3D,MAAI,iBAAiB;AACnB;AAAA,EACF;AAEAA,eAAA,KAAK,IAAI,CAAC,GAAG,cAAc,aAAa,GAAG,+BAA+B,IAAI;AAChF;AC9OA,MAAM,CAAC,4BAA4B,qBAAqB,IACtDhB,2BAA8C,oBAAoB;AAE9D,MAAA,iBAAiB,MAAM,sBAAsB,gBAAgB;ACPnE,MAAM,QAAQ,CAAC,EAAE,eAA2B;AAC1C,QAAM,EAAE,cAAc,QAAQ,gBAAgB,eAAe;AACvD,QAAA,EAAE,WAAWE,UAAAA;AAEb,QAAA,oBAAoB,iBAAiB,WAAW,cAAc;AAGlE,SAAAH,2BAAA;AAAA,IAAC2F,aAAA;AAAA,IAAA;AAAA,MACC;AAAA,MAMA,OAAO,SAAS,qBAAqB,OAAO;AAAA,MAE3C,UAAA;AAAA,QAAA;AAAA,uCACA,aAAY,EAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGnB;AAEA,MAAM,cAAcC,OAAAA;AAAAA;AAAAA,kBAEF,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AC9BxD,MAAM,YAAY;AAElB,MAAM,kBAAkB,MAAM;AACtB,QAAA,iBAAiB,aAAa,QAAQ,SAAS;AAErD,SAAO,kBAAkB;AAC3B;AAUA,MAAM,sBAAsB,CAAC,EAAE,UAAU,aAAuC;AAC9E,QAAM,CAAC,cAAc,eAAe,IAAI/E,iBAAM,SAAoB,iBAAiB;AACnF,QAAM,CAAC,aAAa,cAAc,IAAIA,iBAAM,SAA6B;AAEzE,QAAM,oBAAoBA,iBAAM;AAAA,IAC9B,CAAC,cAAyB;AACxB,sBAAgB,SAAS;AACZ,mBAAA,QAAQ,WAAW,SAAS;AAAA,IAC3C;AAAA,IACA,CAAC,eAAe;AAAA,EAAA;AAIlBA,mBAAM,UAAU,MAAM;AACd,UAAA,eAAe,OAAO,WAAW,8BAA8B;AACtD,mBAAA,aAAa,UAAU,SAAS,OAAO;AAEhD,UAAA,WAAW,CAAC,UAA+B;AAChC,qBAAA,MAAM,UAAU,SAAS,OAAO;AAAA,IAAA;AAEpC,iBAAA,iBAAiB,UAAU,QAAQ;AAGhD,WAAO,MAAM;AACE,mBAAA,oBAAoB,UAAU,QAAQ;AAAA,IAAA;AAAA,EAEvD,GAAG,CAAE,CAAA;AAGH,SAAAd,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA,eAAe;AAAA,MACf;AAAA,MACA;AAAA,MAEC;AAAA,IAAA;AAAA,EAAA;AAGP;ACnCA,MAAM,cAAc,IAAI8F,WAAAA,YAAY;AAAA,EAClC,gBAAgB;AAAA,IACd,SAAS;AAAA,MACP,sBAAsB;AAAA,IACxB;AAAA,EACF;AACF,CAAC;AAsBD,MAAM,YAAY,CAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAsB;AACpB,wCACG,kBAAiB,EAAA,UAAoB,aACpC,UAAC9F,2BAAAA,IAAA,qBAAA,EAAoB,QACnB,UAACA,2BAAAA,IAAA,OAAA,EACC,UAACA,+BAAA+F,WAAAA,qBAAA,EAAoB,QAAQ,aAC3B,UAAA/F,2BAAA,IAACgG,uBAAS,OACR,UAAAhG,2BAAAA,IAAC,wBAAqB,4BACpB,UAAAA,2BAAA;AAAA,IAACiG,aAAA;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAEA,UAAAjG,2BAAA,IAACkG,gCAAgB,YAAwB,QACvC,yCAACC,aAAAA,sBAAqB,EAAA,cACpB,yCAACC,aACC,kCAAA,EAAA,UAAApG,2BAAAA,IAACqG,aAAAA,0BACC,UAACrG,2BAAA,IAAA,oBAAA,EACC,yCAACsG,aAAAA,uBAAuB,EAAA,SAAA,CAAS,GACnC,EACF,CAAA,EAAA,CACF,GACF,EACF,CAAA;AAAA,IAAA;AAAA,EAAA,EAEJ,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA;AAEJ;AChGO,MAAM,WAAW;AAAA,EACtB;AAAA,EAEA,cAAc;AACZ,SAAK,aAAa;EACpB;AAAA,EAEA,IAAI,WAAsB;AAClB,UAAA,EAAE,MAAM,WAAAvF,WAAc,IAAA;AAE5BwF,+BAAUxF,YAAW,8BAA8B;AACnDwF,+BAAU,MAAM,yBAAyB;AACzCA,uBAAA,QAAU,KAAK,WAAW,IAAI,MAAM,QAAW,gCAAgC;AAE1E,SAAA,WAAW,IAAI,IAAIxF;AAAA,EAC1B;AACF;AChBA,MAAM,gBAAgB;AAAA,EACpB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,MAAM,6BAA6B;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEO,MAAM,aAAa;AAAA,EACxB;AAAA,EAEA,cAAc;AACZ,SAAK,eAAe;EACtB;AAAA,EAEA,SAAS,cAA2C;AAC9C,QAAA,MAAM,QAAQ,YAAY,GAAG;AAElB,mBAAA,QAAQ,CAAC,gBAAgB;AACpC,aAAK,SAAS,WAAW;AAAA,MAAA,CAC1B;AAAA,IAAA,OACI;AAEC,YAAA,EAAE,MAAM,UAAU,MAAM,WAAW,iBAAiB,YAAY,SAAAyF,SACpE,IAAA;AAGFD,iCAAU,MAAM,yBAAyB;AACzCA,iCAAU,MAAM,yBAAyB;AACzCA,iCAAU,WAAW,+BAA+B;AACpDA,iCAAU,iBAAiB,qCAAqC;AAChEA,iCAAU,YAAY,sCAAsC;AAClDA,yBAAAA,QAAA,WAAW,OAAO,qCAAqC;AAGjEA,yBAAA;AAAA,QACE,cAAc,SAAS,IAAI;AAAA,QAC3B,uBAAuB,IAAI;AAAA,MAAA;AAI7B,YAAM,mBAAmB;AACzBA,yBAAA;AAAA,QACE,iBAAiB,KAAK,IAAI;AAAA,QAC1B,uBAAuB,IAAI;AAAA,MAAA;AAIvB,YAAA,iBAAiB,CAAC,GAAIC,UAAS,QAAQ,CAAC,GAAI,GAAIA,UAAS,YAAY,CAAA,CAAG;AAE9E,UAAI,eAAe,QAAQ;AACzB,cAAM,wBAAwB,eAAe,OAAO,0BAA0B,CAAE,CAAA;AAEhF,8BAAsB,QAAQ,CAAC,EAAE,mBAAmB,mBAAmB;AACrED,qCAAU,mBAAmB,YAAY;AAAA,QAAA,CAC1C;AAAA,MACH;AAGM,YAAA,MAAsB,WAAW,WAAW,QAAQ,IAAI,IAAI,KAAK,WAAW,IAAI;AAGtF,YAAM,iBAAiB,OAAO,UAAU,eAAe,KAAK,KAAK,cAAc,GAAG;AAClFA,yBAAA,QAAU,CAAC,gBAAgB,kBAAkB,GAAG,+BAA+B;AAE1E,WAAA,aAAa,GAAG,IAAI;AAAA,IAC3B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,KAAsC;AACjC,WAAA,KAAK,aAAa,GAAG;AAAA,EAC9B;AACF;AAOA,MAAM,2BAA2B,CAC/B,KACA,WACuB;AACvB,MAAI,WAAW,QAAQ;AACrB,WAAO,OAAO,MAAM,OAAO,0BAA0B,GAAG;AAAA,EAC1D;AAEI,MAAA,CAAC,OAAO,MAAM;AAChB,QAAI,KAAK;AAAA,MACP,mBAAmB;AAAA,MACnB,cAAc;AAAA,IAAA,CACf;AAAA,EAAA,OACI;AACL,QAAI,KAAK;AAAA,MACP,mBACE,OAAO,KAAK,WAAW,SAAS,KAAK,2BAA2B,SAAS,OAAO,IAAI;AAAA,MACtF,cAAc,IAAI,OAAO,IAAI;AAAA,IAAA,CAC9B;AAAA,EACH;AAEO,SAAA;AACT;ACjIO,MAAM,OAAO;AAAA,EAClB;AAAA,EAEA,cAAc;AACZ,SAAK,SAAS;EAChB;AAAA,EAEA,IAAI,OAAc;AACV,UAAA,EAAE,MAAM,WAAAxF,WAAc,IAAA;AAE5BwF,+BAAUxF,YAAW,8BAA8B;AACnDwF,+BAAU,MAAM,yBAAyB;AAEpC,SAAA,OAAO,IAAI,IAAIxF;AAAA,EACtB;AACF;AClBA,MAAM,YAAY;AAAA,EAChB;AAAA,EAEA,cAAc;AACZ,SAAK,cAAc;EACrB;AAAA,EAEA,IAAI,YAA6B;AAC1B,SAAA,YAAY,KAAK,UAAU;AAAA,EAClC;AACF;ACTO,MAAM,OAA0B;AAAA,EACrC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,YAA0B;AAC/B,SAAA,OAAO,WAAW,QAAQ,CAAA;AAC1B,SAAA,cAAc,WAAW,eAAe;AACxC,SAAA,iBAAiB,WAAW,kBAAkB,CAAA;AACnD,SAAK,UAAU,WAAW,YAAY,SAAY,WAAW,UAAU;AACvE,SAAK,OAAO,WAAW;AACvB,SAAK,WAAW,WAAW;AAAA,EAC7B;AAAA,EAEA,sBAAsB,eAAuB,WAAmB;AAC1D,QAAA;AACF,aAAO,KAAK,eAAe,aAAa,EAAE,SAAS,KAAK,CAAA;AAAA,aACjD,KAAK;AACJ,cAAA,MAAM,iCAAiC,GAAG;AAElD,aAAO;IACT;AAAA,EACF;AAAA,EAEA,gBACE,eACA,WACA,WACA;AACI,QAAA;AACF,WAAK,eAAe,aAAa,EAAE,SAAS,EAAE,KAAK,SAAS;AAAA,aACrD,KAAK;AACJ,cAAA,MAAM,2BAA2B,GAAG;AAAA,IAC9C;AAAA,EACF;AACF;ACtCO,MAAM,SAAS;AAAA,EACpB;AAAA,EAEA,YAAY,EAAE,cAAc,CAAG,EAAA,IAA4B,CAAA,GAAI;AACxD,SAAA,WAAW,EAAE,GAAG;EACvB;AAAA,EAEA,IAAI,aAAqBM,UAAkB;AACpC,SAAA,SAAS,WAAW,IAAIA;AAAA,EAC/B;AACF;ACXA,MAAM,mBAAsCyD,WAAA;AAC5C,MAAM,gBAAgB2B,WAAA;AACtB,MAAM,mBAAoDC,WAAA;AAE1D,MAAM,sBAAsB,CAAU,aACpCC,QAAAA,eAAe,CAAC,UAAqB,OAAO,QAAQ;ACUtD,MAAM,eAAe,CAAC,EAAE,UAAU,aAAAC,cAAa,yBAA4C;AACzF,QAAM,iBAAiB,iBAAiB,CAAC,UAAU,MAAM,aAAa,cAAc;AAEpF,QAAM,WAAW;AAEjB9F,mBAAM,UAAU,MAAM;AACX,aAAA,qBAAqB8F,YAAW,CAAC;AAE1C,WAAO,MAAM;AACX,eAAS,kBAAkB;AAAA,IAAA;AAAA,EAC7B,GACC,CAACA,cAAa,QAAQ,CAAC;AAE1B,MAAI,CAAC,gBAAgB;AACnB,0CAAQjC,mCAAqB,CAAA,CAAA;AAAA,EAC/B;AAGE,SAAA3E,2BAAA,IAAC6G,yBAAY,UAAZ,EAAqB,OAAO,EAAE,gBAAgB,mBAAmB,GAC/D,SACH,CAAA;AAEJ;AAWA,MAAMvF,iBAAe;AAAA,EACnB,gBAAgB;AAAA,EAChB,mCAAmC,CAAC;AACtC;AAEA,MAAM,cAAc;AACpB,MAAMwF,oBAAkB;AAMxB,MAAM,mBAAmB,OAAyB,EAAE,MAAM,YAAY;AAOtE,MAAM,uBAAuB,CAC3BF,kBAC0B;AAAA,EAC1B,MAAME;AAAAA,EACN,aAAAF;AACF;AAIA,MAAM,cAAc,CAAC,QAAmBtF,gBAAc,WACpDoE,yBAAQ,OAAO,CAAC,eAAe;AAC7B,UAAQ,OAAO,MAAM;AAAA,IACnB,KAAKoB,mBAAiB;AACpB,iBAAW,iBAAiB,OAAO;AACnC,iBAAW,oCAAoC,OAAO,YACnD,OAAO,CAAC,SAAS,KAAK,OAAO,EAC7B,OAAqD,CAAC,KAAK,YAAY;AACtE,cAAM,EAAE,SAAS,QAAAC,QAAAA,IAAW;AAE5B,YAAI,CAAC;AAAgB,iBAAA;AAEjB,YAAA,CAAC,IAAI,OAAO,GAAG;AACb,cAAA,OAAO,IAAI;QACjB;AAEA,YAAI,OAAO,IAAI,IAAI,OAAO,EAAEA,OAAM,IAC9B,EAAE,GAAG,IAAI,OAAO,GAAG,CAACA,OAAM,GAAG,CAAC,GAAG,IAAI,OAAO,EAAEA,OAAM,GAAG,OAAO,MAC9D,EAAE,GAAG,IAAI,OAAO,GAAG,CAACA,OAAM,GAAG,CAAC,OAAO,EAAE;AAEpC,eAAA;AAAA,MACT,GAAG,CAAE,CAAA;AACP;AAAA,IACF;AAAA,IACA,KAAK,aAAa;AACT,aAAAzF;AAAAA,IACT;AAAA,IACA;AACS,aAAA;AAAA,EACX;AACF,CAAC;ACpGH,MAAM,cAAc,CAClB,OACA,mBACA,gBAAgB,eAIb;AACH,QAAM,WAAW;AAEjB,QAAM,oCAAoC;AAAA,IACxC,CAAC,UAAU,MAAM,aAAa;AAAA,EAAA;AAEhC,QAAMsF,eAAc,iBAAiB,CAAC,UAAU,MAAM,6BAA6B,EAAE,WAAW;AAE1F,QAAA,qBAAqB,kCAAkC,iBAAiB;AAE9EI,QAAAA,UAAU,MAAM;AACd,QAAI,oBAAoB;AACb,eAAA;AAAA,QACP,MAAM;AAAA,QACN,aAAa;AAAA,QACb,UAAU;AAAA,UACR,SAAS,QAAQ,MAAM,UAAU;AAAA,UACjC;AAAA,QACF;AAAA,MAAA,CACD;AAED,aAAO,MAAM;AACF,iBAAA,EAAE,MAAM,kBAAA,CAAmB;AAAA,MAAA;AAAA,IAExC;AAEA,WAAO,MAAM;AAAA,IAAA;AAAA,KACZ,CAAC,oBAAoB,UAAU,OAAO,aAAa,CAAC;AAGjD,QAAA,uBACJJ,cAAa,KAAK,CAAC,eAAe,WAAW,YAAY,iBAAiB,KAAK;AAE1E,SAAA;AAAA,IACL,SAAS,QAAQA,YAAW,KAAK,CAAC;AAAA,IAClC,aAAAA;AAAA,EAAA;AAEJ;AAUA,MAAMtF,iBAAe;AAAA,EACnB,aAAa;AACf;AAEA,MAAM,kBAAkB;AACxB,MAAM,oBAAoB;AAiB1B,MAAMD,YAAU,CAAC,QAAuBC,gBAAc;AAAA;AAAA,EAEpDoE,yBAAQ,OAAO,CAAC,eAAe;AAC7B,YAAQ,OAAO,MAAM;AAAA,MACnB,KAAK,iBAAiB;AACT,mBAAA,cAAc,OAAO,QAAQ,OAAO,WAAW,EAAE,OAE1D,CAAC,KAAK,YAAY;AAClB,iBAAO,CAAC,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC;AAAA,QAC/B,GAAG,CAAE,CAAA;AACL;AAAA,MACF;AAAA,MACA,KAAK,mBAAmB;AACtB,mBAAW,cAAc;AACzB;AAAA,MACF;AAAA,MACA;AACS,eAAA;AAAA,IACX;AAAA,EAAA,CACD;AAAA;ACvGH,SAAS,SACP,eACA,eACA,aACA;AACA,MAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,aAAa;AAC7C,WAAA,EAAE,SAAS;EACpB;AAEM,QAAA,EAAE,GAAG,EAAM,IAAA;AAEV,SAAA;AAAA,IACL,WAAW,aAAa,CAAC,OAAO,CAAC;AAAA,EAAA;AAErC;AAYA,MAAM,YAAY,CAAC,EAAE,iBAAiC;AACpD,QAAM,EAAE,UAAU,YAAY,MAAM,eAAe,eAAe,gBAAgBuB,SAAA;AAAA,IAChF,CAAC,aAAa;AAAA,MACZ,MAAM,QAAQ,QAAQ;AAAA,MACtB,UAAU,QAAQ,YAAY;AAAA,MAC9B,eAAe,QAAQ,6BAA6B;AAAA,MACpD,eAAe,QAAQ,sBAAsB;AAAA,MAC7C,YAAY,QAAQ,WAAW;AAAA,MAC/B,aAAa,QAAQ,gBAAgB;AAAA,IAAA;AAAA,EACvC;AAGF,MAAI,CAAC,YAAY;AACR,WAAA;AAAA,EACT;AAGE,SAAAjH,2BAAA;AAAA,IAAC4B,aAAA;AAAA,IAAA;AAAA,MACC,QAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAS;AAAA,MACT,eAAc;AAAA,MACd,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,OAAM;AAAA,MAEN,UAAC5B,2BAAA,IAAA4B,aAAA,KAAA,EAAI,OAAO,SAAS,eAAe,eAAe,WAAW,GAC3D,UAAA,WAAW,EAAE,MAAM,UAAU,KAAM,CAAA,GACtC;AAAA,IAAA;AAAA,EAAA;AAGN;ACpDA,MAAM,kBAAkB,CAAC,EAAE,YAAY,YAAY,YAAkC;AAEjF,SAAA3B,2BAAA;AAAA,IAACiH;AAAAA,IAAA;AAAA,MACC,YAAY,YAAY,eAAe;AAAA,MACvC,SAAQ;AAAA,MACR,KAAK;AAAA,MACL,WAAS;AAAA,MACT,gBAAe;AAAA,MACf;AAAA,MACA,cAAY3C,qBAAQ,EAAE;AAAA,MACtB,UAAS;AAAA,MAET,UAAA;AAAA,QAACtE,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,KAAK,GACT,UAAA;AAAA,UAAC7B,2BAAAA,IAAAmH,cAAA,EAAW,YAAW,UAAS,QAAO,cAAa,SAAS,GAC3D,UAACnH,2BAAAA,IAAAoH,MAAAA,MAAA,CAAA,CAAK,EACR,CAAA;AAAA,UAEApH,2BAAA;AAAA,YAACqH;AAAAA,YAAA;AAAA,cACC,WAAW,YAAY,SAAY;AAAA,cACnC,YAAW;AAAA,cACX,UAAQ;AAAA,cAEP,UAAA;AAAA,YAAA;AAAA,UACH;AAAA,QAAA,GACF;AAAA,wCAECxF,aAAAA,MACC,EAAA,UAAA;AAAA,UAAA7B,+BAAC,WAAU,EAAA,YAAW,UACpB,UAAAA,+BAACsH,MAAAA,SAAO,CAAA,GACV;AAAA,yCAEC,WAAU,EAAA,YAAW,UACpB,UAAAtH,+BAACuH,MAAAA,QAAM,CAAA,GACT;AAAA,QAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGN;AAEA,MAAM,YAAY7F,gBAAAA,QAAOG,aAAAA,IAAI;AAAA,YACjB,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA,iBAGzB,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAI/C,MAAMsF,eAAazF,gBAAAA,QAAO,SAAS;AAAA,4BACP,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,aAGrD,KAAK,EAAE;AAAA,cACN,KAAK,EAAE;AAAA;AAAA;AAIrB,MAAMwF,mBAAiBxF,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA,MAE5B,CAAC,EAAE,OAAO,UAAU,MAAO,YAAY,MAAM,OAAO,aAAa,MAAM,OAAO,UAAW;AAAA;AAAA;AAAA,aAGlF,KAAK,EAAE;AAAA,cACN,KAAK,EAAE;AAAA;AAAA;AAAA,cAGP,CAAC,EAAE,OAAO,gBAAiB,YAAY,SAAY,MAAM,OAAO,UAAW;AAAA;AAAA;AAAA;AAKzF,MAAMwF,uBAAqB3F,gBAAAA,QAAOa,aAAAA,UAAU;AAAA,eAC7B,KAAK,EAAE;AAAA;ACxEtB,MAAM,uBAAuB,CAAC,EAAE,qBAAgD;AAE5E,SAAAtC,2BAAA;AAAA,IAAC4B,aAAA;AAAA,IAAA;AAAA,MACC,YAAW;AAAA,MACX,aAAY;AAAA,MACZ,gBAAe;AAAA,MACf,KAAK;AAAA,MACL,SAAS;AAAA,MACT,OAAO0C,qBAAQ,GAAG;AAAA,MAElB,UAAA;AAAA,QAAAvE,2BAAAA,IAAC,gBAAa,MAAK,UACjB,UAACC,2BAAA,KAAA4B,mBAAA,EAAK,KAAK,GACT,UAAA;AAAA,UAAA7B,2BAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,YAAW;AAAA,cACX,gBAAe;AAAA,cACf,YAAW;AAAA,cACX,QAAQuE,qBAAQ,EAAE;AAAA,cAClB,OAAOA,qBAAQ,EAAE;AAAA,cAEjB,yCAACiD,MAAW,YAAA,EAAA;AAAA,YAAA;AAAA,UACd;AAAA,UAECxH,2BAAA,IAAA6B,aAAA,MAAA,EAAK,UAAU0C,aAAA,QAAQ,GAAG,GACzB,UAACvE,2BAAA,IAAAuC,aAAA,YAAA,EAAW,WAAU,cAAa,UAAQ,MACxC,yBACH,CAAA,GACF;AAAA,QAAA,EAAA,CACF,EACF,CAAA;AAAA,QAEAtC,2BAAAA,KAAC4B,aAAAA,MAAK,EAAA,KAAK,GACT,UAAA;AAAA,UAAA7B,2BAAAA,IAACyH,2BAAW,cAAW,IAAG,aAAa,GACrC,UAAAzH,2BAAA,IAAC0H,eAAM,EACT,CAAA;AAAA,UAEA1H,2BAAAA,IAACyH,2BAAW,cAAW,IAAG,aAAa,GACrC,UAAAzH,2BAAA,IAACoH,cAAK,EACR,CAAA;AAAA,QAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGN;AAEA,MAAM,sBAAsB1F,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA,cAIzB,IAAI,EAAE;AAAA,aACP,KAAK,EAAE;AAAA;AAAA,cAEN,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAMpD,MAAM,eAAeH,gBAAO,QAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;ACjE5B,MAAM,iBAAiB,CAAC,OAAe,mBAAmB,EAAE;ACe/C,MAAA,yBAAyB,CACpC,QACA,OACA,EAAE,UAAU,YAAY,YAAY,iBACjC;AACH,QAAM,CAAC,YAAY,aAAa,IAAIZ,iBAAM,SAAS,KAAK;AAElD,QAAA,aAAa,CAAC,aAA4B;AAC9C,QAAI,CAAC,YAAY;AACf;AAAA,IACF;AAEA,QAAI,aAAa,MAAM;AACV,iBAAA,QAAQ,GAAG,KAAK;AAAA,IAAA,WAClB,aAAa,QAAQ;AACnB,iBAAA,QAAQ,GAAG,KAAK;AAAA,IAC7B;AAAA,EAAA;AAGF,QAAM,kBAAkB,MAAM;AAC5B,QAAI,YAAY;AACd,UAAI,YAAY;AACd,mBAAW,KAAK;AAAA,MAClB;AACA,oBAAc,KAAK;AAAA,IAAA,OACd;AACL,UAAI,YAAY;AACd,mBAAW,KAAK;AAAA,MAClB;AACA,oBAAc,IAAI;AAAA,IACpB;AAAA,EAAA;AAGF,QAAM,eAAe,MAAM;AACzB,QAAI,YAAY;AACd,oBAAc,KAAK;AAEnB,UAAI,UAAU;AACZ,iBAAS,KAAK;AAAA,MAChB;AAAA,IACF;AAAA,EAAA;AAGI,QAAA,gBAA+D,CAAC,MAAM;AAC1E,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,QAAI,EAAE,QAAQ,SAAS,CAAC,YAAY;AAClC;AAAA,IACF;AAEA,MAAE,eAAe;AAEjB,YAAQ,EAAE,KAAK;AAAA,MACb,KAAK;AAAA,MACL,KAAK;AACa;AAChB;AAAA,MAEF,KAAK;AACU;AACb;AAAA,MAEF,KAAK;AAAA,MACL,KAAK;AACH,mBAAW,MAAM;AACjB;AAAA,MAEF,KAAK;AAAA,MACL,KAAK;AACH,mBAAW,IAAI;AACf;AAAA,IAGJ;AAAA,EAAA;AAGK,SAAA;AACT;ACrDa,MAAA,iBAAiB,CAC5B,QACA;AAAA,EACE,OAAO;AAAA,EACP;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,kBAAkB;AACpB,MACyB;AACnB,QAAA,YAAYA,iBAAM,OAAoB,IAAI;AAEhD,QAAM,CAAC,EAAE,UAAA,GAAa,OAAO,IAAI6G,SAAAA,QAA0D;AAAA,IACzF,QAAQ;AAAA,IACR,QAAQ,SAAS;AACR,aAAA;AAAA,QACL,WAAW,QAAQ,aAAa;AAAA,MAAA;AAAA,IAEpC;AAAA,IACA,MAAMC,OAAM,SAAS;AACf,UAAA,CAAC,UAAU,SAAS;AACtB;AAAA,MACF;AACA,YAAM,YAAYA,MAAK;AACvB,YAAM,SAAS;AAGf,UAAI,cAAc,QAAQ;AACxB;AAAA,MACF;AAEA,UAAI,oBAAoB,WAAW;AAC3B,cAAA,oBAAoB,UAAU,QAAQ,sBAAsB;AAClE,cAAM,gBAAgB,kBAAkB,SAAS,kBAAkB,OAAO;AAEpE,cAAA,eAAe,QAAQ;AACvB,cAAA,eAAe,aAAa,IAAI,kBAAkB;AAGpD,YAAA,YAAY,UAAU,eAAe,cAAc;AACrD;AAAA,QACF;AAGI,YAAA,YAAY,UAAU,eAAe,cAAc;AACrD;AAAA,QACF;AAAA,MACF;AAGA,iBAAW,QAAQ,SAAS;AAC5BA,YAAK,QAAQ;AAAA,IACf;AAAA,EAAA,CACD;AAED,QAAM,CAAC,EAAE,cAAc,SAAS,cAAc,IAAIC,SAAAA,QAAQ;AAAA,IACxD;AAAA,IACA,OAAO;AACL,UAAI,SAAS;AACH;MACV;AAMA,YAAM,EAAE,MAAM,IAAI,UAAU,SAAS,2BAA2B;AAEhE,aAAO,EAAE,OAAO,OAAO,GAAG,KAAK;AAAA,IACjC;AAAA,IACA,MAAM;AACJ,UAAI,OAAO;AACH;MACR;AAAA,IACF;AAAA,IACA,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMT,YAAY,MAAM,KACd,CAAC,YAAY;AACX,aAAO,MAAM,OAAO,QAAQ,QAAA,EAAU;AAAA,IAExC,IAAA;AAAA,IACJ,SAAS,CAAC,aAAa;AAAA,MACrB,YAAY,QAAQ,WAAW;AAAA,IAAA;AAAA,EACjC,CACD;AAEK,QAAA,gBAAgB,uBAAuB,QAAQ,OAAO;AAAA,IAC1D;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAEM,SAAA,CAAC,EAAE,WAAW,YAAY,iBAAiB,WAAW,SAAS,SAAS,cAAc;AAC/F;AC/Ia,MAAA,UAAU,CAAI,UAA4B;AACrD,QAAM,MAAMC,MAAAA;AAEZd,QAAAA,UAAU,MAAM;AACd,QAAI,UAAU;AAAA,EAAA,GACb,CAAC,KAAK,CAAC;AAEV,SAAO,IAAI;AACb;ACVO,MAAM,YAAY;AAAA,EACvB,WAAW;AAAA,EACX,YAAY;AAAA,EACZ,OAAO;AAAA,EACP,cAAc;AAAA,EACd,UAAU;AACZ;ACFA,MAAM,SAAS,CAAI,KAAqB,UAAa;AAC/C,MAAA,OAAO,QAAQ,YAAY;AAC7B,QAAI,KAAK;AAAA,EACA,WAAA,QAAQ,QAAQ,QAAQ,QAAW;AAC3C,QAA4B,UAAU;AAAA,EACzC;AACF;AAMa,MAAA,cAAc,IAAO,SAA2B;AACpD,SAAA,CAAC,SAAY,KAAK,QAAQ,CAAC,QAAQ,OAAO,KAAK,IAAI,CAAC;AAC7D;ACiBA,MAAM,uBAAuB;AAC7B,MAAM,kBAAkB;AA+CxB,MAAM,gBAAgB,CAAC;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AAAA,EACX;AAAA,EACA,MAAAe;AACF,MAA0B;AACxB,QAAM,CAAC,WAAW,YAAY,IAAIjH,iBAAM,SAA6B,EAAE;AACvE,QAAM,CAAC,UAAU,WAAW,IAAIA,iBAAM,SAA0C;AAE1E,QAAA,UAAUA,iBAAM,OAAsB,IAAI;AAC1C,QAAA,eAAeA,iBAAM,OAAyB,IAAI;AAElD,QAAA,WAAWkH,gCAAmB,IAAI;AAElC,QAAA,EAAE,KAAS,IAAA;AAEjB,QAAM,YAAY,mBAAmB;AAC/B,QAAA,yBAAyB,UAAU,UAAU;AAEnD,QAAM,oBAAoBlH,iBAAM;AAAA,IAC9B,MACE,yBAAyB,6BACrB,KAAK,IAAI,wBAAwB,0BAA0B,KACxD,uBAAuB,mBAC1B,uBAAuB,IACvB,KAAK,IAAI,wBAAwB,0BAA0B,KAC1D,uBAAuB;AAAA,IAC9B,CAAC,wBAAwB,0BAA0B;AAAA,EAAA;AAGrD,QAAM,8BAA8B,CAAC,CAAC,iBAAiB,mBAAmB;AAE1E,QAAM0F,WAAU1F,iBAAM;AAAA,IACpB,MACE,KACG,OACA,OAAO,OAAO,EACd,IAAI,CAAC,YAAY;AAAA,MAChB,GAAG;AAAA,MACH,OAAO,OAAO;AAAA,MACd,OAAO,OAAO;AAAA,IAAA,EACd;AAAA,IACN,CAAC,IAAI;AAAA,EAAA;AAGPA,mBAAM,UAAU,MAAM;AACpB,QAAI,0BAA0B,4BAA4B;AACxD,aAAO,YAAY,MAAS;AAAA,IAC9B;AAEM,UAAA,qBAAqB,CAAC,MAAa;AACvC,YAAM,KAAK,EAAE;AACP,YAAA,8BAA+B,GAAG,WAA8B;AAChE,YAAA,kBAAkB,GAAG,eAAe,GAAG;AAEzC,UAAA,GAAG,cAAc,GAAG;AACtB,eAAO,YAAY,QAAQ;AAAA,MAC7B;AAEA,UAAI,oBAAoB,6BAA6B;AACnD,eAAO,YAAY,KAAK;AAAA,MAC1B;AAEA,aAAO,YAAY,YAAY;AAAA,IAAA;AAGjC,UAAM,sBAAsB,cAAc;AAE1C,QAAI,CAAC,mBAAmB,aAAa,UAAU,SAAS,KAAK,qBAAqB;AACnE,mBAAA,QAAQ,iBAAiB,UAAU,kBAAkB;AAAA,IACpE;AAEA,WAAO,MAAM;AACX,UAAI,qBAAqB;AACH,4BAAA,oBAAoB,UAAU,kBAAkB;AAAA,MACtE;AAAA,IAAA;AAAA,KAED,CAAC,oBAAoB,WAAW,4BAA4B,sBAAsB,CAAC;AAEhF,QAAA,iBAAiB,CAAC,WAAqB;AAC3C,QAAI,QAAQ;AACD;IACX;AAAA,EAAA;AAGI,QAAA,iCAAiC,CAAC,UAAkB,iBAAyB;AACjF,QAAI,qBAAqB,YAAY,KAAK,WAAW,UAAU,QAAQ;AACrE,wBAAkB,cAAc,QAAQ;AAAA,IAC1C;AAAA,EAAA;AAGI,QAAA,yBAAyB,QAAQ,UAAU,MAAM;AACjD,QAAA,uBAAuBA,iBAAM;AAEnC,QAAM,iBAAiB,MAAM;AAC3B,yBAAqB,UAAU;AACZ;EAAA;AAGrBA,mBAAM,UAAU,MAAM;AAChB,QAAA,qBAAqB,YAAY,YAAY;AAC/C,mBAAa,EAAE;AAAA,IACjB;AAEA,QACE,qBAAqB,YAAY,cACjC,UAAU,WAAW,wBACrB;AACA,cAAQ,SAAS,aAAa,UAAU,QAAQ,KAAK;AACrD,2BAAqB,UAAU;AAAA,IAAA,WAE/B,qBAAqB,YAAY,cACjC,UAAU,WAAW,wBACrB;AACQ,cAAA,SAAS,aAAa,GAAG,OAAO;AACxC,2BAAqB,UAAU;AAAA,IACjC;AAAA,EAAA,GACC,CAAC,wBAAwB,SAAS,CAAC;AAEhC,QAAA,oBAAoB,GAAG,IAAI;AAG/B,SAAAb,2BAAA;AAAA,IAAC4B,aAAA;AAAA,IAAA;AAAA,MACC,WAAU;AAAA,MACV,KAAK;AAAA,MACL,gBAAe;AAAA,MACf,YAAW;AAAA,MACX,MAAK;AAAA,MAEL,UAAA;AAAA,QAAC5B,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,WAAU,OAAM,YAAW,OAAM,gBAAe,OAAM,KAAK,GAAG,OAAM,QACxE,UAAA;AAAA,UAAC7B,2BAAAA,IAAA,iBAAA,EAAgB,aAAY,QAAO,UAAU+H,SAAQ,IAAI,SAAS,OAAO,OAAM,QAC9E,UAAA/H,2BAAA;AAAA,YAACiI,aAAA;AAAA,YAAA;AAAA,cACC,KAAK;AAAA,cACL,cAAa;AAAA,cACb;AAAA,cACA;AAAA,cACA,MAAM;AAAA,cACN;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,cACA,cAAc,cAAc;AAAA,cAC5B,SAAS,cAAc;AAAA,cACvB,cAAc;AAAA,cACd,kBAAkB,MAAM;AAAA,cACxB;AAAA,cACA,YAAY,MAAM;AACC;cACnB;AAAA,cACA;AAAA,cACA,UAAU,CAAC,eAAe;AACxB,oBAAI,CAAC,YAAY;AACf;AAAA,gBACF;AACkB,kCAAA,KAAK,KAAK,EAAE,KAAK,CAAC,QAAQ,IAAI,GAAG,eAAe,UAAU,CAAE;AAC9E,qCAAqB,UAAU;AAAA,cACjC;AAAA,cACA,mBAAmB,CAAC,SAAS;AAC3B,6BAAa,IAAI;AAAA,cACnB;AAAA,cACA,eAAe,CAAC,UAAU;AACf,yBAAA,MAAM,cAAc,KAAK;AAAA,cACpC;AAAA,cAEC,UAAAzB,SAAQ,IAAI,CAAC,QAAQ;AACpB,uBAAQxG,2BAAAA,IAAA,QAAA,EAAqB,GAAG,IAAA,GAAZ,IAAI,EAAa;AAAA,cAAA,CACtC;AAAA,YAAA;AAAA,UAAA,GAEL;AAAA,UAEC,+BACCA,2BAAA;AAAA,YAAC0E,aAAA;AAAA,YAAA;AAAA,cACC,UAAU,mBAAmB,aAAa,mBAAmB;AAAA,cAC7D,SAAS;AAAA,cACT,SAAS,mBAAmB,aAAa,mBAAmB;AAAA,cAC5D,0CAAYwD,MAAQ,SAAA,EAAA;AAAA,cAEpB,QAAQ;AAAA,cAEP,UAAA;AAAA,YAAA;AAAA,UACH;AAAA,QAAA,GAEJ;AAAA,QAEC,UAAU,SAAS,KACjBjI,2BAAA,KAAA,WAAA,EAAU,mBAAmB,UAC5B,UAAA;AAAA,UAACD,2BAAA,IAAAmI,aAAA,gBAAA,EAAe,IAAI,mBAAoB,UAAoB,qBAAA;AAAA,UAC3DnI,2BAAA,IAAAmI,aAAA,gBAAA,EAAe,aAAU,aAAa,UAAS,UAAA;AAAA,UAEhDnI,2BAAA;AAAA,YAACoI,YAAA;AAAA,YAAA;AAAA,cACC,QAAQ;AAAA,cACR,KAAK;AAAA,cACL,UAAU;AAAA,cACV,WAAW;AAAA,cACX,UAAU,uBAAuB;AAAA,cACjC,UAAU;AAAA,gBACR;AAAA,gBACA,iBAAiB;AAAA,gBACjB,SAAS;AAAA,gBACT;AAAA,gBACA,cAAc;AAAA,gBACd,gBAAgB;AAAA,gBAChB,gBAAgB;AAAA,gBAChB;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA,0BAA0B;AAAA,cAC5B;AAAA,cACA,SAAS,CAAC,UAAU,GAAG,UAAU,KAAK,EAAE,SAAS,IAAI,UAAU,KAAK,EAAE,EAAE;AAAA,cACxE,kBAAiB;AAAA,cAEhB,UAAA;AAAA,YAAA;AAAA,UACH;AAAA,QAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAIR;AAEA,MAAM,kBAAkB1G,gBAAAA,QAAOE,aAAAA,GAAG;AAAA;AAAA;AAIlC,MAAM,YAAYF,gBAAAA,QAAOE,aAAAA,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAkBb,CAAC,EAAE,kBAAkB,MAC9B,sBAAsB,gBAAgB,sBAAsB,QAAQ,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAShE,CAAC,EAAE,kBAAkB,MAC9B,sBAAsB,gBAAgB,sBAAsB,WAAW,IAAI,CAAC;AAAA;AAAA;AAAA;AASlF,MAAM,SAAS,CAAC;AAAA,EACd;AAAA,EACA;AAAA,EACA;AACF,MAAyE;AACjE,QAAA,EAAE,kBAAkBxB,UAAAA;AACpB,QAAA,2BAA2B,aAAa,IAAI,SAAS;AAE3D,MAAI,kBAAkB;AACpB,UAAM,UAAU,qBAAqB;AACrC,UAAM,eAAe;AAAA,MACnB,IAAI,eAAe,oCAAoC;AAAA,MACvD,gBAAgB;AAAA,IAAA;AAElB,UAAM,mBAAmB;AAAA,MACvB,IAAI,eAAe,sCAAsC;AAAA,MACzD,gBAAgB;AAAA,IAAA;AAElB,UAAM,QAAQ,UAAU,cAAc,YAAY,IAAI,cAAc,gBAAgB;AAGlF,WAAAJ,2BAAA,IAACqI,+BAAe,OAAO,GAAG,YAAY,WAAW,yBAC/C,UAAApI,2BAAA,KAAC4B,aACC,MAAA,EAAA,UAAA;AAAA,MAAC7B,2BAAAA,IAAA,cAAA,EAAa,OAAc,QAAkB,CAAA;AAAA,MAC7CA,2BAAA,IAAAuC,aAAA,YAAA,EAAW,UAAQ,MAAE,UAAwB,yBAAA;AAAA,IAAA,EAChD,CAAA,EACF,CAAA;AAAA,EAEJ;AAGE,SAAAvC,+BAACqI,aAAAA,kBAAe,OAAO,GAAG,YAAY,WAAW,yBAC9C,UACH,wBAAA,CAAA;AAEJ;AAEA,MAAM,eAAe3G,gBAAO,QAAA;AAAA;AAAA,WAEjB6C,aAAAA,QAAQ,CAAC,CAAC;AAAA,YACTA,aAAAA,QAAQ,CAAC,CAAC;AAAA,kBACJ,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,sBAC1B,CAAC,EAAE,OAAO,cAC5B,MAAM,OAAO,UAAU,iBAAiB,YAAY,CAAC;AAAA;AAAA;AAoCzD,MAAM,WAAW,CAAC,EAAE,MAAM,OAAO,YAA2B;AACpD,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACE,IAAA;AACJ,QAAM,EAAE,kBAAkB,MAAM,WAAW,OAAO,UAAU,KAAK;AAC3D,QAAA,cAAc,qBAAqB,UAAU,cAAc;AAG/D,SAAAtE,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA,cAAc,OAAO,aAAa,EAAE;AAAA,MACpC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,WACED,2BAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,eAAa,mBAAmB,EAAE;AAAA,UAClC;AAAA,UACA,MAAK;AAAA,UACL,SAAS,MAAM,qBAAqB,UAAU,KAAK,CAAC;AAAA,UACpD,cAAY;AAAA,UAEZ,UAACA,2BAAA,IAAAsI,mBAAA,EAAK,OAAM,QAAO,IAAIf,MAAAA,OAAO;AAAA,QAAA;AAAA,MAChC;AAAA,MAEF,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,QAAQ,oBAAoB;AAAA,MAC5B,OAAO;AAAA,QACL,GAAG;AAAA,QACH,QAAQ,MAAM,UAAU,IAAI;AAAA,QAC5B,QAAQ,MAAM,UAAU,IAAI;AAAA,MAC9B;AAAA,MACA;AAAA,MAEA,UAAA;AAAA,QAAAvH,+BAAC4B,aAAAA,KAAI,EAAA,UAAU,GAAG,YAAY,GAAG,eAAe,GAAG,cAAc,GAC/D,yCAAC2G,sBAAQ,EAAA,aAAa,aAAa,GAAG,EAAE,IACrC,UAAA,OACEvI,2BAAAA,IAAA,cAAA,EAAa,IAAI,MAAO,UAAA,aAAa,IAAG,mCAExCuC,aAAAA,YAAW,EAAA,WAAW,WAAW,eAAe,cAAc,UAAQ,MACpE,UAAa,aAAA,GAAA,CAChB,EAEJ,CAAA,GACF;AAAA,QAEC,mDACEiG,qBAAO,EAAA,SAAS,aAAa,YAAY,OAAO,MAAK,KACpD,UAAAxI,2BAAAA,IAACuC,aAAAA,cAAW,YAAW,QAAO,WAAW,GAAG,WAAW,OACpD,UAA6B,6BAAA,gBAAgB,GAChD,EACF,CAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAIR;AAMA,MAAM,mBAAmBb,gBAAO,QAAA;AAAA;AAAA,YAEpB,CAAC,EAAE,OAAO,SAAS,MACzB,WAAW,MAAM,OAAO,aAAa,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,YAKtD,CAAC,EAAE,OAAO,eAAe,CAAC,YAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAQzE,MAAM,eAAeA,gBAAAA,QAAOsB,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgChC,MAAM,eAAe,CAAC;AAAA,EACpB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,MAAyB;AACvB,QAAM,CAAC,EAAE,WAAW,YAAY,cAAiB,GAAA,aAAa,SAAS,SAAS,cAAc,IAC5F,eAAe,WAAW,CAAC,UAAU;AAAA,IACnC,MAAM,GAAG,UAAU,QAAQ,IAAI,IAAI;AAAA,IACnC;AAAA,IACA,MAAM;AAAA,MACJ,gBAAgB;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,YAAY;AAAA,IACZ,iBAAiB;AAAA,EAAA,CAClB;AAEG,QAAA,eAAe,YAAY,aAAa,OAAO;AAErDlC,mBAAM,UAAU,MAAM;AACpB,mBAAe2H,oCAAe;AAAA,EAAA,GAC7B,CAAC,cAAc,CAAC;AAGjB,SAAAzI,2BAAA;AAAA,IAAC4B,aAAA;AAAA,IAAA;AAAA,MACC;AAAA,MACA,IAAG;AAAA,MACH,KAAK;AAAA,MACL,oBAAkB;AAAA,MAClB,QAAQ,UAAU,eAAe;AAAA,MAEhC,UAAA,aACE5B,2BAAAA,IAAA,yBAAA,CAAA,CAAwB,IAEzBC,2BAAA;AAAA,QAAC4B,aAAA;AAAA,QAAA;AAAA,UACC,YAAY;AAAA,UACZ,eAAe;AAAA,UACf,aAAa,UAAU,IAAI;AAAA,UAC3B,cAAc;AAAA,UACd,WAAS;AAAA,UACT,aAAY;AAAA,UACZ,YAAY,WAAW,eAAe;AAAA,UACtC,gBAAe;AAAA,UACf,KAAK,UAAU,eAAe;AAAA,UAC9B,mBAAiB;AAAA,UAChB,GAAG;AAAA,UAEJ,UAAA;AAAA,YAAC5B,2BAAAA,KAAA,aAAA,EAAY,KAAK,GACf,UAAA;AAAA,cACC,UAAAD,2BAAA;AAAA,gBAACyH,aAAA;AAAA,gBAAA;AAAA,kBACC,aAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,UAAU;AAAA,kBACV,cAAY;AAAA,kBACZ,aAAa;AAAA,kBACb,WAAW;AAAA,kBACX;AAAA,kBAEA,yCAACL,MAAK,MAAA,EAAA;AAAA,gBAAA;AAAA,cAAA,IAEN;AAAA,cACHpH,2BAAAA,IAAA,iBAAA,EAAgB,gBAAe,iBAAiB,SAAS,CAAA;AAAA,YAAA,GAC5D;AAAA,YACC,aAAaA,2BAAA,IAAC4B,kBAAI,EAAA,aAAa,GAAI,UAAU,WAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MAChD;AAAA,IAAA;AAAA,EAAA;AAIR;AAEA,MAAM,0BAA0B,MAC9B5B,2BAAA;AAAA,EAAC4B,aAAA;AAAA,EAAA;AAAA,IACC,YAAY;AAAA,IACZ,eAAe;AAAA,IACf,aAAa;AAAA,IACb,cAAc;AAAA,IACd,WAAS;AAAA,IACT,aAAY;AAAA,IACZ,aAAY;AAAA,IACZ,aAAY;AAAA,IACZ,YAAW;AAAA,IACX,QAAQ,eAAe,eAAe;AAAA,EAAA;AACxC;AAGF,MAAM,cAAcF,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAU/B,MAAM,kBAAkBH,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AC9qB5B,MAAM,kCACX,CAAC,aAAkC,iBACnC,CAAC,gBAAwB;AACjB,QAAA,YAAY,YAAY,MAAM,GAAG;AAEvC,SAAO,UAAU,OAAiB,CAAC,KAAK,cAAc,UAAU;AACxD,UAAA,oBAAoBxB,aAAAA,QAAI,aAAa,GAAG;AACxC,UAAA,sBAAsBA,qBAAI,cAAc;AAAA,MAC5C,GAAG,UAAU,MAAM,GAAG,KAAK;AAAA,MAC3B;AAAA,MACA;AAAA,IAAA,CACD;AAED,QAAI,MAAM,QAAQ,iBAAiB,KAAK,OAAO,wBAAwB,UAAU;AAC/E,YAAM,mBAAmB,kBAAkB;AAAA,QACzC,CAAC,UAAU,MAAM,iBAAiB;AAAA,MAAA;AAGhC,UAAA,KAAK,iBAAiB,SAAU,CAAA;AAE7B,aAAA;AAAA,IACT;AAEA,QAAI,KAAK,YAAY;AAEd,WAAA;AAAA,EACT,GAAG,CAAE,CAAA;AACP;ACjCc,SAAA,gBAAgB,aAAqB,IAAgB;AACnE,SAAO,mCAAmC,WAAW,IAAI,MAAM,EAAE;AACnE;ACeO,MAAM,oBAAoB,CAC/B,UACA,EAAE,eAAe,eAAe,kBAC7B;AACH,QAAM,eAAmC;AAAA,IACvC,GAAG;AAAA;AAAA,IAEH,WAAW,SAAS,aAAa;AAAA,EAAA;AAGnC,MAAI,eAAe;AACjB,iBAAa,OAAO,gBAAgB,aAAa,aAAa,EAAE;AAAA,EAClE;AAEA,eAAa,mBAAmB;AAE5B,MAAA,cAAc,gBAAgB,QAAW;AAC3C,iBAAa,mBAAmB,aAAa,cACzC,mBAAmB,YACnB,mBAAmB;AAAA,EACzB;AAEO,SAAA;AACT;AAUa,MAAA,qBAAqB,CAChC,WACA,SACG;AACI,SAAA,CAAC,GAAG,SAAS,EAAE,IAAI,CAAC,aAAa,kBAAkB,UAAU,IAAI,CAAC;AAC3E;AC7BA,MAAM,cAAc,CAAC,WAAkB,CAAA,GAAI,EAAE,UAAU,aAA8B;AACnF,QAAM,CAAC,cAAc,eAAe,IAAIqI,MAAA,SAAS,CAAE,CAAA;AACnD,QAAM,CAAC,aAAa,cAAc,IAAIA,eAAS,CAAC;AAC1C,QAAA,EAAE,KAAArI,SAAQC,aAAAA;AAEhB,QAAM,EAAE,QAAQ,iBAAiB,mBAAA,IAAuB;AAExD,QAAM,eAAeqI,WAAA;AAAA,IACnB,CAAC,YAAY,GAAG,QAAQ;AAAA,IACxB,OAAO,EAAE,YAAY,QAAQ;AACvB,UAAA;AACF,cAAM,EAAE,MAAAjI,MAAAA,IAAS,MAAML,KAA+C,UAAU,UAAU;AAAA,UACxF,QAAQ;AAAA,YACN,GAAI,SAAS,cAAc,CAAC;AAAA,YAC5B,MAAM;AAAA,UACR;AAAA,QAAA,CACD;AAED,uBAAe,SAAS;AAEjBK,eAAAA;AAAAA,eACA,KAAK;AACL,eAAA;AAAA,MACT;AAAA,IACF;AAAA,IACA;AAAA,MACE,WAAW;AAAA,MACX,SAAS,SAAS;AAAA,MAClB,iBAAiB,UAAU;AACnB,cAAA,mBAAmB,YAAY,EAAE,gBAAgB;AAEvD,YACE,CAAC;AAAA,QACD;AAAA,QACA,UAAU,WAAW,QAAQ,UAAU,WAAW,WAClD;AACO,iBAAA;AAAA,QACT;AAGO,eAAA,SAAS,WAAW,OAAO;AAAA,MACpC;AAAA,MACA,QAAQ,CAACA,WAAU;AAAA,QACjB,GAAGA;AAAAA,QACH,OAAOA,MAAK,MAAM,IAAI,CAAC,SAAS;AAC9B,cAAI,CAAC,MAAM;AACF,mBAAA;AAAA,UACT;AAEA,cAAI,oBAA0D,CAAA;AAI1D,cAAA,UAAU,QAAQ,KAAK,MAAM;AACX,gCAAA,CAAC,KAAK,IAAI;AAAA,UACrB,WAAA,aAAa,QAAQ,KAAK,SAAS;AAC5C,gCAAoB,CAAC,GAAG,KAAK,OAAO,EAAE,QAAQ;AAAA,UAChD;AAEO,iBAAA;AAAA,YACL,YAAY,gBAAgB,OAAO,KAAK,aAAa;AAAA,YACrD,SAAS;AAAA,UAAA;AAAA,QACX,CACD;AAAA,MAAA;AAAA,IAEL;AAAA,EAAA;AAGI,QAAA,EAAE,SAAa,IAAA;AAErB,QAAM,EAAE,QAAQ,MAAM,eAAe,gBAAgB;AAErDsG,QAAAA,UAAU,MAAM;AAMd,QAAI,YAAY,WAAW,eAAe,eAAe,WAAW,WAAW;AAC/D,oBAAA;AAAA,QACZ,WAAW,cAAc;AAAA,MAAA,CAC1B;AAAA,IACH;AAAA,EAAA,GACC,CAAC,UAAU,aAAa,eAAe,aAAa,MAAM,CAAC;AAExD,QAAA,0BAA0B5F,4BAAe,eAAe;AAE9D4F,QAAAA,UAAU,MAAM;AACV,QAAA,WAAW,aAAa,QAAQ,KAAK,OAAO,GAAG,EAAE,GAAG,WAAW,yBAAyB;AAE1F,YAAM,oBAAoB;AAAA,QACxB,KAAK,MAAM,GAAG,EAAE,GAAG,WAAW,CAAC;AAAA,QAC/B;AAAA,MAAA;AAIF,8BAAwB,iBAAiB;AAAA,IAC3C;AAAA,EAGC,GAAA,CAAC,QAAQ,yBAAyB,IAAI,CAAC;AAE1C,QAAM,YAAY2B,WAAA;AAAA,IAChB,CAAC,YAAY,GAAG,UAAU,UAAU,KAAK,UAAU,YAAY,CAAC;AAAA,IAChE,OAAO,EAAE,YAAY,QAAQ;AACvB,UAAA;AACF,cAAM,EAAE,MAAAjI,MAAAA,IAAS,MAAML,KAAgD,OAAO,UAAU;AAAA,UACtF,QAAQ;AAAA,YACN,GAAI,OAAO,cAAc,CAAC;AAAA,YAC1B,GAAG;AAAA,YACH,MAAM;AAAA,UACR;AAAA,QAAA,CACD;AAEMK,eAAAA;AAAAA,eACA,KAAK;AACL,eAAA;AAAA,MACT;AAAA,IACF;AAAA,IACA;AAAA,MACE,SAAS,OAAO,KAAK,YAAY,EAAE,SAAS;AAAA,MAC5C,iBAAiB,UAAU;AAEvB,YAAA,CAAC,UAAU,cACV,SAAS,cAAc,SAAS,WAAW,QAAQ,SAAS,WAAW,WACxE;AACO,iBAAA;AAAA,QACT;AAGO,eAAA,SAAS,WAAW,OAAO;AAAA,MACpC;AAAA,IACF;AAAA,EAAA;AAGF,QAAM,YAAY,CAAC,MAAc8F,WAAkB,CAAA,MAAO;AACxC,oBAAA;AAAA,MACd,GAAGA;AAAA,MACH,IAAI;AAAA,MACJ,SAAS;AAAA,IAAA,CACV;AAAA,EAAA;AAGH,SAAO,EAAE,WAAW,cAAc,QAAQ,WAAW,UAAU;AACjE;AC1KO,MAAM,gBAAgB,CAC3B,wBAAwC,IACxC,uBAAuC,CAAA,MACmC;AAC1E,QAAM,YAAY,sBAAsB,OAA6B,CAAC,KAAK,aAAa;AAClF,QAAA,CAAC,qBAAqB,KAAK,CAAC,gBAAgB,YAAY,OAAO,SAAS,EAAE,GAAG;AAC/E,aAAO,CAAC,GAAG,KAAK,SAAS,EAAE;AAAA,IAC7B;AAEO,WAAA;AAAA,EACT,GAAG,CAAE,CAAA;AAEL,QAAM,eAAe,qBAAqB,OAA6B,CAAC,KAAK,aAAa;AACpF,QAAA,CAAC,sBAAsB,KAAK,CAAC,gBAAgB,YAAY,OAAO,SAAS,EAAE,GAAG;AAChF,aAAO,CAAC,GAAG,KAAK,SAAS,EAAE;AAAA,IAC7B;AAEO,WAAA;AAAA,EACT,GAAG,CAAE,CAAA;AAEE,SAAA,CAAC,WAAW,YAAY;AACjC;AClBO,MAAM,yBAAyB,CACpC,WACA,EAAE,oBACC;AACG,QAAA,EAAE,KAAS,IAAA;AACjB,QAAM,EAAE,QAAQ,CAAA,MAAO,QAAQ,CAAA;AAExB,SAAA;AAAA,IACL,GAAG;AAAA,IACH,MAAM,MACH;AAAA,MAAI,CAAC,UACH,MAAM,WAAW,CAAI,GAAA;AAAA,QAAI,CAAC,aACzB,kBAAkB,UAAU,EAAE,eAAe,eAAe,OAAO,aAAa,IAAI;AAAA,MACtF;AAAA,IAAA,EAED,OAAO,OAAO,EACd,KAAK;AAAA,EAAA;AAEZ;ACJA,MAAM,qBAAqB;AAAA,EACzB,OAAO;AAAA,EACP,WAAW;AACb;AAEA,MAAM,uBAAuB;AAE7B,MAAM,4BAA4B;AAwBlC,MAAM,2BAA2B,CAAC;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,EAAE,eAAe,2BAAAoC,6BAA4B,MAAM;AAAA,EAC/D;AAAA,EACA;AAAA,EACA,MAAAb;AAAA,EACA;AACF,MAAqC;AAC7B,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,MACEc,aAAyB,yBAAA;AAOvB,QAAA,EAAE,WACNxF,eAAA;AAAA,IACE;AAAA,OACG;AAEP,QAAM,EAAE,OAAA,IAAW,UAAU;AACvB,QAAA,iBAAiB,QAAQ,MAAM;AAC/B,QAAA,sBAAsB,QAAQ,YAAY;AAE1C,QAAA,iBAAiBvC,iBAAM,QAAQ,MAAM;AACzC,QAAI,6BAA6B,MAAM;AAC9B,aAAA;AAAA,IACT;AAEM,UAAA,gBAAgB,kBAAkB,4BAA4B;AAE7D,WAAA,cAAc,SAAS,IAAI;AAAA,EAAA,GACjC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAEK,QAAA,kBAAkBA,iBAAM,QAAQ,MAAM;AAC1C,QAAI,0BAA0B;AACrB,aAAA;AAAA,IACT;AAEM,UAAA,gBAAgB,kBAAkB,CAAK,IAAA;AAEtC,WAAA,cAAc,SAAS,IAAI;AAAA,KACjC,CAAC,iBAAiB,0BAA0B,MAAM,uBAAuB,CAAC;AAEvE,QAAA,gBAAgB,KAAK,MAAM,GAAG;AAC9B,QAAA,cAAc,eAAeT,qBAAI,cAAc,cAAc,MAAM,GAAG,EAAE,CAAC,GAAG,KAAK;AAEjF,QAAA,WAAW,UAAU,aAAa;AAGlC,QAAA,wBAAwBS,iBAAM,QAAQ,MAAM;AAC5C,QAAA,mBAAmB,CAAC,QAAQ;AACvB,aAAA;AAAA,IACT;AAEA,QAAI,cAAc;AAIT,aAAA,cACH,8BAA8B,YAAY,IAAI,WAAW,IAAI,cAAc,GAAG,EAAE,CAAC,KACjF;AAAA,IACN;AAEO,WAAA,8BAA8B,IAAI,IAAI,QAAQ,IAAI,KAAK,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;AAAA,EAAA,GAC9E,CAAC,iBAAiB,QAAQ,cAAc,MAAM,UAAU,MAAM,aAAa,aAAa,CAAC;AAGtF,QAAA,yBAAyBA,iBAAM,QAAQ,MAAM;AACjD,QAAI,cAAc;AACT,aAAA,8BAA8B,YAAY,IAAI,KAAK,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;AAAA,IAC7E;AAEO,WAAA,8BAA8B,IAAI,IAAI,KAAK,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;AAAA,EAClE,GAAA,CAAC,cAAc,MAAM,IAAI,CAAC;AAE7B,QAAM,CAAC,UAAU,WAAW,IAAIA,iBAAM,SAAS,EAAE;AAC3C,QAAA,EAAE,kBAAkBV,UAAAA;AAEpB,QAAA,YAAY,KAAK,MAAM,GAAG;AAEhC,QAAM,kBAAkB,gCAAgC,aAAa,YAAY,EAAE,IAAI;AAEvF,QAAM,4BAA4BC,aAAA,QAAI,cAAc,MAAM,CAAE,CAAA;AAEtD,QAAA,kBAAkB,KAAK,KAAKA,qBAAI,aAAa,MAAM,EAAE,EAAE,SAAS,oBAAoB;AAE1F,QAAM,EAAE,WAAW,QAAQ,UAAc,IAAA;AAAA,IACvC,CAAC,MAAM,gBAAgB,KAAK,GAAG,GAAG,aAAa,IAAI,aAAa;AAAA,IAChE;AAAA,MACE,UAAU;AAAA,QACR,SAAS,CAAC,CAAC;AAAA,QACX,UAAU;AAAA,QACV,UAAU;AAAA,QACV,YAAY;AAAA,UACV,GAAG;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,QACA,OAAO,OAAO;AACG,yBAAA;AAAA,YACb,QAAQ;AAAA,cACN,iBAAiB,CAAC,eAAe,GAAG,eAAe;AAAA,cACnD,kBAAkB,CAAC,gBAAgB,GAAG,SAAS;AAAA,cAC/C;AAAA,YACF;AAAA,UAAA,CACD;AAAA,QACH;AAAA,QACA,oBAAoB;AAAA,UAClB,eAAe,UAAU;AAAA,UACzB,eAAeuI;AAAA,UACf;AAAA,QACF;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,YAAY;AAAA,UACV,GAAG;AAAA;AAAA,UAEH,UACE,mBAAmB,iBACf,SACA,sBACA,cACA;AAAA,UACN,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAGF,QAAM,UAAU,aAAa,YAAY,EAAE,SAAS,OAAO;AAC3D,QAAM,gBAAgB;AAAA,IACpB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,EACA,SAAS,YAAY;AAEjB,QAAA,aAAa9H,iBAAM,QAAQ,MAAM;AACrC,QAAI,SAAS;AACJ,aAAA;AAAA,IACT;AAEA,QAAI,CAAC,iBAAiB;AACZ,aAAA,CAAC,kBAAkB,mBAAoB,CAAC;AAAA,IAClD;AAEA,WAAO,CAAC;AAAA,EAAA,GACP,CAAC,SAAS,iBAAiB,UAAU,gBAAgB,eAAe,CAAC;AAElE,QAAA,wBAAwB,CAAC,aAAiD;AAIxE,UAAA,qBAAqB,kBAAkB,UAAU;AAAA,MACrD,eAAe,UAAU;AAAA,MACzB,eAAe8H;AAAA,MACf;AAAA,IAAA,CACD;AAED,sBAAkB,EAAE,MAAM,OAAO,oBAAoB,cAAe,CAAA;AAAA,EAAA;AAGhE,QAAA,2BAA2B,CAAC,aAAiC;AACjE,yBAAqB,EAAE,MAAM,IAAI,SAAS,GAAI,CAAA;AAAA,EAAA;AAGhD,QAAM,yBAAyB,MAAM;AACnC,cAAU,cAAc;AAAA,EAAA;AAGpB,QAAA,eAAe,CAAC,OAAO,OAAO;AAC5B,UAAA,CAAC,WAAW,YAAY,IAAI;AAAA,MAChC;AAAA,MACAvI,aAAA,QAAI,aAAa,IAAI;AAAA,IAAA;AAGvB,cAAU,MAAM;AAAA,MACd,cAAc;AAAA,MACd,WAAW;AAAA,IAAA,CACZ;AAAA,EAAA;AAGH,QAAM,mBAAmB,MAAM;AAC7B,WAAO,cAAc;AAAA,EAAA;AAGjB,QAAA,aAAa,CAAC,UAAkB,GAAG,QAAQ,CAAC,OAAO,0BAA0B,MAAM;AAEnF,QAAA,wBAAwB,CAAC,UAAkB,aAAqB;AAC9D,UAAA,OAAO,0BAA0B,QAAQ;AAE/C;AAAA,MACE;AAAA,QACE;AAAA,UACE,IAAI,eAAe,aAAa;AAAA,UAChC,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,UACE,MAAM,KAAK,aAAa,KAAK;AAAA,UAC7B,UAAU,WAAW,QAAQ;AAAA,QAC/B;AAAA,MACF;AAAA,IAAA;AAGgB,sBAAA;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,iBAAiB,CAAC,UAAkB;AAClC,UAAA,OAAO,0BAA0B,KAAK;AAE5C;AAAA,MACE;AAAA,QACE;AAAA,UACE,IAAI,eAAe,eAAe;AAAA,UAClC,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,UACE,MAAM,KAAK,aAAa,KAAK;AAAA,UAC7B,UAAU,WAAW,KAAK;AAAA,QAC5B;AAAA,MACF;AAAA,IAAA;AAAA,EACF;AAGI,QAAA,iBAAiB,CAAC,UAAkB;AAClC,UAAA,OAAO,0BAA0B,KAAK;AAE5C;AAAA,MACE;AAAA,QACE;AAAA,UACE,IAAI,eAAe,eAAe;AAAA,UAClC,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,UACE,MAAM,KAAK,aAAa,KAAK;AAAA,UAC7B,UAAU,WAAW,KAAK;AAAA,QAC5B;AAAA,MACF;AAAA,IAAA;AAAA,EACF;AAGI,QAAA,eAAe,CAAC,UAAkB;AAChC,UAAA,OAAO,0BAA0B,KAAK;AAE5C;AAAA,MACE;AAAA,QACE;AAAA,UACE,IAAI,eAAe,iBAAiB;AAAA,UACpC,gBAAgB;AAAA,QAClB;AAAA,QACA;AAAA,UACE,MAAM,KAAK,aAAa,KAAK;AAAA,QAC/B;AAAA,MACF;AAAA,IAAA;AAAA,EACF;AAIC,MAAA,CAAC,kBAAkB,mBACnB,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,iBACzC;AACA,WAAQL,2BAAAA,IAAA8I,aAAAA,iBAAA,EAAgB,MAAY,WAAsB,YAA0B,CAAA;AAAA,EACtF;AAYA,QAAM,wBAAwB,0BAA0B;AACxD,QAAM,wBAAwBzI,qBAAI,aAAa,eAAe,KAAK,CAAI,GAAA;AACvE,QAAM,2BAA2B,UAAU,MAAM,MAAM,CAAC,GAAG,YAAY,SAAS;AAK1E,QAAA,iBACJ,CAAC,UAAU,QAAQ,0BAA0B,uBACzC,wBACA,wBAAwB,uBAAuB;AAGnD,SAAAL,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA,YAAY,CAAC;AAAA,MACb;AAAA,MACA,UAAU;AAAA,MACV,qBAAqB,cAAc;AAAA,QACjC,IAAI,eAAe,iDAAiD;AAAA,QACpE,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD,IAAI;AAAA,MACJ,OAAO,GAAG,cAAc;AAAA,QACtB,IAAI,UAAU;AAAA,QACd,gBAAgB,UAAU;AAAA,MAAA,CAC3B,CAAC,IAAI,iBAAiB,IAAI,IAAI,cAAc,MAAM,EAAE;AAAA,MACrD;AAAA,MACA,eACE,CAAC,mBAAmB,iBAChB,cAAc;AAAA,QACZ,IAAI,eAAe,mBAAmB;AAAA,QACtC,gBAAgB;AAAA,MACjB,CAAA,IACD;AAAA,MAEN,yBAAyB,cAAc;AAAA,QACrC,IAAI,eAAe,qBAAqB;AAAA,QACxC,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD,qBAAqB,cAAc;AAAA,QACjC,IAAI,eAAe,kBAAkB;AAAA,QACrC,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD;AAAA,MACA,gBAAgB,cAAc;AAAA,QAC5B,IAAI,eAAe,oBAAoB;AAAA,QACvC,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD;AAAA,MACA,oBAAoB,cAAc;AAAA,QAChC,IAAI,eAAe,uBAAuB;AAAA,QAC1C,gBAAgB;AAAA,MAAA,CACjB;AAAA,MACD,4BAA4B;AAAA,MAC5B,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,mBAAmB;AAAA,MACnB,sBAAsB;AAAA,MACtB,oBAAoB;AAAA,MACpB,mBAAmB;AAAA,MACnB,UAAU,CAAC,SAAS,aAAa,IAAI;AAAA,MACrC,kBAAkB,MAAM,iBAAiB;AAAA,MACzC,aAAa;AAAA,QACX,eAAe;AAAA,UACb,IAAI,eAAe,cAAc;AAAA,UACjC,gBAAgB;AAAA,QAClB;AAAA,MACF;AAAA,MACA,8BAA8B;AAAA,QAC5B,CAAC,mBAAmB,KAAK,GAAG,cAAc;AAAA,UACxC,IAAI,eAAe,iCAAiC;AAAA,UACpD,gBAAgB;AAAA,QAAA,CACjB;AAAA,QAED,CAAC,mBAAmB,SAAS,GAAG,cAAc;AAAA,UAC5C,IAAI,eAAe,qCAAqC;AAAA,UACxD,gBAAgB;AAAA,QAAA,CACjB;AAAA,MACH;AAAA,MACA,WAAW+I,cAAA;AAAA,QACT,EAAE,GAAG,WAAW,MAAM,0BAA0B;AAAA,QAChD;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA;AAAA,MACA,eAAe,uBAAuB,QAAQ;AAAA,QAC5C,eAAe,UAAU;AAAA,MAAA,CAC1B;AAAA,MACD,MAAAhB;AAAA,IAAA;AAAA,EAAA;AAGN;ACnbA,MAAM,sBAAsB,CAAC,EAAE,QAAQ,gBAAgB,YAAsC;AACrF,QAAA,EAAE,kBAAkB3H,UAAAA;AAE1B,QAAM,eAAe;AAAA,IACnB,CAAC,mBAAmB,KAAK,GAAG,cAAc;AAAA,MACxC,IAAI,eAAe,iCAAiC;AAAA,MACpD,gBAAgB;AAAA,IAAA,CACjB;AAAA,IAED,CAAC,mBAAmB,SAAS,GAAG,cAAc;AAAA,MAC5C,IAAI,eAAe,qCAAqC;AAAA,MACxD,gBAAgB;AAAA,IAAA,CACjB;AAAA,EAAA;AAGH,QAAM,cAAc,WAAW,mBAAmB,QAAQ,cAAc;AAExE,SACGJ,2BAAAA,IAAA4B,aAAAA,KAAA,EAAI,OAAO,EAAE,SACZ,UAAA3B,2BAAA;AAAA,IAAC4B,aAAA;AAAA,IAAA;AAAA,MACC,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,aAAa;AAAA,MACb,cAAc;AAAA,MACd,WAAS;AAAA,MACT,aAAa;AAAA,MACb,YAAW;AAAA,MACX,aAAY;AAAA,MACZ,gBAAe;AAAA,MAEf,UAAA;AAAA,QAAC5B,2BAAAA,KAAA,aAAA,EAAY,KAAK,GAChB,UAAA;AAAA,UAAAD,2BAAAA,IAACyH,2BAAW,cAAW,IAAG,aAAa,GACrC,UAAAzH,2BAAA,IAACoH,cAAK,EACR,CAAA;AAAA,UACCnH,2BAAA,KAAA,iBAAA,EAAgB,UAAS,QAAO,gBAAe,iBAC9C,UAAA;AAAA,YAACD,2BAAAA,IAAA4B,aAAAA,KAAA,EAAI,UAAU,GAAG,YAAY,GAAG,eAAe,GAAG,cAAc,GAC/D,UAAA5B,2BAAA,IAAC,gBAAa,MAAK,IACjB,yCAACuC,aAAW,YAAA,EAAA,WAAU,cAAa,UAAQ,MACxC,UACH,eAAA,CAAA,EAAA,CACF,EACF,CAAA;AAAA,YACC,yCACEiG,qBAAO,EAAA,SAAS,aAAa,YAAY,OAAO,MAAK,KACpD,UAAAxI,2BAAAA,IAACuC,aAAAA,cAAW,YAAW,QAAO,WAAW,GAAG,WAAW,OACpD,UAAa,aAAA,MAAM,GACtB,EACF,CAAA;AAAA,UAAA,GAEJ;AAAA,QAAA,GACF;AAAA,QACCvC,+BAAA4B,aAAAA,KAAA,EAAI,aAAa,GAChB,yCAAC,kBAAiB,EAAA,MAAK,UACrB,UAAA5B,2BAAA,IAACsI,qBAAK,OAAM,QAAO,IAAIf,MAAA,MAAA,CAAO,EAChC,CAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAEJ,EAAA,CAAA;AAEJ;AC9DA,MAAM,WAAW,MAAM;AACrB,QAAM,CAAC,QAAQ,SAAS,IAAIzG,iBAAM,SAAS,EAAE;AAC7C,QAAM,EAAE,eAAe,OAAO,IAAIV,UAAQ,QAAA;AAC1C,QAAM,sBAAsB;AAAA,IAC1B,CAAC,UAAU,MAAM,qBAAqB,EAAE;AAAA,EAAA;AAE1C,QAAM,kBAAkB,iBAAiB,CAAC,UAAU,MAAM,qBAAqB,EAAE,eAAe;AAEhG,QAAM,EAAE,WAAA,IAAe4I,aAAA,UAAU,QAAQ;AAAA,IACvC,aAAa;AAAA,EAAA,CACd;AAEK,QAAA,YAAYC,yBAAY,QAAQ;AAAA,IACpC,aAAa;AAAA,EAAA,CACd;AAED,QAAM,OAAOnI,iBAAM;AAAA,IACjB,MACE;AAAA,MACE;AAAA,QACE,IAAI;AAAA,QACJ,OAAO,cAAc;AAAA,UACnB,IAAI,eAAe,sCAAsC;AAAA,UACzD,gBAAgB;AAAA,QAAA,CACjB;AAAA,QACD,YAAY;AAAA,QACZ,OAAO;AAAA,MACT;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO,cAAc;AAAA,UACnB,IAAI,eAAe,kCAAkC;AAAA,UACrD,gBAAgB;AAAA,QAAA,CACjB;AAAA,QACD,YAAY;AAAA,QACZ,OAAO;AAAA,MACT;AAAA,IAAA,EACA,IAAI,CAAC,aAAa;AAAA,MAClB,GAAG;AAAA,MACH,OAAO,QAAQ,MAIZ,OAAO,CAAC,SAAS,WAAW,KAAK,OAAO,MAAM,CAAC,EAI/C,KAAK,CAAC,GAAG,MAAM,UAAU,QAAQ,EAAE,OAAO,EAAE,KAAK,CAAC,EAIlD,IAAI,CAAC,SAAS;AACN,eAAA;AAAA,UACL,GAAG;AAAA,UACH,OAAO,cAAc,EAAE,IAAI,KAAK,OAAO,gBAAgB,KAAK,OAAO;AAAA,QAAA;AAAA,MACrE,CACD;AAAA,IAAA,EACH;AAAA,IACJ,CAAC,qBAAqB,QAAQ,iBAAiB,YAAY,eAAe,SAAS;AAAA,EAAA;AAGrF,QAAM,cAAc,MAAM;AACxB,cAAU,EAAE;AAAA,EAAA;AAGd,QAAM,qBAAqB,CAAC,EAAE,QAAQ,EAAE,cAA6C;AACnF,cAAU,KAAK;AAAA,EAAA;AAGjB,QAAM,QAAQ,cAAc;AAAA,IAC1B,IAAI,eAAe,aAAa;AAAA,IAChC,gBAAgB;AAAA,EAAA,CACjB;AAGC,SAAAb,2BAAA,KAACiJ,GAAO,QAAA,EAAA,WAAW,OACjB,UAAA;AAAA,IAAAlJ,2BAAA;AAAA,MAACmJ,GAAA;AAAA,MAAA;AAAA,QACC;AAAA,QACA,YAAU;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,SAAS;AAAA,QACT,aAAa,cAAc;AAAA,UACzB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB;AAAA,MAAA;AAAA,IACH;AAAA,IACCnJ,2BAAA,IAAAoJ,GAAA,gBAAA,EACE,UAAK,KAAA,IAAI,CAAC,YAAY;AAEnB,aAAApJ,2BAAA;AAAA,QAACqJ,GAAA;AAAA,QAAA;AAAA,UAEC,OAAO,QAAQ;AAAA,UACf,YAAY,QAAQ,MAAM,OAAO,SAAS;AAAA,UAEzC,UAAQ,QAAA,MAAM,IAAI,CAAC,SAAS;AAC3B,kBAAMC,UAAS,KAAK,SAAS,IAAI,KAAK,MAAM,KAAK;AAEjD;AAAA;AAAA,cAEGtJ,2BAAA,IAAAuJ,GAAA,YAAA,EAAW,IAAItG,eAAA,SAAwB,IAAI,GAAG,KAAK,EAAE,GAAGqG,OAAM,IAC5D,UAAK,KAAA,MAAA,GADsB,KAAK,GAEnC;AAAA;AAAA,UAAA,CAEH;AAAA,QAAA;AAAA,QAbI,QAAQ;AAAA,MAAA;AAAA,IAgBlB,CAAA,GACH;AAAA,EACF,EAAA,CAAA;AAEJ;AC7HA,MAAM,gBAAgBxI,iBAAM,cAEzB;AAAA,EACD,aAAa,MAAM,QAAQ,QAAQ;AACrC,CAAC;ACaD,MAAM,iCAAE0I,iCAA+B,2BAAAC,4BAA8B,IAAA;AAgBrE,MAAM,4BAA4B,MAAM;AACtC,QAAM,WAAW;AACjB,QAAM,qBAAqBlJ,aAAAA;AAC3B,QAAM,QAAQ,iBAAiB,CAACmJ,WAAUA,OAAM,qBAAqB,CAAC;AAEhE,QAAA,EAAE,mBAAmBC,aAAAA;AACrB,QAAA,EAAE,qBAAqBC,aAAAA;AACvB,QAAA,EAAE,iBAAiBC,aAAAA;AACnB,QAAA,EAAE,kBAAkBzJ,UAAAA;AACpB,QAAA,EAAE,KAAAC,SAAQC,aAAAA;AAEV,QAAA,eAAewH,MAAAA,OAAO,YAAY;AAC7B,aAAA;AAAA,MACP,MAAM;AAAA,IAAA,CACP;AAEG,QAAA;AACI,YAAA;AAAA,QACJ,MAAM;AAAA,UACJ,MAAM,EAAE,YAAY,cAAc,QAAQ,WAAW;AAAA,QACvD;AAAA,MAAA,IACE,MAAMzH,KAAyC,uBAAuB;AAC1E;AAAA,QACE,cAAc;AAAA,UACZ,IAAI,eAAe,yBAAyB;AAAA,UAC5C,gBAAgB;AAAA,QAAA,CACjB;AAAA,MAAA;AAGG,YAAA;AAAA,QACJ,MAAM,EAAE,MAAM,0BAA0B;AAAA,UACtC,MAAMA;AAAA,QACR;AAAA,MAAA;AAWF,YAAM,EAAE,gBAAgB,qBAAqB,YAAY,gBAAA,IAAoB,OAAO;AAAA,QAIlF,CAAC,KAAK,UAAU;AACd,cAAI,MAAM,IAAI,EAAE,KAAK,KAAK;AACnB,iBAAA;AAAA,QACT;AAAA,QACA;AAAA,UACE,gBAAgB,CAAC;AAAA,UACjB,YAAY,CAAC;AAAA,QACf;AAAA,MAAA;AAGF,YAAM,6BAA6B;AAAA,QACjC;AAAA,QACA;AAAA,QACA;AAAA,MAAA;AAGI,YAAA,yBAAyB,cAAc,iBAAiB,aAAa;AAGrE,YAAA,iCAAiC,MAAM,QAAQ;AAAA,QACnD,2BAA2B;AAAA,UAAI,CAAC,EAAE,aAAAuG,aAChC,MAAAkD,4BAAe,gBAAgBlD,YAAW;AAAA,QAC5C;AAAA,MAAA;AAEF,YAAM,gCAAgC,2BAA2B;AAAA,QAC/D,CAAC,GAAG,UAAU,+BAA+B,KAAK;AAAA,MAAA;AAI9C,YAAA,6BAA6B,MAAM,QAAQ;AAAA,QAC/C,uBAAuB,IAAI,CAAC,EAAE,aAAAA,aAAkB,MAAAkD,4BAAe,gBAAgBlD,YAAW,CAAC;AAAA,MAAA;AAE7F,YAAM,4BAA4B,uBAAuB;AAAA,QACvD,CAAC,GAAG,UAAU,2BAA2B,KAAK;AAAA,MAAA;AAGhD,YAAM,EAAE,QAAA,IAAY,iBAAiB4C,iCAA+B;AAAA,QAClE,SAAS;AAAA,QACT;AAAA,MAAA,CACD;AACD,YAAM,EAAE,QAAA,IAAY,iBAAiBC,6BAA2B;AAAA,QAC9D,SAAS;AAAA,QACT;AAAA,MAAA,CACD;AAEQ,eAAA;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,UACJ,+BAA+B;AAAA,UAC/B,2BAA2B;AAAA,UAC3B,oBAAoB;AAAA,UACpB;AAAA,UACA;AAAA,QACF;AAAA,MAAA,CACD;AAAA,aACM,KAAK;AACZ,cAAQ,MAAM,GAAG;AAEE,yBAAA,EAAE,MAAM,WAAW,SAAS,EAAE,IAAI,wBAAwB;AAAA,IAC/E;AAAA,EAAA,CACD;AAEDzC,QAAAA,UAAU,MAAM;AACd,iBAAa,QAAQ;AAErB,WAAO,MAAM;AACF,eAAA;AAAA,QACP,MAAM;AAAA,MAAA,CACP;AAAA,IAAA;AAAA,EACH,GACC,CAAC,UAAU,kBAAkB,CAAC;AAEjC,SAAO,EAAE,GAAG,OAAO,aAAa,aAAa,QAAQ;AACvD;AAEA,MAAM,gBAAgB,CACpB,OACA,MACA,iBAAmF,CAAA,MAChF;AACI,SAAA,MACJ,OAAO,CAAC,SAAS,KAAK,WAAW,EACjC,IAAI,CAAC,SAAS;AACb,UAAM,6BAA6B;AAAA,MACjC,EAAE,QAAQ,2CAA2C,SAAS,KAAK,IAAI;AAAA,MACvE,EAAE,QAAQ,yCAAyC,SAAS,KAAK,IAAI;AAAA,IAAA;AAEvE,UAAM,yBAAyB;AAAA,MAC7B,EAAE,QAAQ,yCAAyC,SAAS,KAAK,IAAI;AAAA,IAAA;AAEjE,UAAAJ,eACJ,SAAS,oBAAoB,6BAA6B;AAEtD,UAAA,2BAA2B,eAAe,KAAK,CAAC,EAAE,IAAI,MAAM,QAAQ,KAAK,GAAG;AAElF,QAAI,SAAS;AAEb,QAAI,0BAA0B;AAC5B,YAAM,eAAe;AAAA,QACnB,MAAM;AAAA,QACN,UAAU,yBAAyB,SAAS;AAAA,QAC5C,MAAM,GAAG,yBAAyB,SAAS,aAAa,IAAI,yBAAyB,SAAS,gBAAgB;AAAA,MAAA;AAGhH,eAASmD,GAAU,UAAA,cAAc,EAAE,QAAQ,MAAO,CAAA;AAAA,IACpD;AAEO,WAAA;AAAA,MACL,aAAAnD;AAAA,MACA;AAAA,MACA,MAAM,KAAK;AAAA,MACX,OAAO,KAAK,KAAK;AAAA,MACjB,IAAI,oBAAoB,KAAK,IAAI,IAAI,KAAK,GAAG;AAAA,MAC7C,KAAK,KAAK;AAAA;AAAA,MAEV,MAAM,KAAK;AAAA,MACX,aAAa,KAAK;AAAA,IAAA;AAAA,EACpB,CACD;AACL;ACnKA,MAAM,uBAAuB,CAC3B,MACA,SACA,kBAC6B;AACvB,QAAA,aAAa,CAACoD,SAAgB,QAAQ,KAAK,CAAC,QAAQ,IAAI,QAAQA,IAAG;AACzE,QAAM,SAAS,OAAO,OAAO,IAAI,IAAI;AAGrC,QAAM,EAAE,IAAA,IAAQ,KAAK,aAAa;AAC5B,QAAA,SAAS,WAAW,GAAG;AAOtB,SAAA,aAAa,IAAInF,uBAAM,CAAA,GAAI,QAAQ,KAAK,aAAa,CAAC;AAE7D,SAAO,KAAK,KAAK,UAAU,EAAE,QAAQ,CAAC,aAAa;AAC3C,UAAA,cAAc,WAAW,QAAQ;AAEhC,WAAA,WAAW,QAAQ,IAAI;AAAA,MAC5B,GAAG,KAAK,WAAW,QAAQ;AAAA,MAC3B,GAAG;AAAA,IAAA;AAAA,EACL,CACD;AAGM,SAAA;AACT;ACrDA,MAAM,mBAAmB,CAAC,aAAqB,WAC7C,OAAO,KAAK,CAAC,UAAU,MAAM,QAAQ,WAAW;AAqBlD,MAAM,gBAAgB,CAAC,aAAyB,WAAqC;AAC7E,QAAA,OAAO,kBAAkB,aAAa,MAAM;AAElD,QAAM,cAAc;AAAA,IAClB,GAAG,KAAK;AAAA,IACR,SAAS;AAAA,MACP,GAAG,KAAK,YAAY;AAAA,MACpB,MAAM,sBAAsB,KAAK,aAAa,MAAM;AAAA,MACpD,MAAM,0BAA0B,KAAK,aAAa,KAAK,UAAU;AAAA,IACnE;AAAA,EAAA;AAGF,QAAM,aAAa,OAAO,KAAK,KAAK,UAAU,EAAE;AAAA,IAC9C,CAAC,KAAK,iBAAiB;AACrB,YAAM,+BAA+B;AAAA,QACnC,KAAK,WAAW,YAAY;AAAA,QAC5B;AAAA,MAAA;AAGF,UAAI,YAAY,IAAI;AAAA,QAClB,GAAG,KAAK,WAAW,YAAY;AAAA,QAC/B,SAAS;AAAA,UACP,GAAG,KAAK,WAAW,YAAY,EAAE;AAAA,UACjC,MAAM;AAAA,QACR;AAAA,MAAA;AAGK,aAAA;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EAAA;AAGI,SAAA;AAAA,IACL;AAAA,IACA;AAAA,EAAA;AAEJ;AA4BA,MAAM,oBAAoB,CAAC,aAAyB,WAAoC;AACtF,QAAM,OAAO,qBAAqBoF,mBAAA,QAAU,WAAW,GAAG,QAAQ,aAAa;AACzE,QAAA,EAAE,YAAY,YAAgB,IAAA;AAE9B,QAAA,kBAAkB,CACtB,iBAGG;AACI,WAAA,OAAO,KAAK,aAAa,SAAS,EAAE,OAAiC,CAAC,KAAK,YAAY;AAC5F,YAAM,SAAS,aAAa,WAAW,OAAO,KAAK,CAAA;AAE/C,UAAA,YAAsB,aAAa,UAAU,OAAO;AAExD,UAAI,OAAO,SAAS,cAAc,YAAY,QAAQ;AACpD,cAAM,gBAAgB,iBAAiB,OAAO,QAAQ,MAAM;AAGtD,cAAA,gBAAgB,UAAU,KAAK;AAErC,cAAM,YAAY;AAAA,UAChB,MAAM;AAAA,UACN,QAAQ,cAAc,WAAW,aAAa;AAAA,QAAA;AAGpC,oBAAA;AAAA,UACV,MAAM;AAAA,YACJ,GAAG,UAAU;AAAA,YACb;AAAA,UACF;AAAA,UACA,MAAM;AAAA,YACJ,GAAG,UAAU;AAAA,YACb;AAAA,UACF;AAAA,QAAA;AAAA,MAEJ;AAEA,UAAI,OAAO,IAAI;AAER,aAAA;AAAA,IACT,GAAG,CAAE,CAAA;AAAA,EAAA;AAGF,OAAA,YAAY,YAAY,gBAAgB,WAAW;AAExD,SAAO,KAAK,UAAU,EAAE,QAAQ,CAAC,aAAa;AAC5C,SAAK,WAAW,QAAQ,EAAE,YAAY,gBAAgB,WAAW,QAAQ,CAAC;AAAA,EAAA,CAC3E;AAEM,SAAA;AACT;AAoBA,MAAM,wBAAwB,CAC5B,0BACA,WAEA,yBAAyB,QAAQ,KAAK,OAA0B,CAAC,KAAK,YAAY;AAChF,QAAM,MAAM,QAAQ,IAAI,CAAC,cAAc;AACrC,UAAM,cAAc,yBAAyB,WAAW,UAAU,IAAI,KAAK;AAE3E,UAAM,OAAsB;AAAA,MAC1B,GAAG;AAAA,MACH;AAAA,MACA,WAAW,yBAAyB,UAAU,UAAU,IAAI,EAAE,QAAQ,CAAC;AAAA,IAAA;AAGrE,QAAA,YAAY,SAAS,YAAY;AAEnC,YAAM,oBAAoB,iBAAiB,YAAY,QAAQ,MAAM;AAC/D,YAAA,2BAA2B,kBAAkB,iBAAiB;AAEpE,WAAK,2BAA2B;AAChC,WAAK,aAAa;AAAA,QAChB,2BAA2B;AAAA,UACzB;AAAA,UACA,UAAU;AAAA,UACV;AAAA,QACF;AAAA,MAAA;AAAA,IAEJ;AAEO,WAAA;AAAA,EAAA,CACR;AAED,MAAI,KAAK,GAAG;AAEL,SAAA;AACT,GAAG,CAAE,CAAA;AASP,MAAM,4BAA4B,CAChC,0BACA,eACG;AACG,QAAA,YAAY,yBAAyB,QAAQ,KAAK;AAAA,IACtD,CAAC,KAAK,YAAY;AAChB,YAAM,cAAc,yBAAyB,WAAW,OAAO,KAAK,CAAA;AACpE,YAAM,YAAY,yBAAyB,UAAU,OAAO,EAAE,QAAQ;AAElE,UAAA,YAAY,SAAS,aAAa;AAC9B,cAAA,YAAY,WAAW,YAAY,SAAS;AAC5C,cAAA,gBAAgB,UAAU,SAAS;AACnC,cAAA,qBAAqB,UAAU,WAAW,aAAa;AAE7D,YAAI,KAAK;AAAA,UACP,KAAK,KAAK,OAAO;AAAA,UACjB,MAAM;AAAA,UACN;AAAA,UACA,WAAW;AAAA,YACT,GAAG;AAAA,YACH,WAAW;AAAA,cACT,GAAG;AAAA,cACH,MAAM;AAAA,YACR;AAAA,UACF;AAAA,QAAA,CACD;AAEM,eAAA;AAAA,MACT;AAEI,UAAA,KAAK,EAAE,KAAK,KAAK,OAAO,UAAU,MAAM,SAAS,aAAa,UAAW,CAAA;AAEtE,aAAA;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EAAA;AAGI,SAAA;AACT;AAEA,MAAM,4BAA4B,CAChC,0BACA,WACA,WACY;AAEZ,QAAM,cAAc,yBAAyB,WAAW,SAAS,EAAE,eAAe;AAE3E,SAAA,OAAO,KAAK,CAAC,UAAU,MAAM,QAAQ,eAAe,MAAM,WAAW;AAC9E;AAiBA,MAAM,8BAA8B,CAElC;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,MAAsC;AAE7B,SAAA;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,MACP,MAAM,QAAQ,KAAK;AAAA,QAAI,CAAC,QACtB,IAAI,IAAI,CAAC,EAAE,MAAM,MAAAlC,aAAY;AAAA,UAC3B;AAAA,UACA,MAAAA;AAAA,QAAA,EACA;AAAA,MACJ;AAAA,MACA,MAAM,QAAQ,KAAK,IAAI,CAAC,QAAQ;AAC9B,YAAI,OAAO,QAAQ,YAAY,UAAU,KAAK;AAC5C,iBAAO,IAAI;AAAA,QACb;AAEO,eAAA;AAAA,MAAA,CACR;AAAA,IACH;AAAA,IACA,WAAW,OAAO,KAAK,SAAS,EAAE;AAAA,MAChC,CAAC,KAAK,YAAY;AAChB,cAAM,mBAAmB,UAAU,OAAO,KAAK,CAAA;AAE3C,YAAA,iBAAiB,KAAK,WAAW;AAC5B,iBAAA;AAAA,YACL,GAAG;AAAA,YACH,CAAC,OAAO,GAAG;AAAA,cACT,MAAM;AAAA,gBACJ,GAAG,iBAAiB;AAAA,gBACpB,WAAW,iBAAiB,KAAK,UAAU;AAAA,cAC7C;AAAA,cACA,MAAMvE,cAAAA,QAAK,iBAAiB,MAAM,CAAC,WAAW,CAAC;AAAA,YACjD;AAAA,UAAA;AAAA,QACF,OACK;AACE,iBAAA;AAAA,YACL,GAAG;AAAA,YACH,CAAC,OAAO,GAAG;AAAA,cACT,MAAM,iBAAiB;AAAA,cACvB,MAAMA,cAAAA,QAAK,iBAAiB,MAAM,CAAC,WAAW,CAAC;AAAA,YACjD;AAAA,UAAA;AAAA,QAEJ;AAAA,MACF;AAAA,MACA,CAAC;AAAA,IACH;AAAA,EAAA;AAEJ;ACpUA,MAAM0G,yBAAuB,CAAC,mBAA2B;AACjD,QAAA,UAAU,iBAAiB,aAAa;AACxC,QAAA,EAAE,KAAA7J,SAAQC,aAAAA;AAEhB,QAAM,EAAE,MAAM,WAAW,QAAY,IAAAG,WAAA;AAAA,IACnC,CAAC,mBAAmB,iBAAiB,gBAAgB,eAAe;AAAA,IACpE,YAAY;AACJ,YAAA;AAAA,QACJ,MAAM,EAAE,MAAAC,MAAK;AAAA,UACX,MAAML;AAAA,QACR,kCAAkC,cAAc;AAAA,MAAA;AAG3CK,aAAAA;AAAAA,IACT;AAAA,EAAA;AAGF,QAAM,SAASI,iBAAM,QAAQ,MAAO,OAAO,cAAc,MAAM,OAAO,IAAI,MAAO,CAAC,MAAM,OAAO,CAAC;AAEzF,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA,cAAc;AAAA,EAAA;AAElB;AC9Ba,MAAA,mBAAmBA,iBAAAA,QAAM;AAE/B,SAAS,kBAAkB;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GAAG;AAEC,SAAAd,2BAAA;AAAA,IAAC,iBAAiB;AAAA,IAAjB;AAAA,MACC,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,GAAG;AAAA,MACL;AAAA,MAEC;AAAA,IAAA;AAAA,EAAA;AAGP;AAEA,kBAAkB,eAAe;AAAA,EAC/B,YAAY,CAAC;AAAA,EACb,YAAY,CAAC;AAAA,EACb,OAAO;AAAA,EAAC;AAAA,EACR,QAAQ,CAAC;AAAA,EACT,WAAW,CAAC;AAAA,EACZ,WAAW;AAAA,EAAC;AAAA,EACZ,UAAU;AAAA,EAAC;AAAA,EACX,YAAY;AAAA,EAAC;AAAA,EACb,iBAAiB,CAAC;AAAA,EAClB,cAAc;AAAA,EAAC;AAAA,EACf,kBAAkB;AAAA,EAClB,uBAAuB;AAAA,EAAC;AAC1B;AAEA,kBAAkB,YAAY;AAAA,EAC5B,YAAYmK,mBAAU,QAAA;AAAA,EACtB,YAAYA,mBAAU,QAAA;AAAA,EACtB,UAAUA,mBAAAA,QAAU,KAAK;AAAA,EACzB,MAAMA,mBAAU,QAAA;AAAA,EAChB,QAAQA,mBAAU,QAAA;AAAA,EAClB,WAAWA,mBAAU,QAAA;AAAA,EACrB,UAAUA,mBAAU,QAAA;AAAA,EACpB,SAASA,mBAAU,QAAA;AAAA,EACnB,WAAWA,mBAAU,QAAA;AAAA,EACrB,iBAAiBA,mBAAU,QAAA;AAAA,EAC3B,aAAaA,mBAAU,QAAA;AAAA,EACvB,kBAAkBA,mBAAU,QAAA;AAAA,EAC5B,sBAAsBA,mBAAU,QAAA;AAClC;ACtEO,SAAS,eAAe;AACtB,SAAArJ,iBAAM,WAAW,gBAAgB;AAC1C;ACUA,MAAM,cAAc,CAAC,EAAE,QAAQ,qCAAqC,SAAS,MAAM;AAGnF,MAAM,YAAY,MAAM;AAChB,QAAA,EAAE,eAAeX,aAAAA;AACjB,QAAA,EAAE,kBAAkBC,UAAAA;AAC1B,QAAM,EAAE,MAAM,cAAc,sBAAsB,aAAa;AACzD,QAAA,OAAO,oBAAoB,kBAAkB;AAEnD,QAAM,UAAU,iCACd,SAAS,kBAAkB,OAAO,sBACpC;AACA,QAAM,WAAWC,aAAA,QAAI,cAAc,YAAY,EAAE;AAEjD,QAAM,YAAY,SAAS,kBAAkB,OAAO,GAAG,QAAQ,IAAI,IAAI;AAEvE,QAAM,cAAc,MAAM;AACxB,eAAW,oBAAoB;AAAA,EAAA;AAGjC,MAAI,SAAS,yBAAyB;AAC7B,WAAA;AAAA,EACT;AAGE,SAAAL,2BAAA,IAACoK,iCAAiB,aAChB,UAAApK,2BAAA;AAAA,IAACmE,aAAA;AAAA,IAAA;AAAA,MACC,IAAI,GAAG,OAAO,IAAI,SAAS;AAAA,MAC3B,SAAS;AAAA,MACT,MAAK;AAAA,MACL,0CAAYmD,MAAO,QAAA,EAAA;AAAA,MACnB,SAAQ;AAAA,MAEP,UAAc,cAAA;AAAA,QACb,IAAI,eAAe,kCAAkC,IAAI,EAAE;AAAA,QAC3D,gBAAgB;AAAA,MAAA,CACjB;AAAA,IAAA;AAAA,EAEL,EAAA,CAAA;AAEJ;AC5CA,MAAM,qBAAqB,CAAC,EAAE,mBAAmB;AACzC,QAAA,EAAE,qBAAqB;AACvB,QAAA,EAAE,kBAAkBlH,UAAAA;AAC1B,QAAM,gBAAgBC,aAAAA,QAAI,kBAAkB,CAAC,YAAY,GAAG,CAAA,CAAE;AACxD,QAAA,kBAAkBA,aAAAA,QAAI,eAAe,CAAC,WAAW,MAAM,GAAG,CAAA,CAAE;AAGhE,SAAAJ,2BAAA,KAAC2B,aAAI,KAAA,EAAA,SAAS,GACX,UAAA;AAAA,IAAgB,gBAAA,IAAI,CAAC,KAAK;AAAA;AAAA,qCAExB+B,aAAAA,MAAK,EAAA,KAAK,GACR,UAAA,IAAI,IAAI,CAAC,eACP3D,+BAAA4D,aAAAA,UAAA,EAA+B,KAAK,WAAW,MAC9C,UAAC5D,2BAAAA,IAAA4B,aAAA,KAAA,EAAI,YAAY,GACf,UAAA5B,2BAAA;AAAA,QAAC6B,aAAA;AAAA,QAAA;AAAA,UACC,YAAW;AAAA,UACX,YAAW;AAAA,UACX,aAAa;AAAA,UACb,cAAc;AAAA,UACd,QAAQ,GAAG,KAAK,EAAE;AAAA,UAClB,WAAS;AAAA,UACT,aAAY;AAAA,UAEZ,UAAC7B,2BAAAA,IAAAuC,aAAAA,YAAA,EAAW,WAAU,cAAc,qBAAW,MAAK;AAAA,QAAA;AAAA,MAAA,EAExD,CAAA,EAba,GAAA,WAAW,IAc1B,CACD,KAjBgB,KAkBnB;AAAA,KACD;AAAA,IACDvC,2BAAAA,IAAC4B,aAAAA,KAAI,EAAA,YAAY,GACf,UAAA5B,2BAAA;AAAA,MAACgD,aAAA;AAAA,MAAA;AAAA,QACC,0CAAYqH,MAAI,KAAA,EAAA;AAAA,QAChB,IAAI,+BAA+B,YAAY;AAAA,QAE9C,UAAc,cAAA;AAAA,UACb,IAAI,eAAe,4CAA4C;AAAA,UAC/D,gBAAgB;AAAA,QAAA,CACjB;AAAA,MAAA;AAAA,IAAA,GAEL;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,mBAAmB,YAAY;AAAA,EAC7B,cAAcF,mBAAAA,QAAU,OAAO;AACjC;ACjDA,MAAM,gBAAgB,CAAC,EAAE,iBAAiB,MAAM,OAAO,aAAiC;AAEpF,SAAAnK,2BAAA;AAAA,IAAC6B,aAAA;AAAA,IAAA;AAAA,MACC,YAAW;AAAA,MACX,YAAY,iBAAiB,eAAe;AAAA,MAC5C,gBAAe;AAAA,MACf,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,OAAM;AAAA,MACN,cAAc,iBAAiB,QAAQ;AAAA,MAEvC,UAAA7B,2BAAA;AAAA,QAACsI,aAAA;AAAA,QAAA;AAAA,UACC,IAAI,gBAAgB,IAAoC,KAAK,gBAAgB;AAAA,UAC7E,QAAQ;AAAA,UACR,OAAO;AAAA,QAAA;AAAA,MACT;AAAA,IAAA;AAAA,EAAA;AAGN;AAEA,MAAM,kBAAkB;AAAA,EACtB,OAAOgC,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,SAASA,iBAAM;AAAA,EACf,WAAWA,iBAAM;AAAA,EACjB,WAAWA,iBAAM;AAAA,EACjB,YAAYA,iBAAM;AAAA,EAClB,SAASA,iBAAM;AAAA,EACf,YAAYA,iBAAM;AAAA,EAClB,MAAMA,iBAAM;AAAA,EACZ,MAAMA,iBAAM;AAAA,EACZ,MAAMA,iBAAM;AAAA,EACZ,WAAWA,iBAAM;AAAA,EACjB,OAAOA,iBAAM;AAAA,EACb,YAAYA,iBAAM;AAAA,EAClB,UAAUA,iBAAM;AAAA,EAChB,KAAKA,iBAAM;AAAA,EACX,MAAMA,iBAAM;AAAA,EACZ,aAAaA,iBAAM;AAAA,EACnB,aAAaA,iBAAM;AAAA,EACnB,UAAUA,iBAAM;AAAA,EAChB,OAAOA,iBAAM;AAAA,EACb,OAAOA,iBAAM;AAAA,EACb,OAAOA,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,KAAKA,iBAAM;AAAA,EACX,UAAUA,iBAAM;AAAA,EAChB,SAASA,iBAAM;AAAA,EACf,WAAWA,iBAAM;AAAA,EACjB,MAAMA,iBAAM;AAAA,EACZ,OAAOA,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,KAAKA,iBAAM;AAAA,EACX,QAAQA,iBAAM;AAAA,EACd,WAAWA,iBAAM;AAAA,EACjB,UAAUA,iBAAM;AAAA,EAChB,SAASA,iBAAM;AAAA,EACf,QAAQA,iBAAM;AAAA,EACd,OAAOA,iBAAM;AAAA,EACb,cAAcA,iBAAM;AAAA,EACpB,gBAAgBA,iBAAM;AAAA,EACtB,SAASA,iBAAM;AAAA,EACf,MAAMA,iBAAM;AAAA,EACZ,QAAQA,iBAAM;AAAA,EACd,KAAKA,iBAAM;AAAA,EACX,SAASA,iBAAM;AAAA,EACf,MAAMA,iBAAM;AAAA,EACZ,WAAWA,iBAAM;AAAA,EACjB,SAASA,iBAAM;AAAA,EACf,QAAQA,iBAAM;AAAA,EACd,QAAQA,iBAAM;AAAA,EACd,MAAMA,iBAAM;AAAA,EACZ,MAAMA,iBAAM;AAAA,EACZ,OAAOA,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,WAAWA,iBAAM;AAAA,EACjB,SAASA,iBAAM;AAAA,EACf,WAAWA,iBAAM;AAAA,EACjB,OAAOA,iBAAM;AAAA,EACb,OAAOA,iBAAM;AAAA,EACb,aAAaA,iBAAM;AAAA,EACnB,QAAQA,iBAAM;AAAA,EACd,KAAKA,iBAAM;AAAA,EACX,WAAWA,iBAAM;AAAA,EACjB,OAAOA,iBAAM;AAAA,EACb,QAAQA,iBAAM;AAAA,EACd,WAAWA,iBAAM;AAAA,EACjB,MAAMA,iBAAM;AAAA,EACZ,MAAMA,iBAAM;AAAA,EACZ,OAAOA,iBAAM;AAAA,EACb,YAAYA,iBAAM;AAAA,EAClB,WAAWA,iBAAM;AAAA,EACjB,UAAUA,iBAAM;AAAA,EAChB,QAAQA,iBAAM;AAAA,EACd,SAASA,iBAAM;AAAA,EACf,YAAYA,iBAAM;AAAA,EAClB,SAASA,iBAAM;AAAA,EACf,MAAMA,iBAAM;AAAA,EACZ,OAAOA,iBAAM;AAAA,EACb,WAAWA,iBAAM;AAAA,EACjB,UAAUA,iBAAM;AAAA,EAChB,QAAQA,iBAAM;AAAA,EACd,OAAOA,iBAAM;AAAA,EACb,YAAYA,iBAAM;AAAA,EAClB,YAAYA,iBAAM;AAAA,EAClB,QAAQA,iBAAM;AAAA,EACd,OAAOA,iBAAM;AAAA,EACb,SAASA,iBAAM;AAAA,EACf,KAAKA,iBAAM;AAAA,EACX,QAAQA,iBAAM;AAAA,EACd,OAAOA,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,MAAMA,iBAAM;AAAA,EACZ,UAAUA,iBAAM;AAAA,EAChB,QAAQA,iBAAM;AAAA,EACd,UAAUA,iBAAM;AAAA,EAChB,OAAOA,iBAAM;AAAA,EACb,SAASA,iBAAM;AAAA,EACf,QAAQA,iBAAM;AAAA,EACd,YAAYA,iBAAM;AAAA,EAClB,QAAQA,iBAAM;AAAA,EACd,QAAQA,iBAAM;AAAA,EACd,UAAUA,iBAAM;AAAA,EAChB,QAAQA,iBAAM;AAAA,EACd,MAAMA,iBAAM;AAAA,EACZ,QAAQA,iBAAM;AAAA,EACd,QAAQA,iBAAM;AAAA,EACd,OAAOA,iBAAM;AAAA,EACb,cAAcA,iBAAM;AAAA,EACpB,WAAWA,iBAAM;AAAA,EACjB,OAAOA,iBAAM;AAAA,EACb,MAAMA,iBAAM;AAAA,EACZ,OAAOA,iBAAM;AAAA,EACb,eAAeA,iBAAM;AAAA,EACrB,KAAKA,iBAAM;AAAA,EACX,YAAYA,iBAAM;AAAA,EAClB,WAAWA,iBAAM;AAAA,EACjB,SAASA,iBAAM;AAAA,EACf,OAAOA,iBAAM;AAAA,EACb,SAASA,iBAAM;AAAA,EACf,SAASA,iBAAM;AAAA,EACf,WAAWA,iBAAM;AAAA,EACjB,MAAMA,iBAAM;AAAA,EACZ,YAAYA,iBAAM;AAAA,EAClB,UAAUA,iBAAM;AAAA,EAChB,MAAMA,iBAAM;AAAA,EACZ,YAAYA,iBAAM;AAAA,EAClB,OAAOA,iBAAM;AACf;ACpJA,MAAM,aAAa5I,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,MAKxB,CAAC,EAAE,MAAA,MAAY;AAAA,0BACK,MAAM,OAAO,UAAU;AAAA,sBAC3B,MAAM,OAAO,UAAU;AAAA;AAAA,QAErCU,uBAAU;AAAA,mBACC,MAAM,OAAO,UAAU;AAAA;AAAA,KAErC;AAAA;AAAA;AAAA;AAAA,oBAIe,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,eAC3C,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA,kBAInC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAOxD,MAAM,kBAAkB,CAAC,EAAE,iBAAiB;AACpC,QAAA,EAAE,qBAAqB;AAG3B,SAAAvC,2BAAA,IAAC6B,aAAK,MAAA,EAAA,KAAK,GAAG,UAAS,iBAAgB,SAAS,GAC7C,UAAA,WAAW,IAAI,CAAC,iBACf5B,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAS;AAAA,MACT,YAAW;AAAA,MACX,gBAAe;AAAA,MACf,YAAW;AAAA,MACX,QAAQ,GAAG,KAAK,EAAE;AAAA,MAClB,UAAU,GAAG,MAAM,EAAE;AAAA,MAErB,SAAS;AAAA,MACT,WAAU;AAAA,MACV,aAAY;AAAA,MACZ,IAAI+C,eAAA;AAAA,MACJ,IAAI,+BAA+B,YAAY;AAAA,MAE/C,UAAA;AAAA,QAAAhD,+BAAC,iBAAc,MAAM,mBAAmB,YAAY,GAAG,MAAM,MAAM;AAAA,uCAElE4B,aAAAA,KAAI,EAAA,YAAY,GACf,UAAC5B,2BAAAA,IAAAuC,aAAA,YAAA,EAAW,UAAU,GAAG,WAAU,cAAa,YAAW,QACxD,UAAmB,mBAAA,YAAY,GAAG,MAAM,eAAe,GAC1D,CAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,IAbK;AAAA,EAeR,CAAA,EACH,CAAA;AAEJ;AAEA,gBAAgB,YAAY;AAAA,EAC1B,YAAY4H,mBAAAA,QAAU,QAAQA,mBAAAA,QAAU,MAAM,EAAE;AAClD;AC5DA,MAAMI,qBAAmB7I,gBAAAA,QAAO+F,aAAAA,UAAU;AAAA;AAAA;AAAA,YAG9B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAIlD,MAAM,qBAAqB,CAAC,EAAE,WAAW,aAAa,eAAe,eAAe;AAC5E,QAAA,EAAE,kBAAkBrH,UAAAA;AAE1B,SACGH,2BAAAA,KAAA2B,aAAAA,KAAA,EAAI,UAAS,UAAS,OAAM,QAC3B,UAAA;AAAA,IAAA3B,gCAAC4B,aAAAA,QAAK,aAAa,GAAG,YAAW,UAAS,gBAAe,iBACvD,UAAA;AAAA,MAAA7B,+BAACuC,aAAAA,cAAW,YAAW,YAAW,WAAU,cAAa,UAAQ,MAC9D,UACH;AAAA,sCACCV,aAAAA,MACC,EAAA,UAAA;AAAA,QAAA7B,2BAAA;AAAA,UAACuK;AAAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL;AAAA,gBACE,IAAI,eAAe,mDAAmD;AAAA,gBACtE,gBAAgB;AAAA,cAClB;AAAA,cACA,EAAE,WAAW,SAAS;AAAA,YACxB;AAAA,YACA,SAAS;AAAA,YACT,qCAAOjD,MAAO,QAAA,EAAA;AAAA,YACd,UAAQ;AAAA,UAAA;AAAA,QACV;AAAA,QACAtH,2BAAA;AAAA,UAACuK;AAAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL;AAAA,gBACE,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAClB;AAAA,cACA;AAAA,gBACE,QAAQ;AAAA,cACV;AAAA,YACF;AAAA,YACA,eAAY;AAAA,YACZ,SAAS;AAAA,YACT,qCAAO7C,MAAM,OAAA,EAAA;AAAA,YACb,UAAQ;AAAA,UAAA;AAAA,QACV;AAAA,MAAA,GACF;AAAA,IAAA,GACF;AAAA,IACC,WAAW,SAAS,8CAAgB,oBAAmB,EAAA,cAAc,UAAU,WAAW;AAAA,IAC1F,WAAW,SAAS,gDAAkB,iBAAgB,EAAA,YAAY,UAAU,YAAY;AAAA,EAC3F,EAAA,CAAA;AAEJ;AAEA,mBAAmB,eAAe;AAAA,EAChC,WAAW;AACb;AAEA,mBAAmB,YAAY;AAAA,EAC7B,WAAWyC,2BAAU,MAAM;AAAA,IACzB,YAAYA,mBAAU,QAAA;AAAA,IACtB,WAAWA,mBAAU,QAAA;AAAA,IACrB,MAAMA,mBAAU,QAAA;AAAA,EAAA,CACjB;AAAA,EACD,aAAaA,mBAAAA,QAAU,KAAK;AAAA,EAC5B,eAAeA,mBAAAA,QAAU,KAAK;AAAA,EAC9B,UAAUA,mBAAAA,QAAU,OAAO;AAC7B;AChEA,MAAMxI,YAAUD,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA,IAEvB,CAAC,EAAE,SAAS,QAAQ,2BAA2B;AAC/C,MAAI,SAAS;AACJ,WAAA;AAAA;AAAA;AAAA,EAGT;AACA,MAAI,QAAQ;AACH,WAAA;AAAA;AAAA;AAAA,EAGT;AAEA,MAAI,sBAAsB;AACjB,WAAA;AAAA;AAAA;AAAA,EAGT;AAEO,SAAA;AACT,CAAC;AAAA,IACC,CAAC,EAAE,iBAAiB,gBAAgB,YAAY;AAChD,MAAI,iBAAiB;AACZ,WAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKiB,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOjD;AAEA,MAAI,gBAAgB;AACX,WAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKiB,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOjD;AAEO,SAAA;AACT,CAAC;AAAA;AAEH,MAAM,iBAAiBH,gBAAAA,QAAO0F,MAAAA,IAAI;AAAA,YACtB,KAAK,EAAE;AAAA,WACR,KAAK,EAAE;AAAA;AAAA,YAEN,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAGlD,MAAM,aAAa1F,gBAAAA,QAAOG,aAAAA,IAAI;AAAA,aACjB,CAAC,EAAE,UAAA,MAAiB,YAAY,SAAS,MAAO;AAAA,aAChD,CAAC,EAAE,YAAY,YAAY,eAAe;AAC/C,MAAA,cAAc,CAAC,YAAY;AACtB,WAAA;AAAA,EACT;AAEK,MAAA,cAAc,cAAe,UAAU;AACnC,WAAA;AAAA,EACT;AAEO,SAAA;AACT,CAAC;AAAA;AAEH,MAAMsF,eAAazF,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA,4BAEF,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAGlE,MAAM,uBAAuB,CAAC;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAAAkG;AACF,MAAM;AACJ,QAAM,CAAC,WAAW,YAAY,IAAIW,eAAS,KAAK;AAChD,QAAM,WAAW,SAAS;AACpB,QAAA,EAAE,yBAAyB;AACjC,QAAM,aAAaX,UAAS;AAEtB,QAAA,UAAUD,aAAO,IAAI;AACrB,QAAA,UAAUA,aAAO,IAAI;AAC3B,QAAM,CAAC,EAAE,cAAc,OAAU,GAAA,IAAI,IAAIH,SAAAA,QAAQ;AAAA,IAC/C,QAAQ,UAAU;AAAA,IAClB,MAAM,MAAM,SAAS;AACf,UAAA,CAAC,QAAQ,SAAS;AACpB;AAAA,MACF;AAGI,UAAA,KAAK,SAAS,IAAI;AACpB;AAAA,MACF;AAEM,YAAA,YAAY,QAAQ,QAAA,EAAU;AACpC,YAAM,aAAa;AACb,YAAA,UAAU,QAAQ,QAAA,EAAU;AAClC,YAAM,YAAY;AAGd,UAAA,cAAc,cAAc,YAAY,WAAW;AACrD;AAAA,MACF;AAGM,YAAA,oBAAoB,QAAQ,QAAQ,sBAAsB;AAGhE,YAAM,gBAAgB,kBAAkB,SAAS,kBAAkB,OAAO;AAEpE6C,YAAAA,gBAAe,QAAQ;AAGvB,YAAA,eAAeA,cAAa,IAAI,kBAAkB;AAOpD,UAAA,UAAU,aAAa,eAAe,cAAc;AACtD;AAAA,MACF;AAGI,UAAA,UAAU,aAAa,eAAe,cAAc;AACtD;AAAA,MACF;AAEA,cAAQ,SAAS,SAAS;AAE1B,WAAK,WAAW;AAChB,WAAK,YAAY;AAAA,IACnB;AAAA,IACA,KAAK,MAAM,SAAS;AACd,UAAA,CAAC,QAAQ,SAAS;AACpB;AAAA,MACF;AAEM,YAAA,YAAY,QAAQ,QAAA,EAAU;AACpC,YAAM,aAAa;AACb,YAAA,UAAU,QAAQ,QAAA,EAAU;AAClC,YAAM,YAAY;AAGd,UAAA,KAAK,SAAS,IAAI;AACpB;AAAA,MACF;AAGI,UAAA,cAAc,cAAc,YAAY,WAAW;AACrD;AAAA,MACF;AAGM,YAAA,oBAAoB,QAAQ,QAAQ,sBAAsB;AAM9D,UAAA,KAAK,IAAI,QAAQ,gBAAgB,EAAE,IAAI,kBAAkB,IAAI,IAC7D,kBAAkB,QAAQ,KAC1B;AACA,iBAAS,WAAW,aAAa,GAAG,SAAS,SAAS;AAEtD,aAAK,YAAY,aAAa;AAC9B,aAAK,WAAW;AAEhB;AAAA,MACF;AAKS,eAAA,WAAW,YAAY,SAAS,SAAS;AAMlD,WAAK,YAAY;AACjB,WAAK,WAAW;AAAA,IAClB;AAAA,IACA,SAAS,CAAC,aAAa;AAAA,MACrB,SAAS,QAAQ,QAAQ;AAAA,MACzB,cAAc,QAAQ,gBAAgB;AAAA,MACtC,QAAQ,QAAQ,OAAO;AAAA,MACvB,eAAe,QAAQ,OAAO,EAAE,SAAS,MAAM;AAAA,MAC/C,UAAU,QAAQ,YAAY;AAAA,IAAA;AAAA,EAChC,CACD;AACK,QAAA,CAAC,EAAE,YAAY,QAAA,GAAW,MAAM,WAAW,IAAI3C,iBAAQ;AAAA,IAC3D,MAAM,UAAU;AAAA,IAChB,OAAO;AACL,2BAAqB,IAAI;AAElB,aAAA;AAAA,QACL;AAAA,QACA,YAAY;AAAA,QACZ;AAAA,QACA;AAAA,QACA,MAAAE;AAAA,MAAA;AAAA,IAEJ;AAAA,IACA,UAAU;AAMR,aAAO,SAAS;AAAA,IAClB;AAAA,IACA,SAAS,CAAC,aAAa;AAAA,MACrB,YAAY,QAAQ,WAAW;AAAA,MAC/B,SAAS,QAAQ,QAAQ;AAAA,IAAA;AAAA,IAE3B,MAAM;AACJ,2BAAqB,KAAK;AAAA,IAC5B;AAAA,EAAA,CACD;AAIDf,QAAAA,UAAU,MAAM;AACd,gBAAYyB,qBAAAA,cAAc,GAAG,EAAE,sBAAsB,KAAM,CAAA;AAAA,EAAA,GAC1D,CAAC,WAAW,CAAC;AAKhB,QAAM,OAAO;AAAA,IACX,SAAS,KAAK,OAAO;AAAA,IACrB,SAAS,KAAK,OAAO;AAAA,EAAA;AAGvB,MAAI,iBAAiB;AACrB,MAAI,kBAAkB;AAElB,MAAA,QAAQ,WAAW,cAAc;AAC7B,UAAA,oBAAoB,QAAQ,QAAQ,sBAAsB;AAEhE,qBACE,UACA,QAAQ,SAAS,MACjB,KAAK,IAAI,aAAa,IAAI,kBAAkB,IAAI,IAAI,kBAAkB,QAAQ;AAChF,sBACE,UACA,QAAQ,SAAS,MACjB,KAAK,IAAI,aAAa,IAAI,kBAAkB,IAAI,IAAI,kBAAkB,QAAQ;AAEhF,QAAI,SAAS,UAAU;AACJ,uBAAA,UAAU,QAAQ,SAAS;AAC1B,wBAAA;AAAA,IACpB;AAAA,EACF;AAEA,QAAM,YAAY,MAAM;AACtB,QAAI,aAAa,YAAY;AACpB,aAAA,GAAG,KAAK,EAAE;AAAA,IACnB;AAEO,WAAA,GAAG,KAAK,EAAE;AAAA,EAAA;AAGb,QAAA,UAAU,UAAU,KAAK,CAAC;AAC1B,QAAA,SAAS,UAAU,aAAa,CAAC;AACjC,QAAA,uBAAuB,UAAU,KAAK,CAAC;AAG3C,SAAAzI,2BAAAA,IAAC4D,aAAAA,UAAS,EAAA,KAAKmE,OACb,UAAA9H,2BAAA;AAAA,IAAC0B;AAAAA,IAAA;AAAA,MACC,KAAK,KAAK;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAQ,MAAM;AACR,YAAA,cAAc,CAAC,WAAW;AAC5B,uBAAa,IAAI;AAAA,QACnB;AAAA,MACF;AAAA,MACA,WAAW,MAAM;AACf,YAAI,YAAY;AACd,uBAAa,KAAK;AAAA,QACpB;AAAA,MACF;AAAA,MAEC,UAAA;AAAA,QAAA,aAAa,cACZ3B,2BAAA;AAAA,UAAC4B,aAAA;AAAA,UAAA;AAAA,YAEC,OAAM;AAAA,YACN,QAAO;AAAA,YACP,YAAW;AAAA,UAAA;AAAA,QACb;AAAA,QAEF3B,2BAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO,cAAc,YAAY,IAAI;AAAA,YACrC,aAAY;AAAA,YACZ,WAAS;AAAA,YACT,YAAW;AAAA,YACX,WAAW,UAAU;AAAA,YACrB,YAAW;AAAA,YACX;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YAEA,UAAA;AAAA,cAAAD,2BAAA;AAAA,gBAACmH;AAAAA,gBAAA;AAAA,kBACC,IAAG;AAAA,kBACH,MAAK;AAAA,kBACL,KAAK,KAAK;AAAA,kBACV,SAAS,CAAC,MAAM,EAAE,gBAAgB;AAAA,kBAClC,YAAW;AAAA,kBACX,aAAa;AAAA,kBACb,cAAc;AAAA,kBAEd,UAAU;AAAA,kBAEV,yCAAC,gBAAe,EAAA;AAAA,gBAAA;AAAA,cAClB;AAAA,cACC,CAAC,YACAnH,2BAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC;AAAA,kBACA;AAAA,kBACA;AAAA,kBAEC;AAAA,gBAAA;AAAA,cACH;AAAA,YAAA;AAAA,UAAA;AAAA,QAEJ;AAAA,MAAA;AAAA,IAAA;AAAA,EAEJ,EAAA,CAAA;AAEJ;AAEA,qBAAqB,eAAe;AAAA,EAClC,WAAW;AACb;AAEA,qBAAqB,YAAY;AAAA,EAC/B,WAAWmK,2BAAU,MAAM;AAAA,IACzB,YAAYA,mBAAU,QAAA;AAAA,IACtB,WAAWA,mBAAU,QAAA;AAAA,IACrB,MAAMA,mBAAU,QAAA;AAAA,EAAA,CACjB;AAAA,EACD,UAAUA,mBAAAA,QAAU,OAAO;AAAA,EAC3B,OAAOA,mBAAAA,QAAU,OAAO;AAAA,EACxB,UAAUA,mBAAAA,QAAU,KAAK;AAAA,EACzB,SAASA,mBAAAA,QAAU,KAAK;AAAA,EACxB,MAAMA,mBAAAA,QAAU,OAAO;AAAA,EACvB,eAAeA,mBAAAA,QAAU,KAAK;AAAA,EAC9B,aAAaA,mBAAAA,QAAU,KAAK;AAAA,EAC5B,UAAUA,mBAAAA,QAAU,OAAO;AAAA,EAC3B,WAAWA,mBAAAA,QAAU,OAAO;AAAA,EAC5B,MAAMA,mBAAAA,QAAU,OAAO;AACzB;AC9XA,MAAM,iBAAiB,CAAC,EAAE,SAAS,eAAe,OAAO,UAAU,OAAO,gBAAgB;AACxF,QAAM,EAAE,sBAAsB,YAAY,cAAc,SAAS,SAAA,IAAa;AACxE,QAAA,YAAY9J,aAAAA,QAAI,YAAY,CAAC,QAAQ,IAAI,GAAG,CAAA,CAAE;AAC9C,QAAA,iBAAiBA,aAAAA,QAAI,cAAc,CAAC,aAAa,QAAQ,MAAM,QAAQ,OAAO,GAAG,EAAE;AAGvF,SAAAL,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,aAAa,MAAM,qBAAqB,QAAQ,IAAI;AAAA,MACpD,eAAe,MAAM,cAAc,OAAO,KAAK;AAAA,MAC/C;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,MAAM,QAAQ;AAAA,MACd,MAAM,QAAQ;AAAA,MACd;AAAA,MACA;AAAA,MAEC,4BAAkB,QAAQ;AAAA,IAAA;AAAA,EAAA;AAGjC;AAEA,eAAe,YAAY;AAAA,EACzB,OAAOmK,mBAAAA,QAAU,OAAO;AAAA,EACxB,WAAWA,mBAAAA,QAAU,OAAO;AAAA,EAC5B,eAAeA,mBAAAA,QAAU,KAAK;AAAA,EAC9B,OAAOA,mBAAAA,QAAU,OAAO;AAAA,EACxB,UAAUA,mBAAAA,QAAU,OAAO;AAAA,EAC3B,SAASA,mBAAAA,QAAU,OAAO;AAC5B;AChCA,MAAM,aAAa,CAAC,EAAE,KAAK,eAAe,eAAe;AACvD,wCACGxG,mBACE,EAAA,UAAA,IAAI,WAAW,IAAI,CAAC,SAAS,UAAU;AAEpC,WAAA3D,2BAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QAEC;AAAA,QACA;AAAA,QACA,OAAO,IAAI;AAAA,QACX;AAAA,QACA;AAAA,QACA,WAAW,IAAI,WAAW,SAAS;AAAA,MAAA;AAAA,MAN9B,QAAQ;AAAA,IAAA;AAAA,EASlB,CAAA,EACH,CAAA;AAEJ;AAEA,WAAW,YAAY;AAAA,EACrB,eAAemK,mBAAAA,QAAU,KAAK;AAAA,EAC9B,KAAKA,mBAAAA,QAAU,OAAO;AAAA,EACtB,UAAUA,mBAAAA,QAAU,OAAO;AAC7B;AClBA,MAAM,kBAAkB,CAAC,EAAE,YAAY,QAAQ,eAAe,iBAAiB;AACvE,QAAA,EAAE,kBAAkB/J,UAAAA;AAE1B,yCACGyB,mBAAK,EAAA,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,IAAC5B,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,gBAAe,iBACnB,UAAA;AAAA,MAAA5B,gCAAC,OACC,EAAA,UAAA;AAAA,QAAAD,+BAAC4B,aAAAA,KACC,EAAA,UAAA5B,2BAAA,IAACuC,yBAAW,EAAA,YAAW,QACpB,UAAc,cAAA;AAAA,UACb,IAAI,eAAe,qCAAqC;AAAA,UACxD,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,QACAvC,2BAAAA,IAAC4B,oBACC,UAAC5B,2BAAA,IAAAuC,aAAA,YAAA,EAAW,SAAQ,MAAK,WAAU,cAChC,UAAc,cAAA;AAAA,UACb,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,MAAA,GACF;AAAA,qCACC,WAAU,EAAA;AAAA,IAAA,GACb;AAAA,mCACCX,aAAI,KAAA,EAAA,SAAS,GAAG,WAAS,MAAC,aAAY,UAAS,aAAY,OAAM,aAAY,cAC5E,0CAACC,aAAK,MAAA,EAAA,WAAU,UAAS,YAAW,WAAU,KAAK,GAChD,UAAA;AAAA,MAAA,WAAW,IAAI,CAAC,KAAK,UACnB7B,2BAAA,IAAA,YAAA,EAA2B,KAAU,UAAU,OAAO,cAAA,GAAtC,IAAI,KAAgE,CACtF;AAAA,MACDC,2BAAAA,KAACwK,GAAK,KAAA,MAAL,EACC,UAAA;AAAA,QAAAzK,2BAAA;AAAA,UAACyK,GAAAA,KAAK;AAAA,UAAL;AAAA,YACC,0CAAYC,MAAK,MAAA,EAAA;AAAA,YACjB,SAAS;AAAA,YACT,UAAU,OAAO,WAAW;AAAA,YAC5B,WAAS;AAAA,YACT,SAAQ;AAAA,YAEP,UAAc,cAAA;AAAA,cACb,IAAI,eAAe,kCAAkC;AAAA,cACrD,gBAAgB;AAAA,YAAA,CACjB;AAAA,UAAA;AAAA,QACH;AAAA,QACA1K,+BAACyK,GAAAA,KAAK,SAAL,EACE,iBAAO,IAAI,CAAC,UACVzK,2BAAAA,IAAAyK,GAAA,KAAK,MAAL,EAAsB,UAAU,MAAM,WAAW,KAAK,GACpD,UADa,MAAA,GAAA,KAEhB,CACD,GACH;AAAA,MAAA,GACF;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,gBAAgB,YAAY;AAAA,EAC1B,YAAYN,mBAAAA,QAAU,MAAM;AAAA,EAC5B,QAAQA,mBAAAA,QAAU,MAAM;AAAA,EACxB,YAAYA,mBAAAA,QAAU,KAAK;AAAA,EAC3B,eAAeA,mBAAAA,QAAU,KAAK;AAChC;ACxDA,MAAM,cAAc;AAAA,EAClB,2CAAaQ,MAAO,QAAA,EAAA;AAAA,EACpB,wCAAUC,MAAQ,SAAA,EAAA;AAAA,EAClB,qCAAOC,MAAK,MAAA,EAAA;AAAA,EACZ,yCAAWA,MAAK,MAAA,EAAA;AAAA,EAChB,wCAAUF,MAAO,QAAA,EAAA;AAAA,EACjB,sCAAQG,MAAM,OAAA,EAAA;AAAA,EACd,qCAAOC,MAAY,aAAA,EAAA;AAAA,EACnB,4CAAcA,MAAY,aAAA,EAAA;AAAA,EAC1B,qCAAOC,MAAM,OAAA,EAAA;AAAA,EACb,sCAAQA,MAAM,OAAA,EAAA;AAAA,EACd,sCAAQL,MAAO,QAAA,EAAA;AAAA,EACf,wCAAUA,MAAO,QAAA,EAAA;AAAA,EACjB,sCAAQK,MAAM,OAAA,EAAA;AAAA,EACd,uCAASL,MAAO,QAAA,EAAA;AAAA,EAChB,yCAAWM,MAAS,UAAA,EAAA;AAAA,EACpB,uCAASC,MAAK,MAAA,EAAA;AAAA,EACd,qCAAOA,MAAK,MAAA,EAAA;AAAA,EACZ,yCAAWA,MAAK,MAAA,EAAA;AAAA,EAChB,qCAAOL,MAAK,MAAA,EAAA;AAAA,EACZ,0CAAYA,MAAK,MAAA,EAAA;AAAA,EACjB,qCAAOM,MAAK,MAAA,EAAA;AAAA,EACZ,oCAAMC,MAAI,KAAA,EAAA;AAAA,EACV,0CAAYrK,MAAU,WAAA,EAAA;AAAA,EACtB,4CAAcsK,MAAY,aAAA,EAAA;AAC5B;AAEA,MAAM,gBAAgB,CAAC,EAAE,MAAM,qBAAqB;AAClD,QAAM,uBAAuBC,aAAAA;AAEzB,MAAA,QAAQ,YAAY,IAAI;AAE5B,MAAI,gBAAgB;AACZ,UAAA,cAAc,qBAAqB,IAAI,cAAc;AAC3D,UAAM,kBAAkB,YAAY;AAEpC,QAAI,iBAAiB;AAEjB,cAAAtL,2BAAA,IAAC4B,aAAI,KAAA,EAAA,aAAa,GAAG,OAAO,GAAG,QAAQ,GACrC,UAAC5B,2BAAAA,IAAA,iBAAA,CAAA,CAAgB,EACnB,CAAA;AAAA,IAEJ;AAAA,EACF;AAEI,MAAA,CAAC,YAAY,IAAI,GAAG;AACf,WAAA;AAAA,EACT;AAEO,SAAA;AACT;AAEA,cAAc,eAAe;AAAA,EAC3B,gBAAgB;AAClB;AAEA,cAAc,YAAY;AAAA,EACxB,MAAMmK,mBAAAA,QAAU,OAAO;AAAA,EACvB,gBAAgBA,mBAAU,QAAA;AAC5B;AC/EA,MAAM,iDAAiD,CAAC,UAAU;AAChE,SAAO,MAAM,OAAO,CAAC,KAAK,YAAY;AAC9B,UAAA,aAAa,SAAS,cAAc;AAC1C,UAAM,qBAAqB,OAAO,KAAK,UAAU,EAAE,OAAO,CAAC,SAAS;AAClE,aAAO,CAAC;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MAAA,EACA,SAAS,aAAa,IAAI,GAAG,QAAQ,EAAE;AAAA,IAAA,CAC1C;AAEG,QAAA,QAAQ,GAAG,IAAI;AAEZ,WAAA;AAAA,EACT,GAAG,CAAE,CAAA;AACP;ACpBA,MAAM,gBAAgB,CAAC,cAAc;AAC/B,MAAA;AAEJ,UAAQ,WAAW;AAAA,IACjB,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACI,aAAA;AACP;AAAA,IACF,KAAK;AACI,aAAA;AACP;AAAA,IACF,KAAK;AACI,aAAA;AACP;AAAA,IACF;AACS,aAAA;AAAA,EACX;AAEM,QAAA,UACJ,cAAc,cACV,eAAe,iDAAiD,IAChE,eAAe,cAAc,SAAS,EAAE;AAE9C,SAAO,EAAE,MAAM,OAAO,EAAE,IAAI,QAAU,EAAA;AACxC;ACrBA,MAAM,eAAe,CAAC,EAAE,MAAM,SAAA3D,UAAS,UAAU,OAAO,MAAM,GAAG,iBAAiB;AAC1E,QAAA,EAAE,kBAAkBpG,UAAAA;AAE1B,UAAQ,MAAM;AAAA,IACZ,KAAK,QAAQ;AACX,4CAAQsC,aAAU,WAAA,EAAA,UAAoB,OAAc,MAAa,GAAG,WAAY,CAAA;AAAA,IAClF;AAAA,IACA,KAAK,QAAQ;AAET,aAAA1C,2BAAA;AAAA,QAACuL,aAAA;AAAA,QAAA;AAAA,UACC,UAAU,CAAC,MAAM;AACN,qBAAA,EAAE,QAAQ,EAAE,MAAM,OAAO,EAAE,OAAO,QAAQ,EAAA,CAAG;AAAA,UACxD;AAAA,UACA,SAAS;AAAA,UACT;AAAA,UACA,SAAS,cAAc;AAAA,YACrB,IAAI;AAAA,YACJ,gBAAgB;AAAA,UAAA,CACjB;AAAA,UACD,UAAU,cAAc;AAAA,YACtB,IAAI;AAAA,YACJ,gBAAgB;AAAA,UAAA,CACjB;AAAA,UACA,GAAG;AAAA,QAAA;AAAA,MAAA;AAAA,IAGV;AAAA,IACA,KAAK,UAAU;AAEX,aAAAvL,2BAAA;AAAA,QAACwE,aAAA;AAAA,QAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,UAAU,CAACgH,WAAU,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAAA,OAAM,GAAG;AAAA,UACxD,GAAG;AAAA,UAEH,UAAAhF,SAAQ,IAAI,CAAC,WACZxG,2BAAAA,IAACyE,aAAAA,UAAoB,OAAO,QACzB,UADU,OAAA,GAAA,MAEb,CACD;AAAA,QAAA;AAAA,MAAA;AAAA,IAGP;AAAA,IACA;AACS,aAAA;AAAA,EACX;AACF;AAEA,aAAa,eAAe;AAAA,EAC1B,SAAS;AACX;AAEA,aAAa,YAAY;AAAA,EACvB,MAAM0F,mBAAAA,QAAU,OAAO;AAAA,EACvB,SAASA,mBAAA,QAAU,QAAQA,mBAAAA,QAAU,MAAM;AAAA,EAC3C,UAAUA,mBAAAA,QAAU,KAAK;AAAA,EACzB,OAAOA,mBAAAA,QAAU,UAAU,CAACA,mBAAAA,QAAU,QAAQA,mBAAA,QAAU,IAAI,CAAC,EAAE;AAAA,EAC/D,MAAMA,mBAAAA,QAAU,OAAO;AACzB;AChDA,MAAM,cAAc;AAAA,EAClB,CAAC,GAAG,KAAK;AAAA,EACT,CAAC,GAAG,KAAK;AAAA,EACT,CAAC,GAAG,KAAK;AAAA,EACT,CAAC,IAAI,MAAM;AACb;AAEA,MAAM,YAAY,CAAC,EAAE,cAAc,mBAAmB;AAC9C,QAAA,EAAE,kBAAkB/J,UAAAA;AAC1B,QAAM,EAAE,cAAc,eAAe,YAAY,UAAA,IAAc;AACzD,QAAA,UAAUsG,uBAAY,aAAa;AACzC,QAAM,aAAa,iBAAiB,CAAC,UAAU,MAAM,qBAAqB,EAAE,UAAU;AAEhF,QAAA,gBAAgB+E,MAAAA,QAAQ,MAAM;AAClC,QAAI,CAAC,eAAe;AAClB,aAAO;IACT;AAEM,UAAA,kBAAkBpL,qBAAI,cAAc,CAAC,aAAa,eAAe,MAAM,GAAG,CAAA,CAAE;AAE3E,WAAA,OAAO,KAAK,eAAe,EAAE,OAAO,CAAC,SAAS,SAAS,SAAS;AAAA,EAAA,GACtE,CAAC,eAAe,YAAY,CAAC;AAE1B,QAAA,wCAAwCoL,MAAAA,QAAQ,MAAM;AAC1D,WAAO,+CAA+C,OAAO;AAAA,EAAA,GAC5D,CAAC,OAAO,CAAC;AAEZ,QAAM,+BAA+BC,MAAA;AAAA,IACnC,CAAC,aAAa;AACR,UAAA,aAAa,cAAc,aAAa,aAAa;AACvD,eAAO;MACT;AAEM,YAAA,YAAY,aAAa,cAAc,cAAc;AACrD,YAAA,MAAMrL,qBAAI,cAAc,CAAC,cAAc,eAAe,SAAS,GAAG,EAAE;AAE1E,aAAOA,qBAAI,uCAAuC,CAAC,GAAG,GAAG,CAAE,CAAA;AAAA,IAC7D;AAAA,IAEA,CAAC,eAAe,uCAAuC,YAAY;AAAA,EAAA;AAGrE,QAAM,aAAa,cAAc,IAAI,CAAC,SAAS;AAC7C,UAAM,WAAWA,aAAAA,QAAI,YAAY,CAAC,eAAe,MAAM,CAAC;AAExD,QACE,CAAC,aAAa,aAAa,EAAE,SAAS,QAAQ,KAC9C,CAAC,CAAC,SAAS,aAAa,EAAE,SAAS,IAAI,GACvC;AACO,aAAA;AAAA,IACT;AAEI,QAAA,aAAa,eAAe,SAAS,SAAS;AACzC,aAAA;AAAA,IACT;AAEI,QAAA,CAAC,SAAS,QAAQ,SAAS,EAAE,SAAS,QAAQ,KAAK,SAAS,eAAe;AACtE,aAAA;AAAA,IACT;AAEA,QAAI,SAAS,QAAQ;AACZ,aAAA;AAAA,IACT;AAGE,WAAAL,2BAAAA,IAAC4D,aAAAA,UAAS,EAAA,KAAK,GACb,UAAA5D,2BAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,MAAM,cAAc,IAAI,EAAE;AAAA,QAC1B,MACE,SAAS,cACL,cAAc;AAAA,UACZ,IAAI;AAAA,YACF;AAAA,UACF;AAAA,QACD,CAAA,IACD;AAAA,QAEN,OAAO,cAAc;AAAA,UACnB,IAAIK,aAAI,QAAA,cAAc,IAAI,GAAG,YAAY,0BAA0B;AAAA,QAAA,CACpE;AAAA,QACD,MAAM;AAAA,QACN,UAAU;AAAA,QACV,OAAOA,aAAI,QAAA,WAAW,CAAC,YAAY,IAAI,GAAG,EAAE;AAAA,QAC5C,SAAS,6BAA6B,QAAQ;AAAA,MAAA;AAAA,IAAA,KAlB3B,IAoBvB;AAAA,EAAA,CAEH;AAGD,QAAM,EAAE,MAAM,YAAY,IAAI,WAAW,aAAa;AACtD,QAAM,EAAE,YAAY,IAAI,WAAW,WAAW,KAAK,WAAW,IAAI;AAElE,SAEKJ,2BAAA,KAAA0L,qBAAA,EAAA,UAAA;AAAA,IAAA;AAAA,IACA,eACC3L,2BAAA,IAAC4D,aAAS,UAAA,EAAA,KAAK,GACb,UAAA5D,2BAAA;AAAA,MAACwE,aAAA;AAAA,MAAA;AAAA,QACC,OAAO,WAAW;AAAA,QAClB,MAAK;AAAA,QACL,UAAU,CAAC,UAAU;AACnB,uBAAa,EAAE,MAAM,eAAe,MAAO,CAAA;AAAA,QAC7C;AAAA,QACA,OAAO,cAAc;AAAA,UACnB,IAAI,eAAe,gDAAgD;AAAA,UACnE,gBAAgB;AAAA,QAAA,CACjB;AAAA,QAEA,UAAY,YAAA,IAAI,CAAC,CAAC,OAAO,KAAK,MAC7BxE,2BAAA,IAACyE,aAAmB,QAAA,EAAA,OACjB,UADU,MAAA,GAAA,KAEb,CACD;AAAA,MAAA;AAAA,SAhBiB,MAkBtB;AAAA,EAEJ,EAAA,CAAA;AAEJ;AAEA,UAAU,YAAY;AAAA,EACpB,cAAc0F,mBAAAA,QAAU,KAAK;AAAA,EAC7B,cAAcA,mBAAAA,QAAU,KAAK;AAC/B;ACrHA,MAAMyB,oBAAkBlK,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA,aAEtB,KAAK,EAAE;AAAA,cACN,KAAK,EAAE;AAAA,oBACD,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAIlD,MAAM,YAAY,CAAC,EAAE,UAAU,cAAc,cAAc,UAAU,MAAM,qBAAqB;AACxF,QAAA,EAAE,kBAAkB;AACpB,QAAA,EAAE,kBAAkBzB,UAAAA;AAE1B,QAAM,cAAc,MAAM;AACxB,QAAI,SAAS,aAAa;AACjB,aAAA;AAAA,IACT;AAEI,QAAA,CAAC,WAAW,SAAS,WAAW,UAAU,EAAE,SAAS,IAAI,GAAG;AACvD,aAAA;AAAA,IACT;AAEO,WAAA;AAAA,EAAA;AAIP,SAAAJ,2BAAA,IAAC6L,4BAAY,SAAS,UAAU,YAAW,SACzC,UAAA5L,2BAAAA,KAAC,UAAK,UACJ,UAAA;AAAA,IAACD,2BAAA,IAAA8L,aAAA,aAAA,EACC,0CAACF,mBACC,EAAA,UAAA;AAAA,MAAA5L,2BAAA,IAAC,eAAc,EAAA,MAAM,YAAY,GAAG,eAAgC,CAAA;AAAA,MACpEA,2BAAAA,IAACuC,2BAAW,YAAW,QAAO,WAAU,cAAa,IAAG,MAAK,IAAG,SAC7D,UAAA;AAAA,QACC;AAAA,UACE,IAAI,eAAe,mDAAmD;AAAA,UACtE,gBAAgB;AAAA,QAClB;AAAA,QACA,EAAE,WAAWwJ,4BAAW,aAAa,EAAE;AAAA,MAAA,GAE3C;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,IACA/L,2BAAA,IAACgM,aACC,WAAA,EAAA,UAAAhM,2BAAAA,IAAC2D,aAAAA,MAAK,EAAA,KAAK,GACT,UAAA3D,2BAAAA,IAAC,WAAU,EAAA,cAA4B,aAA4B,CAAA,EACrE,CAAA,GACF;AAAA,IACAA,2BAAA;AAAA,MAACiM,aAAA;AAAA,MAAA;AAAA,QACC,cACEjM,2BAAA,IAAC+C,aAAO,QAAA,EAAA,SAAS,UAAU,SAAQ,YAChC,UAAc,cAAA,EAAE,IAAI,gCAAgC,gBAAgB,SAAU,CAAA,GACjF;AAAA,QAEF,YACE/C,2BAAAA,IAAC+C,aAAAA,QAAO,EAAA,MAAK,UACV,UAAA,cAAc,EAAE,IAAI,iBAAiB,gBAAgB,SAAS,CAAC,EAClE,CAAA;AAAA,MAAA;AAAA,IAEJ;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AAEA,UAAU,eAAe;AAAA,EACvB,gBAAgB;AAClB;AAEA,UAAU,YAAY;AAAA,EACpB,gBAAgBoH,mBAAU,QAAA;AAAA,EAC1B,UAAUA,mBAAAA,QAAU,KAAK;AAAA,EACzB,UAAUA,mBAAAA,QAAU,KAAK;AAAA,EACzB,cAAcA,mBAAAA,QAAU,KAAK;AAAA,EAC7B,cAAcA,mBAAAA,QAAU,KAAK;AAAA,EAC7B,MAAMA,mBAAAA,QAAU,OAAO;AACzB;ACjGA,MAAM,aAAa,CAAC,QAAQ,IAAI,OAAO,CAAC,KAAK,UAAU,MAAM,MAAM,MAAM,CAAC;AAE1E,MAAM,eAAe,CAAC,QAAQ;AAC5B,SAAO,IAAI,OAAO,CAAC,KAAK,SAAS,UAAU;AACzC,UAAM,MAAM,EAAE,OAAO,OAAO,YAAY,QAAQ;AAEzC,WAAA,IAAI,OAAO,GAAG;AAAA,EACvB,GAAG,CAAE,CAAA;AACP;AAEA,MAAM,eAAe,CAAC,QAAQ;AAC5B,SAAO,IACJ,OAAO,CAAC,KAAK,YAAY;AACxB,QAAI,SAAS,CAAA;AACb,UAAM,aAAa,QAAQ,WAAW,OAAO,CAAC,MAAM,SAAS;AACrD,YAAA,WAAW,WAAW,IAAI;AAE5B,UAAA,KAAK,SAAS,UAAU;AACnB,eAAA;AAAA,MACT;AAEI,UAAA,WAAW,KAAK,QAAQ,IAAI;AAC9B,aAAK,KAAK,IAAI;AAAA,MAAA,OACT;AACL,eAAO,KAAK,IAAI;AAAA,MAClB;AAEO,aAAA;AAAA,IACT,GAAG,CAAE,CAAA;AACL,UAAM,QACJ,IAAI,WAAW,IACX,IACA,KAAK,IAAI;AAAA,MACP;AAAA,MACA,IAAI,IAAI,CAAC,MAAM,EAAE,KAAK;AAAA,IACpB,IAAA;AAEJ,UAAA,iBAAiB,WAAW,UAAU;AAE5C,QAAI,iBAAiB,IAAI;AACvB,iBAAW,KAAK,EAAE,MAAM,UAAU,MAAM,KAAK,gBAAgB;AAAA,IAC/D;AAEA,QAAI,KAAK,EAAE,OAAO,YAAY,WAAY,CAAA;AAEtC,QAAA,OAAO,SAAS,GAAG;AACf,YAAA,aAAa,WAAW,MAAM;AAEpC,UAAI,aAAa,IAAI;AACnB,eAAO,KAAK,EAAE,MAAM,UAAU,MAAM,KAAK,YAAY;AAAA,MACvD;AAEA,UAAI,KAAK,EAAE,OAAO,QAAQ,GAAG,YAAY,QAAQ;AACjD,eAAS,CAAA;AAAA,IACX;AAEO,WAAA;AAAA,EACN,GAAA,EAAE,EACJ,OAAO,CAAC,QAAQ,IAAI,WAAW,SAAS,CAAC,EACzC,OAAO,CAAC,QAAQ;AACX,QAAA,IAAI,WAAW,WAAW,GAAG;AAC/B,aAAO,IAAI,WAAW,CAAC,EAAE,SAAS;AAAA,IACpC;AAEO,WAAA;AAAA,EAAA,CACR;AACL;AAEA,MAAM,iBAAiB,CAAC,QAAQ;AAC9B,SAAO,IAAI,OAAO,CAAC,KAAK,YAAY;AAC5B,UAAA,aAAa,QAAQ,WAAW,OAAO,CAAC,YAAY,QAAQ,SAAS,QAAQ;AAEnF,WAAO,IAAI,OAAO,CAAC,UAAU,CAAC;AAAA,EAChC,GAAG,CAAE,CAAA;AACP;AAEA,MAAM,eAAe,CAAC,MAAM,UAAU,OAAO;AAC3C,SAAO,QAAQ,OAAO,CAAC,KAAK,EAAE,iBAAiB;AACvC,UAAApC,QAAO,WAAW,KAAK,CAAC,QAAQ,IAAI,SAAS,IAAI,GAAG,QAAQ;AAElE,QAAIA,OAAM;AACF,YAAAA;AAAA,IACR;AAEO,WAAA;AAAA,KACN,IAAI;AACT;AAEA,MAAM,eAAe,CAAC,MAAMA,OAAM,UAAU,CAAA,MAAO;AAC1C,SAAA,QAAQ,IAAI,CAAC,QAAQ;AAC1B,QAAI,aAAa,IAAI,WAAW,IAAI,CAAC,WAAW;AAC1C,UAAA,OAAO,SAAS,MAAM;AACjB,eAAA;AAAA,UACL,GAAG;AAAA,UACH,MAAAA;AAAA,QAAA;AAAA,MAEJ;AAEO,aAAA;AAAA,IAAA,CACR;AAEM,WAAA;AAAA,EAAA,CACR;AACH;AClGA,MAAM,OAAO,CAACzG,eAAc,YAAY,eAAe;AACjD,MAAA,cAAc2I,2BAAU,UAAU;AAElCtE,eAAAA,QAAA,aAAa,CAAC,WAAW,MAAM,GAAG,aAAa,aAAa,WAAW,QAAQ,IAAI,CAAC,CAAC;AAElF,SAAA;AAAA,IACL,GAAGrE;AAAA,IACH;AAAA,IACA,cAAc;AAAA,IACd,kBAAkB;AAAA,EAAA;AAEtB;ACdA,MAAM,gBAAgB,CAAC,KAAK,MAAM,OAAO;AACvC,MACE,MAAM,QAAQ,GAAG,KACjB,QAAQ,KACR,MAAM,KACN,QAAQ,IAAI,SAAS,KACrB,MAAM,IAAI,SAAS,GACnB;AACM,UAAA,WAAW2I,2BAAU,GAAG;AAE9B,UAAM,OAAO,SAAS,OAAO,MAAM,CAAC;AACpC,aAAS,OAAO,IAAI,GAAG,KAAK,CAAC,CAAC;AAEvB,WAAA;AAAA,EACT;AAEO,SAAA;AACT;ACnBA,MAAM,gCAAgC,CAAC,cAAc;AAC7C,QAAA,EAAE,KAAS,IAAA;AAEjB,MAAI,SAAS,YAAY;AACvB,WAAO,EAAE,WAAW,gBAAgB,IAAI,cAAc,SAAS,OAAO;AAAA,EACxE;AAEA,SAAO,CAAC,CAAC,QAAQ,eAAe,YAAY,YAAY,QAAQ,EAAE,SAAS,IAAI,KAAK,CAAC,CAAC;AACxF;ACCA,MAAM,qBAAqB;AAE3B,MAAM3I,iBAAe;AAAA,EACnB,WAAW,CAAC;AAAA,EACZ,kBAAkB,CAAC;AAAA,EACnB,YAAY;AAAA,EACZ,aAAa,CAAC;AAAA,EACd,UAAU,CAAC;AAAA,EACX,cAAc,CAAC;AACjB;AAEA,MAAMD,YAAU,CAAC,QAAQC,gBAAc;AAAA;AAAA,EAErCoE,yBAAQ,OAAO,CAAC,eAAe;AAC7B,UAAM,iBAAiB,CAAC,gBAAgB,WAAW,MAAM;AAEzD,YAAQ,OAAO,MAAM;AAAA,MACnB,KAAK,YAAY;AACf,cAAM,uBAAuBrF,aAAA,QAAI,OAAO,gBAAgB,CAAE,CAAA;AACpD,cAAA,EAAE,WAAW,QAAY,IAAA;AAC/BsF,qBAAA,QAAI,YAAY,gBAAgB,cAAc,sBAAsB,WAAW,OAAO,CAAC;AACvF;AAAA,MACF;AAAA,MACA,KAAK,gBAAgB;AACb,cAAA,WAAWsE,2BAAU,KAAK;AAC1B,cAAA,YAAY5J,qBAAI,UAAU,CAAC,gBAAgB,cAAc,OAAO,IAAI,GAAG,CAAA,CAAE;AAG/E,cAAM0H,QACJ,OAAO,WAAW,WAAW,WAAW,GAAG,WAC3C,OAAO,WAAW,WAAW,IAAI,GAAG,WACpC;AAEF,cAAM,WAAW1H,aAAAA,QAAI,UAAU,gBAAgB,CAAA,CAAE,EAAE;AACnD,cAAM,uBAAuB,CAAC,GAAG,gBAAgB,WAAW,GAAG,YAAY;AAC3E,cAAM,kBAAkBA,aAAA,QAAI,UAAU,sBAAsB,CAAE,CAAA;AAC9D,YAAI,UAAUA,aAAA,QAAI,UAAU,gBAAgB,CAAE,CAAA;AAE1C,YAAA,MAAM,QAAQ,eAAe,GAAG;AAClCsF,uBAAA;AAAA,YACE;AAAA,YACA,CAAC,WAAW,IAAI,WAAW,IAAI,GAAG,YAAY;AAAA,YAC9C,CAAC,GAAG,iBAAiB,EAAE,MAAM,OAAO,MAAM,MAAAoC,OAAM;AAAA,UAAA;AAAA,QAClD,OACK;AACLpC,uBAAA;AAAA,YACE;AAAA,YACA,CAAC,WAAW,IAAI,WAAW,IAAI,GAAG,YAAY;AAAA,YAC9C,CAAC,EAAE,MAAM,OAAO,MAAM,MAAAoC,OAAM;AAAA,UAAA;AAAA,QAEhC;AAEM,cAAA,gBAAgB,aAAa,OAAO;AACtCpC,qBAAAA,QAAA,YAAY,gBAAgB,aAAa;AAC7C;AAAA,MACF;AAAA,MACA,KAAK,aAAa;AACZA,6BAAA,YAAY,CAAC,gBAAgB,GAAG,OAAO,IAAI,GAAG,OAAO,KAAK;AAC9D;AAAA,MACF;AAAA,MACA,KAAK,kBAAkB;AACjBA,6BAAA,YAAY,CAAC,YAAY,YAAY,GAAG,OAAO,IAAI,GAAG,OAAO,KAAK;AACtE;AAAA,MACF;AAAA,MACA,KAAK,kBAAkB;AACrBA,qBAAA,QAAI,YAAY,CAAC,YAAY,MAAM,GAAG,OAAO,KAAK;AAClD;AAAA,MACF;AAAA,MACA,KAAK,YAAY;AACf,mBAAW,eAAe,MAAM;AAChC;AAAA,MACF;AAAA,MACA,KAAK,gBAAgB;AACb,cAAA,MAAMtF,aAAAA,QAAI,OAAO,CAAC,GAAG,gBAAgB,OAAO,UAAU,YAAY,GAAG,CAAA,CAAE;AACzE,YAAA,WAAW4J,2BAAU,KAAK;AAE9B,YAAI,IAAI,WAAW,KAAM,IAAI,WAAW,KAAK5J,aAAA,QAAI,KAAK,CAAC,GAAG,MAAM,GAAG,EAAE,MAAM,UAAW;AACpF,gBAAM,sBAAsBA,aAAA,QAAI,OAAO,gBAAgB,CAAE,CAAA;AACzDsF,uBAAA;AAAA,YACE;AAAA,YACA;AAAA,YACA,oBAAoB,OAAO,CAAC,GAAG,UAAU,OAAO,aAAa,KAAK;AAAA,UAAA;AAAA,QACpE,OACK;AACLA,uBAAA;AAAA,YACE;AAAA,YACA,CAAC,GAAG,gBAAgB,OAAO,UAAU,YAAY;AAAA,YACjD,IAAI,OAAO,CAAC,GAAG,UAAU,UAAU,OAAO,UAAU;AAAA,UAAA;AAAA,QAExD;AACA,cAAM,cAAc,aAAatF,aAAA,QAAI,UAAU,gBAAgB,CAAE,CAAA,CAAC;AAC9DsF,qBAAAA,QAAA,YAAY,gBAAgB,WAAW;AAC3C;AAAA,MACF;AAAA,MACA,KAAK,oBAAoB;AACvB,cAAM,mBAAmBtF,aAAA;AAAA,UACvB;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,cAAc,YAAY;AAAA,UACrD,CAAC;AAAA,QAAA;AAEH,cAAM,mBAAmBA,aAAA;AAAA,UACvB;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,eAAe,YAAY;AAAA,UACtD,CAAC;AAAA,QAAA;AAEH,cAAM,eAAeA,aAAA;AAAA,UACnB;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,cAAc,cAAc,OAAO,SAAS;AAAA,UACvE,CAAC;AAAA,QAAA;AAEH,cAAM,aAAa,CAAC,GAAG,kBAAkB,YAAY;AACjD,YAAA,WAAW4J,2BAAU,KAAK;AAE9BtE,qBAAA;AAAA,UACE;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,cAAc,YAAY;AAAA,UACrD,iBAAiB,OAAO,CAAC,GAAG,UAAU,OAAO,cAAc,KAAK;AAAA,QAAA;AAElEA,qBAAA;AAAA,UACE;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,eAAe,YAAY;AAAA,UACtD,cAAc,YAAY,WAAW,SAAS,GAAG,OAAO,UAAU;AAAA,QAAA;AAGpE,cAAM,cAAc,aAAatF,aAAA,QAAI,UAAU,gBAAgB,CAAE,CAAA,CAAC;AAC9DsF,qBAAAA,QAAA,YAAY,gBAAgB,WAAW;AAC3C;AAAA,MACF;AAAA,MACA,KAAK,eAAe;AACZ,cAAA,WAAWsE,2BAAU,KAAK;AAChC,cAAM,aAAa5J,aAAA;AAAA,UACjB;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,cAAc,YAAY;AAAA,UACrD,CAAC;AAAA,QAAA;AAGHsF,qBAAA;AAAA,UACE;AAAA,UACA,CAAC,GAAG,gBAAgB,OAAO,cAAc,YAAY;AAAA,UACrD,cAAc,YAAY,OAAO,WAAW,OAAO,UAAU;AAAA,QAAA;AAG/D,cAAM,cAAc,aAAatF,aAAA,QAAI,UAAU,gBAAgB,CAAE,CAAA,CAAC;AAC9DsF,qBAAAA,QAAA,YAAY,gBAAgB,WAAW;AAC3C;AAAA,MACF;AAAA,MACA,KAAK,qBAAqB;AACxB,mBAAW,aAAa,OAAO;AAC/B,mBAAW,WAAW;AAAA,UACpB,UAAUtF,aAAAA,QAAI,OAAO,CAAC,gBAAgB,aAAa,OAAO,MAAM,MAAM,GAAG,EAAE;AAAA,UAC3E,MAAM,aAAa,OAAO,MAAM,MAAM,cAAc,SAAS,IAAI,KAAK;AAAA,QAAA;AAGxE;AAAA,MACF;AAAA,MACA,KAAK,oBAAoB;AACvBsF,qBAAA;AAAA,UACE;AAAA,UACA,CAAC,gBAAgB,aAAa,MAAM,YAAY,MAAM;AAAA,UACtD,MAAM,SAAS;AAAA,QAAA;AAGjB,cAAM,cAAcsE,mBAAAA,QAAU5J,aAAA,QAAI,OAAO,gBAAgB,CAAE,CAAA,CAAC;AAC5D,cAAM,kBAAkB,aAAa,MAAM,YAAY,MAAM,SAAS,MAAM,WAAW;AAEnF,YAAA,gBAAgB,SAAS,GAAG;AAC9BsF,uBAAAA,QAAI,YAAY,gBAAgB,aAAa,eAAe,CAAC;AAAA,QAC/D;AAEA;AAAA,MACF;AAAA,MACA,KAAK,oBAAoB;AACvB,mBAAW,cAAc,MAAM;AAC/B;AAAA,MACF;AAAA,MACA,KAAK,uBAAuB;AAC1B,mBAAW,aAAa;AACxB,mBAAW,WAAW;AACtB;AAAA,MACF;AAAA,MACA;AACS,eAAA;AAAA,IACX;AAAA,EAAA,CACD;AAAA;ACtJH,MAAM,mBAAmB,CAAC,EAAE,YAAY,YAAY,mBAAmB,MAAM,mBAAmB;AACxF,QAAA,CAAC,cAAc,QAAQ,IAAIuG,MAAA;AAAA,IAAW7K;AAAAA,IAASC;AAAAA,IAAc,MACjE,KAAKA,gBAAc,YAAY,UAAU;AAAA,EAAA;AAE3C,QAAM,CAAC,mBAAmB,oBAAoB,IAAIoH,eAAS,KAAK;AAC1D,QAAA,EAAE,eAAevI,aAAAA;AACvB,QAAM,qBAAqBI,aAAAA;AACrB,QAAA,EAAE,WAAW6B,eAAAA;AACnB,QAAM,CAAC,iBAAiB,kBAAkB,IAAIsG,eAAS,KAAK;AAC5D,QAAM,CAAC,qBAAqB,sBAAsB,IAAIA,eAAS,KAAK;AACpE,QAAM,EAAE,kBAAkB,aAAa,cAAc,YAAY,SAAa,IAAA;AACxE,QAAA,EAAE,kBAAkBtI,UAAAA;AACpB,QAAA,YAAY,WAAW,KAAK;AAC5B,QAAA,aAAa,cAAc,cAAc;AAC/C,QAAM,aAAa,iBAAiB,CAAC,UAAU,MAAM,qBAAqB,EAAE,UAAU;AAChF,QAAA,EAAE,QAAQE,aAAAA;AAEhB,QAAM,oBAAoB,OAAO,KAAK,UAAU,EAAE,OAAO,CAAC,SAAS;AACjE,UAAM,OAAO,aAAa,IAAI,GAAG,QAAQ;AAEzC,WACE,CAAC;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACA,EAAA,SAAS,IAAI,KAAK,CAAC,CAAC;AAAA,EAAA,CAEzB;AACK,QAAA,aAAa,aAAa,QAAQ;AACxC,QAAM,kBAAkB,WAAW,QAAQ,CAAC,WAAW,OAAO,UAAU;AACxE,QAAM,mBAAmB,OAAO,KAAK,aAAa,UAAU,EACzD,OAAO,CAAC,UAAU,cAAc,YAAY,IAAI,GAAG,MAAM,WAAW,WAAW,IAAI,EACnF,OAAO,CAAC,SAAS,gBAAgB,UAAU,CAAC,OAAO,GAAG,SAAS,IAAI,MAAM,EAAE,EAC3E,KAAK;AAEF,QAAA,eAAe,CAAC,EAAE,QAAQ,EAAE,MAAM,MAAA,QAAc;AAC3C,aAAA;AAAA,MACP,MAAM;AAAA,MACN,MAAM,KAAK,MAAM,GAAG;AAAA,MACpB;AAAA,IAAA,CACD;AAAA,EAAA;AAGH,QAAM,oBAAoB,MAAM;AACX,uBAAA,CAAC,SAAS,CAAC,IAAI;AAAA,EAAA;AAGpC,QAAM,sBAAsB,MAAM;AACT,2BAAA,CAAC,SAAS,CAAC,IAAI;AAAA,EAAA;AAGlC,QAAA,mBAAmB,CAAC,EAAE,QAAQ,EAAE,MAAM,MAAA,QAAc;AAC/C,aAAA;AAAA,MACP,MAAM;AAAA,MACN,MAAM,KAAK,MAAM,GAAG;AAAA,MACpB;AAAA,IAAA,CACD;AAAA,EAAA;AAGH,QAAM,mBAAmB,CAAC,EAAE,MAAM,YAAY;AACnC,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,mBAAmB,CAAC,MAAM;AAC9B,MAAE,eAAe;AACR,aAAA;AAAA,MACP,MAAM;AAAA,IAAA,CACP;AACiB;EAAA;AAGd,QAAA,eAAe,CAAC,MAAM;AAC1B,MAAE,eAAe;AACG;EAAA;AAGtB,QAAM,iBAAiBO,WAAA;AAAA,IACrB,CAAC,SAAS;AACD,aAAA;AAAA,QACL,oBACI,kCAAkC,IAAI,mBACtC,+BAA+B,IAAI;AAAA,QACvC;AAAA,MAAA;AAAA,IAEJ;AAAA,IACA;AAAA,MACE,UAAU,EAAE,QAAQ;AAClB,YAAI,cAAc;AAChB,uBAAa,KAAK,IAAI;AAAA,QACxB;AACS,iBAAA;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACmB;AACpB,mBAAW,qBAAqB;AAAA,MAClC;AAAA,MACA,UAAU;AACW,2BAAA,EAAE,MAAM,WAAW,SAAS,EAAE,IAAI,wBAAwB;AAAA,MAC/E;AAAA,IACF;AAAA,EAAA;AAEI,QAAA,EAAE,WAAW,iBAAqB,IAAA;AAExC,QAAM,gBAAgB,MAAM;AAC1B,UAAM,EAAE,SAAS,WAAW,SAAS,IAAIoJ,mBAAAA,QAAU,YAAY;AAC/D,mBAAe,OAAO;AAAA,MACpB,SAAS;AAAA,QACP,GAAG;AAAA,QACH,MAAM,eAAe,QAAQ,IAAI;AAAA,MACnC;AAAA,MACA;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,qBAAqB,CAAC,WAAW,YAAY;AACxC,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGG,QAAA,kBAAkB,CAAC,WAAW,YAAY;AACrC,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAGH,QAAM,WAAW,CAAC,WAAW,YAAY,cAAc,kBAAkB;AAEvE,QAAI,iBAAiB,eAAe;AACzB,eAAA;AAAA,QACP,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,MAAA,CACD;AAAA,IAAA,OACI;AACI,eAAA;AAAA,QACP,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MAAA,CACD;AAAA,IACH;AAAA,EAAA;AAGI,QAAA,UAAU,CAAC,WAAW,YAAY;AAC7B,aAAA;AAAA,MACP,MAAM;AAAA,MACN;AAAA,MACA;AAAA,IAAA,CACD;AAAA,EAAA;AAID,SAAAjK,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,eAAe;AAAA,MACf,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,aAAa;AAAA,MACb;AAAA,MACA;AAAA,MACA,sBAAsB,CAAC,SAAS;AACrB,iBAAA;AAAA,UACP,MAAM;AAAA,UACN;AAAA,QAAA,CACD;AACiB;MACpB;AAAA,MACA;AAAA,MACA;AAAA,MAEA,0CAACsC,mBACC,EAAA,UAAA;AAAA,QAACrC,2BAAAA,KAAA,QAAA,EAAK,UAAU,cACd,UAAA;AAAA,UAAAD,2BAAA;AAAA,YAACgE,aAAA;AAAA,YAAA;AAAA,cACC,OAAO;AAAA,gBACL;AAAA,kBACE,IAAI,eAAe,mDAAmD;AAAA,kBACtE,gBAAgB,wBAAwB+H,4BAAW,SAAS,CAAC;AAAA,gBAC/D;AAAA,gBACA,EAAE,MAAMA,4BAAW,SAAS,EAAE;AAAA,cAChC;AAAA,cACA,UAAU,cAAc;AAAA,gBACtB,IAAI;AAAA,kBACF;AAAA,gBACF;AAAA,gBACA,gBAAgB;AAAA,cAAA,CACjB;AAAA,cACD,kBACE/L,2BAAA;AAAA,gBAACgD,aAAA;AAAA,gBAAA;AAAA,kBACC,0CAAYmJ,MAAU,WAAA,EAAA;AAAA,kBACtB,SAAS,CAAC,MAAM;AACd,sBAAE,eAAe;AACV;kBACT;AAAA,kBACA,IAAG;AAAA,kBAEF,UAAc,cAAA;AAAA,oBACb,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAAA,CACjB;AAAA,gBAAA;AAAA,cACH;AAAA,cAEF,eACEnM,2BAAA;AAAA,gBAAC+C,aAAA;AAAA,gBAAA;AAAA,kBACC,UAAUqJ,iBAAAA,QAAQ,aAAa,YAAY;AAAA,kBAC3C,0CAAYC,MAAM,OAAA,EAAA;AAAA,kBAClB,MAAK;AAAA,kBAEJ,wBAAc,EAAE,IAAI,eAAe,gBAAgB,QAAQ;AAAA,gBAAA;AAAA,cAC9D;AAAA,YAAA;AAAA,UAEJ;AAAA,yCACCpI,aAAAA,eACC,EAAA,UAAAjE,2BAAA;AAAA,YAAC4B,aAAA;AAAA,YAAA;AAAA,cACC,YAAW;AAAA,cACX,WAAS;AAAA,cACT,QAAO;AAAA,cACP,YAAY;AAAA,cACZ,eAAe;AAAA,cACf,aAAa;AAAA,cACb,cAAc;AAAA,cAEd,0CAACC,mBAAK,EAAA,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,gBAAA7B,+BAACuC,aAAAA,YAAW,EAAA,SAAQ,SAAQ,IAAG,MAC5B,UAAc,cAAA;AAAA,kBACb,IAAI,eAAe,iCAAiC;AAAA,kBACpD,gBAAgB;AAAA,gBACjB,CAAA,GACH;AAAA,+CACCoB,aACC,MAAA,EAAA,UAAA3D,2BAAA,IAAC4D,yBAAS,KAAK,GAAG,GAAG,IACnB,UAAA5D,2BAAA;AAAA,kBAACwE,aAAA;AAAA,kBAAA;AAAA,oBACC,OAAO,cAAc;AAAA,sBACnB,IAAI,eAAe,iDAAiD;AAAA,sBACpE,gBAAgB;AAAA,oBAAA,CACjB;AAAA,oBACD,MAAM,cAAc;AAAA,sBAClB,IAAI;AAAA,wBACF;AAAA,sBACF;AAAA,sBACA,gBAAgB;AAAA,oBAAA,CACjB;AAAA,oBACD,UAAU,CAAC,UAAU;AACN,mCAAA;AAAA,wBACX,QAAQ;AAAA,0BACN,MAAM;AAAA,0BACN,OAAO,UAAU,KAAK,OAAO;AAAA,wBAC/B;AAAA,sBAAA,CACD;AAAA,oBACH;AAAA,oBACA,OAAO,aAAa,SAAS;AAAA,oBAE5B,UAAA,kBAAkB,IAAI,CAAC,cACtBxE,2BAAAA,IAACyE,aAAAA,UAAuB,OAAO,WAC5B,UADU,UAAA,GAAA,SAEb,CACD;AAAA,kBAAA;AAAA,mBAEL,EACF,CAAA;AAAA,gBACAzE,2BAAAA,IAAC4B,oBAAI,YAAY,GAAG,eAAe,GACjC,UAAA5B,2BAAA,IAACsM,wBAAQ,EACX,CAAA;AAAA,+CACC/J,aAAAA,YAAW,EAAA,SAAQ,SAAQ,IAAG,MAC5B,UAAc,cAAA;AAAA,kBACb,IAAI,eAAe,6BAA6B;AAAA,kBAChD,gBAAgB;AAAA,gBACjB,CAAA,GACH;AAAA,gBAEAvC,2BAAA;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC;AAAA,oBACA;AAAA,oBACA,QAAQ;AAAA,oBACR,YAAY,CAAC,UAAU;AACZ,+BAAA;AAAA,wBACP,MAAM;AAAA,wBACN,MAAM;AAAA,wBACN;AAAA,sBAAA,CACD;AAAA,oBACH;AAAA,oBACA,eAAe,CAAC,OAAO,UAAU;AACtB,+BAAA;AAAA,wBACP,MAAM;AAAA,wBACN,UAAU;AAAA,wBACV,YAAY;AAAA,sBAAA,CACb;AAAA,oBACH;AAAA,kBAAA;AAAA,gBACF;AAAA,cAAA,GACF;AAAA,YAAA;AAAA,UAAA,GAEJ;AAAA,UACAA,2BAAA;AAAA,YAACuM,aAAA;AAAA,YAAA;AAAA,cACC,UAAU;AAAA,gBACR,IAAI,eAAe,wCAAwC;AAAA,gBAC3D,gBAAgB;AAAA,cAClB;AAAA,cACA,gDAAkBF,MAAM,OAAA,EAAA;AAAA,cACxB,wBAAwB;AAAA,cACxB,QAAQ;AAAA,cACR,gBAAgB;AAAA,cAChB,WAAW;AAAA,cACX,oBAAmB;AAAA,YAAA;AAAA,UACrB;AAAA,QAAA,GACF;AAAA,QACC,mBACCrM,2BAAA;AAAA,UAACwM;AAAAA,UAAA;AAAA,YACC,UAAU;AAAA,YACV,UAAU;AAAA,YACV,cAAc;AAAA,YACd,cAAc;AAAA,YACd,MAAM,aAAa,UAAU,GAAG,QAAQ;AAAA,YACxC,gBAAgB,aAAa,UAAU,GAAG,eAAe;AAAA,UAAA;AAAA,QAC3D;AAAA,MAAA,GAEJ;AAAA,IAAA;AAAA,EAAA;AAGN;AAEA,iBAAiB,eAAe;AAAA,EAC9B,mBAAmB;AAAA,EACnB,cAAc;AAChB;AAEA,iBAAiB,YAAY;AAAA,EAC3B,YAAYrC,mBAAAA,QAAU,OAAO;AAAA,EAC7B,mBAAmBA,mBAAU,QAAA;AAAA,EAC7B,YAAYA,2BAAU,MAAM;AAAA,IAC1B,YAAYA,mBAAAA,QAAU,OAAO;AAAA,IAC7B,MAAMA,mBAAAA,QAAU,OAAO;AAAA,IACvB,SAASA,2BAAU,MAAM;AAAA,MACvB,MAAMA,mBAAAA,QAAU,MAAM;AAAA,MACtB,MAAMA,mBAAAA,QAAU,MAAM;AAAA,IACvB,CAAA,EAAE;AAAA,IACH,WAAWA,mBAAAA,QAAU,OAAO;AAAA,IAC5B,SAASA,mBAAAA,QAAU,OAAO;AAAA,EAC3B,CAAA,EAAE;AAAA,EACH,MAAMA,mBAAAA,QAAU,OAAO;AAAA,EACvB,cAAcA,mBAAU,QAAA;AAC1B;AC7YO,MAAM,yBAAyB,oBAAoB,CAAC,UAAU,MAAM,UAAU,WAAW;ACAnF,MAAA,mBAAmB,CAAC,SAA4B;AACrD,QAAA,EAAE,+BAA+B;AAEvC,QAAM,CAAC,YAAY,MAAM,QAAQ,IAAI,KAAK,MAAM,GAAG;AAM5C,SAAA,2BAA2B,YAAY,MAAM,QAAQ;AAC9D;ACdA,MAAM,kBAAkB;AAAA,EACtB,OAAO;AAAA;AAAA,IAEL,WAAW;AAAA,MACT,OAAO,CAAC;AAAA,IACV;AAAA,EACF;AAAA,EACA,gBAAgB;AAAA,IACd,UAAU,EAAE,cAAc,IAAI,eAAe,CAAA,EAAG;AAAA,IAChD,UAAU;AAAA,MACR,SAAS,CAAC;AAAA,MACV,4BAA4B,CAAC;AAAA,MAC7B,6BAA6B,CAAC;AAAA,MAC9B,+BAA+B,CAAC;AAAA,IAClC;AAAA,EACF;AACF;AAuDA,MAAM,gBAAgB,CAAC,EAAE,MAAM,GAAG,YAAiE;AAC3F,QAAA,aAAa,iBAAiB,IAAI;AAExC,SAEKnK,2BAAAA,IAAA2L,WAAAA,UAAA,EAAA,UAAA,WAAW,IAAI,CAAC,cACd3L,2BAAAA,IAAA,UAAU,WAAV,EAA0C,GAAG,MAAA,GAApB,UAAU,IAAiB,CACtD,EACH,CAAA;AAEJ;AC/EM,MAAA,WAAW,CAAC,QAAgC;AACzC,SAAA,OAAO,QAAQ,YAAY,QAAQ,QAAQ,MAAM,QAAQ,GAAG,MAAM;AAC3E;ACAA,MAAM,yBAAyB,CAAC,SAAiB;AAC/C,QAAM,CAAC,EAAE,UAAU,IAAIyM,aAAe,eAAA;AACtC,QAAM,2BAA2B;AAAA,IAC/B,CAAC,UAAU,MAAM,qBAAqB,EAAE;AAAA,EAAA;AAE1C,QAAM,kBAAkB,mBAAmB,0BAA0B,MAAM,QAAQ;AAE5E,SAAA;AACT;AAKA,MAAM,cAAc,CAClB,eACA,WACyB;AACzB,SAAO,OAAO,KAAK,aAAa,EAAE,OAA6B,CAAC,KAAK,YAAY;AACzE,UAAA,eAAe,cAAc,OAAO;AACpC,UAAA,YAAY,OAAO,OAAO,KAAK;AAEjC,QAAA,SAAS,YAAY,GAAG;AAEnB,aAAA,EAAE,GAAG,KAAK,CAAC,OAAO,GAAG,YAAY,cAAc,SAAS;IACjE;AAEA,QAAI,OAAO,IAAI;AAER,WAAA;AAAA,EACT,GAAG,CAAE,CAAA;AACP;AAEA,MAAM,qBAAqB,CACzB,OACA,MACA,aACG;AACG,QAAA,eAAe,MAAM,KAAK,CAAC,EAAE,IAAAC,IAAAA,MAASA,IAAG,SAAS,IAAI,CAAC;AAE7D,MAAI,CAAC,cAAc;AACV,WAAA;AAAA,EACT;AAEM,QAAA,EAAE,IAAI,OAAW,IAAA;AACjB,QAAA,oBAAoBpI,GAAAA,MAAM,UAAU,EAAE;AAC5C,QAAM,qBAAqBA,GAAAA,MAAM,SAAS,UAAU,CAAC,CAAC;AAEhD,QAAA,eAAe,YAAY,mBAAmB,kBAAkB;AAEhE,QAAA,OAAO,GAAG,EAAE,IAAIyF,GAAAA,UAAU,cAAc,EAAE,QAAQ,MAAO,CAAA,CAAC;AAEzD,SAAA;AACT;AC5DO,MAAM4C,aAAW;AACjB,MAAMC,uBAAqB;AAC3B,MAAM,YAAY;AAClB,MAAMC,gBAAc;AACpB,MAAM,sBAAsB;AAC5B,MAAM,aAAa;AACnB,MAAM,mBAAmB;AACzB,MAAM,+BACX;ACQF,MAAM7H,YAAU,MAAM;AACb,SAAA;AAAA,IACL,MAAM2H;AAAAA,EAAA;AAEV;AAOA,MAAMG,qBAAmB,CAAC,UACvB;AAAA,EACC,MAAMF;AAAAA,EACN;AACF;AAQF,MAAM,WAAW,CAAC,UAAuC,eAAe,WACrE;AAAA,EACC,MAAM;AAAA,EACN;AAAA,EACA;AACF;AAMF,MAAMG,eAAa,OAAO,EAAE,MAAMF,cAAY;AAO9C,MAAM,oBAAoB,CACxB,yBACA,8BAEC;AAAA,EACC,MAAM;AAAA,EACN;AAAA,EACA;AACF;AAMF,MAAM,YAAY,CAAC,YAChB;AAAA,EACC,MAAM;AAAA,EACN;AACF;AAMF,MAAM,kBAAkB,CAAC,UACtB;AAAA,EACC,MAAM;AAAA,EACN;AACF;AAMF,MAAM,2BAA2B,OAC9B;AAAA,EACC,MAAM;AACR;AC3FF,MAAM,6BAA6B,CACjC,YACA,sBAAgE,OAC7D;AACI,SAAA,OAAO,KAAK,UAAU,EAAE;AAAA,IAC7B,CAAC,KAAK,YAAY;AAChB,YAAM,YAAY,WAAW,OAAO,KAAK,CAAA;AACnC,YAAA,EAAE,MAAM,SAAa,IAAA;AAE3B,UAAI,aAAa,WAAW;AACtB,YAAA,OAAO,IAAI,UAAU;AAAA,MAC3B;AAEA,UAAI,SAAS,aAAa;AACxB,cAAM,yBAAyB,oBAAoB,UAAU,SAAS,GAAG,cAAc;AACvF,cAAM,8BAA8B;AAAA,UAClC;AAAA,UACA;AAAA,QAAA;AAGF,YAAI,aAAa,MAAM;AACrB,cAAI,OAAO,IAAI,UAAU,eAAe,OAAO,CAAK,IAAA;AAAA,QACtD;AAEA,YAAI,UAAU,OAAO,UAAU,eAAe,QAAQ,UAAU;AAC1D,cAAA,OAAO,IAAI;AAEf,mBAAS,IAAI,GAAG,IAAI,UAAU,KAAK,KAAK,GAAG;AACrC,gBAAA,OAAO,EAAE,KAAK,2BAA2B;AAAA,UAC/C;AAAA,QACF;AAAA,MACF;AAEA,UAAI,SAAS,eAAe;AAC1B,YAAI,aAAa,MAAM;AACjB,cAAA,OAAO,IAAI;QACjB;AAAA,MACF;AAEO,aAAA;AAAA,IACT;AAAA,IACA,CAAC;AAAA,EAAA;AAEL;AAEA,MAAM,+BAA+B,CAInC,MACA,mBACA,oBACG;AACG,QAAA,qBAAqB,CAMzB,OACA,WACG;AACI,WAAA,OAAO,KAAK,KAAK,EAAE;AAAA,MACxB,CAAC,KAAK,YAAY;AACV,cAAA,YAAY,OAAO,WAAW,OAAO;AAErC,cAAA,QAAQ,MAAM,OAAO;AAO3B,YAAI,CAAC,WAAW;AACd,cAAI,OAAO,IAAI;AACR,iBAAA;AAAA,QACT;AAEA,YAAI,UAAU,SAAS,iBAAiB,MAAM,QAAQ,KAAK,GAAG;AACxD,cAAA,OAAO,IAAK,MAAoD;AAAA,YAClE,CAAC,mBAAmB;AAClB,oBAAM,iBAAiB;AAAA,gBACrB;AAAA,gBACA,gBAAgB,eAAe,WAAW;AAAA,cAAA;AAGrC,qBAAA;AAAA,YACT;AAAA,UAAA;AAGK,iBAAA;AAAA,QACT;AAEI,YAAA,UAAU,SAAS,aAAa;AAClC,cAAI,UAAU,YAAY;AACpB,gBAAA,OAAO,IACT,SAAS,MAAM,QAAQ,KAAK,IAEtB,MACA,IAAI,CAAC,cAAc;AACnB,oBAAM,iBAAiB;AAAA,gBACrB;AAAA,gBACA,gBAAgB,UAAU,SAAS;AAAA,cAAA;AAG9B,qBAAA;AAAA,YACR,CAAA,IACD;AAAA,UAAA,OACD;AACD,gBAAA,OAAO,IAAI,QACX,mBAAmB,OAAO,gBAAgB,UAAU,SAAS,CAAC,IAC9D;AAAA,UACN;AAEO,iBAAA;AAAA,QACT;AAEI,YAAA,UAAU,SAAS,YAAY;AACjC,cAAI,OAAO,IAAI;AAAA,QACjB;AAEO,eAAA;AAAA,MACT;AAAA,MACA,CAAC;AAAA,IAAA;AAAA,EACH;AAGK,SAAA,mBAAmB,MAAM,iBAAiB;AACnD;ACvFA,MAAM,4BAA4B,CAAC;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAsC;AACpC,QAAM,gBAAgB;AAAA,IACpB,CAAC,UAAU,MAAM,uCAAuC,EAAE;AAAA,EAAA;AAE5D,QAAMG,eAAcC,WAAAA;AACpB,QAAM,qBAAqB1M,aAAAA;AACrB,QAAA,EAAE,mBAAmB6C,aAAAA;AACrB,QAAA,EAAE,eAAejD,aAAAA;AACvB,QAAM,EAAE,MAAM,QAAQ,IAAIiC,eAAW,WAAA;AACrC,QAAM,CAAC,EAAE,OAAO,SAAS,CAAC,IAAIqK,aAAe,eAAA;AAC7C,QAAM,WAAW;AACjB,QAAM,EAAE,yBAAyB,0BAA0B,MAAM,WAAW,WAC1E,iBAAiB,CAAC,UAAU,MAAM,qCAAqC,CAAC;AACpE,QAAA,kBAAkB,uBAAuB,IAAI;AACnD,QAAM,EAAE,eAAA,IAAmBjM,aAAA,mBAAmB,cAAc;AAEtD,QAAA,YAAYM,iBAAM,OAAO,IAAI;AAEnC,QAAM,cAAcR,aAAAA;AACpB,QAAM,EAAE,KAAK,MAAM,IAAA,IAAQ;AAE3B,QAAM,kBAAkB,CAAC;AAEnB,QAAA,aACJ,mBAAmB,CAAC,SAAS,OAAO,qCAAqC,IAAI,IAAI,UAAU,EAAE;AAE/F,QAAM,oBAAoBQ,iBAAM;AAAA,IAC9B,CAACJ,UAAqB;AACpB,YAAM,UAAU;AAAA,QACdA;AAAAA,QACA,cAAc;AAAA,QACd,cAAc;AAAA,MAAA;AAGhB,aAAOwM,aAAAA,sBAAsB,SAAS,cAAc,aAAc,cAAc,UAAU;AAAA,IAC5F;AAAA,IACA,CAAC,aAAa;AAAA,EAAA;AAIhBpM,mBAAM,UAAU,MAAM;AACdqM,UAAAA,2BAA0B,OAAO,KAAK,cAAc,UAAU,EAAE,OAEpE,CAAC,KAAK,YAAY;AAClB,YAAM,uBAAuB;AAAA,QAC3B,cAAc,WAAW,OAAO,EAAE;AAAA,QAClC,cAAc;AAAA,MAAA;AAGhB,UAAI,OAAO,IAAID,aAAA;AAAA,QACb;AAAA;AAAA,QAEA,cAAc,WAAW,OAAO;AAAA,QAChC,cAAc;AAAA,MAAA;AAGT,aAAA;AAAA,IACT,GAAG,CAAE,CAAA;AAEL,UAAME,4BAA2B;AAAA,MAC/B,cAAc,YAAa;AAAA,MAC3B,cAAc;AAAA,IAAA;AAGhB,UAAM,oCAAoCF,aAAA;AAAA,MACxCE;AAAAA,MACA,cAAc;AAAA,MACd,cAAc;AAAA,IAAA;AAGP,aAAA,kBAAkBD,0BAAyB,iCAAiC,CAAC;AAAA,EAAA,GACrF,CAAC,eAAe,QAAQ,CAAC;AAE5BrM,mBAAM,UAAU,MAAM;AACpB,WAAO,MAAM;AACX,eAASiM,cAAY;AAAA,IAAA;AAAA,EACvB,GACC,CAAC,QAAQ,CAAC;AAEbjM,mBAAM,UAAU,MAAM;AACpB,UAAM,cAAcuM,eAAM,QAAA;AACpB,UAAA,SAAS,YAAY;AAErB,UAAA,YAAY,OAAOC,YAA8B;AACrD,UAAI,CAAC,YAAY;AACf;AAAA,MACF;AAEA,eAAStI,WAAS;AAEd,UAAA;AACF,cAAM,EAAE,MAAAtE,MAAK,IAAI,MAAM,YAAY,IAAI,YAAY,EAAE,aAAa4M,QAAO,MAAO,CAAA;AAEhF,iBAASR,mBAAiB,kBAAkBpM,KAAI,CAAC,CAAC;AAAA,eAC3C,KAAK;AACR,YAAA2M,eAAA,QAAM,SAAS,GAAG,GAAG;AACvB;AAAA,QACF;AACA,cAAM,YAAYhN,aAAA,QAAI,KAAK,mBAAmB,IAAI;AAElD,YAAI,cAAc,KAAK;AACrB,eAAK,eAAe;AAEpB;AAAA,QACF;AAGA,YAAI,cAAc,KAAK;AACF,6BAAA;AAAA,YACjB,MAAM;AAAA,YACN,SAAS,EAAE,IAAI,eAAe,gCAAgC,EAAE;AAAA,UAAA,CACjE;AAED,eAAK,eAAe;AAAA,QACtB;AAAA,MACF;AAAA,IAAA;AAIF,UAAMkN,QAAO,YAAY;AACvB,eAASvI,WAAS;AACT,eAAA,SAAS,QAAQ,CAAC;AAAA,IAAA;AAGzB,QAAA,CAAC,UAAU,SAAS;AACtB,aAAO,MAAM;AAAA,MAAA;AAAA,IACf;AAEA,QAAI,YAAY;AACd,gBAAU,MAAM;AAAA,IAAA,OACX;AACA,MAAAuI;IACP;AAEA,WAAO,MAAM;AACX,aAAO,OAAO,iCAAiC;AAAA,IAAA;AAAA,EACjD,GACC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAED,QAAM,gBAAgBzM,iBAAM;AAAA,IAC1B,CAAC,QAAyC;AACxC,yBAAmB,EAAE,MAAM,WAAW,SAAS,eAAe,GAAG,GAAG;AAAA,IACtE;AAAA,IACA,CAAC,oBAAoB,cAAc;AAAA,EAAA;AAGrC,QAAM,WAAyCA,iBAAM;AAAA,IACnD,OAAO,oBAAoB;AACrB,UAAA;AACF,mBAAW,mBAAmB,eAAe;AAE7C,cAAM,EAAE,MAAAJ,MAAK,IAAI,MAAM;AAAA,UACrB,qCAAqC,IAAI,IAAI,EAAE;AAAA,QAAA;AAG9B,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,EAAE,IAAI,eAAe,uBAAuB,EAAE;AAAA,QAAA,CACxD;AAED,mBAAW,kBAAkB,eAAe;AAE5C,gBAAQ,eAAe;AAEhB,eAAA,QAAQ,QAAQA,KAAI;AAAA,eACpB,KAAK;AACZ,mBAAW,qBAAqB,EAAE,OAAO,KAAK,GAAG,iBAAiB;AAE3D,eAAA,QAAQ,OAAO,GAAG;AAAA,MAC3B;AAAA,IACF;AAAA,IACA,CAAC,YAAY,KAAK,MAAM,IAAI,oBAAoB,SAAS,eAAe;AAAA,EAAA;AAG1E,QAAM,SAAqCI,iBAAM;AAAA,IAC/C,OAAO,MAAM,oBAAoB;AACzB,YAAA,YAAY,OAAO,WAAW;AAMhC,UAAA;AAEO,iBAAA,UAAU,gBAAgB,CAAC;AAEpC,cAAM,EAAE,IAAI,KAAK,GAAG,aAAa;AAEjC,cAAM,EAAE,MAAAJ,MAAK,IAAI,MAAM;AAAA,UAQrB,YACI,qCAAqC,IAAI,UAAU,MAAM,KACzD,qCAAqC,IAAI;AAAA,UAC7C,YAAY,WAAW;AAAA,UACvB;AAAA,YACE,QAAQ;AAAA,UACV;AAAA,QAAA;AAGF,mBAAW,kBAAkB,eAAe;AACzB,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,EAAE,IAAI,eAAe,qBAAqB,EAAE;AAAA,QAAA,CACtD;AAED,uBAAe,wBAAwB;AAG3B,QAAAsM,aAAA,kBAAkB,CAAC,UAAU,CAAC;AAE1C,iBAAS,gBAAgB,kBAAkBtM,KAAI,CAAC,CAAC;AAGxC,iBAAA,UAAU,UAAU,CAAC;AAG9B,gBAAQ,mCAAmC,IAAI,IAAIA,MAAK,EAAE,GAAG,QAAQ,EAAE;AAEhE,eAAA,QAAQ,QAAQA,KAAI;AAAA,eACpB,KAAK;AACZ,YAAI,eAAe8M,MAAAA,YAAY;AAC7B,wBAAc,GAAG;AAAA,QACnB;AAEA,mBAAW,qBAAqB,EAAE,OAAO,KAAK,GAAG,iBAAiB;AACzD,iBAAA,UAAU,UAAU,CAAC;AAEvB,eAAA,QAAQ,OAAO,GAAG;AAAA,MAC3B;AAAA,IACF;AAAA,IACA;AAAA,MACE;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACAR;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EAAA;AAGI,QAAA,uBACJlM,iBAAM,YAAY,YAAY;AACxB,QAAA;AACF,iBAAW,yBAAyB;AAE3B,eAAA,UAAU,8BAA8B,CAAC;AAE5C,YAAA;AAAA,QACJ,MAAM,EAAE,MAAAJ,MAAK;AAAA,MAAA,IACX,MAAM,YAAY;AAAA,QACpB,qCAAqC,IAAI,IAAI,EAAE;AAAA,MAAA;AAEjD,iBAAW,wBAAwB;AAE1B,eAAA,UAAU,UAAU,CAAC;AAEvBA,aAAAA;AAAAA,aACA,KAAK;AACZ,UAAI,eAAe8M,MAAAA,YAAY;AAC7B,sBAAc,GAAG;AAAA,MACnB;AACS,eAAA,UAAU,UAAU,CAAC;AAEvB,aAAA,QAAQ,OAAO,GAAG;AAAA,IAC3B;AAAA,EAAA,GACC,CAAC,YAAY,MAAM,IAAI,UAAU,aAAa,aAAa,CAAC;AAE3D,QAAA,YAA2C1M,iBAAM,YAAY,YAAY;AACzE,QAAA;AACF,iBAAW,kBAAkB;AAEpB,eAAA,UAAU,iBAAiB,CAAC;AAErC,YAAM,EAAE,MAAAJ,MAAK,IAAI,MAAM;AAAA,QACrB,qCAAqC,IAAI,IAAI,EAAE;AAAA,MAAA;AAGjD,iBAAW,iBAAiB;AAE5B,eAAS,gBAAgB,kBAAkBA,KAAI,CAAC,CAAC;AACxC,eAAA,UAAU,UAAU,CAAC;AAEX,yBAAA;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,EAAE,IAAI,eAAe,wBAAwB,EAAE;AAAA,MAAA,CACzD;AAEM,aAAA,QAAQ,QAAQA,KAAI;AAAA,aACpB,KAAK;AACZ,UAAI,eAAe8M,MAAAA,YAAY;AAC7B,sBAAc,GAAG;AAAA,MACnB;AAES,eAAA,UAAU,UAAU,CAAC;AAEvB,aAAA,QAAQ,OAAO,GAAG;AAAA,IAC3B;AAAA,EAAA,GACC,CAAC,YAAY,MAAM,IAAI,UAAU,MAAM,mBAAmB,oBAAoB,aAAa,CAAC;AAE/F,QAAM,QAAmC1M,iBAAM;AAAA,IAC7C,OAAO,MAAM,oBAAoB;AAC3B,UAAA;AACF,mBAAW,iBAAiB,eAAe;AAElC,iBAAA,UAAU,gBAAgB,CAAC;AAE9B,cAAA,EAAE,MAAAJ,MAAS,IAAA,MAAM,IAIrB,qCAAqC,IAAI,IAAI,EAAE,IAAI,IAAI;AAEzD,mBAAW,gBAAgB,eAAe;AACvB,2BAAA;AAAA,UACjB,MAAM;AAAA,UACN,SAAS,EAAE,IAAI,eAAe,qBAAqB,EAAE;AAAA,QAAA,CACtD;AAGW,QAAAsM,aAAA,kBAAkB,CAAC,UAAU,CAAC;AAE1C,iBAAS,gBAAgB,kBAAkBtM,KAAI,CAAC,CAAC;AAExC,iBAAA,UAAU,UAAU,CAAC;AAEvB,eAAA,QAAQ,QAAQA,KAAI;AAAA,eACpB,KAAK;AACZ,mBAAW,mBAAmB,EAAE,OAAO,KAAK,GAAG,iBAAiB;AAEhE,YAAI,eAAe8M,MAAAA,YAAY;AAC7B,wBAAc,GAAG;AAAA,QACnB;AAES,iBAAA,UAAU,UAAU,CAAC;AAEvB,eAAA,QAAQ,OAAO,GAAG;AAAA,MAC3B;AAAA,IACF;AAAA,IACA;AAAA,MACE;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACAR;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EAAA;AAGI,QAAA,cAA+ClM,iBAAM,YAAY,YAAY;AACxE,aAAA,UAAU,mBAAmB,CAAC;AAEnC,QAAA;AACF,iBAAW,oBAAoB;AAE/B,YAAM,EAAE,MAAAJ,MAAK,IAAI,MAAM;AAAA,QACrB,qCAAqC,IAAI,IAAI,EAAE;AAAA,MAAA;AAGjD,iBAAW,mBAAmB;AACX,yBAAA;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,EAAE,IAAI,eAAe,0BAA0B,EAAE;AAAA,MAAA,CAC3D;AAED,eAAS,gBAAgB,kBAAkBA,KAAI,CAAC,CAAC;AACxC,eAAA,UAAU,UAAU,CAAC;AAAA,aACvB,KAAK;AACH,eAAA,UAAU,UAAU,CAAC;AAE9B,UAAI,eAAe8M,MAAAA,YAAY;AAC7B,sBAAc,GAAG;AAAA,MACnB;AAEO,aAAA,QAAQ,OAAO,GAAG;AAAA,IAC3B;AAAA,EAAA,GACC,CAAC,MAAM,IAAI,UAAU,YAAY,MAAM,oBAAoB,mBAAmB,aAAa,CAAC;AAE/F,SAAO,SAAS;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,kBAAkB;AAAA,IAClB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AACH;AC9cA,MAAM,uBAAuB,MAAM;AACjC,QAAM,gBAAgB;AAAA,IACpB,CAAC,UAAU,MAAM,uCAAuC,EAAE;AAAA,EAAA;AAG5D,QAAM,qBAAqB9B,MAAA;AAAA,IACzB,CAAC,iBAAyB;AACxB,aAAO,eAAe,aAAa,YAAY,KAAK,CAAA;AAAA,IACtD;AAAA,IACA,CAAC,aAAa;AAAA,EAAA;AAGT,SAAA,EAAE,GAAG,eAAe;AAC7B;ACHA,MAAM,qBAAqB,CAAC;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAA+B;AAE3B,SAAA1L,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL;AAAA,MACA,UAAU;AAAA,MACV,YAAW;AAAA,MACX,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,aAAa;AAAA,MACb,cAAc;AAAA,MACd,OAAO,EAAE,QAAQ,aAAa,gBAAgB,UAAU;AAAA,MAExD,UAACC,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,IAAG,QAAO,KAAK,GACnB,UAAA;AAAA,QAAC7B,2BAAAA,IAAA,eAAA,EAAc,eAAW,MAAC,SAAS,QAAQ,WAAW,YAAY,CAAC,QAAQ;AAAA,QAC5EA,2BAAA;AAAA,UAACuC,aAAA;AAAA,UAAA;AAAA,YACC,SAAQ;AAAA,YACR,YAAW;AAAA,YACX,WAAW,YAAY,CAAC,SAAS,cAAc;AAAA,YAE9C;AAAA,UAAA;AAAA,QACH;AAAA,MAAA,GACF;AAAA,IAAA;AAAA,EAAA;AAGN;AAEA,MAAM,gBAAgBb,gBAAAA,QAAO+L,MAAAA,UAAU;AAAA,YAC3B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,WAC/B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,eAC1B,CAAC,EAAE,QAAA,MAAe,UAAU,kBAAkB,cAAe;AAAA;AAAA;AAAA,YAGhE,CAAC,EAAE,OAAO,UAAU,MAC1B,YAAY,MAAM,OAAO,YAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,YAGtD,CAAC,EAAE,OAAO,UAAU,MAC1B,YAAY,MAAM,OAAO,YAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAIlE,MAAM,eAAe/L,gBAAAA,QAAOgM,aAAAA,UAAU;AAAA;AAAA,kBAEpB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,gBACxC,CAAC,EAAE,MAAA,MAAY,MAAM,QAAQ,YAAY;AAAA;AAAA;AAAA,MAGnDnL,uBAAU;AAAA,eACD,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,MAG/C,aAAa;AAAA;AAAA,gBAEH,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,gBAGtC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,MAKhDA,uBAAU;AAAA,eACD,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA,MAE/C,aAAa;AAAA;AAAA,gBAEH,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,gBAGtC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;ACvDtD,MAAM,oBAAoB,CAAC;AAAA,EACzB;AAAA,EACA,aAAa,CAAC;AAAA,EACd,UAAU;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF,MAA8B;AACtB,QAAA,EAAE,kBAAkBnC,UAAAA;AAE1B,QAAM,eAAe,MAAM;AACzB,aAAS,QAAQ;AAAA,EAAA;AAGnB,yCACGuN,wBAAU,EAAA,UAAU,QAAQ,UAAU,cAAc,MAAK,KACxD,UAAA;AAAA,IAAA3N,2BAAA;AAAA,MAAC4N,aAAA;AAAA,MAAA;AAAA,QAEC;AAAA,QACA,OAAO,cAAc,EAAE,IAAI,UAAU,gBAAgB,UAAU;AAAA,QAC/D,gBAAe;AAAA,MAAA;AAAA,IACjB;AAAA,IACA5N,2BAAAA,IAAC6N,aAAAA,kBACC,EAAA,UAAA7N,2BAAAA,IAAC4B,aAAAA,KAAI,EAAA,YAAY,GAAG,eAAe,GAAG,aAAa,GAAG,cAAc,GAClE,yCAAC,MACE,EAAA,UAAA,WAAW,IAAI,CAAC,EAAE,cAAc,MAAM,EAAE,aAAa,KAAK,EACzD,MAAA5B,2BAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QAEC,IAAG;AAAA,QACH,MAAK;AAAA,QACL,YAAW;AAAA,QACX,gBAAe;AAAA,QACf,SAAS,eAAe,YAAY;AAAA,QACpC,WAAS;AAAA,QACT,QAAQuE,qBAAQ,EAAE;AAAA,QAClB,QAAQ;AAAA,QACR,aAAY;AAAA,QAEZ,UAAAtE,2BAAAA,KAAC4B,aAAAA,QAAK,WAAU,UAAS,KAAK,GAAG,YAAW,UAAS,gBAAe,UAClE,UAAA;AAAA,UAAA7B,+BAAC,iBAAc,MAAY;AAAA,UAE1BA,2BAAA,IAAAuC,aAAA,YAAA,EAAW,SAAQ,MAAK,YAAW,QAAO,WAAU,cAClD,UAAA,cAAc,EAAE,IAAI,aAAa,gBAAgB,YAAa,CAAA,GACjE;AAAA,QAAA,GACF;AAAA,MAAA;AAAA,MAjBK;AAAA,IAAA,CAmBR,EACH,CAAA,EACF,CAAA,GACF;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,MAAM,OAAOb,gBAAO,QAAA;AAAA;AAAA,4CAEwB,MAAM,EAAE;AAAA,cACtC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAG5C,MAAM,eAAeA,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA,wBAGR,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,kBAC5C,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA,MAElDU,uBAAU;AAAA,eACD,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKjC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,eAC3C,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AC7FrD,MAAM,kBAAkB,CAAC;AAAA,EACvB,8BAA8B,CAAC;AAAA,EAC/B;AAAA,EACA;AACF,MAA4B;AACpB,QAAA,EAAE,kBAAkBnC,UAAAA;AAE1B,QAAM,CAAC,gBAAgB,iBAAiB,IAAIU,iBAAM,SAAS,EAAE;AAE7DA,mBAAM,UAAU,MAAM;AACd,UAAA,eAAe,OAAO,KAAK,2BAA2B;AAExD,QAAA,UAAU,aAAa,SAAS,GAAG;AACnB,wBAAA,aAAa,CAAC,CAAC;AAAA,IACnC;AAAA,EAAA,GACC,CAAC,QAAQ,2BAA2B,CAAC;AAElC,QAAA,yBAAyB,CAAC,iBAAyB,MAAM;AAC7D,wBAAoB,YAAY;AAChC,sBAAkB,EAAE;AAAA,EAAA;AAGhB,QAAA,oBAAoB,CAAC,iBAAyB;AAClD,sBAAkB,CAAC,eAAgB,eAAe,eAAe,KAAK,YAAa;AAAA,EAAA;AAGrF,MAAI,CAAC,QAAQ;AACJ,WAAA;AAAA,EACT;AAGE,SAAAb,2BAAA;AAAA,IAAC2B,aAAA;AAAA,IAAA;AAAA,MACC,YAAY;AAAA,MACZ,eAAe;AAAA,MACf,aAAa;AAAA,MACb,cAAc;AAAA,MACd,YAAW;AAAA,MACX,QAAO;AAAA,MACP,aAAY;AAAA,MACZ,WAAS;AAAA,MAET,UAAA;AAAA,QAAC5B,2BAAAA,IAAA6B,aAAAA,MAAA,EAAK,gBAAe,UACnB,UAAA7B,2BAAA,IAACuC,2BAAW,YAAW,QAAO,WAAU,cACrC,UAAc,cAAA;AAAA,UACb,IAAI,eAAe,8CAA8C;AAAA,UACjE,gBAAgB;AAAA,QAAA,CACjB,GACH,EACF,CAAA;AAAA,uCACCX,aAAAA,KAAI,EAAA,YAAY,GACf,UAAC5B,+BAAA8N,aAAAA,mBAAA,EAAkB,eAAc,gCAC9B,UAAA,OAAO,QAAQ,2BAA2B,EAAE,IAAI,CAAC,CAAC,UAAU,UAAU,GAAG,UACxE9N,2BAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YAEC;AAAA,YACA;AAAA,YACA,gBAAgB;AAAA,YAChB,QAAQ,aAAa;AAAA,YACrB,UAAU;AAAA,YACV,SAAS,QAAQ,MAAM,IAAI,YAAY;AAAA,UAAA;AAAA,UANlC;AAAA,QAAA,CAQR,GACH,EACF,CAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGN;AC/EA,MAAM,eAAe,CAAC,eACpB,WAAW,MAAM,GAAG,EAAE,OAAO,CAAC,WAAW+N,eAAM,QAAA,SAAS,QAAQ,EAAE,CAAC,CAAC;AAEtE,MAAM,gBAAgB,CAAC,QAA0C;AAC3D,MAAA,IAAI,WAAW,GAAG;AACb,WAAA;AAAA,EACT;AAEM,QAAA,aAAa,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;AAElE,SAAO,OAAO,MAAM,UAAU,IAAI,KAAK;AACzC;AAEA,MAAM,oBAAoB,CAAC,SAAiB;AACnC,SAAA,CAAC,WAAW,cAAc,WAAW,SAAS,QAAQ,EAAE,SAAS,IAAI;AAC9E;ACDA,MAAM,uBAAuB,CAAC,EAAE,OAAO,YAAY,cAAyC;AACpF,QAAA,EAAE,kBAAkB3N,UAAAA;AAE1B,SAEIH,2BAAA,KAAA0L,qBAAA,EAAA,UAAA;AAAA,IAAA3L,2BAAA;AAAA,MAAC4B,aAAA;AAAA,MAAA;AAAA,QACC,IAAG;AAAA,QACH,YAAW;AAAA,QACX,aAAa,QAAQ,cAAc;AAAA,QACnC,UAAU;AAAA,QACV,WAAS;AAAA,QACT;AAAA,QACA,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,MAAK;AAAA,QAEL,UAAC3B,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,WAAU,UAAS,KAAK,GAC5B,UAAA;AAAA,UAAA7B,2BAAA,IAAC6B,aAAK,MAAA,EAAA,gBAAe,UAAS,OAAO,EAAE,QAAQ,aAAa,gBAAgB,UAAU,GACpF,UAAC7B,2BAAA,IAAA,YAAA,CAAW,CAAA,GACd;AAAA,UACCA,2BAAA,IAAA6B,aAAA,MAAA,EAAK,gBAAe,UACnB,UAAC7B,2BAAAA,IAAAuC,aAAA,YAAA,EAAW,WAAU,cAAa,SAAQ,MAAK,YAAW,QACxD,UAAc,cAAA;AAAA,YACb,IAAI,eAAe,6BAA6B;AAAA,YAChD,gBAAgB;AAAA,UAAA,CACjB,GACH,EACF,CAAA;AAAA,QAAA,GACF;AAAA,MAAA;AAAA,IACF;AAAA,IACC,OAAO,MACLvC,2BAAA,IAAAuC,aAAA,YAAA,EAAW,WAAU,aAAY,SAAQ,MACvC,UAAA,cAAc,OAAO,EAAE,GAAG,MAAM,OAAQ,CAAA,GAC3C;AAAA,EAEJ,EAAA,CAAA;AAEJ;AAEA,MAAM,aAAab,gBAAAA,QAAO+L,MAAAA,UAAU;AAAA,WACzBlJ,aAAAA,QAAQ,EAAE,CAAC;AAAA,YACVA,aAAAA,QAAQ,EAAE,CAAC;AAAA;AAAA,YAEX,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,YAGtC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AC1DlD,MAAM,qCAAqB;AAa3B,MAAM,oBAAoB,CAAC,gBAA0B,OAAgC;AAC7E,QAAA,CAAC,oBAAoB,qBAAqB,IAAImE,MAAAA,SAAS,OAAO,YAAY,cAAc,CAAC;AAKzF,QAAA,UAAU,cAAc,OAAO,CAAC,QAAQ,CAAC,eAAe,IAAI,GAAG,CAAC;AAChE,QAAA,CAAC,SAAS,UAAU,IAAIA,MAAAA,SAAS,MAAM,CAAC,CAAC,QAAQ,MAAM;AAC7D,QAAM,uBAAuB4C,aAAAA;AAE7BtE,QAAAA,UAAU,MAAM;AACR,UAAA,WAAW,CAAC,UAAqD;AACrE,4BAAsB,KAAK;AAC3B,iBAAW,KAAK;AAAA,IAAA;AAGZ,UAAA,qBAAqB,OACzB,MACA,eACG;AACH,YAAM,UAAU,MAAM,QAAQ,IAAI,UAAU;AAEvC,WAAA,QAAQ,CAAC,KAAK,UAAU;AAC3B,uBAAe,IAAI,KAAK,QAAQ,KAAK,EAAE,OAAO;AAAA,MAAA,CAC/C;AAEQ,eAAA,OAAO,YAAY,cAAc,CAAC;AAAA,IAAA;AAGzC,QAAA,QAAQ,SAAS,GAAG;AACtB,iBAAW,IAAI;AAEf,YAAM,oBAAoB,QAAQ,OAEhC,CAAC,iBAAiB,QAAQ;AACpB,cAAA,cAAc,qBAAqB,IAAI,GAAG;AAEhD,YAAI,aAAa;AACf,0BAAgB,KAAK,YAAY,WAAW,MAAO,CAAA;AAAA,QACrD;AAEO,eAAA;AAAA,MACT,GAAG,CAAE,CAAA;AAED,UAAA,kBAAkB,SAAS,GAAG;AAChC,2BAAmB,SAAS,iBAAiB;AAAA,MAC/C;AAAA,IACF;AAAA,EAAA,GACC,CAAC,SAAS,oBAAoB,CAAC;AAM5B,QAAA,UAAU0E,MAAAA,YAAY,MAAM;AAChC,mBAAe,MAAM;AACrB,0BAAsB,CAAE,CAAA;AAAA,EAC1B,GAAG,CAAE,CAAA;AAEL,SAAO,EAAE,eAAe,SAAS,oBAAoB,QAAQ;AAC/D;ACpEA,MAAM,OAAO,CAAC,EAAE,IAAI,OAAO,MAAM,OAAO,SAAoB;AACtD,MAAA,KAAK,WAAW,KAAK,OAAO;AACvB,WAAA;AAAA,EACT;AAEA,SACG1L,2BAAAA,IAAAuC,aAAAA,YAAA,EAAW,IAAG,KAAI,SAAQ,MAAK,IAAI,GAAG,MAAM,IAAI,SAAS,WAAU,cACjE,UACH,KAAA,CAAA;AAEJ;ACXA,MAAM,oBAAoB,CACxB,QACA,oBACgB;AAEhByL,QAAA,WAAW,YAAY,QAAQ;AAAA,IAC7B,OAAO,CAAC,SAAS,CAACC,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IACzD,OAAO;AAAA,EAAA,CACR;AAGK,QAAA,QAAQA,MAAAA,OAAO,MAAM,QAAQ;AAAA,IACjC,OAAO,CAAC,SAAS,CAACA,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS,UAAU,KAAK,SAAS;AAAA,EAAA,CAClF;AAED,MAAI,CAAC,SAASA,MAAA,OAAO,SAAS,MAAM,CAAC,CAAC,GAAG;AACvC;AAAA,EACF;AAEM,QAAA,CAAC,SAAS,WAAW,IAAI;AAEpBD,QAAAA,WAAA;AAAA,IACT;AAAA,IACA;AAAA,MACE,GAAG,qBAAqB,OAAO;AAAA,MAC/B,GAAG;AAAA,IACL;AAAA,IACA,EAAE,IAAI,YAAY;AAAA,EAAA;AAGb,SAAA;AACT;AAKA,MAAM,uBAAuB,CAAC,YAAqB;AACjD,QAAM,EAAE,UAAU,WAAW,MAAM,OAAO,GAAG,MAAU,IAAA;AAEvD,QAAM,oBAAoB,OAAO,KAAK,KAAK,EAAE;AAAA,IAC3C,CAAC,mBAAmB,SAAS,EAAE,GAAG,mBAAmB,CAAC,GAAG,GAAG;IAC5D,CAAC;AAAA,EAAA;AAGI,SAAA;AACT;ACnDA,MAAME,WAAS,CAAC,SAAgC;AACvC,SAAAC,WAAK,OAAO,IAAI,KAAK,CAACF,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AACtE;AAKA,MAAM,wBAAwB,CAAC,WAAmB;AAM1C,QAAA,YAAYA,MAAAA,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO,CAACG,UAAS,CAACH,aAAO,SAASG,KAAI,KAAK,CAAC,CAAC,QAAQ,MAAM,EAAE,SAASA,MAAK,IAAI;AAAA,EAAA,CAChF;AACD,MAAI,CAAC,aAAa,CAAC,OAAO,WAAW;AACnC;AAAA,EACF;AACM,QAAA,CAAC,MAAM,QAAQ,IAAI;AACzB,QAAM,YAAYH,MAAO,OAAA,MAAM,QAAQ,OAAO,UAAU,QAAQ,QAAQ;AACxE,QAAM,eAAe,KAAK,SAAS,GAAG,EAAE;AACxC,QAAM,cAAcC,SAAO,YAAY,KAAK,aAAa,KAAK,SAAS,IAAI;AAE3E,MAAI,aAAa,aAAa;AAEjBF,UAAAA,WAAA,OAAO,QAAQ,EAAE,UAAU,GAAG,MAAM,aAAa,SAAS,KAAA,CAAM;AAE3EA,UAAA,WAAW,YAAY,QAAQ;AAAA,MAC7B,MAAM;AAAA,MACN,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,IAAA,CACtC;AACD;AAAA,EACF;AAGWA,QAAAA,WAAA,WAAW,QAAQ,IAAI;AAGlC,MAAI,WAAW;AACZ,KAAA,QAAQ,UAAU,aAAa,iBAAiB,MAAM,EAAE,QAAQ,CAAC,aAAa;AACtEC,YAAAA,OAAA,WAAW,QAAQ,QAAQ;AAAA,IAAA,CACnC;AAAA,EACH;AACF;ACpCA,MAAM,YAAYvM,gBAAO,QAAA,IAAI,MAAM,EAAE,MAAM,QAAQ;AAAA,mBAChC,CAAC,EAAE,YAAY,MAAM,YAAY;AAAA,sBAC9B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,aAG/C,CAAC,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,CAAC,IAAI,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,aAKtD,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAMnD,MAAM,aAAwC;AAAA,EAC5C,MAAM;AAAA,IACJ,eAAe,CAAC,UACd1B,2BAAAA,IAAC,WAAW,EAAA,GAAG,MAAM,YACnB,UAACA,2BAAA,IAAA,QAAA,EAAM,UAAM,MAAA,SAAS,CAAA,GACxB;AAAA,IAEF,MAAMqO,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,IACpB,cAAc,QAAQ;AACpB,wBAAiC,QAAQ,EAAE,MAAM,OAAQ,CAAA;AAAA,IAC3D;AAAA,IACA,eAAe,QAAQ;AACrB,4BAAsB,MAAM;AAAA,IAC9B;AAAA,IACA,UAAU,CAAC,KAAK;AAAA,EAClB;AACF;AC9BA,MAAM,KAAK3M,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA,eACjC,KAAK,EAAE;AAAA,iBACL,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAGpD,MAAM,KAAKb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA,eACjC,KAAK,EAAE;AAAA,iBACL,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAGpD,MAAM,KAAKb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA,eACjC,KAAK,EAAE;AAAA,iBACL,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAGpD,MAAM,KAAKb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA,eACjC,KAAK,EAAE;AAAA,iBACL,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAGpD,MAAM,KAAKb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA,eACjC,KAAK,EAAE;AAAA,iBACL,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAGpD,MAAM,KAAKb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,IAAI,MAAM;AAAA;AAAA,iBAE/B,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAMpD,MAAM,yBAAyB,CAAC,QAAgB,UAAqC;AACnF,oBAAoC,QAAQ,EAAE,MAAM,WAAW,MAAO,CAAA;AACxE;AAEA,MAAM,gBAGF;AAAA,EACF,eAAe;AAAA,IACb,eAAe,CAAC,UAAUvC,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAMsO,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,GAAG;AAAA,EAChB;AAAA,EACA,eAAe;AAAA,IACb,eAAe,CAAC,UAAUtO,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAMuO,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,IAAI;AAAA,EACjB;AAAA,EACA,iBAAiB;AAAA,IACf,eAAe,CAAC,UAAUvO,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAMwO,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,KAAK;AAAA,EAClB;AAAA,EACA,gBAAgB;AAAA,IACd,eAAe,CAAC,UAAUxO,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAMyO,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,MAAM;AAAA,EACnB;AAAA,EACA,gBAAgB;AAAA,IACd,eAAe,CAAC,UAAUzO,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAM0O,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,OAAO;AAAA,EACpB;AAAA,EACA,eAAe;AAAA,IACb,eAAe,CAAC,UAAU1O,2BAAA,IAAC,MAAI,GAAG,MAAM,YAAa,UAAA,MAAM,SAAS,CAAA;AAAA,IACpE,MAAM2O,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,eAAe,CAAC,WAAW,uBAAuB,QAAQ,CAAC;AAAA,IAC3D,WAAW,CAAC,SAAS,KAAK,SAAS,aAAa,KAAK,UAAU;AAAA,IAC/D,oBAAoB;AAAA,IACpB,UAAU,CAAC,QAAQ;AAAA,EACrB;AACF;AClHA,MAAM,eAAejN,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA,IAG5B,CAAC,UACD,MAAM,aACN+M,OAAAA;AAAAA,oBACgB,MAAM,MAAM,OAAO,UAAU;AAAA,KAC5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWL,MAAM,sBAAsB;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEA,MAAM,OAAO,CAAsC,QAAW,SAA0B;AAChF,QAAA,UAAU,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,OAAO,GAAG,CAAC,CAAC;AAC7C,SAAA,OAAO,YAAY,OAAO;AACnC;AAGA,MAAM,UAAU,CAAC,YAAgD;AAC/D,SAAO,QAAQ,SAAS;AAC1B;AAGA,MAAM,QAAQ,CAAC,EAAE,YAAY,UAAU,cAAkC;AACvE,QAAM,kBAAkBC,WAAAA;AACxB,QAAM,kBAAkBC,WAAAA;AAEpB,MAAA,CAAC,QAAQ,OAAO,GAAG;AACd,WAAA;AAAA,EACT;AACA,QAAM,EAAE,KAAK,iBAAiB,OAAO,WAAW,QAAQ;AAGtD,SAAA7O,2BAAA,KAAC2B,aAAK,KAAA,EAAA,GAAG,YACN,UAAA;AAAA,IAAA;AAAA,IACD5B,2BAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,YAAW;AAAA,QACX,iBAAiB;AAAA,QACjB,gBAAe;AAAA,QACf,WAAW,mBAAmB;AAAA,QAC9B,WAAS;AAAA,QAET,yCAAC,OAAI,EAAA,KAAK,KAAK,KAAK,iBAAiB,OAAc,QAAgB;AAAA,MAAA;AAAA,IACrE;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,MAAM,cAAc,MAAM;AACxB,QAAM,CAAC,QAAQ,SAAS,IAAIc,iBAAM,SAAS,IAAI;AAC/C,QAAM,EAAE,OAAA,IAAW,uBAAuB,aAAa;AACjD,QAAA,EAAE,eAAeiO,aAAAA;AAEnB,MAAA,CAAC,cAAc,CAAC;AAAe,WAAA;AAE7B,QAAA,qBAAqB,WAAW,eAAe;AAM/C,QAAA,eAAe,CAAC,WAAsC;AAE1Df,UAAA,WAAW,YAAY,QAAQ;AAAA,MAC7B,OAAO,CAAC,SAAS,CAACC,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,MACzD,OAAO;AAAA,IAAA,CACR;AAIK,UAAA,yBAAyBA,MAAAA,OAAO,MAAM,QAAQ;AAAA,MAClD,MAAM,MAAM;AACN,YAAAA,MAAA,OAAO,SAAS,IAAI;AAAU,iBAAA;AAElC,cAAM,eAAe,CAAC,QAAQ,MAAM,EAAE,SAAS,KAAK,IAAI;AAExD,eAAO,CAAC;AAAA,MACV;AAAA,IAAA,CACD;AAED,QAAI,CAAC;AAAwB;AACvB,UAAA,CAAG,EAAA,YAAY,IAAI;AAGzBD,qBAAW,YAAY,MAAM;AAG7B,UAAM,gBAAgB,OAAO,IAAI,CAAC,UAAU;AAC1C,YAAM,YAA4B;AAAA,QAChC,MAAM;AAAA,QACN;AAAA,QACA,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,MAAA;AAEhC,aAAA;AAAA,IAAA,CACR;AACDA,UAAA,WAAW,YAAY,QAAQ,eAAe,EAAE,IAAI,cAAc;AAGvDA,UAAAA,WAAA,OAAO,QAAQ,YAAY;AAAA,EAAA;AAGlC,QAAA,qBAAqB,CAAC,WAAuC;AACjE,UAAM,kBAAkB,OAAO,IAAI,CAAC,UAAU;AAEtC,YAAA,gBAAgB,KAAK,OAAO,mBAAmB;AAErD,YAAM,YAAqC;AAAA,QACzC,GAAG;AAAA,QACH,iBAAiB,cAAc,mBAAmB,cAAc;AAAA,QAChE,KAAKpN,aAAAA,4BAA4B,MAAM,GAAG;AAAA,MAAA;AAGrC,aAAA;AAAA,IAAA,CACR;AAED,iBAAa,eAAe;AAC5B,cAAU,KAAK;AAAA,EAAA;AAIf,SAAAZ,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,cAAc,CAAC,QAAQ;AAAA,MACvB,SAAS,MAAM,UAAU,KAAK;AAAA,MAC9B,gBAAgB;AAAA,IAAA;AAAA,EAAA;AAGtB;AAEA,MAAM,cAA0C;AAAA,EAC9C,OAAO;AAAA,IACL,eAAe,CAAC,UAAWA,2BAAAA,IAAA,OAAA,EAAO,GAAG,OAAO;AAAA,IAC5C,MAAMgP,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,IACpB,mBAAmB,QAAQ;AAErB,UAAA,OAAO,SAAS,WAAW,GAAG;AAChChB,cAAA,WAAW,SAAS,QAAQ;AAAA,UAC1B,MAAM;AAAA;AAAA,UAEN,OAAO;AAAA,UACP,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,QAAA,CACtC;AAAA,MAAA,OACI;AACLA,yBAAW,YAAY,MAAM;AAAA,MAC/B;AAAA,IACF;AAAA,IACA,eAAe,QAAQ;AACrBA,YAAA,WAAW,YAAY,QAAQ;AAAA,QAC7B,MAAM;AAAA,QACN,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,MAAA,CACtC;AAAA,IACH;AAAA,IACA,eAAe,MAAM;AAIZ,aAAA,qCAAO,aAAY,CAAA,CAAA;AAAA,IAC5B;AAAA,IACA,UAAU,CAAC,IAAI;AAAA,EACjB;AACF;AC3MA,MAAM,cAAc,CAAC,KAAa,WAAW,eAAe;AAC1D,QAAM,mBAAmB,CAAC,WAAW,YAAY,WAAW,MAAM;AAE9D,MAAA,iBAAiB,KAAK,CAAC,oBAAoB,IAAI,WAAW,eAAe,CAAC,GAAG;AACxE,WAAA;AAAA,EACT;AAEO,SAAA,GAAG,QAAQ,GAAG,GAAG;AAC1B;AAEA,MAAM,aAAa,CAAC,WAAmB;AACrCA,QAAA,WAAW,YAAY,QAAQ;AAAA,IAC7B,OAAO,CAAC,SAAS,CAACC,MAAO,OAAA,SAAS,IAAI,KAAKgB,MAAa,QAAA,UAAU,IAAI,KAAK,KAAK,SAAS;AAAA,EAAA,CAC1F;AACH;AAEA,MAAM,aAAa,CAAC,QAAgB,EAAE,UAA2B;AAC/D,MAAI,OAAO,WAAW;AAEpB,UAAM,YAAY,MAAM;AAAA,MACtBhB,MAAA,OAAO,MAAM,QAAQ;AAAA,QACnB,IAAI,OAAO;AAAA,QACX,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,MAAA,CAC1D;AAAA,IAAA;AAGH,cAAU,QAAQ,CAAC,CAAG,EAAA,IAAI,MAAM;AAC9BD,YAAA,WAAW,YAAY,QAAQ,EAAE,IAAI,KAAM,CAAA;AAAA,IAAA,CAC5C;AAED,QAAIkB,YAAM,YAAY,OAAO,SAAS,GAAG;AACvC,YAAM,OAAsB;AAAA,QAC1B,MAAM;AAAA,QACN,KAAK,MAAM,YAAY,GAAG,IAAI;AAAA,QAC9B,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,KAAK;AAAA,MAAA;AAG7BlB,YAAAA,WAAA,YAAY,QAAQ,IAAI;AAAA,IAAA,OAC9B;AACMA,YAAAA,WAAA;AAAA,QACT;AAAA,QACA,EAAE,MAAM,QAAQ,KAAK,MAAM,YAAY,GAAG,IAAI,GAAG;AAAA,QACjD,EAAE,OAAO,KAAK;AAAA,MAAA;AAAA,IAElB;AAAA,EACF;AACF;AAEA,MAAM,WAAW,CAAC,QAAgB,SAAwC;AAClE,QAAA,EAAE,KAAK,KAAS,IAAA;AAElB,MAAA,CAAC,OAAO,WAAW;AACrB;AAAA,EACF;AAEM,QAAA,YAAYC,MAAAA,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,EAAA,CAC1D;AAED,MAAI,WAAW;AACP,UAAA,CAAG,EAAA,QAAQ,IAAI;AACVD,UAAAA,WAAA,SAAS,QAAQ,EAAE,KAAK,YAAY,GAAG,KAAK,EAAE,IAAI,SAAU,CAAA;AAGvE,QAAI,SAAS,MAAM,SAASC,aAAO,OAAO,QAAQ,QAAQ,GAAG;AACrD,YAAA,oBAAoB,MAAM,KAAKE,MAAK,KAAA,SAAS,QAAQ,UAAU,EAAE,SAAS,KAAK,CAAC,CAAC;AAEvF,wBAAkB,QAAQ,CAAC,CAAG,EAAA,SAAS,MAAM;AAC3CH,cAAA,WAAW,YAAY,QAAQ,EAAE,IAAI,UAAW,CAAA;AAAA,MAAA,CACjD;AAEDA,YAAAA,WAAW,YAAY,QAAQ,CAAC,EAAE,MAAM,QAAQ,KAAM,CAAA,GAAG,EAAE,IAAI,SAAS,OAAO,CAAC,EAAG,CAAA;AAAA,IACrF;AAAA,EACF;AACF;ACrDA,MAAM,iBAAiBtM,gBAAAA,QAAOyN,aAAAA,QAAQ;AAAA;AAAA;AAKtC,MAAM,gBAAgBzN,gBAAAA,QAAO6G,aAAAA,OAAO;AAAA;AAAA;AAKpC,MAAM,eAAe7G,gBAAAA,QAAOqB,aAAAA,MAAM;AAAA;AAAA;AAAA;AAAA;AAUlC,MAAM,cAAcjC,iBAAM;AAAA,EACxB,CAAC,EAAE,MAAM,UAAU,WAAA,GAAc,iBAAiB;AAC1C,UAAA,EAAE,kBAAkBV,UAAAA;AAC1B,UAAM,EAAE,OAAA,IAAW,uBAAuB,MAAM;AAChD,UAAM,OAAOgP,WAAA,YAAY,SAAS,QAAQ,IAAI;AAC9C,UAAM,CAAC,aAAa,cAAc,IAAItO,iBAAM;AAAA,MAC1C,OAAO,uBAAuBuO,WAAK,OAAO,MAAM,OAAO,oBAAoB,IAAI;AAAA,IAAA;AAE3E,UAAA,CAAC,WAAW,YAAY,IAAIvO,iBAAM,SAAS,KAAK,QAAQ,EAAE;AAC1D,UAAA,UAAUA,iBAAM,OAA0B,IAAK;AAC/C,UAAA,cAAc,KAAK,SAAS,IAAI,CAAC,UAAU,MAAM,IAAI,EAAE,KAAK,EAAE;AACpE,UAAM,CAAC,UAAU,WAAW,IAAIA,iBAAM,SAAS,WAAW;AAC1D,UAAM,CAAC,SAAS,UAAU,IAAIA,iBAAM,SAAS,KAAK,GAAG;AAE/C,UAAA,wBAAoE,CAAC,MAAM;AAC/E,QAAE,eAAe;AACjB,qBAAe,IAAI;AAAA,IAAA;AAGf,UAAA,aAAqC,CAAC,MAAM;AAChD,QAAE,gBAAgB;AAGlB,UAAI,OAAO,aAAaoO,MAAAA,MAAM,YAAY,OAAO,SAAS,GAAG;AACrD,cAAA,CAAG,EAAA,UAAU,IAAIjB,MAAAA,OAAO,OAAO,QAAQ,OAAO,UAAU,OAAO,IAAI;AAC9DD,cAAAA,WAAA,OAAO,QAAQ,UAAU;AAAA,MACtC;AAEA,eAAS,QAAQ,EAAE,KAAK,SAAS,MAAM,UAAU;AACjD,mBAAa,KAAK;AAAA,IAAA;AAGpB,UAAM,eAAe,MAAM;AACzB,mBAAa,KAAK;AAEd,UAAA,KAAK,QAAQ,IAAI;AACnB,mBAAW,MAAM;AAAA,MACnB;AAAA,IAAA;AAGF,UAAM,gBAAgB,MAAM;AAC1B,qBAAe,KAAK;AAEhB,UAAA,KAAK,QAAQ,IAAI;AACnB,mBAAW,MAAM;AAAA,MACnB;AAEAoB,6BAAY,MAAM,MAAM;AAAA,IAAA;AAGpB,UAAA,eAAe,YAAY,SAAS,YAAY;AAEtD,WAEInP,2BAAA,KAAA0L,qBAAA,EAAA,UAAA;AAAA,MAAA3L,2BAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACE,GAAG;AAAA,UACJ,KAAK;AAAA,UACL,MAAM,KAAK;AAAA,UACX,SAAS;AAAA,UACT,OAAM;AAAA,UAEL;AAAA,QAAA;AAAA,MACH;AAAA,MACC,8CACEsP,sBAAQ,EAAA,QAAQ,SAAS,WAAW,eAAe,SAAS,GAAG,iBAAiB,OAC9E,UACC,YAAArP,gCAAC4B,aAAAA,QAAK,IAAG,QAAO,UAAU,YAAY,WAAU,UAAS,KAAK,GAC5D,UAAA;AAAA,QAAC5B,2BAAAA,KAAAiD,aAAAA,OAAA,EAAM,OAAM,SACX,UAAA;AAAA,UAAAlD,2BAAAA,IAACuP,2BACE,UAAc,cAAA;AAAA,YACb,IAAI;AAAA,YACJ,gBAAgB;AAAA,UACjB,CAAA,GACH;AAAA,UACAvP,2BAAA;AAAA,YAACwP,aAAA;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,aAAa,cAAc;AAAA,gBACzB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAAA,CACjB;AAAA,cACD,OAAO;AAAA,cACP,UAAU,CAAC,MAAM,YAAY,EAAE,OAAO,KAAK;AAAA,YAAA;AAAA,UAC7C;AAAA,QAAA,GACF;AAAA,QACAvP,2BAAAA,KAACiD,aAAAA,OAAM,EAAA,OAAM,SACX,UAAA;AAAA,UAAAlD,2BAAAA,IAACuP,2BACE,UAAc,cAAA;AAAA,YACb,IAAI;AAAA,YACJ,gBAAgB;AAAA,UACjB,CAAA,GACH;AAAA,UACAvP,2BAAA;AAAA,YAACwP,aAAA;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,aAAY;AAAA,cACZ,OAAO;AAAA,cACP,UAAU,CAAC,MAAM,WAAW,EAAE,OAAO,KAAK;AAAA,YAAA;AAAA,UAC5C;AAAA,QAAA,GACF;AAAA,wCACC3N,aAAAA,MAAK,EAAA,gBAAe,OAAM,OAAM,QAAO,KAAK,GAC3C,UAAA;AAAA,UAAA7B,+BAAC+C,aAAAA,QAAO,EAAA,SAAQ,YAAW,SAAS,cACjC,UAAc,cAAA;AAAA,YACb,IAAI;AAAA,YACJ,gBAAgB;AAAA,UACjB,CAAA,GACH;AAAA,UACA/C,2BAAAA,IAAC+C,uBAAO,MAAK,UAAS,UAAU,CAAC,YAAY,CAAC,SAC3C,UAAc,cAAA;AAAA,YACb,IAAI;AAAA,YACJ,gBAAgB;AAAA,UACjB,CAAA,GACH;AAAA,QAAA,GACF;AAAA,MACF,EAAA,CAAA,IAEC9C,2BAAA,KAAA4B,mBAAA,EAAK,WAAU,UAAS,KAAK,GAAG,YAAW,SAAQ,OAAM,SACxD,UAAA;AAAA,QAAA7B,2BAAAA,IAACuC,2BAAY,UAAY,YAAA,CAAA;AAAA,QACxBvC,2BAAA,IAAAuC,aAAA,YAAA,EACC,UAACvC,2BAAA,IAAA,gBAAA,EAAe,MAAM,KAAK,KAAK,QAAO,UAAS,OAAM,cACnD,UAAA,KAAK,IACR,CAAA,GACF;AAAA,wCACC6B,aAAAA,MAAK,EAAA,gBAAe,OAAM,OAAM,QAAO,KAAK,GAC3C,UAAA;AAAA,UAAA7B,2BAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,aAAa,cAAc;AAAA,gBACzB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAAA,CACjB;AAAA,cAED,UAAAA,2BAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,OAAM;AAAA,kBACN,SAAQ;AAAA,kBACR,SAAS,MAAM,WAAW,MAAM;AAAA,kBAChC,cAAY,cAAc;AAAA,oBACxB,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAAA,CACjB;AAAA,kBACD,MAAK;AAAA,kBACL,gBAAe;AAAA,kBAEf,yCAACsI,aAAK,MAAA,EAAA,OAAO,GAAG,QAAQ,GAAG,IAAIZ,MAAAA,OAAO;AAAA,gBAAA;AAAA,cACxC;AAAA,YAAA;AAAA,UACF;AAAA,UAEA1H,2BAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,aAAa,cAAc;AAAA,gBACzB,IAAI;AAAA,gBACJ,gBAAgB;AAAA,cAAA,CACjB;AAAA,cAED,UAAAA,2BAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAK;AAAA,kBACL,OAAM;AAAA,kBACN,SAAQ;AAAA,kBACR,SAAS,MAAM,aAAa,IAAI;AAAA,kBAChC,cAAY,cAAc;AAAA,oBACxB,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAAA,CACjB;AAAA,kBACD,MAAK;AAAA,kBACL,gBAAe;AAAA,kBAEf,yCAACsI,aAAK,MAAA,EAAA,OAAO,GAAG,QAAQ,GAAG,IAAIhB,MAAAA,QAAQ;AAAA,gBAAA;AAAA,cACzC;AAAA,YAAA;AAAA,UACF;AAAA,QAAA,GACF;AAAA,MAAA,EAAA,CACF,EAEJ,CAAA;AAAA,IAEJ,EAAA,CAAA;AAAA,EAEJ;AACF;AAEA,MAAM,SAAS,CAAC,YAA+C;AAC7D,SAAO,QAAQ,SAAS;AAC1B;AAEA,MAAM,OAAOxG,iBAAM,WAAkD,CAAC,OAAO,iBAAiB;AAC5F,MAAI,CAAC,OAAO,MAAM,OAAO,GAAG;AACnB,WAAA;AAAA,EACT;AAKO,SAAAd,+BAAC,eAAa,GAAG,OAAO,MAAM,MAAM,SAAS,KAAK,aAAc,CAAA;AACzE,CAAC;AAED,MAAM,aAAwC;AAAA,EAC5C,MAAM;AAAA,IACJ,eAAe,CAAC,UACdA,2BAAAA,IAAC,MAAK,EAAA,SAAS,MAAM,SAAS,YAAY,MAAM,YAC7C,UAAA,MAAM,SACT,CAAA;AAAA;AAAA,IAGF,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,EACtB;AACF;AC1OA,MAAM,YAAY4O,OAAAA;AAAAA,wBACM,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,sBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,yBAC3B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,uBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,0BAC3B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,0BAI9B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,wBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAItD,MAAM,cAAclN,gBAAO,QAAA;AAAA;AAAA,IAEvB,SAAS;AAAA;AAGb,MAAM,gBAAgBA,gBAAO,QAAA;AAAA;AAAA,IAEzB,SAAS;AAAA;AAGb,MAAM+N,eAAa,CAAC,SAAyC;AACpD,SAAAtB,WAAK,OAAO,IAAI,KAAK,CAACF,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AACtE;AAEA,MAAM,OAAO,CAAC,EAAE,YAAY,UAAU,cAAkC;AAClE,MAAA,CAACwB,aAAW,OAAO,GAAG;AACjB,WAAA;AAAA,EACT;AAEI,MAAA,QAAQ,WAAW,WAAW;AAChC,WAAQzP,2BAAAA,IAAA,aAAA,EAAa,GAAG,YAAa,SAAS,CAAA;AAAA,EAChD;AAEA,SAAQA,2BAAAA,IAAA,eAAA,EAAe,GAAG,YAAa,SAAS,CAAA;AAClD;AAEA,MAAM,4BAA4B,CAAC,QAAgB,oBAA0B;AAE3EgO,QAAA,WAAW,YAAY,QAAQ,EAAE,IAAI,gBAAiB,CAAA;AAElD,MAAA,gBAAgB,CAAC,MAAM,GAAG;AAEjBA,UAAAA,WAAA;AAAA,MACT;AAAA,MACA;AAAA,QACE,MAAM;AAAA,QACN,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,MACvC;AAAA,MACA,EAAE,IAAI,gBAAgB;AAAA,IAAA;AAEbA,UAAAA,WAAA,OAAO,QAAQ,eAAe;AAAA,EAC3C;AACF;AAEA,MAAME,WAAS,CAAC,SAAgC;AACvC,SAAAC,WAAK,OAAO,IAAI,KAAK,CAACF,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AACtE;AAKA,MAAM,2BAA2B,CAAC,QAAgB,UAA4C;AAC5F,MAAI,CAAC,OAAO;AAAW;AAEjB,QAAA,CAAC,iBAAiB,mBAAmB,IAAIA,aAAO,OAAO,QAAQ,OAAO,UAAU,MAAM;AAC5F,QAAM,CAAC,aAAa,eAAe,IAAIA,MAAO,OAAA,OAAO,QAAQ,mBAAmB;AAChF,QAAM,cACJ,YAAY,SAAS,WAAW,KAChCC,SAAO,gBAAgB,SAAS,CAAC,CAAC,KAClC,gBAAgB,SAAS,CAAC,EAAE,SAAS;AACvC,QAAM,cAAcD,MAAO,OAAA,QAAQ,QAAQ,OAAO,UAAU,QAAQ,mBAAmB;AACvF,QAAM,gCACJ,OAAO,UAAU,MAAM,WAAW,KAAK,OAAO,UAAU,MAAM,KAAK,GAAG,EAAE,MAAM;AAEhF,MAAI,aAAa;AACf,UAAM,eAAe;AACrB,8BAA0B,QAAQ,eAAe;AAAA,aACxC,aAAa;AACtBD,UAAA,WAAW,UAAU,QAAQ;AAAA,MAC3B,OAAO,CAAC,SAAS,CAACC,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IAAA,CAC1D;AAEUD,UAAAA,WAAA;AAAA,MACT;AAAA,MACA,EAAE,MAAM,YAAY;AAAA,MACpB;AAAA,QACE,SAAS;AAAA,MACX;AAAA,IAAA;AAAA,aAEO,+BAA+B;AACxCA,UAAA,WAAW,UAAU,QAAQ;AAAA,MAC3B,OAAO,CAAC,SAAS,CAACC,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IAAA,CAC1D;AAEDD,UAAA,WAAW,SAAS,QAAQ,EAAE,MAAM,YAAa,CAAA;AAAA,EACnD;AACF;AAKA,MAAM,uBAAuB,CAAC,WAAmB;AACzC,QAAA,uBAAuBC,MAAAA,OAAO,MAAM,QAAQ;AAAA,IAChD,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,EAAA,CAC1D;AAED,MAAI,CAAC,wBAAwB,CAAC,OAAO,WAAW;AAC9C;AAAA,EACF;AAEM,QAAA,CAAC,iBAAiB,mBAAmB,IAAI;AAC/C,QAAM,CAAC,aAAa,eAAe,IAAIA,MAAO,OAAA,OAAO,QAAQ,mBAAmB;AAChF,QAAM,cACJ,YAAY,SAAS,WAAW,KAChCC,SAAO,gBAAgB,SAAS,CAAC,CAAC,KAClC,gBAAgB,SAAS,CAAC,EAAE,SAAS;AACvC,QAAM,kBACJ,gBAAgB,SAAS,WAAW,KACpCA,SAAO,gBAAgB,SAAS,CAAC,CAAC,KAClC,gBAAgB,SAAS,CAAC,EAAE,SAAS;AAEvC,MAAI,aAAa;AACf,8BAA0B,QAAQ,eAAe;AAAA,aACxC,iBAAiB;AAE1BF,UAAA,WAAW,YAAY,QAAQ,EAAE,IAAI,oBAAqB,CAAA;AAGpD,UAAA,gBAAgBC,MAAAA,OAAO,MAAM,QAAQ;AAAA,MACzC,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IAAA,CAC1D;AAED,QAAI,CAAC,eAAe;AAClB;AAAA,IACF;AAEA,UAAM,uBAAuBoB,MAAAA,KAAK,KAAK,cAAc,CAAC,CAAC;AAC5CrB,UAAAA,WAAA;AAAA,MACT;AAAA,MACA;AAAA,QACE,MAAM;AAAA,QACN,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,MACvC;AAAA,MACA,EAAE,IAAI,qBAAqB;AAAA,IAAA;AAIlBA,UAAAA,WAAA,OAAO,QAAQ,oBAAoB;AAAA,EAAA,OACzC;AAEL,UAAM,YAAYC,MAAO,OAAA,MAAM,QAAQ,OAAO,UAAU,QAAQ,mBAAmB;AAEnF,QAAI,WAAW;AAGbD,YAAAA,WAAW,YAAY,QAAQ,EAAE,MAAM,aAAa,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,GAAI,CAAA,EAAG,CAAA;AAAA,IAAA,OACvF;AAGLA,uBAAW,WAAW,MAAM;AAAA,IAC9B;AAAA,EACF;AACF;AAKA,MAAM,sBAAsB,CAAC,QAAgB,WAAoC;AAC/E,QAAM,gBAAgB,kBAAsC,QAAQ,EAAE,MAAM,aAAa;AAEzF,MAAI,CAAC;AAAe;AAEpBA,QAAAA,WAAW,UAAU,QAAQ,EAAE,MAAM,QAAQ,QAAQ,UAAU,CAAG,EAAA,GAAG,EAAE,IAAI,cAAe,CAAA;AAC5F;AAEA,MAAM,aAAiF;AAAA,EACrF,gBAAgB;AAAA,IACd,eAAe,CAAC,UAAWhO,2BAAAA,IAAA,MAAA,EAAM,GAAG,OAAO;AAAA,IAC3C,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,MAAM0P,MAAA;AAAA,IACN,WAAW,CAAC,SAAS,KAAK,SAAS,UAAU,KAAK,WAAW;AAAA,IAC7D,oBAAoB;AAAA,IACpB,eAAe,CAAC,WAAW,oBAAoB,QAAQ,SAAS;AAAA,IAChE,gBAAgB;AAAA,IAChB,oBAAoB;AAAA,IACpB,UAAU,CAAC,IAAI;AAAA,EACjB;AAAA,EACA,kBAAkB;AAAA,IAChB,eAAe,CAAC,UAAW1P,2BAAAA,IAAA,MAAA,EAAM,GAAG,OAAO;AAAA,IAC3C,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,MAAM2P,MAAA;AAAA,IACN,WAAW,CAAC,SAAS,KAAK,SAAS,UAAU,KAAK,WAAW;AAAA,IAC7D,oBAAoB;AAAA,IACpB,eAAe,CAAC,WAAW,oBAAoB,QAAQ,WAAW;AAAA,IAClE,gBAAgB;AAAA,IAChB,oBAAoB;AAAA,IACpB,UAAU,CAAC,KAAK,KAAK,GAAG;AAAA,EAC1B;AAAA,EACA,aAAa;AAAA,IACX,eAAe,CAAC,UACb3P,+BAAAuC,aAAAA,YAAA,EAAW,IAAG,MAAM,GAAG,MAAM,YAC3B,UAAA,MAAM,SACT,CAAA;AAAA;AAAA,IAGF,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,EACtB;AACF;AC5NA,MAAM,kBAAkD;AAAA,EACtD,WAAW;AAAA,IACT,eAAe,CAAC,UACdvC,2BAAAA,IAACuC,aAAAA,YAAW,EAAA,IAAG,KAAI,SAAQ,SAAS,GAAG,MAAM,YAC1C,gBAAM,UACT;AAAA,IAEF,MAAMqN,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,IACpB,cAAc,QAAQ;AACpB,wBAAsC,QAAQ,EAAE,MAAM,YAAa,CAAA;AAAA,IACrE;AAAA,IACA,eAAe,QAAQ;AACjB,UAAA,CAAC,OAAO,WAAW;AACrB;AAAA,MACF;AAGM,YAAA,4BAA4B,OAAO,UAAU,OAAO;AAK1D5B,YAAA,WAAW,WAAW,QAAQ;AAAA;AAAA;AAAA,QAG5B,QAAQ;AAAA,MAAA,CACT;AAIK,YAAA,mBAAmBC,MAAAA,OAAO,MAAM,QAAQ;AAAA,QAC5C,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,MAAA,CAC1D;AACD,UAAI,CAAC,kBAAkB;AACrB;AAAA,MACF;AACM,YAAA,CAAG,EAAA,eAAe,IAAI;AAC5B,YAAM,YAAYA,MAAO,OAAA,MAAM,QAAQ,OAAO,UAAU,QAAQ,eAAe;AASzE,YAAA,CAAC,cAAc,IAAIA,MAAAA,OAAO,OAAO,QAAQ,OAAO,UAAU,OAAO,IAAI;AAC3ED,uBAAW,YAAY,MAAM;AAG7B,YAAM,cAAc,OAAO,SAAS,SAAS,0BAA0B,CAAC,IAAI;AAIjEA,YAAAA,WAAA;AAAA,QACT;AAAA,QACA;AAAA,UACE,MAAM;AAAA;AAAA,UAEN,UAAW,YAAY,CAAC,EAAE,MAAM,QAAQ,MAAM,GAAA,CAAI,IAAI,eAAe;AAAA,QACvE;AAAA,QACA;AAAA,UACE,IAAI,cAAc,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,SAAS,MAAM;AAAA,QAChF;AAAA,MAAA;AAQSA,YAAAA,WAAA,OAAO,QAAQ,OAAO,MAAM,CAAC,0BAA0B,CAAC,IAAI,CAAC,CAAC,CAAC;AAAA,IAC5E;AAAA,EACF;AACF;AChFA,MAAM,aAAatM,gBAAO,QAAA,WAAW,MAAM,EAAE,MAAM,cAAc;AAAA,YACrD,CAAC,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,CAAC,IAAI;AAAA,iBAChC,CAAC,EAAE,MAAA,MAAY,MAAM,YAAY,OAAO;AAAA,iBACxC,CAAC,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,CAAC,UAAU,MAAM,OAAO,UAAU,EAAE;AAAA,aACxE,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AAAA,WAClE,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAGjD,MAAM,cAA0C;AAAA,EAC9C,OAAO;AAAA,IACL,eAAe,CAAC;AAAA;AAAA;AAAA,MAGd1B,2BAAAA,IAAC,SACC,UAACA,2BAAAA,IAAA,YAAA,EAAY,GAAG,MAAM,YAAa,UAAM,MAAA,SAAA,CAAS,EACpD,CAAA;AAAA;AAAA,IAEF,MAAM6P,MAAA;AAAA,IACN,OAAO;AAAA,MACL,IAAI;AAAA,MACJ,gBAAgB;AAAA,IAClB;AAAA,IACA,WAAW,CAAC,SAAS,KAAK,SAAS;AAAA,IACnC,oBAAoB;AAAA,IACpB,cAAc,QAAQ;AACpB,wBAAkC,QAAQ,EAAE,MAAM,QAAS,CAAA;AAAA,IAC7D;AAAA,IACA,eAAe,QAAQ;AACrB,4BAAsB,MAAM;AAAA,IAC9B;AAAA,IACA,UAAU,CAAC,GAAG;AAAA,EAChB;AACF;ACrCO,MAAM,aAAa,CAAmB,WAC3C,OAAO,QAAQ,MAAM;AAGhB,MAAM,UAAU,CAAmB,WAAc,OAAO,KAAK,MAAM;ACW1E,MAAM,iBAAiBnO,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAMlC,MAAM,YAAYH,gBAAO,QAAAoO,mBAAQ,SAAS;AAAA,gBAC1B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA,YAE1CvL,aAAAA,QAAQ,EAAE,CAAC;AAAA;AAGvB,MAAM,aAAa7C,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAWV,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAK1D,MAAM,gBAAgBH,gBAAAA,QAAOE,aAAAA,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAWZ,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBASzC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AASvD,SAAS,qBAAqB;AAC5B,QAAM,CAAC,cAAc,iBAAiB,IAAId,iBAAM,SAAmC,IAAI;AAEjF,QAAA,yBAAyB,CAAC,gBAA8D;AAE5F,QAAI,aAAa;AAGG,wBAAAA,iBAAM,aAAa,YAAe,GAAA,EAAE,KAAK,KAAK,MAAO,CAAA,CAAC;AAAA,IAC1E;AAAA,EAAA;AAGK,SAAA,EAAE,cAAc;AACzB;AAWA,MAAM,gBAAgB,CAAC;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAA0B;AACxB,QAAM,EAAE,OAAA,IAAW,uBAAuB,eAAe;AACnD,QAAA,EAAE,kBAAkBV,UAAAA;AACpB,QAAA,eAAe,cAAc,KAAK;AAElC,QAAA,eAAe,WAAW,eAAe;AAG7C,SAAAJ,2BAAAA,IAACuI,aAAAA,SAAQ,EAAA,aAAa,cACpB,UAAAvI,2BAAA;AAAA,IAAC8P,mBAAQ;AAAA,IAAR;AAAA,MACC,OAAO;AAAA,MACP,cAAY,WAAW,OAAO;AAAA,MAC9B,aAAa,CAAC,MAAM;AAClB,UAAE,eAAe;AACL;AACZV,+BAAY,MAAM,MAAM;AAAA,MAC1B;AAAA,MACA,iBAAe;AAAA,MACf;AAAA,MACA,cAAY;AAAA,MACZ,SAAO;AAAA,MAEP,UAAApP,2BAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,IAAG;AAAA,UACH,YAAY,WAAW,eAAe;AAAA,UACtC,YAAW;AAAA,UACX,gBAAe;AAAA,UACf,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,WAAS;AAAA,UAET,UAAAA,2BAAAA,IAACsI,aAAAA,MAAK,EAAA,OAAO,GAAG,QAAQ,GAAG,IAAI,MAAM,OAAO,WAAW,eAAe,aAAc,CAAA;AAAA,QAAA;AAAA,MACtF;AAAA,IAAA;AAAA,EAEJ,EAAA,CAAA;AAEJ;AAEA,MAAM,iBAAiB,MAAM;AAC3B,QAAM,EAAE,QAAQ,QAAQ,SAAS,IAAI,uBAAuB,gBAAgB;AACtE,QAAA,EAAE,kBAAkBlI,UAAAA;AAC1B,QAAM,EAAE,cAAc,uBAAuB,IAAI,mBAAmB;AAEpE,QAAM,qBAAyC,WAAW,MAAM,EAAE,OAEhE,CAAC,aAAa,UAAU;AAClB,UAAA,CAAC,KAAK,KAAK,IAAI;AAErB,WAAO,MAAM,qBAAqB,CAAC,GAAG,aAAa,GAAG,IAAI;AAAA,EAC5D,GAAG,CAAE,CAAA;AAEL,QAAM,CAAC,eAAe,gBAAgB,IAAIU,iBAAM,SAA2B,WAAW;AAEhF,QAAA,eAAe,CAAC,cAAuB;AACvC,QAAA,CAAC,mBAAmB,SAAS,GAAG;AAClC;AAAA,IACF;AAEM,UAAA,gBACJ,OAAO,SAAS,WAAW,KAAKmN,MAAAA,OAAO,QAAQ,QAAQ,OAAO,SAAS,CAAC,CAAC;AAE3E,QAAI,CAAC,OAAO,aAAa,CAAC,eAAe;AAG5BD,YAAAA,WAAA;AAAA,QACT;AAAA,QACA;AAAA,UACE,MAAM;AAAA,UACN,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,IAAI;AAAA,QACvC;AAAA,QACA;AAAA,UACE,QAAQ;AAAA;AAAA,QAEV;AAAA,MAAA;AAAA,IAEO,WAAA,CAAC,OAAO,aAAa,eAAe;AAGlCA,uBAAA,OAAO,QAAQC,aAAO,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AAAA,IACxD;AAGA,UAAM,mBAAmB,OAAO,SAAS,EAAE,gBAAgB,MAAM;AACjE,2BAAuB,gBAAgB;AAEvC,qBAAiB,SAAS;AAE1BmB,2BAAY,MAAM,MAAM;AAAA,EAAA;AAW1B,QAAM,qBAAqB,CAAC,MAAa,EAAE,eAAe;AAG1DtO,mBAAM,UAAU,MAAM;AACpB,QAAI,OAAO,WAAW;AAGd,YAAA,CAAC,UAAU,IAAImN,aAAO,OAAO,QAAQ,OAAO,UAAU,QAAQ;AAAA,QAClE,MAAM;AAAA,QACN,OAAO;AAAA,MAAA,CACR;AAEK,YAAA,iBAAiB,QAAQ,MAAM,EAAE;AAAA,QACrC,CAAC,aAAa,CAACA,MAAO,OAAA,SAAS,UAAU,KAAK,OAAO,QAAQ,EAAE,UAAU,UAAU;AAAA,MAAA;AAIjF,UAAA,kBAAkB,mBAAmB,eAAe;AACtD,yBAAiB,cAAkC;AAAA,MACrD;AAAA,IACF;AAAA,EAAA,GACC,CAAC,OAAO,WAAW,QAAQ,QAAQ,aAAa,CAAC;AAEpD,SAEIhO,2BAAA,KAAA0L,qBAAA,EAAA,UAAA;AAAA,IAAA3L,+BAAC,eACC,EAAA,UAAAA,2BAAA;AAAA,MAAC8B,aAAA;AAAA,MAAA;AAAA,QACC,WAAY9B,2BAAAA,IAAAsI,aAAAA,MAAA,EAAK,IAAI,OAAO,aAAa,EAAE,MAAM;AAAA,QACjD,UAAU;AAAA,QACV,aAAa,cAAc,OAAO,aAAa,EAAE,KAAK;AAAA,QACtD,OAAO;AAAA,QACP,kBAAkB;AAAA,QAClB,cAAY,cAAc;AAAA,UACxB,IAAI;AAAA,UACJ,gBAAgB;AAAA,QAAA,CACjB;AAAA,QACD;AAAA,QAEC,UAAA,mBAAmB,IAAI,CAAC,QACvBtI,2BAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YAEC,OAAO;AAAA,YACP,OAAO,OAAO,GAAG,EAAE;AAAA,YACnB,MAAM,OAAO,GAAG,EAAE;AAAA,YAClB;AAAA,UAAA;AAAA,UAJK;AAAA,QAAA,CAMR;AAAA,MAAA;AAAA,IAAA,GAEL;AAAA,IACC;AAAA,EACH,EAAA,CAAA;AAEJ;AASA,MAAM,cAAc,CAAC,EAAE,OAAO,MAAM,OAAO,oBAAsC;AACzE,QAAA,EAAE,kBAAkBI,UAAAA;AAE1B,QAAM,aAAa,UAAU;AAG3B,SAAAJ,2BAAA;AAAA,IAAC+B,aAAA;AAAA,IAAA;AAAA,MACC,0CAAYuG,aAAK,MAAA,EAAA,IAAI,MAAM,OAAO,aAAa,eAAe,cAAc;AAAA,MAC5E;AAAA,MAEC,wBAAc,KAAK;AAAA,IAAA;AAAA,EAAA;AAG1B;AAEA,MAAM,aAAa,CAAC,SAAyC;AACpD,SAAA6F,WAAK,OAAO,IAAI,KAAK,CAACF,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AACtE;AAEA,MAAM,eAAe,CAAC,QAAgB,cAAuC;AACrE,QAAA,EAAE,UAAc,IAAA;AAEtB,MAAI,CAAC;AAAkB,WAAA;AAEjB,QAAA,CAAC,KAAK,IAAI,MAAM;AAAA,IACpBA,MAAA,OAAO,MAAM,QAAQ;AAAA,MACnB,IAAIA,MAAA,OAAO,YAAY,QAAQ,SAAS;AAAA,MACxC,OAAO;AAAA,IAAA,CACR;AAAA,EAAA;AAGH,SAAO,QAAQ,KAAK;AACtB;AAEA,MAAM,aAAa,CAAC,QAAgB,UAAmB,WAAoC;AAIzF,MAAI,OAAO,WAAW;AACpBD,UAAA,WAAW,YAAY,QAAQ;AAAA,MAC7B,OAAO,CAAC,SAAS,WAAW,IAAI,KAAK,CAAC,WAAW,WAAW,EAAE,SAAS,KAAK,MAAM;AAAA,MAClF,OAAO;AAAA,IAAA,CACR;AAEDA,UAAA,WAAW,SAAS,QAAQ;AAAA,MAC1B,MAAM,WAAW,cAAc;AAAA,IAAA,CAChC;AAED,QAAI,CAAC,UAAU;AACb,YAAM,QAAQ,EAAE,MAAM,QAAiB,QAAQ,UAAU,CAAA;AAC9CA,YAAAA,WAAA,UAAU,QAAQ,KAAK;AAAA,IACpC;AAAA,EAAA,OACK;AAGC,UAAA,CAAA,EAAG,YAAY,IAAIC,MAAAA,OAAO,KAAK,QAAQ,CAAA,CAAE;AAE/C,UAAM,CAAC,UAAU,IAAIA,MAAAA,OAAO,OAAO,QAAQ,YAAY;AAEvDD,UAAA,WAAW,YAAY,QAAQ;AAAA,MAC7B,OAAO;AAAA,MACP,SAAS;AAAA,MACT,IAAI;AAAA,QACF,QAAQ,EAAE,MAAM,cAAc,QAAQ,EAAE;AAAA,QACxC,OAAO,EAAE,MAAM,cAAc,QAAQ,EAAE;AAAA,MACzC;AAAA,IAAA,CACD;AAEUA,UAAAA,WAAA;AAAA,MACT;AAAA,MACA;AAAA,QACE,MAAM,WAAW,cAAc;AAAA,QAC/B,UAAU,CAAC,GAAG,WAAW,QAAQ;AAAA,MACnC;AAAA,MACA;AAAA,QACE,IAAI,CAAC,aAAa,CAAC,CAAC;AAAA,QACpB,QAAQ;AAAA,MACV;AAAA,IAAA;AAGF,QAAI,CAAC,UAAU;AAEb,YAAM,QAAQ,EAAE,MAAM,QAAiB,QAAQ,UAAU,CAAA;AAC9CA,YAAAA,WAAA,UAAU,QAAQ,KAAK;AAAA,IACpC;AAAA,EACF;AACF;AAOA,MAAM,aAAa,CAAC,EAAE,OAAO,aAA8B;AACzD,QAAM,EAAE,QAAQ,SAAS,IAAI,uBAAuB,YAAY;AAEhE,QAAM,EAAE,MAAM,WAAW,MAAA,IAAU;AAEnC,QAAM,WAAW;AAAA,IACf;AAAA,IACA,CAAC,SAAS,CAACC,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS,UAAU,UAAU,IAAI;AAAA,EAAA;AAI1E,SAAAjO,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC;AAAA,MACA,MAAM;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,aAAa,MAAM,WAAW,QAAQ,UAAU,MAAM;AAAA,IAAA;AAAA,EAAA;AAG5D;AAEA,MAAM,aAAa,CAAC,EAAE,eAAsC;AAC1D,QAAM,EAAE,OAAA,IAAW,uBAAuB,YAAY;AAEtD,QAAM,eAAe,MAAM;AACnB,UAAA,EAAE,UAAc,IAAA;AAEtB,QAAI,CAAC;AAAkB,aAAA;AAEjB,UAAA,CAAC,KAAK,IAAI,MAAM;AAAA,MACpBiO,MAAA,OAAO,MAAM,QAAQ;AAAA,QACnB,IAAIA,MAAA,OAAO,YAAY,QAAQ,SAAS;AAAA,QACxC,OAAO,CAAC,SAASgB,cAAa,UAAU,IAAI,KAAK,KAAK,SAAS;AAAA,MAAA,CAChE;AAAA,IAAA;AAGH,WAAO,QAAQ,KAAK;AAAA,EAAA;AAGtB,QAAM,iBAAiB,MAAM;AAE3B,QAAI,UAAU;AACL,aAAA;AAAA,IACT;AAGI,QAAA,CAAC,OAAO,WAAW;AACd,aAAA;AAAA,IACT;AAGM,UAAA,kBAAkBhB,MAAAA,OAAO,MAAM,QAAQ;AAAA,MAC3C,IAAI,OAAO,UAAU;AAAA,MACrB,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IAAA,CAC1D;AACK,UAAA,iBAAiBA,MAAAA,OAAO,MAAM,QAAQ;AAAA,MAC1C,IAAI,OAAO,UAAU;AAAA,MACrB,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,IAAA,CAC1D;AAEG,QAAA,CAAC,mBAAmB,CAAC,gBAAgB;AAChC,aAAA;AAAA,IACT;AAGA,WAAO,gBAAgB,CAAC,MAAM,eAAe,CAAC;AAAA,EAAA;AAGhD,QAAM,UAAU,MAAM;AAEpB,eAAW,QAAQ,EAAE,KAAK,GAAI,CAAA;AAAA,EAAA;AAI9B,SAAAjO,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAMgD,MAAA;AAAA,MACN,MAAK;AAAA,MACL,OAAO;AAAA,QACL,IAAI;AAAA,QACJ,gBAAgB;AAAA,MAClB;AAAA,MACA,UAAU,aAAa;AAAA,MACvB,aAAa;AAAA,MACb,UAAU,eAAe;AAAA,IAAA;AAAA,EAAA;AAG/B;AAEA,MAAM,gBAAgB,MAAM;AAC1B,QAAM,EAAE,QAAQ,QAAQ,WAAA+M,YAAW,aAAa,uBAAuB,eAAe;AAKtF,QAAM,sBAAsB,MAAM;AAEhC,QAAI,UAAU;AACL,aAAA;AAAA,IACT;AAEI,QAAA,CAAC,OAAO,WAAW;AACd,aAAA;AAAA,IACT;AAEM,UAAA,eAAe,OAAO,SAAS,OAAO,UAAU,OAAO,KAAK,CAAC,CAAC;AAEpE,QAAI,CAAC,SAAS,MAAM,EAAE,SAAS,aAAa,IAAI,GAAG;AAC1C,aAAA;AAAA,IACT;AAEO,WAAA;AAAA,EAAA;AAGT,QAAM,mBAAmB;AAEzB,SACG/P,2BAAAA,IAAA8P,mBAAQ,MAAR,EAAa,iBAAe,UAAU,SAAO,MAC5C,UAAC7P,2BAAA,KAAA,gBAAA,EAAe,KAAK,GAAG,SAAS,GAC/B,UAAA;AAAA,IAAAD,2BAAA,IAAC,gBAAe,EAAA;AAAA,mCACf,WAAU,EAAA;AAAA,IACXA,2BAAAA,IAAC8P,mBAAQ,aAAR,EAAoB,MAAK,YAAW,SAAO,MAC1C,UAAA7P,2BAAA,KAAC4B,aAAK,MAAA,EAAA,KAAK,GACR,UAAA;AAAA,MAAO,OAAA,QAAQkO,UAAS,EAAE,IAAI,CAAC,CAAC,MAAM,QAAQ,MAC7C/P,2BAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAEC;AAAA,UACA,MAAM,SAAS;AAAA,UACf,OAAO,SAAS;AAAA,UAChB,UAAU,SAAS,cAAc,MAAM;AAAA,UACvC,aAAa,MAAM,SAAS,aAAa,MAAM;AAAA,UAC/C,UAAU;AAAA,QAAA;AAAA,QANL;AAAA,MAAA,CAQR;AAAA,MACDA,2BAAAA,IAAC,YAAW,EAAA,UAAU,iBAAkB,CAAA;AAAA,IAAA,EAAA,CAC1C,EACF,CAAA;AAAA,mCACC,WAAU,EAAA;AAAA,IACXA,2BAAAA,IAAC8P,mBAAQ,aAAR,EAAoB,MAAK,UAAS,SAAO,MACxC,UAAA7P,2BAAA,KAAC4B,aAAK,MAAA,EAAA,KAAK,GACT,UAAA;AAAA,MAAA7B,+BAAC,cAAW,OAAO,OAAO,gBAAgB,GAAG,QAAO,aAAY;AAAA,qCAC/D,YAAW,EAAA,OAAO,OAAO,cAAc,GAAG,QAAO,WAAU;AAAA,IAAA,EAAA,CAC9D,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA;AAEJ;AC1eA,MAAM,iBAAiB0B,gBAAAA,QAAOsO,WAAAA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,SAK7B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,sBAIjB,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAIpD,MAAM,iBAAiB,CAAC,OAAwBD,eAA8B;AAE5E,QAAM,kBAAkB,WAAWA,UAAS,EAAE,OAAO,CAAC,iBAAiB,kBAAkB;AACjF,UAAA,CAAC,MAAM,QAAQ,IAAI;AAErB,QAAA,MAAM,KAAK,IAAI,GAAG;AACb,aAAA,SAAS,WAAW,eAAe;AAAA,IAC5C;AAEO,WAAA;AAAA,EAAA,GACN,MAAM,QAAQ;AAEjB,SAAQ/P,2BAAA,IAAA,QAAA,EAAM,GAAG,MAAM,YAAa,UAAgB,gBAAA,CAAA;AACtD;AAEA,MAAM,oBAAoB,CAAC,OAA2B,WAAwB;AAC5E,QAAM,aAAa,OAAO,OAAO,MAAM,EAAE,KAAK,CAACiQ,WAAUA,OAAM,UAAU,MAAM,OAAO,CAAC;AACjF,QAAA,QAAQ,cAAc,OAAO;AAE5B,SAAA,MAAM,cAAc,KAAK;AAClC;AAMA,MAAM,gBAAgB,CAAC,EAAE,kBAAoC;AAC3D,QAAM,EAAE,QAAQ,UAAU,QAAQ,WAAAF,eAAc,uBAAuB,eAAe;AAChF,QAAA,YAAYjP,iBAAM,OAAuB,IAAI;AACnD,QAAM,EAAE,cAAc,uBAAuB,IAAI,mBAAmB;AAGpE,QAAM,aAAaA,iBAAM;AAAA,IACvB,CAAC,UAA2B,eAAe,OAAOiP,UAAS;AAAA,IAC3D,CAACA,UAAS;AAAA,EAAA;AAIZ,QAAM,gBAAgBjP,iBAAM;AAAA,IAC1B,CAAC,UAA8B,kBAAkB,OAAO,MAAM;AAAA,IAC9D,CAAC,MAAM;AAAA,EAAA;AAGH,QAAA,eAAe,CAAC,UAA4C;AAE5D,QAAA,CAAC,OAAO,WAAW;AACrB;AAAA,IACF;AAEM,UAAA,CAAC,UAAU,YAAY,IAAImN,aAAO,KAAK,QAAQ,OAAO,UAAU,OAAO,IAAI;AAGjF,QAAIA,MAAAA,OAAO,SAAS,QAAQ,KAAK,SAAS,SAAS,QAAQ;AACzD;AAAA,IACF;AAGA,QAAI,aAAa,GAAG,EAAE,MAAM,GAAG;AAC7B;AAAA,IACF;AAGA,UAAM,uBAAuB,OAAO,OAAO,MAAM,EAAE,KAAK,CAAC,UAAU;AACjE,aAAO,MAAM,UAAU,SAAS,SAAS,IAAI;AAAA,IAAA,CAC9C;AAED,QAAI,sBAAsB,eAAe;AAEvC,YAAM,eAAe;AACrBD,YAAA,WAAW,OAAO,QAAQ;AAAA,QACxB,UAAU,SAAS,KAAK;AAAA,QACxB,MAAM;AAAA,QACN,SAAS;AAAA,MAAA,CACV;AAGK,YAAA,mBAAmB,qBAAqB,cAAc,MAAM;AAClE,6BAAuB,gBAAgB;AAAA,IACzC;AAAA,EAAA;AAGI,QAAA,cAAc,CAAC,UAA4C;AAC3D,QAAA,CAAC,OAAO,WAAW;AACrB;AAAA,IACF;AAGM,UAAA,eAAe,OAAO,SAAS,OAAO,UAAU,OAAO,KAAK,CAAC,CAAC;AAG9D,UAAA,gBAAgB,OAAO,OAAO,MAAM,EAAE,KAAK,CAAC,UAAU,MAAM,UAAU,YAAY,CAAC;AACzF,QAAI,CAAC,eAAe;AAClB;AAAA,IACF;AAGA,QAAI,MAAM,YAAY,aAAa,SAAS,SAAS;AACxCA,YAAAA,WAAA,WAAW,QAAQ,IAAI;AAClC;AAAA,IACF;AAGA,QAAI,cAAc,gBAAgB;AAChC,oBAAc,eAAe,MAAM;AAAA,IAAA,OAC9B;AAEE,aAAA,UAAU,eAAgB,MAAM;AAAA,IACzC;AAAA,EAAA;AAGI,QAAA,uBAAuB,CAAC,UAA4C;AACpE,QAAA,CAAC,OAAO,WAAW;AACrB;AAAA,IACF;AAEM,UAAA,eAAe,OAAO,SAAS,OAAO,UAAU,OAAO,KAAK,CAAC,CAAC;AAC9D,UAAA,gBAAgB,OAAO,OAAO,MAAM,EAAE,KAAK,CAAC,UAAU,MAAM,UAAU,YAAY,CAAC;AAEzF,QAAI,CAAC,eAAe;AAClB;AAAA,IACF;AAEA,QAAI,cAAc,oBAAoB;AACtB,oBAAA,mBAAmB,QAAQ,KAAK;AAAA,IAChD;AAAA,EAAA;AAMI,QAAA,0BAA0B,CAAC,UAA4C;AACrE,UAAA,cAAc,MAAM,WAAW,MAAM;AAE3C,QAAI,aAAa;AACf,aAAO,OAAO+B,UAAS,EAAE,QAAQ,CAAC,UAAU;AACtC,YAAA,MAAM,gBAAgB,KAAK,GAAG;AAChC,gBAAM,aAAa,MAAM;AAAA,QAC3B;AAAA,MAAA,CACD;AAAA,IACH;AAAA,EAAA;AAGI,QAAA,gBAAyD,CAAC,UAAU;AAEpE,QAAA,MAAM,QAAQ,SAAS;AACzB,YAAM,eAAe;AACrB,aAAO,YAAY,KAAK;AAAA,IAC1B;AACI,QAAA,MAAM,QAAQ,aAAa;AAC7B,aAAO,qBAAqB,KAAK;AAAA,IACnC;AAGA,4BAAwB,KAAK;AAGzB,QAAA,MAAM,QAAQ,KAAK;AACrB,mBAAa,KAAK;AAAA,IACpB;AAAA,EAAA;AASI,QAAA,gCAAgC,CAAC,GAAgB,aAAoB;AACnE,UAAA,UAAU,SAAS;AACzB,UAAM,cAAc,UAAU;AAE9B,QAAI,CAAC,aAAa;AAChB;AAAA,IACF;AAEM,UAAA,aAAa,YAAY;AAG/B,QAAI,QAAQ,MAAM,WAAW,OAAO,QAAQ,SAAS,WAAW,QAAQ;AAEtE,kBAAY,SAAS;AAAA,QACnB,KAAK;AAAA;AAAA,QACL,UAAU;AAAA,MAAA,CACX;AAAA,IACH;AAAA,EAAA;AAIA,SAAA9P,2BAAA;AAAA,IAAC2B,aAAA;AAAA,IAAA;AAAA,MACC,KAAK;AAAA,MACL,MAAM;AAAA,MACN,OAAM;AAAA,MACN,UAAS;AAAA,MACT,UAAU;AAAA,MACV,YAAW;AAAA,MACX,OAAM;AAAA,MACN,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,eAAe;AAAA,MAEf,UAAA;AAAA,QAAA5B,2BAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,UAAU;AAAA,YACV;AAAA,YACA;AAAA,YACA;AAAA,YACA,WAAW;AAAA,YACX,yBAAyB;AAAA,UAAA;AAAA,QAC3B;AAAA,QACC;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGP;AC3OA,MAAM,kBAAkB4O,OAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAMxB,MAAM,WAAWlN,wBAAOa,uBAAU,EAAE,MAAM,EAAE,YAAY,QAAQ;AAAA,IAC5D,eAAe;AAAA;AAGnB,MAAM,aAAab,gBAAAA,QAAOa,aAAAA,UAAU;AAAA;AAAA,IAEhC,eAAe;AAAA;AAGnB,MAAM,gBAAgBb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,gBAAgB,aAAa;AAAA,IAC1E,eAAe;AAAA;AAGnB,MAAM,oBAAoBb,wBAAOa,uBAAU,EAAE,MAAM,EAAE,gBAAgB,gBAAgB;AAAA,IACjF,eAAe;AAAA;AAGnB,MAAM,aAAab,gBAAO,QAAA;AAAA,sBACJ,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,mBACzC,CAAC,EAAE,YAAY,MAAM,YAAY;AAAA,aACvC,CAAC,EAAE,MAAM,MAAM,KAAK,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA;AAAA;AAAA;AAAA;AAsBlD,MAAM,oBAAoB,CAAC,QAAgB,SAAsB;AACzD,QAAA,QAAQuM,MAAAA,OAAO,MAAM,MAAM;AACjC,MAAI,CAAC;AAAc,WAAA;AAEZ,SAAA,QAAQ,MAAM,IAAI,CAAC;AAC5B;AAKA,MAAM,mBAAmB,CAAC,QAAgB,SAAsB;AACxD,QAAA,QAAQA,MAAAA,OAAO,MAAM,MAAM;AAG7B,MAAA,CAAC,OAAO,WAAW;AACrB,UAAM,cAAcA,MAAA,OAAO,IAAI,QAAQ,CAAE,CAAA;AAC9BD,UAAAA,WAAA,OAAO,QAAQ,WAAW;AAAA,EACvC;AAGI,MAAA,QAAQ,IAAI,GAAG;AACVC,UAAAA,OAAA,WAAW,QAAQ,IAAI;AAAA,EAAA,OACzB;AACEA,UAAAA,OAAA,QAAQ,QAAQ,MAAM,IAAI;AAAA,EACnC;AACF;AAEA,MAAM,YAA4B;AAAA,EAChC,MAAM;AAAA,IACJ,MAAMiC,MAAA;AAAA,IACN,iBAAiB,CAAC,UAAU,MAAM,QAAQ;AAAA,IAC1C,OAAO,EAAE,IAAI,oCAAoC,gBAAgB,OAAO;AAAA,IACxE,eAAe,CAAC,WAAW,kBAAkB,QAAQ,MAAM;AAAA,IAC3D,cAAc,CAAC,WAAW,iBAAiB,QAAQ,MAAM;AAAA,IACzD,YAAY,CAAC,aAAalQ,2BAAAA,IAAC,YAAU,SAAS,CAAA;AAAA,EAChD;AAAA,EACA,QAAQ;AAAA,IACN,MAAMmQ,MAAA;AAAA,IACN,iBAAiB,CAAC,UAAU,MAAM,QAAQ;AAAA,IAC1C,OAAO,EAAE,IAAI,sCAAsC,gBAAgB,SAAS;AAAA,IAC5E,eAAe,CAAC,WAAW,kBAAkB,QAAQ,QAAQ;AAAA,IAC7D,cAAc,CAAC,WAAW,iBAAiB,QAAQ,QAAQ;AAAA,IAC3D,YAAY,CAAC,aAAanQ,2BAAAA,IAAC,cAAY,SAAS,CAAA;AAAA,EAClD;AAAA,EACA,WAAW;AAAA,IACT,MAAMoQ,MAAA;AAAA,IACN,iBAAiB,CAAC,UAAU,MAAM,QAAQ;AAAA,IAC1C,OAAO,EAAE,IAAI,yCAAyC,gBAAgB,YAAY;AAAA,IAClF,eAAe,CAAC,WAAW,kBAAkB,QAAQ,WAAW;AAAA,IAChE,cAAc,CAAC,WAAW,iBAAiB,QAAQ,WAAW;AAAA,IAC9D,YAAY,CAAC,aAAapQ,2BAAAA,IAAC,iBAAe,SAAS,CAAA;AAAA,EACrD;AAAA,EACA,eAAe;AAAA,IACb,MAAMqQ,MAAA;AAAA,IACN,iBAAiB,CAAC,UAAU,MAAM,QAAQ,OAAO,MAAM;AAAA,IACvD,OAAO,EAAE,IAAI,6CAA6C,gBAAgB,gBAAgB;AAAA,IAC1F,eAAe,CAAC,WAAW,kBAAkB,QAAQ,eAAe;AAAA,IACpE,cAAc,CAAC,WAAW,iBAAiB,QAAQ,eAAe;AAAA,IAClE,YAAY,CAAC,aAAarQ,2BAAAA,IAAC,qBAAmB,SAAS,CAAA;AAAA,EACzD;AAAA,EACA,MAAM;AAAA,IACJ,MAAMqO,MAAA;AAAA,IACN,iBAAiB,CAAC,UAAU,MAAM,QAAQ;AAAA,IAC1C,OAAO,EAAE,IAAI,oCAAoC,gBAAgB,cAAc;AAAA,IAC/E,eAAe,CAAC,WAAW,kBAAkB,QAAQ,MAAM;AAAA,IAC3D,cAAc,CAAC,WAAW,iBAAiB,QAAQ,MAAM;AAAA,IACzD,YAAY,CAAC,aAAarO,2BAAAA,IAAC,cAAY,SAAS,CAAA;AAAA,EAClD;AACF;ACpHA,MAAM,aAAa,CAAC,WAAmB;AAC/B,QAAA,EAAE,OAAW,IAAA;AAEZ,SAAA,SAAS,CAAC,YAAY;AAC3B,WAAO,QAAQ,SAAS,UAAU,OAAO,OAAO,OAAO;AAAA,EAAA;AAGlD,SAAA;AACT;ACRA,MAAM,YAAY,CAAC,WAAmB;AACpC,QAAM,EAAE,UAAU,OAAO,YAAAsQ,aAAY,eAAe;AAG7C,SAAA,WAAW,CAAC,YAAY;AAC7B,WAAO,QAAQ,SAAS,SAAS,OAAO,SAAS,OAAO;AAAA,EAAA;AAK1D,SAAO,uBAAuB;AAGvB,SAAA,QAAQ,CAAC,cAAc;AACxB,QAAA,UAAU,SAAS,eAAe;AAChC,UAAA,CAACrC,MAAAA,OAAO,SAAS,UAAU,IAAI,KAAK,UAAU,KAAK,SAAS,QAAQ;AACtE,eAAO,uBAAuB,UAAU;AAAA,MAC1C;AAAA,IAAA,WACS,UAAU,SAAS,aAAa;AAGzC,UAAIoB,MAAAA,KAAK,YAAY,UAAU,IAAI,KAAK,OAAO,sBAAsB;AACnE,eAAO,uBAAuBA,WAAK,UAAU,OAAO,sBAAsB,SAAS;AAAA,MACrF;AAAA,IACF;AAEA,UAAM,SAAS;AAAA,EAAA;AAGV,SAAA,aAAa,CAAC,SAAS;AAExB,QAAA,OAAO,aAAaH,YAAM,YAAY,OAAO,SAAS,KAAK,SAAS,KAAK;AAC3E,YAAM,mBAAmB,MAAM;AAAA,QAC7BjB,MAAA,OAAO,MAAM,QAAQ;AAAA,UACnB,IAAI,OAAO;AAAA,UACX,OAAO,CAAC,SAAS,CAACA,aAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AAAA,QAAA,CAC1D;AAAA,MAAA;AAGH,YAAM,oBAAoB,OAAO,aAAa,iBAAiB,SAAS;AACxE,YAAM,yBACJ,qBACAsC,MAAAA,MAAM,OAAO,OAAO,UAAU,QAAQtC,MAAO,OAAA,IAAI,QAAQ,iBAAiB,CAAC,EAAE,CAAC,CAAC,CAAC;AAElF,UAAI,wBAAwB;AACfD,cAAAA,WAAA;AAAA,UACT;AAAA,UACA,EAAE,MAAM,KAAK,MAAM,OAAO;AAAA,UAC1B,EAAE,IAAIqB,WAAK,KAAK,iBAAiB,CAAC,EAAE,CAAC,CAAC,GAAG,QAAQ,KAAK;AAAA,QAAA;AAGxD;AAAA,MACF;AAAA,IACF;AAEA,IAAAiB,YAAW,IAAI;AAAA,EAAA;AAIV,SAAA,aAAa,CAAC,SAAS;AACtB,UAAA,aAAa,KAAK,QAAQ,YAAY;AAE5C,QAAI,YAAY;AACV,UAAA;AAEF,YAAI,IAAI,UAAU;AAClB,mBAAW,QAAQ,EAAE,KAAK,WAAY,CAAA;AAEtC;AAAA,eACO,OAAO;AAAA,MAEhB;AAAA,IACF;AAEA,eAAW,IAAI;AAAA,EAAA;AAGV,SAAA;AACT;ACpFA,MAAM,SAAS,CAAC,SAAgC;AACvC,SAAAnC,WAAK,OAAO,IAAI,KAAK,CAACF,MAAAA,OAAO,SAAS,IAAI,KAAK,KAAK,SAAS;AACtE;AAKA,MAAM,mBAAmB,CAAC,WAAmB;AACrC,QAAA,EAAE,cAAkB,IAAA;AAOnB,SAAA,gBAAgB,CAAC,UAAU;AAC1B,UAAA,CAAC,MAAM,IAAI,IAAI;AAEjB,QAAA,CAACuC,cAAQ,UAAU,IAAI,KAAK,CAAC,OAAO,IAAI,GAAG;AAClCxC,uBAAA,SAAS,QAAQ,EAAE,MAAM,UAAU,EAAE,IAAI,KAAA,CAAM;AAE1D;AAAA,IACF;AAEA,kBAAc,KAAK;AAAA,EAAA;AAGd,SAAA;AACT;ACoBA,MAAM,oBAAoB;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAIA,MAAM,qBAAqB,CAAC,QAA0C;AACpE,SAAO,OAAO,QAAQ,YAAY,kBAAkB,SAAS,GAAuB;AACtF;AAcA,MAAM,CAAC,sBAAsB,6BAA6B,IACxD9N,2BAAwC,cAAc;AAExD,SAAS,uBACP,cAC+C;AACzC,QAAA,UAAU,8BAA8B,YAAY;AAC1D,QAAM,SAASuQ,WAAAA;AAER,SAAA;AAAA,IACL,GAAG;AAAA,IACH;AAAA,EAAA;AAEJ;AAMA,MAAM,gBAAgB/O,gBAAAA,QAAO4K,aAAAA,OAAO;AAAA,gBACpB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAWtD,SAAS,YAAY,OAGnB;AAEM,QAAA,oBAAoBxL,iBAAM,OAAO,CAAC;AAElC,QAAA,oBAAoBA,iBAAM,OAAO,CAAC;AAExC,QAAM,CAAC,KAAK,MAAM,IAAIA,iBAAM,SAAS,CAAC;AAEtCA,mBAAM,UAAU,MAAM;AACpB,sBAAkB,WAAW;AAGzB,QAAA,kBAAkB,YAAY,kBAAkB,SAAS;AAGpD,aAAA,CAAC,gBAAgB,cAAc,CAAC;AAGvC,wBAAkB,UAAU,kBAAkB;AAAA,IAChD;AAAA,EAAA,GACC,CAAC,KAAK,CAAC;AAEV,SAAO,EAAE,KAAK,4BAA4B,MAAO,kBAAkB,WAAW;AAChF;AAEA,MAAM,OACJ,IAAI,QACJ,CAAC,UACC,IAAI,OAAe,CAAC,MAAM,OAAO,GAAG,IAAI,GAAG,KAAK;AAapD,MAAM,eAAeA,iBAAM;AAAA,EACzB,CAAC,EAAE,WAAW,OAAO,MAAM,aAAa,UAAU,OAAO,MAAM,GAAG,iBAAiB;AAC3E,UAAA,EAAE,kBAAkBV,UAAAA;AAEpB,UAAA,CAAC,MAAM,IAAIU,iBAAM;AAAA,MAAS,MAC9B,KAAK4P,aAAa,aAAA,YAAY,kBAAkBC,WAAAA,WAAW,SAAS,EAAEC,MAAAA,cAAc;AAAA,IAAA;AAEhF,UAAA,uBACJ,eACA,cAAc,EAAE,IAAI,YAAY,IAAI,gBAAgB,YAAY,eAAgB,CAAA;AAO5E9P,qBAAA;AAAA,MACJ;AAAA,MACA,OAAO;AAAA,QACL,QAAQ;AACNsO,iCAAY,MAAM,MAAM;AAAA,QAC1B;AAAA,MAAA;AAAA,MAEF,CAAC,MAAM;AAAA,IAAA;AAGT,UAAM,EAAE,KAAK,2BAA2B,IAAI,YAAY,KAAK;AAEvD,UAAA,oBAAoB,CAAC,UAAwB;AAC3C,YAAA,cAAc,OAAO,WAAW,KAAK,CAAC,OAAO,GAAG,SAAS,eAAe;AAE9E,UAAI,aAAa;AACY;AAElB,iBAAA;AAAA;AAAA;AAAA,UAGP,QAAQ,EAAE,MAAM,OAAO,OAAgC,MAAM,SAAS;AAAA,QAAA,CACvE;AAAA,MACH;AAAA,IAAA;AAGF,UAAM,SAAsB;AAAA,MAC1B,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,IAAA;AAIH,WAAApP,2BAAA;AAAA,MAAC6Q,WAAA;AAAA,MAAA;AAAA,QACC;AAAA,QACA,cAAc,SAAS,CAAC,EAAE,MAAM,aAAa,UAAU,CAAC,EAAE,MAAM,QAAQ,MAAM,GAAG,CAAC,GAAG;AAAA,QACrF,UAAU;AAAA,QAGV,UAAC7Q,2BAAA,IAAA,sBAAA,EAAqB,QAAgB,WAAsB,UAC1D,UAAAC,2BAAA;AAAA,UAAC6Q,aAAA;AAAA,UAAA;AAAA,YACC,WAAU;AAAA,YACV,YAAW;AAAA,YACX,QAAO;AAAA,YACP;AAAA,YACA,UAAU,QAAQ,KAAK;AAAA,YACvB,OAAO,EAAE,UAAU,SAAS;AAAA,YAE5B,UAAA;AAAA,cAAA9Q,2BAAA,IAAC,eAAc,EAAA;AAAA,cACfA,2BAAAA,IAAC,eAAc,EAAA,OAAM,OAAO,CAAA;AAAA,cAC5BA,2BAAAA,IAAC,eAAc,EAAA,aAAa,qBAAsB,CAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA,GAEtD;AAAA,MAAA;AAAA,MAfK;AAAA,IAAA;AAAA,EAkBX;AACF;AChOA,MAAM+Q,gBAAcrP,gBAAAA,QAAOE,aAAAA,GAAG;AAAA;AAAA,YAElB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAclD,MAAM,cAAcd,iBAAM;AAAA,EACxB,CACE,EAAE,WAAW,aAAa,MAAM,WAAW,OAAO,QAAQ,IAAI,MAAM,GAAG,YAAA,GACvE,iBACG;AACG,UAAA,EAAE,kBAAkBV,UAAAA;AAE1B,UAAM,QAAQ,UAAU,KAAK,cAAc,SAAS,IAAI;AAExD,WAEIH,2BAAA,KAAA0L,qBAAA,EAAA,UAAA;AAAA,MAAA1L,gCAAC4B,aAAAA,QAAK,WAAU,UAAS,YAAW,WAAU,KAAK,GACjD,UAAA;AAAA,QAAC5B,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,KAAK,GACT,UAAA;AAAA,UAAA5B,gCAACsC,aAAAA,cAAW,SAAQ,MAAK,YAAW,QAAO,WAAU,cAClD,UAAA;AAAA,YAAA;AAAA,YACA,YACEvC,2BAAAA,IAAAuC,aAAA,YAAA,EAAW,WAAU,aAAY,YAAW,OAAM,UAEnD,KAAA;AAAA,UAAA,GAEJ;AAAA,UACC,eAAevC,2BAAA,IAAC+Q,eAAY,EAAA,aAAa,GAAI,UAAY,aAAA;AAAA,QAAA,GAC5D;AAAA,uCACC,cAAa,EAAA,MAAY,OAAc,KAAK,cAAe,GAAG,aAAa;AAAA,QAC3E/Q,2BAAAA,IAAA,MAAA,EAAK,MAAY,MAAY,MAAc,CAAA;AAAA,MAAA,GAC9C;AAAA,MACC,SACCA,2BAAAA,IAAC4B,aAAAA,KAAI,EAAA,YAAY,GACf,UAAC5B,2BAAA,IAAAuC,yBAAA,EAAW,SAAQ,MAAK,WAAU,aAAY,2BAAuB,MACnE,gBACH,CAAA,GACF;AAAA,IAEJ,EAAA,CAAA;AAAA,EAEJ;AACF;AC5DgB,SAAA,YAAoB,OAAe,OAAuB;AACxE,QAAM,CAAC,gBAAgB,iBAAiB,IAAIzB,iBAAM,SAAS,KAAK;AAEhEA,mBAAM,UAAU,MAAM;AACd,UAAA,UAAU,WAAW,MAAM;AAC/B,wBAAkB,KAAK;AAAA,OACtB,KAAK;AAER,WAAO,MAAM;AACX,mBAAa,OAAO;AAAA,IAAA;AAAA,EACtB,GACC,CAAC,OAAO,KAAK,CAAC;AAEV,SAAA;AACT;ACQA,MAAM,YAAY;AAYlB,MAAM,WAAWA,iBAAM;AAAA,EAOrB,CACE;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,QAAQ;AAAA,IACR;AAAA,IACA;AAAA,KAEF,iBACG;AACH,UAAM,CAAC,cAAc,eAAe,IAClCA,iBAAM,SAAsD;AAC9D,UAAM,CAAC,gBAAgB,iBAAiB,IAAIA,iBAAM,SAAS,KAAK;AAC1D,UAAA,iBAAiB,YAAY,OAAO,GAAG;AAC7C,UAAM,EAAE,cAAc,YAAY,IAAI+H,aAAyB,yBAAA;AAC/D,UAAM,qBAAqBtI,aAAAA;AACrB,UAAA,EAAE,mBAAmBC,aAAAA;AACrB,UAAA,EAAE,kBAAkBJ,UAAAA;AACpB,UAAA,EAAE,SAASE,aAAAA;AAEX,UAAA,QAAQ,UAAU,KACpB;AAAA,MACE,EAAE,IAAI,UAAU,IAAI,gBAAgB,UAAU,eAAe;AAAA,MAC7D,EAAE,GAAG,UAAU,OAAO;AAAA,IAExB,IAAA;AAEJ,UAAM,uBAAuB,cACzB;AAAA,MACE,EAAE,IAAI,YAAY,IAAI,gBAAgB,YAAY,eAAe;AAAA,MACjE,EAAE,GAAG,YAAY,OAAO;AAAA,IAE1B,IAAA;AAEJ,UAAM,EAAE,MAAM,qBAAqB,WAAW,uBAAA,IAA2BG,WAAAA,SAAS;AAAA,MAChF,UAAU,CAAC,OAAO,EAAE,gBAAgB,OAAO,MAAM,MAAM,cAAc;AAAA,MACrE,MAAM,QAAQ,EAAE,YAAY;AACpB,cAAA,CAAG,EAAA,IAAI,IAAI;AAEX,cAAA;AAAA,UACJ,MAAM,EAAE,KAAK;AAAA,QACX,IAAA,MAAM,KAKR,iCAAiC,IAAI;AAEhC,eAAA;AAAA,MACT;AAAA,MACA,QAAQ,KAAK;AACX,YAAI,eAAe+M,MAAAA,YAAY;AACV,6BAAA;AAAA,YACjB,MAAM;AAAA,YACN,SAAS,eAAe,GAAG;AAAA,UAAA,CAC5B;AAAA,QACH;AAAA,MACF;AAAA,MACA,SAAS,CAAC,SAAS;AAAA,IAAA,CACpB;AAMD1M,qBAAM,UAAU,MAAM;AACpB,UAAI,qBAAqB;AACd,iBAAA,EAAE,QAAQ,EAAE,MAAM,OAAO,qBAAqB,MAAM,OAAA,KAAY,IAAI;AAAA,MAC/E;AAAA,IACC,GAAA,CAAC,qBAAqB,MAAM,QAAQ,CAAC;AAExC,UAAM,EAAE,QAAQ,aAAa,WAAW,gBAAA,IAAoBD,WAAAA,YAI1D;AAAA,MACA,MAAM,WAAW,MAAM;AACf,cAAA;AAAA,UACJ,MAAM,EAAE,KAAK;AAAA,QACX,IAAA,MAAM,KAIR,iCAAiC,IAAI;AAEhC,eAAA;AAAA,MACT;AAAA,MACA,UAAU,MAAM;AACL,iBAAA,EAAE,QAAQ,EAAE,MAAM,OAAO,MAAM,MAAM,OAAO,EAAA,CAAG;AAAA,MAC1D;AAAA,MACA,QAAQ,KAAK;AACX,YAAI,eAAe2M,MAAAA,YAAY;AACV,6BAAA;AAAA,YACjB,MAAM;AAAA,YACN,SAAS,eAAe,GAAG;AAAA,UAAA,CAC5B;AAAA,QACH;AAAA,MACF;AAAA,IAAA,CACD;AAED,UAAM,EAAE,MAAM,kBAAkB,WAAW,uBAAA,IAA2B/M,WAAAA,SAAS;AAAA,MAC7E,UAAU;AAAA,QACR;AAAA,QACA,EAAE,gBAAgB,OAAO,MAAM,OAAO,iBAAiB,eAAe,KAAK,IAAI,GAAG;AAAA,MACpF;AAAA,MACA,MAAM,QAAQ,EAAE,YAAY;AACpB,cAAA,CAAG,EAAA,IAAI,IAAI;AAEjB,cAAM,EAAE,KAAK,IAAI,MAAM,KAIrB,2CAA2C,IAAI;AAE1C,eAAA;AAAA,MACT;AAAA,MACA,SAAS;AAAA,QACP,mBAAmB,YAAY,IAAI,KACjC,kBACA,UAAU,KAAK,eAAe,MAAM;AAAA,MACxC;AAAA,MACA,QAAQ,KAAK;AACX,YAAI,eAAe+M,MAAAA,YAAY;AACV,6BAAA;AAAA,YACjB,MAAM;AAAA,YACN,SAAS,eAAe,GAAG;AAAA,UAAA,CAC5B;AAAA,QACH;AAAA,MACF;AAAA,IAAA,CACD;AAED1M,qBAAM,UAAU,MAAM;AAKpB,sBAAgB,gBAAgB;AAE5B,UAAA;AAEJ,UAAI,kBAAkB,aAAa;AACzB,gBAAA,OAAO,WAAW,MAAM;AAC9B,0BAAgB,MAAS;AAAA,WACxB,GAAI;AAAA,MACT;AAEA,aAAO,MAAM;AACX,YAAI,OAAO;AACT,uBAAa,KAAK;AAAA,QACpB;AAAA,MAAA;AAAA,IACF,GACC,CAAC,gBAAgB,CAAC;AAEf,UAAA,YAAY,0BAA0B,mBAAmB;AAG7D,WAAAd,2BAAA;AAAA,MAAC0C,aAAA;AAAA,MAAA;AAAA,QACC,KAAK;AAAA,QACL;AAAA,QACA;AAAA,QACA,WACGzC,2BAAAA,KAAA4B,aAAAA,MAAA,EAAK,UAAS,YAAW,KAAK,GAC5B,UAAA;AAAA,UAAA,gBAAgB,CAAC,kBAChB5B,2BAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,YAAW;AAAA,cACX,KAAK;AAAA,cACL,gBAAe;AAAA,cACf,WAAW,CAAC,CAAC,cAAc;AAAA,cAC3B,uBAAmB;AAAA,cACnB,UAAS;AAAA,cACT,eAAc;AAAA,cACd,OAAO;AAAA,cACP,OAAM;AAAA,cAEL,UAAA;AAAA,gBAAA,cAAc,cAAcD,2BAAAA,IAACgR,MAAY,aAAA,CAAA,CAAA,mCAAMC,MAAsB,uBAAA,EAAA;AAAA,gBAEtEjR,2BAAA;AAAA,kBAACuC,aAAA;AAAA,kBAAA;AAAA,oBACC,WAAW,aAAa,cAAc,eAAe;AAAA,oBACrD,SAAQ;AAAA,oBAEP,UAAA;AAAA,sBACC,aAAa,cACT;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAAA,IAElB;AAAA,wBACE,IAAI;AAAA,wBACJ,gBAAgB;AAAA,sBAClB;AAAA,oBACN;AAAA,kBAAA;AAAA,gBACF;AAAA,cAAA;AAAA,YAAA;AAAA,UACF;AAAA,UAGD,CAAC,YAEGtC,2BAAAA,KAAA0L,WAAA,UAAA,EAAA,UAAA;AAAA,YAAA,kBACE3L,2BAAAA,IAAA,gBAAA,EAAe,YAAW,UAAS,gBAAe,YAAW,KAAK,GACjE,UAAAA,2BAAA,IAACuC,aAAW,YAAA,EAAA,WAAU,cAAa,SAAQ,MACxC,UAAc,cAAA;AAAA,cACb,IAAI;AAAA,cACJ,gBAAgB;AAAA,YAAA,CACjB,GACH,EACF,CAAA;AAAA,YAGFvC,2BAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBAEC,SAAS,MAAM,YAAY,EAAE,gBAAgB,OAAO,MAAM,MAAM,cAAc;AAAA,gBAC9E,OAAO,cAAc;AAAA,kBACnB,IAAI;AAAA,kBACJ,gBAAgB;AAAA,gBAAA,CACjB;AAAA,gBACD,cAAc,MAAM,kBAAkB,IAAI;AAAA,gBAC1C,cAAc,MAAM,kBAAkB,KAAK;AAAA,gBAE1C,UAAA,YACEA,2BAAA,IAAA,gBAAA,EAAe,eAAY,mBAC1B,yCAACkR,MAAAA,QAAO,CAAA,CAAA,EAAA,CACV,IAEAlR,2BAAA,IAACkI,MAAQ,SAAA,EAAA;AAAA,cAAA;AAAA,YAEb;AAAA,UAAA,GACF;AAAA,QAAA,GAEJ;AAAA,QAEF;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa;AAAA,QACb;AAAA,QACA;AAAA,MAAA;AAAA,IAAA;AAAA,EAGN;AACF;AAMA,MAAM,qBAAqBxG,gBAAAA,QAAOO,aAAAA,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,cAK/B,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMtC,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AASpD,MAAM,iBAAiBP,gBAAAA,QAAOG,aAAAA,IAAI;AAAA;AAAA,cAEpB,KAAK,EAAE;AAAA,aACR,KAAK,EAAE;AAAA;AAAA;AAAA,cAGN,CAAC,EAAE,OAAO,UAAU,MAC1B,YAAY,MAAM,OAAO,aAAa,MAAM,OAAO,SAAS;AAAA;AAAA;AAAA;AASpE,MAAM,WAAWsP,OAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AASjB,MAAM,iBAAiBzP,gBAAAA,QAAOG,aAAAA,IAAI;AAAA,eACnB,QAAQ;AAAA;ACpUvB,MAAM,UAAU,YAAY;AAE1B,QAAM,OAAO,6CAAwC;AACvD;AAEA;AAEA,MAAM,KAAe,IAAIuP,kBAAAA,QAAS;AAAA,EAChC,MAAM;AAAA;AAAA,EACN,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,aAAa;AAAA;AAAA,EAEb,UAAU,KAAK,MAAM;AACnB,QAAI,QAAQ,SAAS,UAAUC,aAAA,YAAY,IAAI,GAAG;AAChD,aACE,+BACA,GAAG,MAAM,WAAW,KAAK,YAAa,CAAA,IACtC,aACAC,aAAAA,UAAU,MAAM,KAAK,IAAI,EAAE,QAC3B;AAAA,IAEJ;AAEA,QAAI,SAAS,QAAQ;AACb,YAAA,SAASC,2BAAc,GAAG;AAG9B,aAAA,+BACA,GAAG,MAAM,WAAW,OAAO,QAAS,IACpC,aACA,OAAO,QACP;AAAA,IAEJ;AAEA,WAAO,6BAA6B,GAAG,MAAM,WAAW,GAAG,IAAI;AAAA,EACjE;AACF,CAAC,EACE,IAAIC,cAAAA,OAAI,EACR,IAAIC,mBAAAA,SAAW,SAAS,EACxB,IAAIA,mBAAAA,SAAW,KAAK,EACpB,IAAIC,iBAAO,OAAA,EACX,IAAIC,eAAK,OAAA,EACT,IAAIC,kBAAAA,OAAQ,EACZ,IAAIC,aAAG,OAAA,EACP,IAAIC,cAAI,OAAA,EACR,IAAIC,aAAAA,OAAG,EACP,IAAIC,aAAG,OAAA;AAGV,GAAG,SAAS,MAAM,eAAe,CAAC,QAAQ,KAAKxL,UAAS,KAAK,QAAQ;AAC7D,QAAA,UAAU,IAAI,MAAM,mBAAmB,QAAQ,KAAKA,UAAS,KAAK,GAAG;AAE3E,SAAO,qCAAqC,UAAU;AACxD;AAEA,GAAG,SAAS,MAAM,kBAAkB,MAAM;AAEjC,SAAA;AACT;ACrEA,MAAM,iBAAiB,CAAC,EAAE,OAAO,SAA8B;AAC7D,QAAM,OAAO1F,iBAAM;AAAA,IACjB,MACEmR,sBAAa,QAAA,GAAG,OAAO,KAAK,WAAW,OAAO,IAAI,KAAK,EAAE,GAAG;AAAA,MAC1D,GAAGA,sBAAa,QAAA;AAAA,MAChB,aAAa;AAAA,MACb,mBAAmB;AAAA,QACjB,KAAK,CAAC,QAAQ,SAAS,OAAO,UAAU,SAAS,UAAU,QAAQ,YAAY,QAAQ;AAAA,QACvF,KAAK,CAAC,OAAO,KAAK;AAAA,QAClB,QAAQ,CAAC,OAAO,MAAM;AAAA,MACxB;AAAA,IAAA,CACD;AAAA,IACH,CAAC,IAAI;AAAA,EAAA;AAIL,SAAAjS,2BAAA,IAAC2B,aACC,UAAC3B,2BAAA,IAAA,OAAA,EAAI,yBAAyB,EAAE,QAAQ,OAAQ,CAAA,EAClD,CAAA;AAEJ;AAEA,MAAM2B,YAAUD,gBAAO,QAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAMV,CAAC,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,CAAC,IAAI,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA,eACpD,KAAK,EAAE;AAAA,sBACA,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,QAAQ;AAAA,WAC/C,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA,iBAChC,CAAC,EAAE,YAAY,MAAM,YAAY,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAQ1B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,wBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,qBAIjC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,iBAIlC,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKP,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKP,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKP,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAaN,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,qBAC3B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,iBAClC,KAAK,EAAE;AAAA;AAAA,6BAEK,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA,eAEpD,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAS3D,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA,mBAGvC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,0BAIvB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA,iBAI/C,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,0BACrB,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQ/C,KAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAWT,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAcnB,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,wBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA,4BAG1B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAWhC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA,wBAChC,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA,4BAG1B,CAAC,EAAE,YAAY,MAAM,OAAO,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AClK1D,IAAI,SAAS,4DACX,cAAc,uDACd,kBAAkB;AAWpB,SAAS,qCAAqC,IAAuB;AAE/D,MAAA,GAAG,UAAU,cAAc;AAAG,WAAOwQ,oBAAAA,QAAW;AACpD,MAAI,SAAS,GAAG,eAAe,GAC7B,eAAe,CAAA;AACjB,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AAClC,QAAA,MAAM,OAAO,CAAC,EAAE;AAEpB,QAAI,WAAW,GAAG,cAAc,IAAI,IAAI;AACpC,QAAA,SAAS,SAAS,SAAS;AAC3B,QAAA,UAAU,SAAS,UAAU;AAE7B,QAAA,OAAO,GAAG,QAAQ,IAAI,IAAI,GAC5B,QAAQ,OAAO,KAAK,IAAI;AACtB,QAAA,qBAAqB,QAAQ,KAAK,KAAK,MAAM,GAAG,IAAI,EAAE,CAAC;AAC3D,QAAI,CAAC,OAAO,CAAC,EAAE,MAAM,KAAM,CAAC,UAAU,CAAC,WAAY,CAAC,SAAS,oBAAoB;AAC/E,SAAG,YAAY,kBAAkB;AACjC;AAAA,IACF;AACI,QAAA,YAAY,KAAK,IAAI,GAAG;AAC1B,UAAI,aAAa,WAAW,QAAQ,KAAK,IAAI;AAC7C,UAAI,YAAY,CAAC,QAAQ,KAAK,IAAI;AAClC,UAAI,cAAc;AACb,WAAA;AAAA,UACD;AAAA,UACA;AAAA,YACE,MAAM,IAAI;AAAA,YACV,IAAI;AAAA,UACN;AAAA,UACA;AAAA,YACE,MAAM,IAAI;AAAA,YACV,IAAI,IAAI,KAAK;AAAA,UACf;AAAA,QAAA;AAEJ,mBAAa,CAAC,IAAI;AAAA,IAAA,OACb;AACL,UAAI,SAAS,MAAM,CAAC,GAClB,QAAQ,MAAM,CAAC;AACjB,UAAI,WAAW,EAAE,gBAAgB,KAAK,MAAM,CAAC,CAAC,KAAK,MAAM,CAAC,EAAE,QAAQ,GAAG,KAAK;AAC5E,UAAI,SAAS,WAAW,SAAS,MAAM,CAAC,GAAG,EAAE,IAAI,IAAI,MAAM,CAAC,IAAI,MAAM,CAAC,EAAE,QAAQ,KAAK,GAAG;AACzF,mBAAa,CAAC,IAAI,OAAO,SAAS,SAAS;AAEvC,UAAA;AAAU,8CAAsC,IAAI,GAAG;AAAA,IAC7D;AAAA,EACF;AAEA,KAAG,kBAAkB,YAAY;AACnC;AAEA,SAAS,sCAAsC,IAAuB,KAA0B;AAC9F,MAAI,YAAY,IAAI,MAClB,YAAY,GACZ,YAAY;AACV,MAAA,YAAY,OAAO,KAAK,GAAG,QAAQ,SAAS,CAAC,GAC/C,cAAc,UAAW,CAAC;AAEzB,KAAA;AACY,iBAAA;AACb,QAAI,iBAAiB,YAAY;AAC7B,QAAA,WAAW,GAAG,QAAQ,cAAc;AACpC,QAAA,WAAW,OAAO,KAAK,QAAQ;AAEnC,QAAI,UAAU;AACR,UAAA,aAAa,SAAS,CAAC;AAC3B,UAAI,YAAY,SAAS,UAAW,CAAC,GAAG,EAAE,IAAI,YAAY;AAC1D,UAAI,aAAa,SAAS,SAAS,CAAC,GAAG,EAAE,GACvC,aAAa;AAEf,UAAI,gBAAgB,cAAc,CAAC,MAAM,UAAU,GAAG;AACpD,YAAI,cAAc;AAAY,uBAAa,aAAa;AACxD,YAAI,YAAY;AAAY,uBAAa,YAAY;AAClD,WAAA;AAAA,UACD,SAAS,QAAQ,QAAQ,aAAa,aAAa,SAAS,CAAC,IAAI,SAAS,CAAC,CAAC;AAAA,UAC5E;AAAA,YACE,MAAM;AAAA,YACN,IAAI;AAAA,UACN;AAAA,UACA;AAAA,YACE,MAAM;AAAA,YACN,IAAI,SAAS;AAAA,UACf;AAAA,QAAA;AAAA,MACF,OACK;AACD,YAAA,YAAY,SAAS,WAAW;AAAQ;AAG5C,YAAI,YAAY,SAAS,WAAW,UAAU,cAAc;AAAG;AAClD,qBAAA;AAAA,MACf;AAAA,IACF;AAAA,EACO,SAAA;AACX;ACjFA,MAAM,SAASpR,iBAAM;AAAA,EACnB,CACE;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,KAEF,iBACG;AACG,UAAA,cAAcA,iBAAM,OAAO,QAAQ;AAEzCA,qBAAM,UAAU,MAAM;AACpB,gBAAU,UAAUoR,oBAAAA,QAAW,aAAa,YAAY,SAAU;AAAA,QAChE,cAAc;AAAA,QACd,WAAW;AAAA,UACT,OAAO;AAAA,UACP,KAAK;AAAA,UACL,aAAa;AAAA,QACf;AAAA,QACA,UAAU;AAAA,QACV,aAAa;AAAA,QACb;AAAA,QACA,YAAY;AAAA,QACZ,YAAY;AAAA,MAAA,CACb;AAGDA,kCAAW,SAAS,uCAClB;AACF,gBAAU,QAAQ,GAAG,UAAU,CAAC,QAAQ;AACtC,oBAAY,QAAQ,EAAE,QAAQ,EAAE,MAAM,OAAO,IAAI,SAAA,GAAY,MAAM,UAAU,EAAG,CAAA;AAAA,MAAA,CACjF;AAAA,OACA,CAAC,WAAW,aAAa,MAAM,WAAW,CAAC;AAE9CpR,qBAAM,UAAU,MAAM;AACpB,UAAI,SAAS,CAAC,UAAU,QAAQ,YAAY;AAChC,kBAAA,QAAQ,SAAS,KAAK;AAAA,MAClC;AAAA,IAAA,GACC,CAAC,WAAW,KAAK,CAAC;AAErBA,qBAAM,UAAU,MAAM;AACpB,UAAI,iBAAiB,UAAU;AACnB,kBAAA,QAAQ,UAAU,YAAY,UAAU;AAAA,MAAA,OAC7C;AACK,kBAAA,QAAQ,UAAU,YAAY,KAAK;AAAA,MAC/C;AAAA,IACC,GAAA,CAAC,UAAU,eAAe,SAAS,CAAC;AAEvCA,qBAAM,UAAU,MAAM;AACpB,UAAI,OAAO;AACC,kBAAA,QAAQ,UAAU,qBAAqB,KAAK;AAAA,MAAA,OACjD;AAEK,kBAAA,QAAQ,UAAU,qBAAqB,QAAQ;AAAA,MAC3D;AAAA,IAAA,GACC,CAAC,WAAW,KAAK,CAAC;AAEfA,qBAAA;AAAA,MACJ;AAAA,MACA,OAAO;AAAA,QACL,QAAQ;AACI,oBAAA,QAAQ,cAAc,EAAE,MAAM;AAAA,QAC1C;AAAA,QACA,eAAe,MAAqD;AAClE,oBAAU,QAAQ,cAAgB,EAAA,eAAe,IAAI;AAAA,QACvD;AAAA,MAAA;AAAA,MAEF,CAAC,SAAS;AAAA,IAAA;AAGZ,2CACG,yBACC,EAAA,UAAA;AAAA,MAACd,2BAAAA,IAAA,uBAAA,EAAsB,cAA4B,UAAU,YAAY,eACvE,UAACA,2BAAAA,IAAA,YAAA,EAAS,KAAK,YAAA,CAAa,EAC9B,CAAA;AAAA,MACC,iBAAiBA,2BAAAA,IAAC,gBAAe,EAAA,MAAM,MAAO,CAAA;AAAA,IACjD,EAAA,CAAA;AAAA,EAEJ;AACF;AAEA,MAAM,0BAA0B0B,gBAAO,QAAA;AAAA;AAAA;AAAA;AAKvC,MAAM,wBAAwBA,gBAAO,QAAA;AAAA,YACzB,CAAC,EAAE,SAAA,MAAgB,WAAW,2BAA2B,MAAO;AAAA;AAAA;AAAA;AAAA,aAI/D,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKlC,KAAK,EAAE;AAAA,cACV,CAAC,EAAE,aAAA,MACX,eACI,SACA,OAAO;AAAA,aACJ,CAAC,EAAE,MAAA,MAAY,MAAM,OAAO,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eASpC,CAAC,EAAE,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,CAAC,IAAI,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAO7C,CAAC,EAAE,YAAY,GAAG,MAAM,OAAO,QAAQ,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAiI/C,CAAC,EAAE,YAAY,GAAG,MAAM,OAAO,QAAQ,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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"}